(self.webpackChunkpencil_spaces_chess=self.webpackChunkpencil_spaces_chess||[]).push([[792],{4783:(ut,Oe,V)=>{"use strict";V.d(Oe,{BM:()=>Be,Gt:()=>_e,bf:()=>qe,e7:()=>Ee,iB:()=>G,rx:()=>Ge,uP:()=>Ae});var h=V(7705),N=V(762),H=V(3531);ut=V.hmd(ut);const he=["ngOnDestroy"],_e=(Qe,_t,vt,de={})=>new Proxy(Qe,{get:(Me,ue)=>vt.runOutsideAngular(()=>{var xe;if(Qe[ue])return!(null===(xe=de?.spy)||void 0===xe)&&xe.get&&de.spy.get(ue,Qe[ue]),Qe[ue];if(he.indexOf(ue)>-1)return()=>{};const ze=_t.toPromise().then(it=>{const Ce=it&&it[ue];return"function"==typeof Ce?Ce.bind(it):Ce&&Ce.then?Ce.then(Tt=>vt.run(()=>Tt)):vt.run(()=>Ce)});return new Proxy(()=>{},{get:(it,Ce)=>ze[Ce],apply:(it,Ce,Tt)=>ze.then(sn=>{var Lr;const Mi=sn&&sn(...Tt);return!(null===(Lr=de?.spy)||void 0===Lr)&&Lr.apply&&de.spy.apply(ue,Tt,Mi),Mi})})})}),Ee=(Qe,_t)=>{_t.forEach(vt=>{Object.getOwnPropertyNames(vt.prototype||vt).forEach(de=>{Object.defineProperty(Qe.prototype,de,Object.getOwnPropertyDescriptor(vt.prototype||vt,de))})})};class Se{constructor(_t){return _t}}const Ge=new h.nKC("angularfire2.app.options"),Ae=new h.nKC("angularfire2.app.name");function G(Qe,_t,vt){const Me="object"==typeof vt&&vt||{};Me.name=Me.name||"string"==typeof vt&&vt||"[DEFAULT]";const xe=N.A.apps.filter(ze=>ze&&ze.name===Me.name)[0]||_t.runOutsideAngular(()=>N.A.initializeApp(Qe,Me));try{JSON.stringify(Qe)!==JSON.stringify(xe.options)&&X("error",`${xe.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Se(xe)}const X=(Qe,..._t)=>{(0,h.naY)()&&typeof console<"u"&&console[Qe](..._t)},le={provide:Se,useFactory:G,deps:[Ge,h.SKi,[new h.Xx1,Ae]]};let qe=(()=>{class Qe{constructor(vt){N.A.registerVersion("angularfire",H.xv.full,"core"),N.A.registerVersion("angularfire",H.xv.full,"app-compat"),N.A.registerVersion("angular",h.xvI.full,vt.toString())}static initializeApp(vt,de){return{ngModule:Qe,providers:[{provide:Ge,useValue:vt},{provide:Ae,useValue:de}]}}}return Qe.\u0275fac=function(vt){return new(vt||Qe)(h.KVO(h.Agw))},Qe.\u0275mod=h.$C({type:Qe}),Qe.\u0275inj=h.G2t({providers:[le]}),Qe})();function Be(Qe,_t,vt,de,Me){const[,ue,xe]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===Qe)||[];if(ue)return function rt(Qe,_t){try{return Qe.toString()===_t.toString()}catch{return Qe===_t}}(Me,xe)||(Je("error",`${_t} was already initialized on the ${vt} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),Je("warn",{is:Me,was:xe})),ue;{const ze=de();return globalThis.\u0275AngularfireInstanceCache.push([Qe,ze,Me]),ze}}const Fe=!!ut.hot,Je=(Qe,..._t)=>{(0,h.naY)()&&typeof console<"u"&&console[Qe](..._t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3531:(ut,Oe,V)=>{"use strict";V.d(Oe,{xv:()=>ds,U0:()=>ud,u0:()=>ta,CA:()=>zi,lR:()=>ac});var h=V(7705),N=V(7037),H=V(467),he=V(2979),_e=V(1401),Ee=V(8779),Se=V(5398);const Ge=(I,T)=>T.some(O=>I instanceof O);let Ae,G;const qe=new WeakMap,Be=new WeakMap,rt=new WeakMap,Fe=new WeakMap,Je=new WeakMap;let vt={get(I,T,O){if(I instanceof IDBTransaction){if("done"===T)return Be.get(I);if("objectStoreNames"===T)return I.objectStoreNames||rt.get(I);if("store"===T)return O.objectStoreNames[1]?void 0:O.objectStore(O.objectStoreNames[0])}return xe(I[T])},set:(I,T,O)=>(I[T]=O,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function ue(I){return"function"==typeof I?function Me(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(ze(this),T),xe(qe.get(this))}:function(...T){return xe(I.apply(ze(this),T))}:function(T,...O){const B=I.call(ze(this),T,...O);return rt.set(B,T.sort?T.sort():[T]),xe(B)}}(I):(I instanceof IDBTransaction&&function _t(I){if(Be.has(I))return;const T=new Promise((O,B)=>{const J=()=>{I.removeEventListener("complete",oe),I.removeEventListener("error",Ie),I.removeEventListener("abort",Ie)},oe=()=>{O(),J()},Ie=()=>{B(I.error||new DOMException("AbortError","AbortError")),J()};I.addEventListener("complete",oe),I.addEventListener("error",Ie),I.addEventListener("abort",Ie)});Be.set(I,T)}(I),Ge(I,function X(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,vt):I)}function xe(I){if(I instanceof IDBRequest)return function Qe(I){const T=new Promise((O,B)=>{const J=()=>{I.removeEventListener("success",oe),I.removeEventListener("error",Ie)},oe=()=>{O(xe(I.result)),J()},Ie=()=>{B(I.error),J()};I.addEventListener("success",oe),I.addEventListener("error",Ie)});return T.then(O=>{O instanceof IDBCursor&&qe.set(O,I)}).catch(()=>{}),Je.set(T,I),T}(I);if(Fe.has(I))return Fe.get(I);const T=ue(I);return T!==I&&(Fe.set(I,T),Je.set(T,I)),T}const ze=I=>Je.get(I),Tt=["get","getKey","getAll","getAllKeys","count"],sn=["put","add","delete","clear"],Lr=new Map;function Mi(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(Lr.get(T))return Lr.get(T);const O=T.replace(/FromIndex$/,""),B=T!==O,J=sn.includes(O);if(!(O in(B?IDBIndex:IDBObjectStore).prototype)||!J&&!Tt.includes(O))return;const oe=function(){var Ie=(0,H.A)(function*(Xe,...Ze){const ft=this.transaction(Xe,J?"readwrite":"readonly");let $t=ft.store;return B&&($t=$t.index(Ze.shift())),(yield Promise.all([$t[O](...Ze),J&&ft.done]))[0]});return function(Ze){return Ie.apply(this,arguments)}}();return Lr.set(T,oe),oe}!function de(I){vt=I(vt)}(I=>({...I,get:(T,O,B)=>Mi(T,O)||I.get(T,O,B),has:(T,O)=>!!Mi(T,O)||I.has(T,O)}));const so="@firebase/installations",$n="0.6.4",Ri=1e4,oo=`w:${$n}`,ps="FIS_v2",Br="https://firebaseinstallations.googleapis.com/v1",ye=36e5,ke=new _e.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function be(I){return I instanceof _e.g&&I.code.includes("request-failed")}function pt({projectId:I}){return`${Br}/projects/${I}/installations`}function Wt(I){return{token:I.token,requestStatus:2,expiresIn:lr(I.expiresIn),creationTime:Date.now()}}function kn(I,T){return ot.apply(this,arguments)}function ot(){return(ot=(0,H.A)(function*(I,T){const B=(yield T.json()).error;return ke.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function On({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Kn(I){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,H.A)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function lr(I){return Number(I.replace("s","000"))}function yr(){return(yr=(0,H.A)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:O}){const B=pt(I),J=On(I),oe=T.getImmediate({optional:!0});if(oe){const ft=yield oe.getHeartbeatsHeader();ft&&J.append("x-firebase-client",ft)}const Xe={method:"POST",headers:J,body:JSON.stringify({fid:O,authVersion:ps,appId:I.appId,sdkVersion:oo})},Ze=yield Kn(()=>fetch(B,Xe));if(Ze.ok){const ft=yield Ze.json();return{fid:ft.fid||O,registrationStatus:2,refreshToken:ft.refreshToken,authToken:Wt(ft.authToken)}}throw yield kn("Create Installation",Ze)})).apply(this,arguments)}function zr(I){return new Promise(T=>{setTimeout(T,I)})}const ao=/^[cdef][\w-]{21}$/,Et="";function on(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const O=function xt(I){return function Vr(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ao.test(O)?O:Et}catch{return Et}}function Ln(I){return`${I.appName}!${I.appId}`}const Bn=new Map;function Sr(I,T){const O=Ln(I);Lo(O,T),function gt(I,T){const O=function Qt(){return!ri&&"BroadcastChannel"in self&&(ri=new BroadcastChannel("[Firebase] FID Change"),ri.onmessage=I=>{Lo(I.data.key,I.data.fid)}),ri}();O&&O.postMessage({key:I,fid:T}),function gs(){0===Bn.size&&ri&&(ri.close(),ri=null)}()}(O,T)}function Lo(I,T){const O=Bn.get(I);if(O)for(const B of O)B(T)}let ri=null;const ts="firebase-installations-database",Bo=1,_i="firebase-installations-store";let Vo=null;function ms(){return Vo||(Vo=function it(I,T,{blocked:O,upgrade:B,blocking:J,terminated:oe}={}){const Ie=indexedDB.open(I,T),Xe=xe(Ie);return B&&Ie.addEventListener("upgradeneeded",Ze=>{B(xe(Ie.result),Ze.oldVersion,Ze.newVersion,xe(Ie.transaction))}),O&&Ie.addEventListener("blocked",()=>O()),Xe.then(Ze=>{oe&&Ze.addEventListener("close",()=>oe()),J&&Ze.addEventListener("versionchange",()=>J())}).catch(()=>{}),Xe}(ts,Bo,{upgrade:(I,T)=>{0===T&&I.createObjectStore(_i)}})),Vo}function Rr(I,T){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,H.A)(function*(I,T){const O=Ln(I),J=(yield ms()).transaction(_i,"readwrite"),oe=J.objectStore(_i),Ie=yield oe.get(O);return yield oe.put(T,O),yield J.done,(!Ie||Ie.fid!==T.fid)&&Sr(I,T.fid),T})).apply(this,arguments)}function lo(I){return cr.apply(this,arguments)}function cr(){return(cr=(0,H.A)(function*(I){const T=Ln(I),B=(yield ms()).transaction(_i,"readwrite");yield B.objectStore(_i).delete(T),yield B.done})).apply(this,arguments)}function _s(I,T){return vi.apply(this,arguments)}function vi(){return(vi=(0,H.A)(function*(I,T){const O=Ln(I),J=(yield ms()).transaction(_i,"readwrite"),oe=J.objectStore(_i),Ie=yield oe.get(O),Xe=T(Ie);return void 0===Xe?yield oe.delete(O):yield oe.put(Xe,O),yield J.done,Xe&&(!Ie||Ie.fid!==Xe.fid)&&Sr(I,Xe.fid),Xe})).apply(this,arguments)}function Z(I){return q.apply(this,arguments)}function q(){return q=(0,H.A)(function*(I){let T;const O=yield _s(I.appConfig,B=>{const J=function ie(I){return wr(I||{fid:on(),registrationStatus:0})}(B),oe=function Ne(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ke.create("app-offline"))};const O={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function me(I,T){return dt.apply(this,arguments)}(I,O);return{installationEntry:O,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:wt(I)}:{installationEntry:T}}(I,J);return T=oe.registrationPromise,oe.installationEntry});return O.fid===Et?{installationEntry:yield T}:{installationEntry:O,registrationPromise:T}}),q.apply(this,arguments)}function dt(){return dt=(0,H.A)(function*(I,T){try{const O=yield function Tr(I,T){return yr.apply(this,arguments)}(I,T);return Rr(I.appConfig,O)}catch(O){throw be(O)&&409===O.customData.serverCode?yield lo(I.appConfig):yield Rr(I.appConfig,{fid:T.fid,registrationStatus:0}),O}}),dt.apply(this,arguments)}function wt(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,H.A)(function*(I){let T=yield Tn(I.appConfig);for(;1===T.registrationStatus;)yield zr(100),T=yield Tn(I.appConfig);if(0===T.registrationStatus){const{installationEntry:O,registrationPromise:B}=yield Z(I);return B||O}return T})).apply(this,arguments)}function Tn(I){return _s(I,T=>{if(!T)throw ke.create("installation-not-found");return wr(T)})}function wr(I){return function Gt(I){return 1===I.registrationStatus&&I.registrationTime+Ri<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function qr(){return(qr=(0,H.A)(function*({appConfig:I,heartbeatServiceProvider:T},O){const B=function Pi(I,{fid:T}){return`${pt(I)}/${T}/authTokens:generate`}(I,O),J=function Sn(I,{refreshToken:T}){const O=On(I);return O.append("Authorization",function Fn(I){return`${ps} ${I}`}(T)),O}(I,O),oe=T.getImmediate({optional:!0});if(oe){const ft=yield oe.getHeartbeatsHeader();ft&&J.append("x-firebase-client",ft)}const Xe={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:oo,appId:I.appId}})},Ze=yield Kn(()=>fetch(B,Xe));if(Ze.ok)return Wt(yield Ze.json());throw yield kn("Generate Auth Token",Ze)})).apply(this,arguments)}function co(I){return Za.apply(this,arguments)}function Za(){return Za=(0,H.A)(function*(I,T=!1){let O;const B=yield _s(I.appConfig,oe=>{if(!at(oe))throw ke.create("not-registered");const Ie=oe.authToken;if(!T&&function fn(I){return 2===I.requestStatus&&!function br(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+ye}(I)}(Ie))return oe;if(1===Ie.requestStatus)return O=function Te(I,T){return fe.apply(this,arguments)}(I,T),oe;{if(!navigator.onLine)throw ke.create("app-offline");const Xe=function Zn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}(oe);return O=function mt(I,T){return bt.apply(this,arguments)}(I,Xe),Xe}});return O?yield O:B.authToken}),Za.apply(this,arguments)}function fe(){return(fe=(0,H.A)(function*(I,T){let O=yield Ke(I.appConfig);for(;1===O.authToken.requestStatus;)yield zr(100),O=yield Ke(I.appConfig);const B=O.authToken;return 0===B.requestStatus?co(I,T):B})).apply(this,arguments)}function Ke(I){return _s(I,T=>{if(!at(T))throw ke.create("not-registered");return function ks(I){return 1===I.requestStatus&&I.requestTime+Ri<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function bt(){return bt=(0,H.A)(function*(I,T){try{const O=yield function hn(I,T){return qr.apply(this,arguments)}(I,T),B=Object.assign(Object.assign({},T),{authToken:O});return yield Rr(I.appConfig,B),O}catch(O){if(!be(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Rr(I.appConfig,B)}else yield lo(I.appConfig);throw O}}),bt.apply(this,arguments)}function at(I){return void 0!==I&&2===I.registrationStatus}function uo(){return(uo=(0,H.A)(function*(I){const T=I,{installationEntry:O,registrationPromise:B}=yield Z(T);return B?B.catch(console.error):co(T).catch(console.error),O.fid})).apply(this,arguments)}function Ja(){return Ja=(0,H.A)(function*(I,T=!1){const O=I;return yield function Fl(I){return ns.apply(this,arguments)}(O),(yield co(O,T)).token}),Ja.apply(this,arguments)}function ns(){return(ns=(0,H.A)(function*(I){const{registrationPromise:T}=yield Z(I);T&&(yield T)})).apply(this,arguments)}function Yr(I){return ke.create("missing-app-config-values",{valueName:I})}const Ll="installations",qf=I=>{const T=I.getProvider("app").getImmediate(),O=function zc(I){if(!I||!I.options)throw Yr("App Configuration");if(!I.name)throw Yr("App Name");const T=["projectId","apiKey","appId"];for(const O of T)if(!I.options[O])throw Yr(O);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:O,heartbeatServiceProvider:(0,he._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ho=I=>{const T=I.getProvider("app").getImmediate(),O=(0,he._getProvider)(T,Ll).getImmediate();return{getId:()=>function Oi(I){return uo.apply(this,arguments)}(O),getToken:J=>function Gc(I){return Ja.apply(this,arguments)}(O,J)}};(function Uu(){(0,he._registerComponent)(new Ee.uA(Ll,qf,"PUBLIC")),(0,he._registerComponent)(new Ee.uA("installations-internal",Ho,"PRIVATE"))})(),(0,he.registerVersion)(so,$n),(0,he.registerVersion)(so,$n,"esm2017");const jo="@firebase/remote-config",dr=new _e.FA("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nt{constructor(T,O,B,J){this.client=T,this.storage=O,this.storageCache=B,this.logger=J}isCachedDataFresh(T,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-O,J=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var O=this;return(0,H.A)(function*(){const[B,J]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(J&&O.isCachedDataFresh(T.cacheMaxAgeMillis,B))return J;T.eTag=J&&J.eTag;const oe=yield O.client.fetch(T),Ie=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ie.push(O.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ie),oe})()}}function Xt(I=navigator){return I.languages&&I.languages[0]||I.language}class Mt{constructor(T,O,B,J,oe,Ie){this.firebaseInstallations=T,this.sdkVersion=O,this.namespace=B,this.projectId=J,this.apiKey=oe,this.appId=Ie}fetch(T){var O=this;return(0,H.A)(function*(){const[B,J]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ze={sdk_version:O.sdkVersion,app_instance_id:B,app_instance_id_token:J,app_id:O.appId,language_code:Xt()},ft={method:"POST",headers:Xe,body:JSON.stringify(Ze)},$t=fetch(Ie,ft),Ht=new Promise((ei,bi)=>{T.signal.addEventListener(()=>{const yl=new Error("The operation was aborted.");yl.name="AbortError",bi(yl)})});let ui;try{yield Promise.race([$t,Ht]),ui=yield $t}catch(ei){let bi="fetch-client-network";throw"AbortError"===ei?.name&&(bi="fetch-timeout"),dr.create(bi,{originalErrorMessage:ei?.message})}let pn=ui.status;const di=ui.headers.get("ETag")||void 0;let uc,xn;if(200===ui.status){let ei;try{ei=yield ui.json()}catch(bi){throw dr.create("fetch-client-parse",{originalErrorMessage:bi?.message})}uc=ei.entries,xn=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===xn?pn=500:"NO_CHANGE"===xn?pn=304:("NO_TEMPLATE"===xn||"EMPTY_CONFIG"===xn)&&(uc={}),304!==pn&&200!==pn)throw dr.create("fetch-status",{httpStatus:pn});return{status:pn,eTag:di,config:uc}})()}}class yi{constructor(T,O){this.client=T,this.storage=O}fetch(T){var O=this;return(0,H.A)(function*(){const B=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(T,B)})()}attemptFetch(T,O){var B=this;return(0,H.A)(function*(J,{throttleEndTimeMillis:oe,backoffCount:Ie}){yield function un(I,T){return new Promise((O,B)=>{const J=Math.max(T-Date.now(),0),oe=setTimeout(O,J);I.addEventListener(()=>{clearTimeout(oe),B(dr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(J.signal,oe);try{const Xe=yield B.client.fetch(J);return yield B.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function el(I){if(!(I instanceof _e.g&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Xe))throw Xe;const Ze={throttleEndTimeMillis:Date.now()+(0,_e.p9)(Ie),backoffCount:Ie+1};return yield B.storage.setThrottleMetadata(Ze),B.attemptFetch(J,Ze)}}).apply(this,arguments)}}class Wo{constructor(T,O,B,J,oe){this.app=T,this._client=O,this._storageCache=B,this._storage=J,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vs(I,T){const O=I.target.error||void 0;return dr.create(T,{originalErrorMessage:O&&O?.message})}const Ct="app_namespace_store";class tr{constructor(T,O,B,J=function Fs(){return new Promise((I,T)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=B=>{T(vs(B,"storage-open"))},O.onsuccess=B=>{I(B.target.result)},O.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(Ct,{keyPath:"compositeKey"})}}catch(O){T(dr.create("storage-open",{originalErrorMessage:O?.message}))}})}()){this.appId=T,this.appName=O,this.namespace=B,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var O=this;return(0,H.A)(function*(){const B=yield O.openDbPromise;return new Promise((J,oe)=>{const Xe=B.transaction([Ct],"readonly").objectStore(Ct),Ze=O.createCompositeKey(T);try{const ft=Xe.get(Ze);ft.onerror=$t=>{oe(vs($t,"storage-get"))},ft.onsuccess=$t=>{const Ht=$t.target.result;J(Ht?Ht.value:void 0)}}catch(ft){oe(dr.create("storage-get",{originalErrorMessage:ft?.message}))}})})()}set(T,O){var B=this;return(0,H.A)(function*(){const J=yield B.openDbPromise;return new Promise((oe,Ie)=>{const Ze=J.transaction([Ct],"readwrite").objectStore(Ct),ft=B.createCompositeKey(T);try{const $t=Ze.put({compositeKey:ft,value:O});$t.onerror=Ht=>{Ie(vs(Ht,"storage-set"))},$t.onsuccess=()=>{oe()}}catch($t){Ie(dr.create("storage-set",{originalErrorMessage:$t?.message}))}})})()}delete(T){var O=this;return(0,H.A)(function*(){const B=yield O.openDbPromise;return new Promise((J,oe)=>{const Xe=B.transaction([Ct],"readwrite").objectStore(Ct),Ze=O.createCompositeKey(T);try{const ft=Xe.delete(Ze);ft.onerror=$t=>{oe(vs($t,"storage-delete"))},ft.onsuccess=()=>{J()}}catch(ft){oe(dr.create("storage-delete",{originalErrorMessage:ft?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class va{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,H.A)(function*(){const O=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),oe=yield O;oe&&(T.lastFetchStatus=oe);const Ie=yield B;Ie&&(T.lastSuccessfulFetchTimestampMillis=Ie);const Xe=yield J;Xe&&(T.activeConfig=Xe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Gu(){return ss.apply(this,arguments)}function ss(){return(ss=(0,H.A)(function*(){if(!(0,_e.zW)())return!1;try{return yield(0,_e.eX)()}catch{return!1}})).apply(this,arguments)}!function ii(){(0,he._registerComponent)(new Ee.uA("remote-config",function I(T,{instanceIdentifier:O}){const B=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw dr.create("registration-window");if(!(0,_e.zW)())throw dr.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ie,appId:Xe}=B.options;if(!oe)throw dr.create("registration-project-id");if(!Ie)throw dr.create("registration-api-key");if(!Xe)throw dr.create("registration-app-id");const Ze=new tr(Xe,B.name,O=O||"firebase"),ft=new va(Ze),$t=new Se.Vy(jo);$t.logLevel=Se.$b.ERROR;const Ht=new Mt(J,he.SDK_VERSION,O,oe,Ie,Xe),ui=new yi(Ht,Ze),pn=new nt(ui,Ze,ft,$t),di=new Wo(B,pn,ft,Ze,$t);return function Qr(I){const T=(0,_e.Ku)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(di),di},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(jo,"0.4.4"),(0,he.registerVersion)(jo,"0.4.4","esm2017")}();const Ls=(I,T)=>T.some(O=>I instanceof O);let po,ys;const si=new WeakMap,Bs=new WeakMap,ki=new WeakMap,nr=new WeakMap,os=new WeakMap;let Es={get(I,T,O){if(I instanceof IDBTransaction){if("done"===T)return Bs.get(I);if("objectStoreNames"===T)return I.objectStoreNames||ki.get(I);if("store"===T)return O.objectStoreNames[1]?void 0:O.objectStore(O.objectStoreNames[0])}return ai(I[T])},set:(I,T,O)=>(I[T]=O,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function jl(I){return"function"==typeof I?function oi(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ku(){return ys||(ys=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Ea(this),T),ai(si.get(this))}:function(...T){return ai(I.apply(Ea(this),T))}:function(T,...O){const B=I.call(Ea(this),T,...O);return ki.set(B,T.sort?T.sort():[T]),ai(B)}}(I):(I instanceof IDBTransaction&&function tn(I){if(Bs.has(I))return;const T=new Promise((O,B)=>{const J=()=>{I.removeEventListener("complete",oe),I.removeEventListener("error",Ie),I.removeEventListener("abort",Ie)},oe=()=>{O(),J()},Ie=()=>{B(I.error||new DOMException("AbortError","AbortError")),J()};I.addEventListener("complete",oe),I.addEventListener("error",Ie),I.addEventListener("abort",Ie)});Bs.set(I,T)}(I),Ls(I,function Lt(){return po||(po=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Es):I)}function ai(I){if(I instanceof IDBRequest)return function ya(I){const T=new Promise((O,B)=>{const J=()=>{I.removeEventListener("success",oe),I.removeEventListener("error",Ie)},oe=()=>{O(ai(I.result)),J()},Ie=()=>{B(I.error),J()};I.addEventListener("success",oe),I.addEventListener("error",Ie)});return T.then(O=>{O instanceof IDBCursor&&si.set(O,I)}).catch(()=>{}),os.set(T,I),T}(I);if(nr.has(I))return nr.get(I);const T=jl(I);return T!==I&&(nr.set(I,T),os.set(T,I)),T}const Ea=I=>os.get(I);function Fi(I,T,{blocked:O,upgrade:B,blocking:J,terminated:oe}={}){const Ie=indexedDB.open(I,T),Xe=ai(Ie);return B&&Ie.addEventListener("upgradeneeded",Ze=>{B(ai(Ie.result),Ze.oldVersion,Ze.newVersion,ai(Ie.transaction))}),O&&Ie.addEventListener("blocked",()=>O()),Xe.then(Ze=>{oe&&Ze.addEventListener("close",()=>oe()),J&&Ze.addEventListener("versionchange",()=>J())}).catch(()=>{}),Xe}function go(I,{blocked:T}={}){const O=indexedDB.deleteDatabase(I);return T&&O.addEventListener("blocked",()=>T()),ai(O).then(()=>{})}const tl=["get","getKey","getAll","getAllKeys","count"],nl=["put","add","delete","clear"],zu=new Map;function eu(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(zu.get(T))return zu.get(T);const O=T.replace(/FromIndex$/,""),B=T!==O,J=nl.includes(O);if(!(O in(B?IDBIndex:IDBObjectStore).prototype)||!J&&!tl.includes(O))return;const oe=function(){var Ie=(0,H.A)(function*(Xe,...Ze){const ft=this.transaction(Xe,J?"readwrite":"readonly");let $t=ft.store;return B&&($t=$t.index(Ze.shift())),(yield Promise.all([$t[O](...Ze),J&&ft.done]))[0]});return function(Ze){return Ie.apply(this,arguments)}}();return zu.set(T,oe),oe}!function Xr(I){Es=I(Es)}(I=>({...I,get:(T,O,B)=>eu(T,O)||I.get(T,O,B),has:(T,O)=>!!eu(T,O)||I.has(T,O)}));const tu="/firebase-messaging-sw.js",$l="/firebase-cloud-messaging-push-scope",nu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qh="https://fcmregistrations.googleapis.com/v1",Jn="google.c.a.c_id",$d="google.c.a.c_l",qu="google.c.a.ts";var Li=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(Li||{});function Cs(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ca(I){const O=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(O),J=new Uint8Array(B.length);for(let oe=0;oe<B.length;++oe)J[oe]=B.charCodeAt(oe);return J}const Wl="fcm_token_details_db",ru=5,wa="fcm_token_object_Store";function Gl(){return Gl=(0,H.A)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Wl))return null;let T=null;return(yield Fi(Wl,ru,{upgrade:(B=(0,H.A)(function*(J,oe,Ie,Xe){var Ze;if(oe<2||!J.objectStoreNames.contains(wa))return;const ft=Xe.objectStore(wa),$t=yield ft.index("fcmSenderId").get(I);if(yield ft.clear(),$t)if(2===oe){const Ht=$t;if(!Ht.auth||!Ht.p256dh||!Ht.endpoint)return;T={token:Ht.fcmToken,createTime:null!==(Ze=Ht.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Ht.auth,p256dh:Ht.p256dh,endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:"string"==typeof Ht.vapidKey?Ht.vapidKey:Cs(Ht.vapidKey)}}}else if(3===oe){const Ht=$t;T={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Cs(Ht.auth),p256dh:Cs(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Cs(Ht.vapidKey)}}}else if(4===oe){const Ht=$t;T={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Cs(Ht.auth),p256dh:Cs(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Cs(Ht.vapidKey)}}}}),function(oe,Ie,Xe,Ze){return B.apply(this,arguments)})})).close(),yield go(Wl),yield go("fcm_vapid_details_db"),yield go("undefined"),function Yf(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var B}),Gl.apply(this,arguments)}const mo="firebase-messaging-database",Ei=1,as="firebase-messaging-store";let Gd=null;function pr(){return Gd||(Gd=Fi(mo,Ei,{upgrade:(I,T)=>{0===T&&I.createObjectStore(as)}})),Gd}function ba(I){return er.apply(this,arguments)}function er(){return er=(0,H.A)(function*(I){const T=ws(I),B=yield(yield pr()).transaction(as).objectStore(as).get(T);if(B)return B;{const J=yield function Ag(I){return Gl.apply(this,arguments)}(I.appConfig.senderId);if(J)return yield rl(I,J),J}}),er.apply(this,arguments)}function rl(I,T){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,H.A)(function*(I,T){const O=ws(I),J=(yield pr()).transaction(as,"readwrite");return yield J.objectStore(as).put(T,O),yield J.done,T})).apply(this,arguments)}function zl(){return(zl=(0,H.A)(function*(I){const T=ws(I),B=(yield pr()).transaction(as,"readwrite");yield B.objectStore(as).delete(T),yield B.done})).apply(this,arguments)}function ws({appConfig:I}){return I.appId}const Or=new _e.FA("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function iu(I,T){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,H.A)(function*(I,T){const O=yield Re(I),B=ht(T),J={method:"POST",headers:O,body:JSON.stringify(B)};let oe;try{oe=yield(yield fetch(ne(I.appConfig),J)).json()}catch(Ie){throw Or.create("token-subscribe-failed",{errorInfo:Ie?.toString()})}if(oe.error)throw Or.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw Or.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function Xu(){return(Xu=(0,H.A)(function*(I,T){const O=yield Re(I),B=ht(T.subscriptionOptions),J={method:"PATCH",headers:O,body:JSON.stringify(B)};let oe;try{oe=yield(yield fetch(`${ne(I.appConfig)}/${T.token}`,J)).json()}catch(Ie){throw Or.create("token-update-failed",{errorInfo:Ie?.toString()})}if(oe.error)throw Or.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw Or.create("token-update-no-token");return oe.token})).apply(this,arguments)}function il(I,T){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,H.A)(function*(I,T){const B={method:"DELETE",headers:yield Re(I)};try{const oe=yield(yield fetch(`${ne(I.appConfig)}/${T}`,B)).json();if(oe.error)throw Or.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(J){throw Or.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function ne({projectId:I}){return`${qh}/projects/${I}/registrations`}function Re(I){return we.apply(this,arguments)}function we(){return(we=(0,H.A)(function*({appConfig:I,installations:T}){const O=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function ht({p256dh:I,auth:T,endpoint:O,vapidKey:B}){const J={web:{endpoint:O,auth:T,p256dh:I}};return B!==nu&&(J.web.applicationPubKey=B),J}const qt=6048e5;function gr(){return gr=(0,H.A)(function*(I){const T=yield function _o(I,T){return Yl.apply(this,arguments)}(I.swRegistration,I.vapidKey),O={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Cs(T.getKey("auth")),p256dh:Cs(T.getKey("p256dh"))},B=yield ba(I.firebaseDependencies);if(B){if(function Ql(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}(B.subscriptionOptions,O))return Date.now()>=B.createTime+qt?function Zu(I,T){return Ci.apply(this,arguments)}(I,{token:B.token,createTime:Date.now(),subscriptionOptions:O}):B.token;try{yield il(I.firebaseDependencies,B.token)}catch(J){console.warn(J)}return sl(I.firebaseDependencies,O)}return sl(I.firebaseDependencies,O)}),gr.apply(this,arguments)}function ql(){return ql=(0,H.A)(function*(I){const T=yield ba(I.firebaseDependencies);T&&(yield il(I.firebaseDependencies,T.token),yield function Kd(I){return zl.apply(this,arguments)}(I.firebaseDependencies));const O=yield I.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()}),ql.apply(this,arguments)}function Ci(){return Ci=(0,H.A)(function*(I,T){try{const O=yield function Qu(I,T){return Xu.apply(this,arguments)}(I.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:O,createTime:Date.now()});return yield rl(I.firebaseDependencies,B),O}catch(O){throw yield function Wn(I){return ql.apply(this,arguments)}(I),O}}),Ci.apply(this,arguments)}function sl(I,T){return ol.apply(this,arguments)}function ol(){return(ol=(0,H.A)(function*(I,T){const B={token:yield iu(I,T),createTime:Date.now(),subscriptionOptions:T};return yield rl(I,B),B.token})).apply(this,arguments)}function Yl(){return(Yl=(0,H.A)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ca(T)})})).apply(this,arguments)}function wn(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Xl(I,T){if(!T.notification)return;I.notification={};const O=T.notification.title;O&&(I.notification.title=O);const B=T.notification.body;B&&(I.notification.body=B);const J=T.notification.image;J&&(I.notification.image=J);const oe=T.notification.icon;oe&&(I.notification.icon=oe)}(T,I),function zd(I,T){T.data&&(I.data=T.data)}(T,I),function al(I,T){var O,B,J,oe,Ie;if(!(T.fcmOptions||null!==(O=T.notification)&&void 0!==O&&O.click_action))return;I.fcmOptions={};const Xe=null!==(J=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==J?J:null===(oe=T.notification)||void 0===oe?void 0:oe.click_action;Xe&&(I.fcmOptions.link=Xe);const Ze=null===(Ie=T.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;Ze&&(I.fcmOptions.analyticsLabel=Ze)}(T,I),T}function qd(I,T){const O=[];for(let B=0;B<I.length;B++)O.push(I.charAt(B)),B<T.length&&O.push(T.charAt(B));return O.join("")}function Ia(I){return Or.create("missing-app-config-values",{valueName:I})}qd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Da{constructor(T,O,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Yd(I){if(!I||!I.options)throw Ia("App Configuration Object");if(!I.name)throw Ia("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:O}=I;for(const B of T)if(!O[B])throw Ia(B);return{appName:I.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:O,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Aa(){return(Aa=(0,H.A)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(tu,{scope:$l}),I.swRegistration.update().catch(()=>{})}catch(T){throw Or.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Go(){return(Go=(0,H.A)(function*(I,T){if(!T&&!I.swRegistration&&(yield function Zl(I){return Aa.apply(this,arguments)}(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Or.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Hs(){return(Hs=(0,H.A)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=nu)})).apply(this,arguments)}function Ta(){return Ta=(0,H.A)(function*(I,T){if(!navigator)throw Or.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Or.create("permission-blocked");return yield function Us(I,T){return Hs.apply(this,arguments)}(I,T?.vapidKey),yield function Jl(I,T){return Go.apply(this,arguments)}(I,T?.serviceWorkerRegistration),function Pn(I){return gr.apply(this,arguments)}(I)}),Ta.apply(this,arguments)}function ec(){return(ec=(0,H.A)(function*(I,T,O){const B=function js(I){switch(I){case Li.NOTIFICATION_CLICKED:return"notification_open";case Li.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:O[Jn],message_name:O[$d],message_time:O[qu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sa(){return Sa=(0,H.A)(function*(I,T){const O=T.data;if(!O.isFirebaseMessaging)return;I.onMessageHandler&&O.messageType===Li.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(wn(O)):I.onMessageHandler.next(wn(O)));const B=O.data;(function Qf(I){return"object"==typeof I&&!!I&&Jn in I})(B)&&"1"===B["google.c.a.e"]&&(yield function vo(I,T,O){return ec.apply(this,arguments)}(I,O.messageType,B))}),Sa.apply(this,arguments)}const bn="@firebase/messaging",Eo=I=>{const T=new Da(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Qd(I,T){return Sa.apply(this,arguments)}(T,O)),T},Bi=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:B=>function su(I,T){return Ta.apply(this,arguments)}(T,B)}};function ed(){return $s.apply(this,arguments)}function $s(){return($s=(0,H.A)(function*(){try{yield(0,_e.eX)()}catch{return!1}return typeof window<"u"&&(0,_e.zW)()&&(0,_e.dM)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ju(){(0,he._registerComponent)(new Ee.uA("messaging",Eo,"PUBLIC")),(0,he._registerComponent)(new Ee.uA("messaging-internal",Bi,"PRIVATE")),(0,he.registerVersion)(bn,"0.12.4"),(0,he.registerVersion)(bn,"0.12.4","esm2017")}();const Vn="analytics",ll="firebase_id",Ra="origin",Rt=6e4,Pa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zo="https://www.googletagmanager.com/gtag/js",Hr=new Se.Vy("@firebase/analytics"),li=new _e.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function cl(I){if(!I.startsWith(zo)){const T=li.create("invalid-gtag-resource",{gtagURL:I});return Hr.warn(T.message),""}return I}function qo(I){return Promise.all(I.map(T=>T.catch(O=>O)))}function Ws(){return(Ws=(0,H.A)(function*(I,T,O,B,J,oe){const Ie=B[J];try{if(Ie)yield T[Ie];else{const Ze=(yield qo(O)).find(ft=>ft.measurementId===J);Ze&&(yield T[Ze.appId])}}catch(Xe){Hr.error(Xe)}I("config",J,oe)})).apply(this,arguments)}function At(){return(At=(0,H.A)(function*(I,T,O,B,J){try{let oe=[];if(J&&J.send_to){let Ie=J.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Xe=yield qo(O);for(const Ze of Ie){const ft=Xe.find(Ht=>Ht.measurementId===Ze),$t=ft&&T[ft.appId];if(!$t){oe=[];break}oe.push($t)}}0===oe.length&&(oe=Object.values(T)),yield Promise.all(oe),I("event",B,J||{})}catch(oe){Hr.error(oe)}})).apply(this,arguments)}const nd=30,rd=new class Vi{constructor(T={},O=1e3){this.throttleMetadata=T,this.intervalMillis=O}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,O){this.throttleMetadata[T]=O}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function id(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Xh(){return(Xh=(0,H.A)(function*(I){var T;const{appId:O,apiKey:B}=I,J={method:"GET",headers:id(B)},oe=Pa.replace("{app-id}",O),Ie=yield fetch(oe,J);if(200!==Ie.status&&304!==Ie.status){let Xe="";try{const Ze=yield Ie.json();null!==(T=Ze.error)&&void 0!==T&&T.message&&(Xe=Ze.error.message)}catch{}throw li.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Xe})}return Ie.json()})).apply(this,arguments)}function Nr(){return(Nr=(0,H.A)(function*(I,T=rd,O){const{appId:B,apiKey:J,measurementId:oe}=I.options;if(!B)throw li.create("no-app-id");if(!J){if(oe)return{measurementId:oe,appId:B};throw li.create("no-api-key")}const Ie=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Io;return setTimeout((0,H.A)(function*(){Xe.abort()}),void 0!==O?O:Rt),bo({appId:B,apiKey:J,measurementId:oe},Ie,Xe,T)})).apply(this,arguments)}function bo(I,T,O){return sd.apply(this,arguments)}function sd(){return sd=(0,H.A)(function*(I,{throttleEndTimeMillis:T,backoffCount:O},B,J=rd){var oe;const{appId:Ie,measurementId:Xe}=I;try{yield function nc(I,T){return new Promise((O,B)=>{const J=Math.max(T-Date.now(),0),oe=setTimeout(O,J);I.addEventListener(()=>{clearTimeout(oe),B(li.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(B,T)}catch(Ze){if(Xe)return Hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:Ie,measurementId:Xe};throw Ze}try{const Ze=yield function Xf(I){return Xh.apply(this,arguments)}(I);return J.deleteThrottleMetadata(Ie),Ze}catch(Ze){const ft=Ze;if(!function Gs(I){if(!(I instanceof _e.g&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ft)){if(J.deleteThrottleMetadata(Ie),Xe)return Hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:Ie,measurementId:Xe};throw Ze}const $t=503===Number(null===(oe=ft?.customData)||void 0===oe?void 0:oe.httpStatus)?(0,_e.p9)(O,J.intervalMillis,nd):(0,_e.p9)(O,J.intervalMillis),Ht={throttleEndTimeMillis:Date.now()+$t,backoffCount:O+1};return J.setThrottleMetadata(Ie,Ht),Hr.debug(`Calling attemptFetch again in ${$t} millis`),bo(I,Ht,B,J)}}),sd.apply(this,arguments)}class Io{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let rc,Fr;function Zd(){return(Zd=(0,H.A)(function*(I,T,O,B,J){if(J&&J.global)I("event",O,B);else{const oe=yield T;I("event",O,Object.assign(Object.assign({},B),{send_to:oe}))}})).apply(this,arguments)}function Zr(){return(Zr=(0,H.A)(function*(){if(!(0,_e.zW)())return Hr.warn(li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,_e.eX)()}catch(I){return Hr.warn(li.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function In(){return In=(0,H.A)(function*(I,T,O,B,J,oe,Ie){var Xe;const Ze=function wo(I){return Nr.apply(this,arguments)}(I);Ze.then(pn=>{O[pn.measurementId]=pn.appId,I.options.measurementId&&pn.measurementId!==I.options.measurementId&&Hr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pn=>Hr.error(pn)),T.push(Ze);const ft=function od(){return Zr.apply(this,arguments)}().then(pn=>{if(pn)return B.getId()}),[$t,Ht]=yield Promise.all([Ze,ft]);(function xr(I){const T=window.document.getElementsByTagName("script");for(const O of Object.values(T))if(O.src&&O.src.includes(zo)&&O.src.includes(I))return O;return null})(oe)||function Yo(I,T){const O=function Oa(I,T){let O;return window.trustedTypes&&(O=window.trustedTypes.createPolicy(I,T)),O}("firebase-js-sdk-policy",{createScriptURL:cl}),B=document.createElement("script"),J=`${zo}?l=${I}&id=${T}`;B.src=O?O?.createScriptURL(J):J,B.async=!0,document.head.appendChild(B)}(oe,$t.measurementId),Fr&&(J("consent","default",Fr),function ka(I){Fr=I}(void 0)),J("js",new Date);const ui=null!==(Xe=Ie?.config)&&void 0!==Xe?Xe:{};return ui[Ra]="firebase",ui.update=!0,null!=Ht&&(ui[ll]=Ht),J("config",$t.measurementId,ui),rc&&(J("set",rc),function dl(I){rc=I}(void 0)),$t.measurementId}),In.apply(this,arguments)}class wi{constructor(T){this.app=T}_delete(){return delete Ut[this.app.options.appId],Promise.resolve()}}let Ut={},cu=[];const eh={};let Ki,Kt,Ui="dataLayer",ad=!1;function Is(I,T,O){!function sc(){const I=[];if((0,_e.sr)()&&I.push("This is a browser extension environment."),(0,_e.dM)()||I.push("Cookies are not available."),I.length>0){const T=I.map((B,J)=>`(${J+1}) ${B}`).join(" "),O=li.create("invalid-analytics-context",{errorInfo:T});Hr.warn(O.message)}}();const B=I.options.appId;if(!B)throw li.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw li.create("no-api-key");Hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ut[B])throw li.create("already-exists",{id:B});if(!ad){!function Qh(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Ui);const{wrappedGtag:oe,gtagCore:Ie}=function td(I,T,O,B,J){let oe=function(...Ie){window[B].push(arguments)};return window[J]&&"function"==typeof window[J]&&(oe=window[J]),window[J]=function an(I,T,O,B){function oe(){return oe=(0,H.A)(function*(Ie,...Xe){try{if("event"===Ie){const[Ze,ft]=Xe;yield function Le(I,T,O,B,J){return At.apply(this,arguments)}(I,T,O,Ze,ft)}else if("config"===Ie){const[Ze,ft]=Xe;yield function L(I,T,O,B,J,oe){return Ws.apply(this,arguments)}(I,T,O,B,Ze,ft)}else if("consent"===Ie){const[Ze]=Xe;I("consent","update",Ze)}else if("get"===Ie){const[Ze,ft,$t]=Xe;I("get",Ze,ft,$t)}else if("set"===Ie){const[Ze]=Xe;I("set",Ze)}else I(Ie,...Xe)}catch(Ze){Hr.error(Ze)}}),oe.apply(this,arguments)}return function J(Ie){return oe.apply(this,arguments)}}(oe,I,T,O),{gtagCore:oe,wrappedGtag:window[J]}}(Ut,cu,eh,Ui,"gtag");Kt=oe,Ki=Ie,ad=!0}return Ut[B]=function ls(I,T,O,B,J,oe,Ie){return In.apply(this,arguments)}(I,cu,eh,T,Ki,Ui,O),new wi(I)}function Zo(){return hl.apply(this,arguments)}function hl(){return(hl=(0,H.A)(function*(){if((0,_e.sr)()||!(0,_e.dM)()||!(0,_e.zW)())return!1;try{return yield(0,_e.eX)()}catch{return!1}})).apply(this,arguments)}const uu="@firebase/analytics";!function qn(){(0,he._registerComponent)(new Ee.uA(Vn,(T,{options:O})=>Is(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,he._registerComponent)(new Ee.uA("analytics-internal",function I(T){try{const O=T.getProvider(Vn).getImmediate();return{logEvent:(B,J,oe)=>function Cr(I,T,O,B){I=(0,_e.Ku)(I),function Zf(I,T,O,B,J){return Zd.apply(this,arguments)}(Kt,Ut[I.app.options.appId],T,O,B).catch(J=>Hr.error(J))}(O,B,J,oe)}}catch(O){throw li.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,he.registerVersion)(uu,"0.10.0"),(0,he.registerVersion)(uu,"0.10.0","esm2017")}();var Ts=V(6780),us=V(9687);const cd=new class mr extends us.q{}(class Fa extends Ts.R{constructor(T,O){super(T,O),this.scheduler=T,this.work=O}schedule(T,O=0){return O>0?super.schedule(T,O):(this.delay=O,this.state=T,this.scheduler.flush(this),this)}execute(T,O){return O>0||this.closed?super.execute(T,O):this._execute(T,O)}requestAsyncId(T,O,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,O,B):(T.flush(this),0)}});var oc=V(3236),ea=V(8141),ci=V(6745),Yn=V(941);const ds=new h.RxE("7.6.1"),pl="__angularfire_symbol__analyticsIsSupportedValue",zs="__angularfire_symbol__analyticsIsSupported",To="__angularfire_symbol__remoteConfigIsSupportedValue",gl="__angularfire_symbol__remoteConfigIsSupported",du="__angularfire_symbol__messagingIsSupportedValue",La="__angularfire_symbol__messagingIsSupported";function ac(I,T,O){if(T){if(1===T.length)return T[0];const oe=T.filter(Ie=>Ie.app===O);if(1===oe.length)return oe[0]}return O.container.getProvider(I).getImmediate({optional:!0})}globalThis[zs]||(globalThis[zs]=Zo().then(I=>globalThis[pl]=I).catch(()=>globalThis[pl]=!1)),globalThis[La]||(globalThis[La]=ed().then(I=>globalThis[du]=I).catch(()=>globalThis[du]=!1)),globalThis[gl]||(globalThis[gl]=Gu().then(I=>globalThis[To]=I).catch(()=>globalThis[To]=!1));const zi=(I,T)=>{const O=T?[T]:(0,N.Dk)(),B=[];return O.forEach(J=>{J.container.getProvider(I).instances.forEach(Ie=>{B.includes(Ie)||B.push(Ie)})}),B};function So(){}class vl{constructor(T,O=cd){this.zone=T,this.delegate=O}now(){return this.delegate.now()}schedule(T,O,B){const J=this.zone;return this.delegate.schedule(function(Ie){J.runGuarded(()=>{T.apply(this,[Ie])})},O,B)}}class Ss{constructor(T){this.zone=T,this.task=null}call(T,O){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",So,{},So,So)),O.pipe((0,ea.M)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ta=(()=>{class I{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new vl(Zone.current)),this.insideAngular=O.run(()=>new vl(Zone.current,oc.E)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(O){return new(O||I)(h.KVO(h.SKi))},I.\u0275prov=h.jDH({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Mo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function ud(I){return Mo(),function cc(I){return function(O){return(O=O.lift(new Ss(I.ngZone))).pipe((0,ci._)(I.outsideAngular),(0,Yn.Q)(I.insideAngular))}}(Mo())(I)}},1401:(ut,Oe,V)=>{"use strict";V.d(Oe,{$L:()=>pt,$g:()=>Ri,A4:()=>X,Am:()=>ao,As:()=>Wt,Bd:()=>Tt,Cv:()=>Sn,FA:()=>ve,Fy:()=>xe,HN:()=>gs,Hk:()=>H,I9:()=>Et,Im:()=>Fn,K3:()=>Ee,KA:()=>Ge,Ku:()=>vi,Ll:()=>Ce,OE:()=>Bo,T9:()=>de,Uj:()=>Ae,XA:()=>Me,ZQ:()=>ze,bD:()=>yr,cY:()=>ue,dI:()=>gt,dM:()=>ye,eX:()=>Br,g:()=>ge,gR:()=>Ft,gz:()=>xt,hp:()=>on,jZ:()=>it,kH:()=>Tr,kj:()=>ts,lT:()=>so,lV:()=>Lr,oD:()=>Qt,od:()=>Lo,p9:()=>lo,qc:()=>Kn,sr:()=>sn,tD:()=>Ln,u:()=>G,vA:()=>N,yw:()=>lr,zW:()=>ps,zw:()=>le});const h={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},N=function(Z,q){if(!Z)throw H(q)},H=function(Z){return new Error("Firebase Database ("+h.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Z)},he=function(Z){const q=[];let ie=0;for(let Ne=0;Ne<Z.length;Ne++){let me=Z.charCodeAt(Ne);me<128?q[ie++]=me:me<2048?(q[ie++]=me>>6|192,q[ie++]=63&me|128):55296==(64512&me)&&Ne+1<Z.length&&56320==(64512&Z.charCodeAt(Ne+1))?(me=65536+((1023&me)<<10)+(1023&Z.charCodeAt(++Ne)),q[ie++]=me>>18|240,q[ie++]=me>>12&63|128,q[ie++]=me>>6&63|128,q[ie++]=63&me|128):(q[ie++]=me>>12|224,q[ie++]=me>>6&63|128,q[ie++]=63&me|128)}return q},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,q){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ie=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let me=0;me<Z.length;me+=3){const dt=Z[me],wt=me+1<Z.length,_n=wt?Z[me+1]:0,Tn=me+2<Z.length,wr=Tn?Z[me+2]:0;let qr=(15&_n)<<2|wr>>6,Pi=63&wr;Tn||(Pi=64,wt||(qr=64)),Ne.push(ie[dt>>2],ie[(3&dt)<<4|_n>>4],ie[qr],ie[Pi])}return Ne.join("")},encodeString(Z,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(Z):this.encodeByteArray(he(Z),q)},decodeString(Z,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(Z):function(Z){const q=[];let ie=0,Ne=0;for(;ie<Z.length;){const me=Z[ie++];if(me<128)q[Ne++]=String.fromCharCode(me);else if(me>191&&me<224){const dt=Z[ie++];q[Ne++]=String.fromCharCode((31&me)<<6|63&dt)}else if(me>239&&me<365){const Tn=((7&me)<<18|(63&Z[ie++])<<12|(63&Z[ie++])<<6|63&Z[ie++])-65536;q[Ne++]=String.fromCharCode(55296+(Tn>>10)),q[Ne++]=String.fromCharCode(56320+(1023&Tn))}else{const dt=Z[ie++],wt=Z[ie++];q[Ne++]=String.fromCharCode((15&me)<<12|(63&dt)<<6|63&wt)}}return q.join("")}(this.decodeStringToByteArray(Z,q))},decodeStringToByteArray(Z,q){this.init_();const ie=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let me=0;me<Z.length;){const dt=ie[Z.charAt(me++)],_n=me<Z.length?ie[Z.charAt(me)]:0;++me;const wr=me<Z.length?ie[Z.charAt(me)]:64;++me;const hn=me<Z.length?ie[Z.charAt(me)]:64;if(++me,null==dt||null==_n||null==wr||null==hn)throw new Se;Ne.push(dt<<2|_n>>4),64!==wr&&(Ne.push(_n<<4&240|wr>>2),64!==hn&&Ne.push(wr<<6&192|hn))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}};class Se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ge=function(Z){const q=he(Z);return Ee.encodeByteArray(q,!0)},Ae=function(Z){return Ge(Z).replace(/\./g,"")},G=function(Z){try{return Ee.decodeString(Z,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function X(Z){return le(void 0,Z)}function le(Z,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return q}for(const ie in q)!q.hasOwnProperty(ie)||!qe(ie)||(Z[ie]=le(Z[ie],q[ie]));return Z}function qe(Z){return"__proto__"!==Z}const Qe=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Z=process.env.__FIREBASE_DEFAULTS__;return Z?JSON.parse(Z):void 0})()||(()=>{if(typeof document>"u")return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=Z&&G(Z[1]);return q&&JSON.parse(q)})()}catch(Z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`)}},de=()=>{var Z;return null===(Z=Qe())||void 0===Z?void 0:Z.config},Me=Z=>{var q;return null===(q=Qe())||void 0===q?void 0:q[`_${Z}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,ie)=>{this.resolve=q,this.reject=ie})}wrapCallback(q){return(ie,Ne)=>{ie?this.reject(ie):this.resolve(Ne),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(ie):q(ie,Ne))}}}function xe(Z,q){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=q||"demo-project",me=Z.iat||0,dt=Z.sub||Z.user_id;if(!dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:me,exp:me+3600,auth_time:me,sub:dt,user_id:dt,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(wt)),""].join(".")}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ce(){var Z;const q=null===(Z=Qe())||void 0===Z?void 0:Z.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function sn(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Lr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function so(){const Z=ze();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Ri(){return!0===h.NODE_CLIENT||!0===h.NODE_ADMIN}function ps(){try{return"object"==typeof indexedDB}catch{return!1}}function Br(){return new Promise((Z,q)=>{try{let ie=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(Ne);me.onsuccess=()=>{me.result.close(),ie||self.indexedDB.deleteDatabase(Ne),Z(!0)},me.onupgradeneeded=()=>{ie=!1},me.onerror=()=>{var dt;q((null===(dt=me.error)||void 0===dt?void 0:dt.message)||"")}}catch(ie){q(ie)}})}function ye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ge extends Error{constructor(q,ie,Ne){super(ie),this.code=q,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ve.prototype.create)}}class ve{constructor(q,ie,Ne){this.service=q,this.serviceName=ie,this.errors=Ne}create(q,...ie){const Ne=ie[0]||{},me=`${this.service}/${q}`,dt=this.errors[q],wt=dt?function ke(Z,q){return Z.replace(be,(ie,Ne)=>{const me=q[Ne];return null!=me?String(me):`<${Ne}?>`})}(dt,Ne):"Error";return new ge(me,`${this.serviceName}: ${wt} (${me}).`,Ne)}}const be=/\{\$([^}]+)}/g;function pt(Z){return JSON.parse(Z)}function Wt(Z){return JSON.stringify(Z)}const kn=function(Z){let q={},ie={},Ne={},me="";try{const dt=Z.split(".");q=pt(G(dt[0])||""),ie=pt(G(dt[1])||""),me=dt[2],Ne=ie.d||{},delete ie.d}catch{}return{header:q,claims:ie,data:Ne,signature:me}},Sn=function(Z){const ie=kn(Z).claims;return!!ie&&"object"==typeof ie&&ie.hasOwnProperty("iat")},Kn=function(Z){const q=kn(Z).claims;return"object"==typeof q&&!0===q.admin};function Ft(Z,q){return Object.prototype.hasOwnProperty.call(Z,q)}function lr(Z,q){if(Object.prototype.hasOwnProperty.call(Z,q))return Z[q]}function Fn(Z){for(const q in Z)if(Object.prototype.hasOwnProperty.call(Z,q))return!1;return!0}function Tr(Z,q,ie){const Ne={};for(const me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&(Ne[me]=q.call(ie,Z[me],me,Z));return Ne}function yr(Z,q){if(Z===q)return!0;const ie=Object.keys(Z),Ne=Object.keys(q);for(const me of ie){if(!Ne.includes(me))return!1;const dt=Z[me],wt=q[me];if(zr(dt)&&zr(wt)){if(!yr(dt,wt))return!1}else if(dt!==wt)return!1}for(const me of Ne)if(!ie.includes(me))return!1;return!0}function zr(Z){return null!==Z&&"object"==typeof Z}function ao(Z){const q=[];for(const[ie,Ne]of Object.entries(Z))Array.isArray(Ne)?Ne.forEach(me=>{q.push(encodeURIComponent(ie)+"="+encodeURIComponent(me))}):q.push(encodeURIComponent(ie)+"="+encodeURIComponent(Ne));return q.length?"&"+q.join("&"):""}function Et(Z){const q={};return Z.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[me,dt]=Ne.split("=");q[decodeURIComponent(me)]=decodeURIComponent(dt)}}),q}function on(Z){const q=Z.indexOf("?");if(!q)return"";const ie=Z.indexOf("#",q);return Z.substring(q,ie>0?ie:void 0)}class xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,ie){ie||(ie=0);const Ne=this.W_;if("string"==typeof q)for(let hn=0;hn<16;hn++)Ne[hn]=q.charCodeAt(ie)<<24|q.charCodeAt(ie+1)<<16|q.charCodeAt(ie+2)<<8|q.charCodeAt(ie+3),ie+=4;else for(let hn=0;hn<16;hn++)Ne[hn]=q[ie]<<24|q[ie+1]<<16|q[ie+2]<<8|q[ie+3],ie+=4;for(let hn=16;hn<80;hn++){const qr=Ne[hn-3]^Ne[hn-8]^Ne[hn-14]^Ne[hn-16];Ne[hn]=4294967295&(qr<<1|qr>>>31)}let wr,Gt,me=this.chain_[0],dt=this.chain_[1],wt=this.chain_[2],_n=this.chain_[3],Tn=this.chain_[4];for(let hn=0;hn<80;hn++){hn<40?hn<20?(wr=_n^dt&(wt^_n),Gt=1518500249):(wr=dt^wt^_n,Gt=1859775393):hn<60?(wr=dt&wt|_n&(dt|wt),Gt=2400959708):(wr=dt^wt^_n,Gt=3395469782);const qr=(me<<5|me>>>27)+wr+Tn+Gt+Ne[hn]&4294967295;Tn=_n,_n=wt,wt=4294967295&(dt<<30|dt>>>2),dt=me,me=qr}this.chain_[0]=this.chain_[0]+me&4294967295,this.chain_[1]=this.chain_[1]+dt&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+_n&4294967295,this.chain_[4]=this.chain_[4]+Tn&4294967295}update(q,ie){if(null==q)return;void 0===ie&&(ie=q.length);const Ne=ie-this.blockSize;let me=0;const dt=this.buf_;let wt=this.inbuf_;for(;me<ie;){if(0===wt)for(;me<=Ne;)this.compress_(q,me),me+=this.blockSize;if("string"==typeof q){for(;me<ie;)if(dt[wt]=q.charCodeAt(me),++wt,++me,wt===this.blockSize){this.compress_(dt),wt=0;break}}else for(;me<ie;)if(dt[wt]=q[me],++wt,++me,wt===this.blockSize){this.compress_(dt),wt=0;break}}this.inbuf_=wt,this.total_+=ie}digest(){const q=[];let ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let me=this.blockSize-1;me>=56;me--)this.buf_[me]=255&ie,ie/=256;this.compress_(this.buf_);let Ne=0;for(let me=0;me<5;me++)for(let dt=24;dt>=0;dt-=8)q[Ne]=this.chain_[me]>>dt&255,++Ne;return q}}function Ln(Z,q){const ie=new Bn(Z,q);return ie.subscribe.bind(ie)}class Bn{constructor(q,ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ie,this.task.then(()=>{q(this)}).catch(Ne=>{this.error(Ne)})}next(q){this.forEachObserver(ie=>{ie.next(q)})}error(q){this.forEachObserver(ie=>{ie.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,ie,Ne){let me;if(void 0===q&&void 0===ie&&void 0===Ne)throw new Error("Missing Observer.");me=function An(Z,q){if("object"!=typeof Z||null===Z)return!1;for(const ie of q)if(ie in Z&&"function"==typeof Z[ie])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:ie,complete:Ne},void 0===me.next&&(me.next=Mr),void 0===me.error&&(me.error=Mr),void 0===me.complete&&(me.complete=Mr);const dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),dt}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let ie=0;ie<this.observers.length;ie++)this.sendOne(ie,q)}sendOne(q,ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{ie(this.observers[q])}catch(Ne){typeof console<"u"&&console.error&&console.error(Ne)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mr(){}const Lo=function(Z,q,ie,Ne){let me;if(Ne<q?me="at least "+q:Ne>ie&&(me=0===ie?"none":"no more than "+ie),me)throw new Error(Z+" failed: Was called with "+Ne+(1===Ne?" argument.":" arguments.")+" Expects "+me+".")};function gt(Z,q){return`${Z} failed: ${q} argument `}function Qt(Z,q,ie,Ne){if((!Ne||ie)&&"function"!=typeof ie)throw new Error(gt(Z,q)+"must be a valid function.")}function gs(Z,q,ie,Ne){if((!Ne||ie)&&("object"!=typeof ie||null===ie))throw new Error(gt(Z,q)+"must be a valid context object.")}const ts=function(Z){const q=[];let ie=0;for(let Ne=0;Ne<Z.length;Ne++){let me=Z.charCodeAt(Ne);if(me>=55296&&me<=56319){const dt=me-55296;Ne++,N(Ne<Z.length,"Surrogate pair missing trail surrogate."),me=65536+(dt<<10)+(Z.charCodeAt(Ne)-56320)}me<128?q[ie++]=me:me<2048?(q[ie++]=me>>6|192,q[ie++]=63&me|128):me<65536?(q[ie++]=me>>12|224,q[ie++]=me>>6&63|128,q[ie++]=63&me|128):(q[ie++]=me>>18|240,q[ie++]=me>>12&63|128,q[ie++]=me>>6&63|128,q[ie++]=63&me|128)}return q},Bo=function(Z){let q=0;for(let ie=0;ie<Z.length;ie++){const Ne=Z.charCodeAt(ie);Ne<128?q++:Ne<2048?q+=2:Ne>=55296&&Ne<=56319?(q+=4,ie++):q+=3}return q},Vo=1e3,ms=2,Rr=144e5,Pr=.5;function lo(Z,q=Vo,ie=ms){const Ne=q*Math.pow(ie,Z),me=Math.round(Pr*Ne*(Math.random()-.5)*2);return Math.min(Rr,Ne+me)}function vi(Z){return Z&&Z._delegate?Z._delegate:Z}},996:(ut,Oe,V)=>{"use strict";var h=V(7705);let N=null;function H(){return N}class _e{}const Ee=new h.nKC("DocumentToken");let Se=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(Ae)},providedIn:"platform"})}}return n})();const Ge=new h.nKC("Location Initialized");let Ae=(()=>{class n extends Se{constructor(){super(),this._doc=(0,h.WQX)(Ee),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(e){const i=H().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=H().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,o){this._history.pushState(e,i,o)}replaceState(e,i,o){this._history.replaceState(e,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function G(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function X(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function le(n){return n&&"?"!==n[0]?"?"+n:n}let qe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(rt)},providedIn:"root"})}}return n})();const Be=new h.nKC("appBaseHref");let rt=(()=>{class n extends qe{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,h.WQX)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return G(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+le(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${i}${o}`:i}pushState(e,i,o,u){const m=this.prepareExternalUrl(o+le(u));this._platformLocation.pushState(e,i,m)}replaceState(e,i,o,u){const m=this.prepareExternalUrl(o+le(u));this._platformLocation.replaceState(e,i,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Se),h.KVO(Be,8))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fe=(()=>{class n extends qe{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=G(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,o,u){let m=this.prepareExternalUrl(o+le(u));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(e,i,m)}replaceState(e,i,o,u){let m=this.prepareExternalUrl(o+le(u));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Se),h.KVO(Be,8))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})(),Je=(()=>{class n{constructor(e){this._subject=new h.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function de(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(X(vt(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+le(i))}normalize(e){return n.stripTrailingSlash(function _t(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,vt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",o=null){this._locationStrategy.pushState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+le(i)),o)}replaceState(e,i="",o=null){this._locationStrategy.replaceState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+le(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(o=>o(e,i))}subscribe(e,i,o){return this._subject.subscribe({next:e,error:i,complete:o})}static{this.normalizeQueryParams=le}static{this.joinWithSlash=G}static{this.stripTrailingSlash=X}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(qe))}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return function Qe(){return new Je((0,h.KVO)(qe))}()},providedIn:"root"})}}return n})();function vt(n){return n.replace(/\/index.html$/,"")}const uo=/\s+/,Gc=[];let Ja=(()=>{class n{constructor(e,i,o,u){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=o,this._renderer=u,this.initialClasses=Gc,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(uo):Gc}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(uo):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],o=e[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(uo).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h._q3),h.rXU(h.MKu),h.rXU(h.aKT),h.rXU(h.sFG))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class Kc{constructor(t,e,i,o){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uo=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,o){this._viewContainer=e,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((o,u,m)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new Kc(o.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)i.remove(null===u?void 0:u);else if(null!==u){const w=i.get(u);i.move(w,m),Bu(w,o)}});for(let o=0,u=i.length;o<u;o++){const w=i.get(o).context;w.index=o,w.count=u,w.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{Bu(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h.c1b),h.rXU(h.C4Q),h.rXU(h._q3))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Bu(n,t){n.context.$implicit=t.item}let ho=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new jd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Vu("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Vu("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h.c1b),h.rXU(h.C4Q))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class jd{constructor(){this.$implicit=null,this.ngIf=null}}function Vu(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.Tbb)(t)}'.`)}let jo=(()=>{class n{constructor(e,i,o){this._ngEl=e,this._differs=i,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[o,u]=e.split("."),m=-1===o.indexOf("-")?void 0:h.czy.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,o,u?`${i}${u}`:i,m):this._renderer.removeStyle(this._ngEl.nativeElement,o,m)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h.aKT),h.rXU(h.MKu),h.rXU(h.sFG))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();class Bl{createSubscription(t,e){return(0,h.O8t)(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){(0,h.O8t)(()=>t.unsubscribe())}}class dr{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Yc=new dr,Vl=new Bl;let Qc=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,h.jNT)(e))return Yc;if((0,h.zjR)(e))return Vl;throw function xi(n,t){return new h.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h.gRc,16))}}static{this.\u0275pipe=h.EJ8({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),is=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({})}}return n})();const fr="browser";function Ir(n){return"server"===n}let ii=(()=>{class n{static{this.\u0275prov=(0,h.jDH)({token:n,providedIn:"root",factory:()=>new zn((0,h.KVO)(Ee),window)})}}return n})();class zn{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Gi(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const u=o.shadowRoot;if(u){const m=u.getElementById(t)||u.querySelector(`[name="${t}"]`);if(m)return m}o=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(i-u[0],o-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ql extends _e{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wn extends Ql{static makeCurrent(){!function he(n){N||(N=n)}(new wn)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function zd(){return Xl=Xl||document.querySelector("base"),Xl?Xl.getAttribute("href"):null}();return null==e?null:function Qf(n){al=al||document.createElement("a"),al.setAttribute("href",n);const t=al.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Oi(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[o,u]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(o.trim()===t)return decodeURIComponent(u)}return null}(document.cookie,t)}}let al,Xl=null,Yd=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();const Ia=new h.nKC("EventManagerPlugins");let Da=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,o){return this._findPluginFor(i).addEventListener(e,i,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(u=>u.supports(e)),!i)throw new h.wOt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ia),h.KVO(h.SKi))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();class Zl{constructor(t){this._doc=t}}const Aa="ng-app-id";let Jl=(()=>{class n{constructor(e,i,o,u={}){this.doc=e,this.appId=i,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ir(u),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(o=>o.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Aa}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(e,i){const o=this.styleRef;if(o.has(e)){const u=o.get(e);return u.usage+=i,u.usage}return o.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const o=this.styleNodesInDOM,u=o?.get(i);if(u?.parentNode===e)return o.delete(i),u.removeAttribute(Aa),u;{const m=this.doc.createElement("style");return this.nonce&&m.setAttribute("nonce",this.nonce),m.textContent=i,this.platformIsServer&&m.setAttribute(Aa,this.appId),m}}addStyleToHost(e,i){const o=this.getStyleElement(e,i);e.appendChild(o);const u=this.styleRef,m=u.get(i)?.elements;m?m.push(o):u.set(i,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ee),h.KVO(h.sZ2),h.KVO(h.BIS,8),h.KVO(h.Agw))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();const Go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Us=/%COMP%/g,ec=new h.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Sa(n,t){return t.map(e=>e.replace(Us,n))}let bn=(()=>{class n{constructor(e,i,o,u,m,w,A,P=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=m,this.platformId=w,this.ngZone=A,this.nonce=P,this.rendererByCompId=new Map,this.platformIsServer=Ir(w),this.defaultRenderer=new yo(e,m,A,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===h.gXe.ShadowDom&&(i={...i,encapsulation:h.gXe.Emulated});const o=this.getOrCreateRenderer(e,i);return o instanceof Mn?o.applyToHost(e):o instanceof $s&&o.applyStyles(),o}getOrCreateRenderer(e,i){const o=this.rendererByCompId;let u=o.get(i.id);if(!u){const m=this.doc,w=this.ngZone,A=this.eventManager,P=this.sharedStylesHost,j=this.removeStylesOnCompDestroy,Y=this.platformIsServer;switch(i.encapsulation){case h.gXe.Emulated:u=new Mn(A,P,i,this.appId,j,m,w,Y);break;case h.gXe.ShadowDom:return new ed(A,P,e,i,m,w,this.nonce,Y);default:u=new $s(A,P,i,j,m,w,Y)}o.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Da),h.KVO(Jl),h.KVO(h.sZ2),h.KVO(ec),h.KVO(Ee),h.KVO(h.Agw),h.KVO(h.SKi),h.KVO(h.BIS))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();class yo{constructor(t,e,i,o){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Go[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Ju(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Ju(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?this.doc.querySelector(t):t;if(!i)throw new h.wOt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,o){if(o){e=o+":"+e;const u=Go[o];u?t.setAttributeNS(u,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const o=Go[i];o?t.removeAttributeNS(o,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,o){o&(h.czy.DashCase|h.czy.Important)?t.style.setProperty(e,i,o&h.czy.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&h.czy.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){if("string"==typeof t&&!(t=H().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function Ju(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ed extends yo{constructor(t,e,i,o,u,m,w,A){super(t,u,m,A),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const P=Sa(o.id,o.styles);for(const j of P){const Y=document.createElement("style");w&&Y.setAttribute("nonce",w),Y.textContent=j,this.shadowRoot.appendChild(Y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $s extends yo{constructor(t,e,i,o,u,m,w,A){super(t,u,m,w),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o,this.styles=A?Sa(A,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Mn extends $s{constructor(t,e,i,o,u,m,w,A){const P=o+"-"+i.id;super(t,e,i,u,m,w,A,P),this.contentAttr=function js(n){return"_ngcontent-%COMP%".replace(Us,n)}(P),this.hostAttr=function Qd(n){return"_nghost-%COMP%".replace(Us,n)}(P)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}let Er=(()=>{class n extends Zl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,o){return e.addEventListener(i,o,!1),()=>this.removeEventListener(e,i,o)}removeEventListener(e,i,o){return e.removeEventListener(i,o)}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ee))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();const Yh=["alt","control","meta","shift"],Ma={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ko={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ou=(()=>{class n extends Zl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,o){const u=n.parseEventName(i),m=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>H().onAndCancel(e,u.domEventName,m))}static parseEventName(e){const i=e.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(i.pop());let m="",w=i.indexOf("code");if(w>-1&&(i.splice(w,1),m="code."),Yh.forEach(P=>{const j=i.indexOf(P);j>-1&&(i.splice(j,1),m+=P+".")}),m+=u,0!=i.length||0===u.length)return null;const A={};return A.domEventName=o,A.fullKey=m,A}static matchEventFullKeyCode(e,i){let o=Ma[e.key]||e.key,u="";return i.indexOf("code.")>-1&&(o=e.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Yh.forEach(m=>{m!==o&&(0,Ko[m])(e)&&(u+=m+".")}),u+=o,u===i)}static eventCallback(e,i,o){return u=>{n.matchEventFullKeyCode(u,e)&&o.runGuarded(()=>i(u))}}static _normalizeKey(e){return"esc"===e?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ee))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();const Hr=(0,h.oH4)(h.fpN,"browser",[{provide:h.Agw,useValue:fr},{provide:h.PLl,useValue:function Ra(){wn.makeCurrent()},multi:!0},{provide:Ee,useFactory:function Pa(){return(0,h.TL$)(document),document},deps:[]}]),Xd=new h.nKC(""),li=[{provide:h.e01,useClass:class qd{addToWindow(t){h.JZv.getAngularTestability=(i,o=!0)=>{const u=t.findTestabilityInTree(i,o);if(null==u)throw new h.wOt(5103,!1);return u},h.JZv.getAllAngularTestabilities=()=>t.getAllTestabilities(),h.JZv.getAllAngularRootElements=()=>t.getAllRootElements(),h.JZv.frameworkStabilizers||(h.JZv.frameworkStabilizers=[]),h.JZv.frameworkStabilizers.push(i=>{const o=h.JZv.getAllAngularTestabilities();let u=o.length,m=!1;const w=function(A){m=m||A,u--,0==u&&i(m)};o.forEach(A=>{A.whenStable(w)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?H().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:h.WHO,useClass:h.NYb,deps:[h.SKi,h.giA,h.e01]},{provide:h.NYb,useClass:h.NYb,deps:[h.SKi,h.giA,h.e01]}],cl=[{provide:h.H8p,useValue:"root"},{provide:h.zcH,useFactory:function Rt(){return new h.zcH},deps:[]},{provide:Ia,useClass:Er,multi:!0,deps:[Ee,h.SKi,h.Agw]},{provide:Ia,useClass:ou,multi:!0,deps:[Ee]},bn,Jl,Da,{provide:h._9s,useExisting:bn},{provide:class ss{},useClass:Yd,deps:[]},[]];let qo=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:h.sZ2,useValue:e.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Xd,12))}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({providers:[...cl,...li],imports:[is,h.Hbi]})}}return n})(),Ws=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ee))}}static{this.\u0275prov=h.jDH({token:n,factory:function(i){let o=null;return o=i?new i:function L(){return new Ws((0,h.KVO)(Ee))}(),o},providedIn:"root"})}}return n})();typeof window<"u"&&window;var Un=V(1985),Na=V(8071),kr=V(8455),Dt=V(7673),Fr=V(4412);const{isArray:ka}=Array,{getPrototypeOf:dl,prototype:od,keys:Zr}=Object;function ls(n){if(1===n.length){const t=n[0];if(ka(t))return{args:t,keys:null};if(function In(n){return n&&"object"==typeof n&&dl(n)===od}(t)){const e=Zr(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var wi=V(3669),Ut=V(6354);const{isArray:cu}=Array;function Ui(n){return(0,Ut.T)(t=>function eh(n,t){return cu(t)?n(...t):n(t)}(n,t))}var cs=V(9326);function Ki(n,t){return n.reduce((e,i,o)=>(e[i]=t[o],e),{})}var Kt=V(4360),ad=V(5225);function Qo(...n){const t=(0,cs.lI)(n),e=(0,cs.ms)(n),{args:i,keys:o}=ls(n);if(0===i.length)return(0,kr.H)([],t);const u=new Un.c(function sc(n,t,e=wi.D){return i=>{Is(t,()=>{const{length:o}=n,u=new Array(o);let m=o,w=o;for(let A=0;A<o;A++)Is(t,()=>{const P=(0,kr.H)(n[A],t);let j=!1;P.subscribe((0,Kt._)(i,Y=>{u[A]=Y,j||(j=!0,w--),w||i.next(e(u.slice()))},()=>{--m||i.complete()}))},i)},i)}}(i,t,o?m=>Ki(o,m):wi.D));return e?u.pipe(Ui(e)):u}function Is(n,t,e){n?(0,ad.N)(e,n,t):t()}const Xo=(0,V(1853).L)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Zo=V(6365);function Ds(...n){return function hl(){return(0,Zo.U)(1)}()((0,kr.H)(n,(0,cs.lI)(n)))}var Ks=V(8750);function Dr(n){return new Un.c(t=>{(0,Ks.Tg)(n()).subscribe(t)})}var ld=V(1203);function Ao(n,t){const e=(0,Na.T)(n)?n:()=>n,i=o=>o.error(e());return new Un.c(t?o=>t.schedule(i,0,o):i)}var Jr=V(983),As=V(8359),Cr=V(9974);function Jo(){return(0,Cr.N)((n,t)=>{let e=null;n._refCount++;const i=(0,Kt._)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const o=n._connection,u=e;e=null,o&&(!u||o===u)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class uu extends Un.c{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Cr.S)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new As.yU;const e=this.getSubject();t.add(this.source.subscribe((0,Kt._)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=As.yU.EMPTY)}return t}refCount(){return Jo()(this)}}var Bt=V(1413),qn=V(5558);function Ts(n){return n<=0?()=>Jr.w:(0,Cr.N)((t,e)=>{let i=0;t.subscribe((0,Kt._)(e,o=>{++i<=n&&(e.next(o),n<=i&&e.complete())}))})}function Fa(...n){const t=(0,cs.lI)(n);return(0,Cr.N)((e,i)=>{(t?Ds(n,e,t):Ds(n,e)).subscribe(i)})}function us(n,t){return(0,Cr.N)((e,i)=>{let o=0;e.subscribe((0,Kt._)(i,u=>n.call(t,u,o++)&&i.next(u)))})}var mr=V(1397);function cd(n){return(0,Cr.N)((t,e)=>{let i=!1;t.subscribe((0,Kt._)(e,o=>{i=!0,e.next(o)},()=>{i||e.next(n),e.complete()}))})}function fl(n=oc){return(0,Cr.N)((t,e)=>{let i=!1;t.subscribe((0,Kt._)(e,o=>{i=!0,e.next(o)},()=>i?e.complete():e.error(n())))})}function oc(){return new Xo}function ea(n,t){const e=arguments.length>=2;return i=>i.pipe(n?us((o,u)=>n(o,u,i)):wi.D,Ts(1),e?cd(t):fl(()=>new Xo))}function ci(n,t){return(0,Na.T)(t)?(0,mr.Z)(n,t,1):(0,mr.Z)(n,1)}var Yn=V(8141);function ds(n){return(0,Cr.N)((t,e)=>{let u,i=null,o=!1;i=t.subscribe((0,Kt._)(e,void 0,void 0,m=>{u=(0,Ks.Tg)(n(m,ds(n)(t))),i?(i.unsubscribe(),i=null,u.subscribe(e)):o=!0})),o&&(i.unsubscribe(),i=null,u.subscribe(e))})}function zs(n,t){return(0,Cr.N)(function pl(n,t,e,i,o){return(u,m)=>{let w=e,A=t,P=0;u.subscribe((0,Kt._)(m,j=>{const Y=P++;A=w?n(A,j,Y):(w=!0,j),i&&m.next(A)},o&&(()=>{w&&m.next(A),m.complete()})))}}(n,t,arguments.length>=2,!0))}function To(n){return n<=0?()=>Jr.w:(0,Cr.N)((t,e)=>{let i=[];t.subscribe((0,Kt._)(e,o=>{i.push(o),n<i.length&&i.shift()},()=>{for(const o of i)e.next(o);e.complete()},void 0,()=>{i=null}))})}function La(n){return(0,Cr.N)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}var ml=V(5343);function Ba(n){return(0,Cr.N)((t,e)=>{(0,Ks.Tg)(n).subscribe((0,Kt._)(e,()=>e.complete(),ml.l)),!e.closed&&t.subscribe(e)})}const Yt="primary",_l=Symbol("RouteTitle");class ac{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function zi(n){return new ac(n)}function So(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const o={};for(let u=0;u<i.length;u++){const m=i[u],w=n[u];if(m.startsWith(":"))o[m.substring(1)]=w;else if(m!==w.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function Ss(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let o;for(let u=0;u<e.length;u++)if(o=e[u],!ta(n[o],t[o]))return!1;return!0}function ta(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((o,u)=>i[u]===o)}return n===t}function Mo(n){return n.length>0?n[n.length-1]:null}function Qn(n){return function ul(n){return!!n&&(n instanceof Un.c||(0,Na.T)(n.lift)&&(0,Na.T)(n.subscribe))}(n)?n:(0,h.jNT)(n)?(0,kr.H)(Promise.resolve(n)):(0,Dt.of)(n)}const na={exact:function cc(n,t,e){if(!Ie(n.segments,t.segments)||!T(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!cc(n.children[i],t.children[i],e))return!1;return!0},subset:ra},th={exact:function ud(n,t){return Ss(n,t)},subset:function dd(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>ta(n[e],t[e]))},ignored:()=>!0};function lc(n,t,e){return na[e.paths](n.root,t.root,e.matrixParams)&&th[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ra(n,t,e){return I(n,t,t.segments,e)}function I(n,t,e,i){if(n.segments.length>e.length){const o=n.segments.slice(0,e.length);return!(!Ie(o,e)||t.hasChildren()||!T(o,e,i))}if(n.segments.length===e.length){if(!Ie(n.segments,e)||!T(n.segments,e,i))return!1;for(const o in t.children)if(!n.children[o]||!ra(n.children[o],t.children[o],i))return!1;return!0}{const o=e.slice(0,n.segments.length),u=e.slice(n.segments.length);return!!(Ie(n.segments,o)&&T(n.segments,o,i)&&n.children[Yt])&&I(n.children[Yt],t,u,i)}}function T(n,t,e){return t.every((i,o)=>th[e](n[o].parameters,i.parameters))}class O{constructor(t=new B([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zi(this.queryParams)),this._queryParamMap}toString(){return $t.serialize(this)}}class B{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ht(this)}}class J{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=zi(this.parameters)),this._parameterMap}toString(){return yl(this)}}function Ie(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Ze=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return new ft},providedIn:"root"})}}return n})();class ft{parse(t){const e=new ef(t);return new O(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${ui(t.root,!0)}`,i=function El(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(o=>`${di(e)}=${di(o)}`).join("&"):`${di(e)}=${di(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function uc(n){return encodeURI(n)}(t.fragment)}`:""}`}}const $t=new ft;function Ht(n){return n.segments.map(t=>yl(t)).join("/")}function ui(n,t){if(!n.hasChildren())return Ht(n);if(t){const e=n.children[Yt]?ui(n.children[Yt],!1):"",i=[];return Object.entries(n.children).forEach(([o,u])=>{o!==Yt&&i.push(`${o}:${ui(u,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Xe(n,t){let e=[];return Object.entries(n.children).forEach(([i,o])=>{i===Yt&&(e=e.concat(t(o,i)))}),Object.entries(n.children).forEach(([i,o])=>{i!==Yt&&(e=e.concat(t(o,i)))}),e}(n,(i,o)=>o===Yt?[ui(n.children[Yt],!1)]:[`${o}:${ui(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${Ht(n)}/${e[0]}`:`${Ht(n)}/(${e.join("//")})`}}function pn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function di(n){return pn(n).replace(/%3B/gi,";")}function xn(n){return pn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ei(n){return decodeURIComponent(n)}function bi(n){return ei(n.replace(/\+/g,"%20"))}function yl(n){return`${xn(n.path)}${function qi(n){return Object.keys(n).map(t=>`;${xn(t)}=${xn(n[t])}`).join("")}(n.parameters)}`}const Zh=/^[^\/()?;#]+/;function Yi(n){const t=n.match(Zh);return t?t[0]:""}const hu=/^[^\/()?;=#]+/,ep=/^[^=?&#]+/,tp=/^[^&#]+/;class ef{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new B([],{}):new B([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Yt]=new B(t,e)),i}parseSegment(){const t=Yi(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new h.wOt(4009,!1);return this.capture(t),new J(ei(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function Ro(n){const t=n.match(hu);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=Yi(this.remaining);o&&(i=o,this.capture(i))}t[ei(e)]=ei(i)}parseQueryParam(t){const e=function Jh(n){const t=n.match(ep);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const m=function Ms(n){const t=n.match(tp);return t?t[0]:""}(this.remaining);m&&(i=m,this.capture(i))}const o=bi(e),u=bi(i);if(t.hasOwnProperty(o)){let m=t[o];Array.isArray(m)||(m=[m],t[o]=m),m.push(u)}else t[o]=u}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Yi(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.wOt(4010,!1);let u;i.indexOf(":")>-1?(u=i.slice(0,i.indexOf(":")),this.capture(u),this.capture(":")):t&&(u=Yt);const m=this.parseChildren();e[u]=1===Object.keys(m).length?m[Yt]:new B([],m),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new h.wOt(4011,!1)}}function dc(n){return n.segments.length>0?new B([],{[Yt]:n}):n}function np(n){const t={};for(const i of Object.keys(n.children)){const u=np(n.children[i]);if(i===Yt&&0===u.segments.length&&u.hasChildren())for(const[m,w]of Object.entries(u.children))t[m]=w;else(u.segments.length>0||u.hasChildren())&&(t[i]=u)}return function nh(n){if(1===n.numberOfChildren&&n.children[Yt]){const t=n.children[Yt];return new B(n.segments.concat(t.segments),t.children)}return n}(new B(n.segments,t))}function hc(n){return n instanceof O}function Va(n){let t;const o=dc(function e(u){const m={};for(const A of u.children){const P=e(A);m[A.outlet]=P}const w=new B(u.url,m);return u===n&&(t=w),w}(n.root));return t??o}function Qi(n,t,e,i){let o=n;for(;o.parent;)o=o.parent;if(0===t.length)return hd(o,o,o,e,i);const u=function fd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pc(!0,0,n);let t=0,e=!1;const i=n.reduce((o,u,m)=>{if("object"==typeof u&&null!=u){if(u.outlets){const w={};return Object.entries(u.outlets).forEach(([A,P])=>{w[A]="string"==typeof P?P.split("/"):P}),[...o,{outlets:w}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===m?(u.split("/").forEach((w,A)=>{0==A&&"."===w||(0==A&&""===w?e=!0:".."===w?t++:""!=w&&o.push(w))}),o):[...o,u]},[]);return new pc(e,t,i)}(t);if(u.toRoot())return hd(o,o,new B([],{}),e,i);const m=function rh(n,t,e){if(n.isAbsolute)return new gc(t,!0,0);if(!e)return new gc(t,!1,NaN);if(null===e.parent)return new gc(e,!0,0);const i=Rs(n.commands[0])?0:1;return function rp(n,t,e){let i=n,o=t,u=e;for(;u>o;){if(u-=o,i=i.parent,!i)throw new h.wOt(4005,!1);o=i.segments.length}return new gc(i,!1,o-u)}(e,e.segments.length-1+i,n.numberOfDoubleDots)}(u,o,n),w=m.processChildren?wl(m.segmentGroup,m.index,u.commands):Cl(m.segmentGroup,m.index,u.commands);return hd(o,m.segmentGroup,w,e,i)}function Rs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fc(n){return"object"==typeof n&&null!=n&&n.outlets}function hd(n,t,e,i,o){let m,u={};i&&Object.entries(i).forEach(([A,P])=>{u[A]=Array.isArray(P)?P.map(j=>`${j}`):`${P}`}),m=n===t?e:ia(n,t,e);const w=dc(np(m));return new O(w,u,o)}function ia(n,t,e){const i={};return Object.entries(n.children).forEach(([o,u])=>{i[o]=u===t?e:ia(u,t,e)}),new B(n.segments,i)}class pc{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Rs(i[0]))throw new h.wOt(4003,!1);const o=i.find(fc);if(o&&o!==Mo(i))throw new h.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gc{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Cl(n,t,e){if(n||(n=new B([],{})),0===n.segments.length&&n.hasChildren())return wl(n,t,e);const i=function tf(n,t,e){let i=0,o=t;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=e.length)return u;const m=n.segments[o],w=e[i];if(fc(w))break;const A=`${w}`,P=i<e.length-1?e[i+1]:null;if(o>0&&void 0===A)break;if(A&&P&&"object"==typeof P&&void 0===P.outlets){if(!Po(A,P,m))return u;i+=2}else{if(!Po(A,{},m))return u;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(n,t,e),o=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const u=new B(n.segments.slice(0,i.pathIndex),{});return u.children[Yt]=new B(n.segments.slice(i.pathIndex),n.children),wl(u,0,o)}return i.match&&0===o.length?new B(n.segments,{}):i.match&&!n.hasChildren()?ih(n,t,e):i.match?wl(n,0,o):ih(n,t,e)}function wl(n,t,e){if(0===e.length)return new B(n.segments,{});{const i=function Ua(n){return fc(n[0])?n[0].outlets:{[Yt]:n}}(e),o={};if(Object.keys(i).some(u=>u!==Yt)&&n.children[Yt]&&1===n.numberOfChildren&&0===n.children[Yt].segments.length){const u=wl(n.children[Yt],t,e);return new B(n.segments,u.children)}return Object.entries(i).forEach(([u,m])=>{"string"==typeof m&&(m=[m]),null!==m&&(o[u]=Cl(n.children[u],t,m))}),Object.entries(n.children).forEach(([u,m])=>{void 0===i[u]&&(o[u]=m)}),new B(n.segments,o)}}function ih(n,t,e){const i=n.segments.slice(0,t);let o=0;for(;o<e.length;){const u=e[o];if(fc(u)){const A=sh(u.outlets);return new B(i,A)}if(0===o&&Rs(e[0])){i.push(new J(n.segments[t].path,Ha(e[0]))),o++;continue}const m=fc(u)?u.outlets[Yt]:`${u}`,w=o<e.length-1?e[o+1]:null;m&&w&&Rs(w)?(i.push(new J(m,Ha(w))),o+=2):(i.push(new J(m,{})),o++)}return new B(i,{})}function sh(n){const t={};return Object.entries(n).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(t[e]=ih(new B([],{}),0,i))}),t}function Ha(n){const t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Po(n,t,e){return n==e.path&&Ss(t,e.parameters)}const mc="imperative";class qs{constructor(t,e){this.id=t,this.url=e}}class _c extends qs{constructor(t,e,i="imperative",o=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oo extends qs{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vc extends qs{constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yc extends qs{constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o,this.type=16}}class ja extends qs{constructor(t,e,i,o){super(t,e),this.error=i,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ip extends qs{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pd extends qs{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sa extends qs{constructor(t,e,i,o,u){super(t,e),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nf extends qs{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rf extends qs{constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d_{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sf{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class h_{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gd{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fu{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class af{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oh{}class bl{constructor(t){this.url=t}}class Vt{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wa,this.attachRef=null}}let Wa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Vt,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class md{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ga(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=Ga(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=lf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return lf(t,this._root).map(e=>e.value)}}function Ga(n,t){if(n===t.value)return t;for(const e of t.children){const i=Ga(n,e);if(i)return i}return null}function lf(n,t){if(n===t.value)return[t];for(const e of t.children){const i=lf(n,e);if(i.length)return i.unshift(t),i}return[]}class Hi{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function oa(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Nn extends md{constructor(t,e){super(t),this.snapshot=e,gu(this,t)}toString(){return this.snapshot.toString()}}function Ec(n,t){const e=function cf(n,t){const m=new Cc([],{},{},"",{},Yt,t,null,{});return new pu("",new Hi(m,[]))}(0,t),i=new Fr.t([new J("",{})]),o=new Fr.t({}),u=new Fr.t({}),m=new Fr.t({}),w=new Fr.t(""),A=new Ys(i,o,m,w,u,Yt,t,e.root);return A.snapshot=e.root,new Nn(new Hi(A,[]),e)}class Ys{constructor(t,e,i,o,u,m,w,A){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=u,this.outlet=m,this.component=w,this._futureSnapshot=A,this.title=this.dataSubject?.pipe((0,Ut.T)(P=>P[_l]))??(0,Dt.of)(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ut.T)(t=>zi(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ut.T)(t=>zi(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _d(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const o=e[i],u=e[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(u.component)break;i--}}return function vd(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Cc{get title(){return this.data?.[_l]}constructor(t,e,i,o,u,m,w,A,P){this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=u,this.outlet=m,this.component=w,this.routeConfig=A,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pu extends md{constructor(t,e){super(e),this.url=t,gu(this,e)}toString(){return Ii(this._root)}}function gu(n,t){t.value._routerState=n,t.children.forEach(e=>gu(n,e))}function Ii(n){const t=n.children.length>0?` { ${n.children.map(Ii).join(", ")} } `:"";return`${n.value}${t}`}function hi(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ss(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ss(t.params,e.params)||n.paramsSubject.next(e.params),function vl(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ss(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),Ss(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yd(n,t){const e=Ss(n.params,t.params)&&function oe(n,t){return Ie(n,t)&&n.every((e,i)=>Ss(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||yd(n.parent,t.parent))}let lh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Yt,this.activateEvents=new h.bkB,this.deactivateEvents=new h.bkB,this.attachEvents=new h.bkB,this.detachEvents=new h.bkB,this.parentContexts=(0,h.WQX)(Wa),this.location=(0,h.WQX)(h.c1b),this.changeDetector=(0,h.WQX)(h.gRc),this.environmentInjector=(0,h.WQX)(h.uvJ),this.inputBinder=(0,h.WQX)(Cd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:o}=e.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.wOt(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new h.wOt(4013,!1);this._activatedRoute=e;const o=this.location,m=e.snapshot.component,w=this.parentContexts.getOrCreateContext(this.name).children,A=new Ed(e,w,o.injector);this.activated=o.createComponent(m,{index:o.length,injector:A,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=h.FsC({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.OA$]})}}return n})();class Ed{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Ys?this.route:t===Wa?this.childContexts:this.parent.get(t,e)}}const Cd=new h.nKC("");let Xi=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,o=Qo([i.queryParams,i.params,i.data]).pipe((0,qn.n)(([u,m,w],A)=>(w={...u,...m,...w},0===A?(0,Dt.of)(w):Promise.resolve(w)))).subscribe(u=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const m=(0,h.HJs)(i.component);if(m)for(const{templateName:w}of m.inputs)e.activatedComponentRef.setInput(w,u[w]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();function Ka(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const o=function sp(n,t,e){return t.children.map(i=>{for(const o of e.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return Ka(n,i,o);return Ka(n,i)})}(n,t,e);return new Hi(i,o)}{if(n.shouldAttach(t.value)){const u=n.retrieve(t.value);if(null!==u){const m=u.route;return m.value._futureSnapshot=t.value,m.children=t.children.map(w=>Ka(n,w)),m}}const i=function za(n){return new Ys(new Fr.t(n.url),new Fr.t(n.params),new Fr.t(n.queryParams),new Fr.t(n.fragment),new Fr.t(n.data),n.outlet,n.component,n)}(t.value),o=t.children.map(u=>Ka(n,u));return new Hi(i,o)}}const jr="ngNavigationCancelingError";function wd(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=hc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=ch(!1,0,t);return o.url=e,o.navigationBehaviorOptions=i,o}function ch(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[jr]=!0,i.cancellationCode=t,e&&(i.url=e),i}function $r(n){return n&&n[jr]}let mu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.aNF],decls:1,vars:0,template:function(i,o){1&i&&h.nrm(0,"router-outlet")},dependencies:[lh],encapsulation:2})}}return n})();function Q(n){const t=n.children&&n.children.map(Q),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Yt&&(e.component=mu),e}function re(n){return n.outlet||Yt}function et(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Cn{constructor(t,e,i,o,u){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=u}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),hi(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const o=oa(e);t.children.forEach(u=>{const m=u.value.outlet;this.deactivateRoutes(u,o[m],i),delete o[m]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,i)})}deactivateRoutes(t,e,i){const o=t.value,u=e?e.value:null;if(o===u)if(o.component){const m=i.getContext(o.outlet);m&&this.deactivateChildRoutes(t,e,m.children)}else this.deactivateChildRoutes(t,e,i);else u&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,u=oa(t);for(const m of Object.keys(u))this.deactivateRouteAndItsChildren(u[m],o);if(i&&i.outlet){const m=i.outlet.detach(),w=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:m,route:t,contexts:w})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,u=oa(t);for(const m of Object.keys(u))this.deactivateRouteAndItsChildren(u[m],o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){const o=oa(e);t.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],i),this.forwardEvent(new fu(u.value.snapshot))}),t.children.length&&this.forwardEvent(new gd(t.value.snapshot))}activateRoutes(t,e,i){const o=t.value,u=e?e.value:null;if(hi(o),o===u)if(o.component){const m=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,m.children)}else this.activateChildRoutes(t,e,i);else if(o.component){const m=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const w=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),m.children.onOutletReAttached(w.contexts),m.attachRef=w.componentRef,m.route=w.route.value,m.outlet&&m.outlet.attach(w.componentRef,w.route.value),hi(w.route.value),this.activateChildRoutes(t,null,m.children)}else{const w=et(o.snapshot);m.attachRef=null,m.route=o,m.injector=w,m.outlet&&m.outlet.activateWith(o,m.injector),this.activateChildRoutes(t,null,m.children)}}else this.activateChildRoutes(t,null,i)}}class Zi{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class aa{constructor(t,e){this.component=t,this.route=e}}function bc(n,t,e){const i=n._root;return Ic(i,t?t._root:null,e,[i.value])}function la(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,h.LfX)(n)?t.get(n):n:i}function Ic(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=oa(t);return n.children.forEach(m=>{(function bd(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,m=t?t.value:null,w=e?e.getContext(n.value.outlet):null;if(m&&u.routeConfig===m.routeConfig){const A=function _u(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ie(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ie(n.url,t.url)||!Ss(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yd(n,t)||!Ss(n.queryParams,t.queryParams);default:return!yd(n,t)}}(m,u,u.routeConfig.runGuardsAndResolvers);A?o.canActivateChecks.push(new Zi(i)):(u.data=m.data,u._resolvedData=m._resolvedData),Ic(n,t,u.component?w?w.children:null:e,i,o),A&&w&&w.outlet&&w.outlet.isActivated&&o.canDeactivateChecks.push(new aa(w.outlet.component,m))}else m&&Dc(t,w,o),o.canActivateChecks.push(new Zi(i)),Ic(n,null,u.component?w?w.children:null:e,i,o)})(m,u[m.value.outlet],e,i.concat([m.value]),o),delete u[m.value.outlet]}),Object.entries(u).forEach(([m,w])=>Dc(w,e.getContext(m),o)),o}function Dc(n,t,e){const i=oa(n),o=n.value;Object.entries(i).forEach(([u,m])=>{Dc(m,o.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new aa(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function Dl(n){return"function"==typeof n}function g_(n){return n instanceof Xo||"EmptyError"===n?.name}const up=Symbol("INITIAL_VALUE");function Di(){return(0,qn.n)(n=>Qo(n.map(t=>t.pipe(Ts(1),Fa(up)))).pipe((0,Ut.T)(t=>{for(const e of t)if(!0!==e){if(e===up)return up;if(!1===e||e instanceof O)return e}return!0}),us(t=>t!==up),Ts(1)))}function Pg(n){return(0,ld.F)((0,Yn.M)(t=>{if(hc(t))throw wd(0,t)}),(0,Ut.T)(t=>!0===t))}class fh{constructor(t){this.segmentGroup=t||null}}class Og{constructor(t){this.urlTree=t}}function Ac(n){return Ao(new fh(n))}function ph(n){return Ao(new Og(n))}class fp{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new h.wOt(4002,!1)}lineralizeSegments(t,e){let i=[],o=e.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return(0,Dt.of)(i);if(o.numberOfChildren>1||!o.children[Yt])return Ao(new h.wOt(4e3,!1));o=o.children[Yt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,o){const u=this.createSegmentGroup(t,e.root,i,o);return new O(u,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Object.entries(t).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const w=u.substring(1);i[o]=e[w]}else i[o]=u}),i}createSegmentGroup(t,e,i,o){const u=this.createSegments(t,e.segments,i,o);let m={};return Object.entries(e.children).forEach(([w,A])=>{m[w]=this.createSegmentGroup(t,A,i,o)}),new B(u,m)}createSegments(t,e,i,o){return e.map(u=>u.path.startsWith(":")?this.findPosParam(t,u,o):this.findOrReturn(u,i))}findPosParam(t,e,i){const o=i[e.path.substring(1)];if(!o)throw new h.wOt(4001,!1);return o}findOrReturn(t,e){let i=0;for(const o of e){if(o.path===t.path)return e.splice(i),o;i++}return t}}const pp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ng(n,t,e,i,o){const u=Dd(n,t,e);return u.matched?(i=function dh(n,t){return n.providers&&!n._injector&&(n._injector=(0,h.Ol2)(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,i),function v_(n,t,e,i){const o=t.canMatch;if(!o||0===o.length)return(0,Dt.of)(!0);const u=o.map(m=>{const w=la(m,n);return Qn(function cp(n){return n&&Dl(n.canMatch)}(w)?w.canMatch(t,e):n.runInContext(()=>w(t,e)))});return(0,Dt.of)(u).pipe(Di(),Pg())}(i,t,e).pipe((0,Ut.T)(m=>!0===m?u:{...pp}))):(0,Dt.of)(u)}function Dd(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...pp}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||So)(e,n,t);if(!o)return{...pp};const u={};Object.entries(o.posParams??{}).forEach(([w,A])=>{u[w]=A.path});const m=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:m,positionalParamSegments:o.posParams??{}}}function E_(n,t,e,i){return e.length>0&&function Gy(n,t,e){return e.some(i=>df(n,t,i)&&re(i)!==Yt)}(n,e,i)?{segmentGroup:new B(t,Wy(i,new B(e,n.children))),slicedSegments:[]}:0===e.length&&function Ky(n,t,e){return e.some(i=>df(n,t,i))}(n,e,i)?{segmentGroup:new B(n.segments,C_(n,0,e,i,n.children)),slicedSegments:e}:{segmentGroup:new B(n.segments,n.children),slicedSegments:e}}function C_(n,t,e,i,o){const u={};for(const m of i)if(df(n,e,m)&&!o[re(m)]){const w=new B([],{});u[re(m)]=w}return{...o,...u}}function Wy(n,t){const e={};e[Yt]=t;for(const i of n)if(""===i.path&&re(i)!==Yt){const o=new B([],{});e[re(i)]=o}return e}function df(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class Ad{constructor(t,e,i,o,u,m,w){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=m,this.urlSerializer=w,this.allowRedirects=!0,this.applyRedirects=new fp(this.urlSerializer,this.urlTree)}noMatchError(t){return new h.wOt(4002,!1)}recognize(){const t=E_(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Yt).pipe(ds(e=>{if(e instanceof Og)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof fh?this.noMatchError(e):e}),(0,Ut.T)(e=>{const i=new Cc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Yt,this.rootComponentType,null,{}),o=new Hi(i,e),u=new pu("",o),m=function Tg(n,t,e=null,i=null){return Qi(Va(n),t,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return m.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(m),this.inheritParamsAndData(u._root),{state:u,tree:m}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Yt).pipe(ds(i=>{throw i instanceof fh?this.noMatchError(i):i}))}inheritParamsAndData(t){const e=t.value,i=_d(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,o,!0)}processChildren(t,e,i){const o=[];for(const u of Object.keys(i.children))"primary"===u?o.unshift(u):o.push(u);return(0,kr.H)(o).pipe(ci(u=>{const m=i.children[u],w=function Ue(n,t){const e=n.filter(i=>re(i)===t);return e.push(...n.filter(i=>re(i)!==t)),e}(e,u);return this.processSegmentGroup(t,w,m,u)}),zs((u,m)=>(u.push(...m),u)),cd(null),function gl(n,t){const e=arguments.length>=2;return i=>i.pipe(n?us((o,u)=>n(o,u,i)):wi.D,To(1),e?cd(t):fl(()=>new Xo))}(),(0,mr.Z)(u=>{if(null===u)return Ac(i);const m=Yy(u);return function zy(n){n.sort((t,e)=>t.value.outlet===Yt?-1:e.value.outlet===Yt?1:t.value.outlet.localeCompare(e.value.outlet))}(m),(0,Dt.of)(m)}))}processSegment(t,e,i,o,u,m){return(0,kr.H)(e).pipe(ci(w=>this.processSegmentAgainstRoute(w._injector??t,e,w,i,o,u,m).pipe(ds(A=>{if(A instanceof fh)return(0,Dt.of)(null);throw A}))),ea(w=>!!w),ds(w=>{if(g_(w))return function gp(n,t,e){return 0===t.length&&!n.children[e]}(i,o,u)?(0,Dt.of)([]):Ac(i);throw w}))}processSegmentAgainstRoute(t,e,i,o,u,m,w){return function w_(n,t,e,i){return!!(re(n)===i||i!==Yt&&df(t,e,n))&&("**"===n.path||Dd(t,n,e).matched)}(i,o,u,m)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,o,i,u,m,w):w&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,o,e,i,u,m):Ac(o):Ac(o)}expandSegmentAgainstRouteUsingRedirect(t,e,i,o,u,m){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,o,m):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,o,u,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,o){const u=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?ph(u):this.applyRedirects.lineralizeSegments(i,u).pipe((0,mr.Z)(m=>{const w=new B(m,{});return this.processSegment(t,e,w,m,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,o,u,m){const{matched:w,consumedSegments:A,remainingSegments:P,positionalParamSegments:j}=Dd(e,o,u);if(!w)return Ac(e);const Y=this.applyRedirects.applyRedirectCommands(A,o.redirectTo,j);return o.redirectTo.startsWith("/")?ph(Y):this.applyRedirects.lineralizeSegments(o,Y).pipe((0,mr.Z)(se=>this.processSegment(t,i,e,se.concat(P),m,!1)))}matchSegmentAgainstRoute(t,e,i,o,u,m){let w;if("**"===i.path){const A=o.length>0?Mo(o).parameters:{},P=new Cc(o,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mp(i),re(i),i.component??i._loadedComponent??null,i,b_(i));w=(0,Dt.of)({snapshot:P,consumedSegments:[],remainingSegments:[]}),e.children={}}else w=Ng(e,i,o,t).pipe((0,Ut.T)(({matched:A,consumedSegments:P,remainingSegments:j,parameters:Y})=>A?{snapshot:new Cc(P,Y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mp(i),re(i),i.component??i._loadedComponent??null,i,b_(i)),consumedSegments:P,remainingSegments:j}:null));return w.pipe((0,qn.n)(A=>null===A?Ac(e):this.getChildConfig(t=i._injector??t,i,o).pipe((0,qn.n)(({routes:P})=>{const j=i._loadedInjector??t,{snapshot:Y,consumedSegments:se,remainingSegments:je}=A,{segmentGroup:tt,slicedSegments:St}=E_(e,se,je,P);if(0===St.length&&tt.hasChildren())return this.processChildren(j,P,tt).pipe((0,Ut.T)(or=>null===or?null:[new Hi(Y,or)]));if(0===P.length&&0===St.length)return(0,Dt.of)([new Hi(Y,[])]);const Jt=re(i)===u;return this.processSegment(j,P,tt,St,Jt?Yt:u,!0).pipe((0,Ut.T)(or=>[new Hi(Y,or)]))}))))}getChildConfig(t,e,i){return e.children?(0,Dt.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,Dt.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function hp(n,t,e,i){const o=t.canLoad;if(void 0===o||0===o.length)return(0,Dt.of)(!0);const u=o.map(m=>{const w=la(m,n);return Qn(function Sg(n){return n&&Dl(n.canLoad)}(w)?w.canLoad(t,e):n.runInContext(()=>w(t,e)))});return(0,Dt.of)(u).pipe(Di(),Pg())}(t,e,i).pipe((0,mr.Z)(o=>o?this.configLoader.loadChildren(t,e).pipe((0,Yn.M)(u=>{e._loadedRoutes=u.routes,e._loadedInjector=u.injector})):function xg(n){return Ao(ch(!1,3))}())):(0,Dt.of)({routes:[],injector:t})}}function qy(n){const t=n.value.routeConfig;return t&&""===t.path}function Yy(n){const t=[],e=new Set;for(const i of n){if(!qy(i)){t.push(i);continue}const o=t.find(u=>i.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...i.children),e.add(o)):t.push(i)}for(const i of e){const o=Yy(i.children);t.push(new Hi(i.value,o))}return t.filter(i=>!e.has(i))}function mp(n){return n.data||{}}function b_(n){return n.resolve||{}}function kg(n){return"string"==typeof n.title||null===n.title}function Fg(n){return(0,qn.n)(t=>{const e=n(t);return e?(0,kr.H)(e).pipe((0,Ut.T)(()=>t)):(0,Dt.of)(t)})}const mh=new h.nKC("ROUTES");let Lg=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.WQX)(h.Ql9)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,Dt.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Qn(e.loadComponent()).pipe((0,Ut.T)(Tc),(0,Yn.M)(u=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=u}),La(()=>{this.componentLoaders.delete(e)})),o=new uu(i,()=>new Bt.B).pipe(Jo());return this.componentLoaders.set(e,o),o}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Dt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const u=function Qy(n,t,e,i){return Qn(n.loadChildren()).pipe((0,Ut.T)(Tc),(0,mr.Z)(o=>o instanceof h.Co$||Array.isArray(o)?(0,Dt.of)(o):(0,kr.H)(t.compileModuleAsync(o))),(0,Ut.T)(o=>{i&&i(n);let u,m,w=!1;return Array.isArray(o)?(m=o,!0):(u=o.create(e).injector,m=u.get(mh,[],{optional:!0,self:!0}).flat()),{routes:m.map(Q),injector:u}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(La(()=>{this.childrenLoaders.delete(i)})),m=new uu(u,()=>new Bt.B).pipe(Jo());return this.childrenLoaders.set(i,m),m}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Tc(n){return function Xy(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let vu=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Bt.B,this.transitionAbortSubject=new Bt.B,this.configLoader=(0,h.WQX)(Lg),this.environmentInjector=(0,h.WQX)(h.uvJ),this.urlSerializer=(0,h.WQX)(Ze),this.rootContexts=(0,h.WQX)(Wa),this.inputBindingEnabled=null!==(0,h.WQX)(Cd,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Dt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new sf(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new d_(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,o){return this.transitions=new Fr.t({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(us(u=>0!==u.id),(0,Ut.T)(u=>({...u,extractedUrl:e.urlHandlingStrategy.extract(u.rawUrl)})),(0,qn.n)(u=>{this.currentTransition=u;let m=!1,w=!1;return(0,Dt.of)(u).pipe((0,Yn.M)(A=>{this.currentNavigation={id:A.id,initialUrl:A.rawUrl,extractedUrl:A.extractedUrl,trigger:A.source,extras:A.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,qn.n)(A=>{const P=A.currentBrowserUrl.toString(),j=!e.navigated||A.extractedUrl.toString()!==P||P!==A.currentUrlTree.toString();if(!j&&"reload"!==(A.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const se="";return this.events.next(new yc(A.id,this.urlSerializer.serialize(A.rawUrl),se,0)),A.resolve(null),Jr.w}if(e.urlHandlingStrategy.shouldProcessUrl(A.rawUrl))return(0,Dt.of)(A).pipe((0,qn.n)(se=>{const je=this.transitions?.getValue();return this.events.next(new _c(se.id,this.urlSerializer.serialize(se.extractedUrl),se.source,se.restoredState)),je!==this.transitions?.getValue()?Jr.w:Promise.resolve(se)}),function gh(n,t,e,i,o,u){return(0,mr.Z)(m=>function hf(n,t,e,i,o,u,m="emptyOnly"){return new Ad(n,t,e,i,o,m,u).recognize()}(n,t,e,i,m.extractedUrl,o,u).pipe((0,Ut.T)(({state:w,tree:A})=>({...m,targetSnapshot:w,urlAfterRedirects:A}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Yn.M)(se=>{u.targetSnapshot=se.targetSnapshot,u.urlAfterRedirects=se.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:se.urlAfterRedirects};const je=new ip(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot);this.events.next(je)}));if(j&&e.urlHandlingStrategy.shouldProcessUrl(A.currentRawUrl)){const{id:se,extractedUrl:je,source:tt,restoredState:St,extras:Jt}=A,or=new _c(se,this.urlSerializer.serialize(je),tt,St);this.events.next(or);const vr=Ec(0,this.rootComponentType).snapshot;return this.currentTransition=u={...A,targetSnapshot:vr,urlAfterRedirects:je,extras:{...Jt,skipLocationChange:!1,replaceUrl:!1}},(0,Dt.of)(u)}{const se="";return this.events.next(new yc(A.id,this.urlSerializer.serialize(A.extractedUrl),se,1)),A.resolve(null),Jr.w}}),(0,Yn.M)(A=>{const P=new pd(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(P)}),(0,Ut.T)(A=>(this.currentTransition=u={...A,guards:bc(A.targetSnapshot,A.currentSnapshot,this.rootContexts)},u)),function m_(n,t){return(0,mr.Z)(e=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:m}}=e;return 0===m.length&&0===u.length?(0,Dt.of)({...e,guardsResult:!0}):function Id(n,t,e,i){return(0,kr.H)(n).pipe((0,mr.Z)(o=>function $y(n,t,e,i,o){const u=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Dt.of)(!0);const m=u.map(w=>{const A=et(t)??o,P=la(w,A);return Qn(function f_(n){return n&&Dl(n.canDeactivate)}(P)?P.canDeactivate(n,t,e,i):A.runInContext(()=>P(n,t,e,i))).pipe(ea())});return(0,Dt.of)(m).pipe(Di())}(o.component,o.route,e,t,i)),ea(o=>!0!==o,!0))}(m,i,o,n).pipe((0,mr.Z)(w=>w&&function ap(n){return"boolean"==typeof n}(w)?function __(n,t,e,i){return(0,kr.H)(t).pipe(ci(o=>Ds(function jy(n,t){return null!==n&&t&&t(new h_(n)),(0,Dt.of)(!0)}(o.route.parent,i),function Rg(n,t){return null!==n&&t&&t(new $a(n)),(0,Dt.of)(!0)}(o.route,i),function dp(n,t,e){const i=t[t.length-1],u=t.slice(0,t.length-1).reverse().map(m=>function Il(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(m)).filter(m=>null!==m).map(m=>Dr(()=>{const w=m.guards.map(A=>{const P=et(m.node)??e,j=la(A,P);return Qn(function lp(n){return n&&Dl(n.canActivateChild)}(j)?j.canActivateChild(i,n):P.runInContext(()=>j(i,n))).pipe(ea())});return(0,Dt.of)(w).pipe(Di())}));return(0,Dt.of)(u).pipe(Di())}(n,o.path,e),function kw(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return(0,Dt.of)(!0);const o=i.map(u=>Dr(()=>{const m=et(t)??e,w=la(u,m);return Qn(function uf(n){return n&&Dl(n.canActivate)}(w)?w.canActivate(t,n):m.runInContext(()=>w(t,n))).pipe(ea())}));return(0,Dt.of)(o).pipe(Di())}(n,o.route,e))),ea(o=>!0!==o,!0))}(i,u,n,t):(0,Dt.of)(w)),(0,Ut.T)(w=>({...e,guardsResult:w})))})}(this.environmentInjector,A=>this.events.next(A)),(0,Yn.M)(A=>{if(u.guardsResult=A.guardsResult,hc(A.guardsResult))throw wd(0,A.guardsResult);const P=new sa(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot,!!A.guardsResult);this.events.next(P)}),us(A=>!!A.guardsResult||(this.cancelNavigationTransition(A,"",3),!1)),Fg(A=>{if(A.guards.canActivateChecks.length)return(0,Dt.of)(A).pipe((0,Yn.M)(P=>{const j=new nf(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(j)}),(0,qn.n)(P=>{let j=!1;return(0,Dt.of)(P).pipe(function _p(n,t){return(0,mr.Z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=e;if(!o.length)return(0,Dt.of)(e);let u=0;return(0,kr.H)(o).pipe(ci(m=>function vp(n,t,e,i){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!kg(o)&&(u[_l]=o.title),function I_(n,t,e,i){const o=function ff(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,Dt.of)({});const u={};return(0,kr.H)(o).pipe((0,mr.Z)(m=>function D_(n,t,e,i){const o=et(t)??i,u=la(n,o);return Qn(u.resolve?u.resolve(t,e):o.runInContext(()=>u(t,e)))}(n[m],t,e,i).pipe(ea(),(0,Yn.M)(w=>{u[m]=w}))),To(1),function du(n){return(0,Ut.T)(()=>n)}(u),ds(m=>g_(m)?Jr.w:Ao(m)))}(u,n,t,i).pipe((0,Ut.T)(m=>(n._resolvedData=m,n.data=_d(n,e).resolve,o&&kg(o)&&(n.data[_l]=o.title),null)))}(m.route,i,n,t)),(0,Yn.M)(()=>u++),To(1),(0,mr.Z)(m=>u===o.length?(0,Dt.of)(e):Jr.w))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,Yn.M)({next:()=>j=!0,complete:()=>{j||this.cancelNavigationTransition(P,"",2)}}))}),(0,Yn.M)(P=>{const j=new rf(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(j)}))}),Fg(A=>{const P=j=>{const Y=[];j.routeConfig?.loadComponent&&!j.routeConfig._loadedComponent&&Y.push(this.configLoader.loadComponent(j.routeConfig).pipe((0,Yn.M)(se=>{j.component=se}),(0,Ut.T)(()=>{})));for(const se of j.children)Y.push(...P(se));return Y};return Qo(P(A.targetSnapshot.root)).pipe(cd(),Ts(1))}),Fg(()=>this.afterPreactivation()),(0,Ut.T)(A=>{const P=function wc(n,t,e){const i=Ka(n,t._root,e?e._root:void 0);return new Nn(i,t)}(e.routeReuseStrategy,A.targetSnapshot,A.currentRouterState);return this.currentTransition=u={...A,targetRouterState:P},u}),(0,Yn.M)(()=>{this.events.next(new oh)}),((n,t,e,i)=>(0,Ut.T)(o=>(new Cn(t,o.targetRouterState,o.currentRouterState,e,i).activate(n),o)))(this.rootContexts,e.routeReuseStrategy,A=>this.events.next(A),this.inputBindingEnabled),Ts(1),(0,Yn.M)({next:A=>{m=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Oo(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects))),e.titleStrategy?.updateTitle(A.targetRouterState.snapshot),A.resolve(!0)},complete:()=>{m=!0}}),Ba(this.transitionAbortSubject.pipe((0,Yn.M)(A=>{throw A}))),La(()=>{m||w||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),ds(A=>{if(w=!0,$r(A))this.events.next(new vc(u.id,this.urlSerializer.serialize(u.extractedUrl),A.message,A.cancellationCode)),function uh(n){return $r(n)&&hc(n.url)}(A)?this.events.next(new bl(A.url)):u.resolve(!1);else{this.events.next(new ja(u.id,this.urlSerializer.serialize(u.extractedUrl),A,u.targetSnapshot??void 0));try{u.resolve(e.errorHandler(A))}catch(P){u.reject(P)}}return Jr.w}))}))}cancelNavigationTransition(e,i,o){const u=new vc(e.id,this.urlSerializer.serialize(e.extractedUrl),i,o);this.events.next(u),e.resolve(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A_(n){return n!==mc}let Zy=(()=>{class n{buildTitle(e){let i,o=e.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(u=>u.outlet===Yt);return i}getResolvedTitleForRoute(e){return e.data[_l]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(Lw)},providedIn:"root"})}}return n})(),Lw=(()=>{class n extends Zy{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ws))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bw=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(Uw)},providedIn:"root"})}}return n})();class Vw{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Uw=(()=>{class n extends Vw{static{this.\u0275fac=function(){let e;return function(o){return(e||(e=h.xGo(n)))(o||n)}}()}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const pf=new h.nKC("",{providedIn:"root",factory:()=>({})});let T_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:function(){return(0,h.WQX)(S_)},providedIn:"root"})}}return n})(),S_=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(gf||{});function M_(n,t){n.events.pipe(us(e=>e instanceof Oo||e instanceof vc||e instanceof ja||e instanceof yc),(0,Ut.T)(e=>e instanceof Oo||e instanceof yc?gf.COMPLETE:e instanceof vc&&(0===e.code||1===e.code)?gf.REDIRECTING:gf.FAILED),us(e=>e!==gf.REDIRECTING),Ts(1)).subscribe(()=>{t()})}function Bg(n){throw n}function Sc(n,t,e){return t.parse("/")}const yu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ps=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.WQX)(h.H3F),this.isNgZoneEnabled=!1,this._events=new Bt.B,this.options=(0,h.WQX)(pf,{optional:!0})||{},this.pendingTasks=(0,h.WQX)(h.$K3),this.errorHandler=this.options.errorHandler||Bg,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Sc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.WQX)(T_),this.routeReuseStrategy=(0,h.WQX)(Bw),this.titleStrategy=(0,h.WQX)(Zy),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.WQX)(mh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.WQX)(vu),this.urlSerializer=(0,h.WQX)(Ze),this.location=(0,h.WQX)(Je),this.componentInputBindingEnabled=!!(0,h.WQX)(Cd,{optional:!0}),this.eventsSubscription=new As.yU,this.isNgZoneEnabled=(0,h.WQX)(h.SKi)instanceof h.SKi&&h.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new O,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ec(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(Jy(i)&&this._events.next(i));if(i instanceof _c)A_(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(i instanceof yc)this.rawUrlTree=o.rawUrl;else if(i instanceof ip){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(u,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(i instanceof oh)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(i instanceof vc)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(o);else if(i instanceof bl){const u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),m={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A_(o.source)};this.scheduleNavigation(u,mc,null,m,{resolve:o.resolve,reject:o.reject,promise:o.promise})}i instanceof ja&&this.restoreHistory(o,!0),i instanceof Oo&&(this.navigated=!0),Jy(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),mc,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,o){const u={replaceUrl:!0},m=o?.navigationId?o:null;if(o){const A={...o};delete A.navigationId,delete A.\u0275routerPageId,0!==Object.keys(A).length&&(u.state=A)}const w=this.parseUrl(e);this.scheduleNavigation(w,i,m,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Q),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:o,queryParams:u,fragment:m,queryParamsHandling:w,preserveFragment:A}=i,P=A?this.currentUrlTree.fragment:m;let Y,j=null;switch(w){case"merge":j={...this.currentUrlTree.queryParams,...u};break;case"preserve":j=this.currentUrlTree.queryParams;break;default:j=u||null}null!==j&&(j=this.removeEmptyProps(j));try{Y=Va(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),Y=this.currentUrlTree.root}return Qi(Y,e,j,P??null)}navigateByUrl(e,i={skipLocationChange:!1}){const o=hc(e)?e:this.parseUrl(e),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,mc,null,i)}navigate(e,i={skipLocationChange:!1}){return function P_(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new h.wOt(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return i}isActive(e,i){let o;if(o=!0===i?{...yu}:!1===i?{...R_}:i,hc(e))return lc(this.currentUrlTree,e,o);const u=this.parseUrl(e);return lc(this.currentUrlTree,u,o)}removeEmptyProps(e){return Object.keys(e).reduce((i,o)=>{const u=e[o];return null!=u&&(i[o]=u),i},{})}scheduleNavigation(e,i,o,u,m){if(this.disposed)return Promise.resolve(!1);let w,A,P;m?(w=m.resolve,A=m.reject,P=m.promise):P=new Promise((Y,se)=>{w=Y,A=se});const j=this.pendingTasks.add();return M_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(j))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:u,resolve:w,reject:A,promise:P,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),P.catch(Y=>Promise.reject(Y))}setBrowserUrl(e,i){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const m={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",m)}else{const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jy(n){return!(n instanceof oh||n instanceof bl)}let yp=(()=>{class n{constructor(e,i,o,u,m,w){this.router=e,this.route=i,this.tabIndexAttribute=o,this.renderer=u,this.el=m,this.locationStrategy=w,this.href=null,this.commands=null,this.onChanges=new Bt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const A=m.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===A||"area"===A,this.isAnchorElement?this.subscription=e.events.subscribe(P=>{P instanceof Oo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,o,u,m){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||o||u||m||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,h.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const o=this.renderer,u=this.el.nativeElement;null!==i?o.setAttribute(u,e,i):o.removeAttribute(u,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(Ps),h.rXU(Ys),h.kS0("tabindex"),h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(qe))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){1&i&&h.bIt("click",function(m){return o.onClick(m.button,m.ctrlKey,m.shiftKey,m.altKey,m.metaKey)}),2&i&&h.BMQ("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",h.L39],skipLocationChange:["skipLocationChange","skipLocationChange",h.L39],replaceUrl:["replaceUrl","replaceUrl",h.L39],routerLink:"routerLink"},standalone:!0,features:[h.GFd,h.OA$]})}}return n})();class Ep{}let O_=(()=>{class n{constructor(e,i,o,u,m){this.router=e,this.injector=o,this.preloadingStrategy=u,this.loader=m}setUpPreloading(){this.subscription=this.router.events.pipe(us(e=>e instanceof Oo),ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const o=[];for(const u of i){u.providers&&!u._injector&&(u._injector=(0,h.Ol2)(u.providers,e,`Route: ${u.path}`));const m=u._injector??e,w=u._loadedInjector??m;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(m,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(w,u.children??u._loadedRoutes))}return(0,kr.H)(o).pipe((0,Zo.U)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):(0,Dt.of)(null);const u=o.pipe((0,mr.Z)(m=>null===m?(0,Dt.of)(void 0):(i._loadedRoutes=m.routes,i._loadedInjector=m.injector,this.processRoutes(m.injector??e,m.routes))));if(i.loadComponent&&!i._loadedComponent){const m=this.loader.loadComponent(i);return(0,kr.H)([u,m]).pipe((0,Zo.U)())}return u})}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(Ps),h.KVO(h.Ql9),h.KVO(h.uvJ),h.KVO(Ep),h.KVO(Lg))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const _h=new h.nKC("");let x_=(()=>{class n{constructor(e,i,o,u,m={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=o,this.zone=u,this.options=m,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},m.scrollPositionRestoration=m.scrollPositionRestoration||"disabled",m.anchorScrolling=m.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof _c?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Oo?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof yc&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof af&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new af(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){h.QTQ()}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac})}}return n})();function ca(n,t){return{\u0275kind:n,\u0275providers:t}}function Td(){const n=(0,h.WQX)(h.zZn);return t=>{const e=n.get(h.o8S);if(t!==e.components[0])return;const i=n.get(Ps),o=n.get(jg);1===n.get($g)&&i.initialNavigation(),n.get(N_,null,h.$GK.Optional)?.setUpPreloading(),n.get(_h,null,h.$GK.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const jg=new h.nKC("",{factory:()=>new Bt.B}),$g=new h.nKC("",{providedIn:"root",factory:()=>1}),N_=new h.nKC("");function Wg(n){return ca(0,[{provide:N_,useExisting:O_},{provide:Ep,useExisting:n}])}const yh=new h.nKC("ROUTER_FORROOT_GUARD"),k_=[Je,{provide:Ze,useClass:ft},Ps,Wa,{provide:Ys,useFactory:function Ug(n){return n.routerState.root},deps:[Ps]},Lg,[]];function F_(){return new h.NEm("Router",Ps)}let Sd=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[k_,[],{provide:mh,multi:!0,useValue:e},{provide:yh,useFactory:V_,deps:[[Ps,new h.Xx1,new h.kdw]]},{provide:pf,useValue:i||{}},i?.useHash?{provide:qe,useClass:Fe}:{provide:qe,useClass:rt},{provide:_h,useFactory:()=>{const n=(0,h.WQX)(ii),t=(0,h.WQX)(h.SKi),e=(0,h.WQX)(pf),i=(0,h.WQX)(vu),o=(0,h.WQX)(Ze);return e.scrollOffset&&n.setOffset(e.scrollOffset),new x_(o,i,n,t,e)}},i?.preloadingStrategy?Wg(i.preloadingStrategy).\u0275providers:[],{provide:h.NEm,multi:!0,useFactory:F_},i?.initialNavigation?Qs(i):[],i?.bindToComponentInputs?ca(8,[Xi,{provide:Cd,useExisting:Xi}]).\u0275providers:[],[{provide:oE,useFactory:Td},{provide:h.iLQ,multi:!0,useExisting:oE}]]}}static forChild(e){return{ngModule:n,providers:[{provide:mh,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(yh,8))}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({})}}return n})();function V_(n){return"guarded"}function Qs(n){return["disabled"===n.initialNavigation?ca(3,[{provide:h.hnV,multi:!0,useFactory:()=>{const t=(0,h.WQX)(Ps);return()=>{t.setUpLocationChangeListener()}}},{provide:$g,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ca(2,[{provide:$g,useValue:0},{provide:h.hnV,multi:!0,deps:[h.zZn],useFactory:t=>{const e=t.get(Ge,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const o=t.get(Ps),u=t.get(jg);M_(o,()=>{i(!0)}),t.get(vu).afterPreactivation=()=>(i(!0),u.closed?(0,Dt.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const oE=new h.nKC("");class ua{constructor(t){this.player=t,this.type=this.constructor.name}}class Eu{constructor(t){this.move=t,this.type=this.constructor.name}}class Kg{constructor(){this.type=this.constructor.name}}var Ji=function(n){return n.white="white",n.black="black",n}(Ji||{});let vf=(()=>{class n{get _storageKey(){return"game-state"}constructor(){}saveMove(e){const i=JSON.stringify(e);localStorage.setItem(this._storageKey,i)}getLastMove(){const e=localStorage.getItem(this._storageKey);if(!e)return null;try{return JSON.parse(e)}catch{return null}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qa=(()=>{class n{constructor(e){this.storageService=e,this._white=null,this._black=null,this._gameStatusSubject=new Fr.t(null),this.gameStatus$=this._gameStatusSubject.asObservable()}eventHandler(e){if(e.data.type===Eu.name)return this.moveEvent(e.data)}setPlayers(e,i){this._white=e.nativeElement.contentWindow,this._black=i?.nativeElement.contentWindow}onWhiteLoaded(){this._white?.postMessage(new ua(Ji.white));const e=this.storageService.getLastMove();e&&this._white?.postMessage(new Eu(e))}onBlackLoaded(){this._black?.postMessage(new ua(Ji.black));const e=this.storageService.getLastMove();e&&this._black?.postMessage(new Eu(e))}reset(){this._black?.postMessage(new Kg),this._white?.postMessage(new Kg),localStorage.clear()}moveEvent(e){if(e.move.checkmate)return this._gameStatusSubject.next(e.move.player),this._white?.postMessage(e),void this._white?.postMessage(e);this.storageService.saveMove(e.move),e.move.player!==Ji.white?this._white?.postMessage(e):this._black?.postMessage(e)}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(vf))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Cu=["white"],zg=["black"];let Mc=(()=>{class n{constructor(e){this.mainPageService=e}ngAfterViewInit(){window.addEventListener("message",e=>this.mainPageService.eventHandler(e)),this.mainPageService.setPlayers(this.white,this.black),this.subscription=this.mainPageService.gameStatus$.subscribe(e=>{e&&window.confirm(`${e} won!! Start new game?`)&&this.mainPageService.reset()})}startNewGame(){this.mainPageService.reset()}ngOnDestroy(){this.subscription?.unsubscribe()}onWhiteLoaded(){this.mainPageService.onWhiteLoaded()}onBlackLoaded(){this.mainPageService.onBlackLoaded()}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(qa))}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["app-main-page"]],viewQuery:function(i,o){if(1&i&&(h.GBs(Cu,5),h.GBs(zg,5)),2&i){let u;h.mGM(u=h.lsd())&&(o.white=u.first),h.mGM(u=h.lsd())&&(o.black=u.first)}},decls:12,vars:0,consts:[[1,"d-flex","flex-column","align-items-center"],[1,"mt-5"],[1,"d-flex","flex-inline","align-items-center",2,"padding-top","100px"],["src","/iframepage",1,"iframe",3,"load"],["white",""],["black",""],[1,"btn","btn-info","mt-5",3,"click"],["routerLink","/onlinemode",1,"btn","btn-success","mt-2"]],template:function(i,o){1&i&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Chess Game"),h.k0s(),h.j41(3,"div",2)(4,"iframe",3,4),h.bIt("load",function(){return o.onWhiteLoaded()}),h.k0s(),h.j41(6,"iframe",3,5),h.bIt("load",function(){return o.onBlackLoaded()}),h.k0s()(),h.j41(8,"button",6),h.bIt("click",function(){return o.startNewGame()}),h.EFF(9,"Start New Game"),h.k0s(),h.j41(10,"a",7),h.EFF(11,"Play Online Mode"),h.k0s()())},dependencies:[yp],styles:[".iframe[_ngcontent-%COMP%]{width:500px;height:500px;border:none}"]})}}return n})();var Ch=V(3236),Rc=V(7786),Xn=V(7647),Wr=V(3294),Zs=V(3531),da=V(4783),H_=(V(455),V(9574)),Pc=V(8779),wu=V(467),Al=V(2979),W=V(1401),wp=V(5398);const j_="@firebase/database";let ji="";function Md(n){ji=n}class qg{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,W.As)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,W.$L)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Yg{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,W.gR)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Rd=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new qg(t)}}catch{}return new Yg},Oc=Rd("localStorage"),yf=Rd("sessionStorage"),Ya=new wp.Vy("@firebase/database"),xo=function(){let n=1;return function(){return n++}}(),Zt=function(n){const t=(0,W.kj)(n),e=new W.gz;e.update(t);const i=e.digest();return W.K3.encodeByteArray(i)},bu=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=bu.apply(null,i):t+="object"==typeof i?(0,W.As)(i):i,t+=" "}return t};let fi=null,wh=!0;const cE=function(n,t){(0,W.vA)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ya.logLevel=wp.$b.VERBOSE,fi=Ya.log.bind(Ya),t&&yf.set("logging_enabled",!0)):"function"==typeof n?fi=n:(fi=null,yf.remove("logging_enabled"))},zt=function(...n){if(!0===wh&&(wh=!1,null===fi&&!0===yf.get("logging_enabled")&&cE(!0)),fi){const t=bu.apply(null,n);fi(t)}},xc=function(n){return function(...t){zt(n,...t)}},Ip=function(...n){const t="FIREBASE INTERNAL ERROR: "+bu(...n);Ya.error(t)},Js=function(...n){const t=`FIREBASE FATAL ERROR: ${bu(...n)}`;throw Ya.error(t),new Error(t)},hs=function(...n){const t="FIREBASE WARNING: "+bu(...n);Ya.warn(t)},bh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Iu="[MIN_NAME]",Nc="[MAX_NAME]",Ih=function(n,t){if(n===t)return 0;if(n===Iu||t===Nc)return-1;if(t===Iu||n===Nc)return 1;{const e=Ti(n),i=Ti(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},dE=function(n,t){return n===t?0:n<t?-1:1},Du=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,W.As)(t))},Ef=function(n){if("object"!=typeof n||null===n)return(0,W.As)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,W.As)(t[i]),e+=":",e+=Ef(n[t[i]]);return e+="}",e},W_=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let o=0;o<e;o+=t)i.push(n.substring(o,o+t>e?e:o+t));return i};function Ai(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Dp=function(n){(0,W.vA)(!bh(n),"Invalid JSON number");const i=1023;let o,u,m,w,A;0===n?(u=0,m=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(w=Math.min(Math.floor(Math.log(n)/Math.LN2),i),u=w+i,m=Math.round(n*Math.pow(2,52-w)-Math.pow(2,52))):(u=0,m=Math.round(n/Math.pow(2,-1074))));const P=[];for(A=52;A;A-=1)P.push(m%2?1:0),m=Math.floor(m/2);for(A=11;A;A-=1)P.push(u%2?1:0),u=Math.floor(u/2);P.push(o?1:0),P.reverse();const j=P.join("");let Y="";for(A=0;A<64;A+=8){let se=parseInt(j.substr(A,8),2).toString(16);1===se.length&&(se="0"+se),Y+=se}return Y.toLowerCase()},fE=new RegExp("^-?(0*)\\d{1,10}$"),Ti=function(n){if(fE.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Gr=function(n){try{n()}catch(t){setTimeout(()=>{throw hs("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Tl=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Cf{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class K_{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hs(t)}}let Ah=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Sp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Y_="websocket",Q_="long_polling";class Rp{constructor(t,e,i,o,u=!1,m="",w=!1,A=!1){this.secure=e,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=m,this.includeNamespaceInQueryParams=w,this.isUsingEmulator=A,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oc.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Oc.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Jg(n,t,e){let i;if((0,W.vA)("string"==typeof t,"typeof type must == string"),(0,W.vA)("object"==typeof e,"typeof params must == object"),t===Y_)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Q_)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Th(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const o=[];return Ai(e,(u,m)=>{o.push(u+"="+m)}),i+o.join("&")}class gE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,W.gR)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,W.A4)(this.counters_)}}const em={},X_={};function Pp(n){const t=n.toString();return em[t]||(em[t]=new gE),em[t]}class ha{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&Gr(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tu{constructor(t,e,i,o,u,m,w){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.transportSessionId=m,this.lastSessionId=w,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xc(t),this.stats_=Pp(e),this.urlFn=A=>(this.appCheckToken&&(A.ac=this.appCheckToken),Jg(e,Q_,A))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ha(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,W.$g)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new If((...u)=>{const[m,w,A,P,j]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===m)this.id=w,this.password=A;else{if("close"!==m)throw new Error("Unrecognized command received: "+m);w?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(w,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[m,w]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(m,w)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(i.r="f");const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tu.forceAllow_=!0}static forceDisallow(){Tu.forceDisallow_=!0}static isAvailable(){return!((0,W.$g)()||!Tu.forceAllow_&&(Tu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,W.As)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,W.KA)(e),o=W_(i,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,W.$g)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,W.As)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class If{constructor(t,e,i,o){if(this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.$g)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=xo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=If.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const m="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(m),this.myIFrame.doc.close()}catch(w){zt("frame writing exception"),w.stack&&zt(w.stack),zt(w)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||zt("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const m=this.pendingSegs.shift();i=i+"&seg"+o+"="+m.seg+"&ts"+o+"="+m.ts+"&d"+o+"="+m.d,o++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},o=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(o),i()})}addTag(t,e){(0,W.$g)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||"loaded"===o||"complete"===o)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{zt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Op=null;typeof MozWebSocket<"u"?Op=MozWebSocket:typeof WebSocket<"u"&&(Op=WebSocket);let Pd=(()=>{class n{constructor(e,i,o,u,m,w,A){this.connId=e,this.applicationId=o,this.appCheckToken=u,this.authToken=m,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xc(this.connId),this.stats_=Pp(i),this.connURL=n.connectionURL_(i,w,A,u,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,o,u,m){const w={v:"5"};return!(0,W.$g)()&&typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(w.r="f"),i&&(w.s=i),o&&(w.ls=o),u&&(w.ac=u),m&&(w.p=m),Jg(e,Y_,w)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oc.set("previous_websocket_failure",!0);try{let o;if((0,W.$g)()){o={headers:{"User-Agent":`Firebase/5/${ji}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const m=process.env,w=0===this.connURL.indexOf("wss://")?m.HTTPS_PROXY||m.https_proxy:m.HTTP_PROXY||m.http_proxy;w&&(o.proxy={origin:w})}this.mySock=new Op(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&null!==Op&&!n.forceDisallow_}static previouslyFailed(){return Oc.isInMemoryStorage||!0===Oc.get("previous_websocket_failure")}markConnectionHealthy(){Oc.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const o=(0,W.$L)(i);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,W.vA)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const o=this.extractFrameCount_(i);null!==o&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const i=(0,W.As)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const o=W_(i,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),om=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Tu,Pd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Pd&&Pd.isAvailable();let o=i&&!Pd.previouslyFailed();if(e.webSocketOnly&&(i||hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Pd];else{const u=this.transports_=[];for(const m of n.ALL_TRANSPORTS)m&&m.isAvailable()&&u.push(m);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class um{constructor(t,e,i,o,u,m,w,A,P,j){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=m,this.onReady_=w,this.onDisconnect_=A,this.onKill_=P,this.lastSessionId=j,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xc("c:"+this.id+":"),this.transportManager_=new om(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Du("t",t),i=Du("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Du("t",t),i=Du("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Du("t",t);if("d"in t){const i=t.d;if("h"===e){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?Ip("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ip("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dm{put(t,e,i,o){}merge(t,e,i,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class iv{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,W.vA)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const o=this.getInitialEvent(t);o&&e.apply(i,o)}off(t,e,i){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===e&&(!i||i===o[u].context))return void o.splice(u,1)}validateEventType_(t){(0,W.vA)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Mh extends iv{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,W.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Mh}getInitialEvent(t){return(0,W.vA)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function jn(){return new Hn("")}function En(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Od(n){return n.pieces_.length-n.pieceNum_}function rr(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Hn(n.pieces_,t)}function Lp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Bp(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function xd(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Hn(t,0)}function ir(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Hn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&e.push(i[o])}return new Hn(e,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function Os(n,t){const e=En(n),i=En(t);if(null===e)return t;if(e===i)return Os(rr(n),rr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function av(n,t){const e=Bp(n,0),i=Bp(t,0);for(let o=0;o<e.length&&o<i.length;o++){const u=Ih(e[o],i[o]);if(0!==u)return u}return e.length===i.length?0:e.length<i.length?-1:1}function Vp(n,t){if(Od(n)!==Od(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ot(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Od(n)>Od(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class lv{constructor(t,e){this.errorPrefix_=e,this.parts_=Bp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,W.OE)(this.parts_[i]);hm(this)}}function hm(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Nd(n))}function Nd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Ph extends iv{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Ph}getInitialEvent(t){return(0,W.vA)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Rl=1e3;let c,Ru=(()=>{class n extends dm{constructor(e,i,o,u,m,w,A,P){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=m,this.authTokenProvider_=w,this.appCheckTokenProvider_=A,this.authOverride_=P,this.id=n.nextPersistentConnectionId_++,this.log_=xc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,P&&!(0,W.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ph.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Mh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,o){const u=++this.requestNumber_,m={r:u,a:e,b:i};this.log_((0,W.As)(m)),(0,W.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(m),o&&(this.requestCBHash_[u]=o)}get(e){this.initConnection_();const i=new W.cY,u={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:w=>{const A=w.d;"ok"===w.s?i.resolve(A):i.reject(A)}};return this.outstandingGets_.push(u),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,o,u){this.initConnection_();const m=e._queryIdentifier,w=e._path.toString();this.log_("Listen called for "+w+" "+m),this.listens.has(w)||this.listens.set(w,new Map),(0,W.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.vA)(!this.listens.get(w).has(m),"listen() called twice for same path/queryId.");const A={onComplete:u,hashFn:i,query:e,tag:o};this.listens.get(w).set(m,A),this.connected_&&this.sendListen_(A)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(o)})}sendListen_(e){const i=e.query,o=i._path.toString(),u=i._queryIdentifier;this.log_("Listen on "+o+" for "+u);const m={p:o};e.tag&&(m.q=i._queryObject,m.t=e.tag),m.h=e.hashFn(),this.sendRequest("q",m,A=>{const P=A.d,j=A.s;n.warnOnListenWarnings_(P,i),(this.listens.get(o)&&this.listens.get(o).get(u))===e&&(this.log_("listen response",A),"ok"!==j&&this.removeListen_(o,u),e.onComplete&&e.onComplete(j,P))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,W.gR)(e,"w")){const o=(0,W.yw)(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+i._queryParams.getIndex().toString()+'"',m=i._path.toString();hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${m} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,W.qc)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,W.Cv)(e)?"auth":"gauth",o={cred:e};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(i,o,u=>{const m=u.s,w=u.d||"error";this.authToken_===e&&("ok"===m?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(m,w))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,o=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,o)})}unlisten(e,i){const o=e._path.toString(),u=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,W.vA)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,e._queryObject,i)}sendUnlisten_(e,i,o,u){this.log_("Unlisten on "+e+" for "+i);const m={p:e};u&&(m.q=o,m.t=u),this.sendRequest("n",m)}onDisconnectPut(e,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:o})}onDisconnectMerge(e,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:o})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,o,u){const m={p:i,d:o};this.log_("onDisconnect "+e,m),this.sendRequest(e,m,w=>{u&&setTimeout(()=>{u(w.s,w.d)},Math.floor(0))})}put(e,i,o,u){this.putInternal("p",e,i,o,u)}merge(e,i,o,u){this.putInternal("m",e,i,o,u)}putInternal(e,i,o,u,m){this.initConnection_();const w={p:i,d:o};void 0!==m&&(w.h=m),this.outstandingPuts_.push({action:e,request:w,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,u=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,o,m=>{this.log_(i+" response",m),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(m.s,m.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,W.As)(e));const i=e.r,o=this.requestCBHash_[i];o&&(delete this.requestCBHash_[i],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):Ip("Unrecognized action received from server: "+(0,W.As)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,W.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Rl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,wu.A)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),o=e.onReady_.bind(e),u=e.onRealtimeDisconnect_.bind(e),m=e.id+":"+n.nextConnectionId_++,w=e.lastSessionId;let A=!1,P=null;const j=function(){P?P.close():(A=!0,u())};e.realtime_={close:j,sendRequest:function(je){(0,W.vA)(P,"sendRequest call when we're not connected not allowed."),P.sendRequest(je)}};const se=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[je,tt]=yield Promise.all([e.authTokenProvider_.getToken(se),e.appCheckTokenProvider_.getToken(se)]);A?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),e.authToken_=je&&je.accessToken,e.appCheckToken_=tt&&tt.token,P=new um(m,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,o,u,St=>{hs(St+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},w))}catch(je){e.log_("Failed to get token: "+je),A||(e.repoInfo_.nodeAdmin&&hs(je),j())}}})()}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,W.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Rl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let o;o=i?i.map(m=>Ef(m)).join("$"):"default";const u=this.removeListen_(e,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(e,i){const o=new Hn(e).toString();let u;if(this.listens.has(o)){const m=this.listens.get(o);u=m.get(i),m.delete(i),0===m.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(e,i){zt("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){zt("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,W.$g)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+ji.replace(/\./g,"-")]=1,(0,W.jZ)()?e["framework.cordova"]=1:(0,W.lV)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mh.getInstance().currentlyOnline();return(0,W.Im)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new yn(t,e)}}class Hp{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new yn(Iu,t),o=new yn(Iu,e);return 0!==this.compare(i,o)}minPost(){return yn.MIN}}class f extends Hp{static get __EMPTY_NODE(){return c}static set __EMPTY_NODE(t){c=t}compare(t,e){return Ih(t.name,e.name)}isDefinedOn(t){throw(0,W.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return yn.MIN}maxPost(){return new yn(Nc,c)}makePost(t,e){return(0,W.vA)("string"==typeof t,"KeyIndex indexValue must always be a string."),new yn(t,c)}toString(){return".key"}}const E=new f;class S{constructor(t,e,i,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let m=1;for(;!t.isEmpty();)if(m=e?i(t.key,e):1,o&&(m*=-1),m<0)t=this.isReverse_?t.left:t.right;else{if(0===m){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Ve,x=(()=>{class n{constructor(e,i,o,u,m){this.key=e,this.value=i,this.color=o??n.RED,this.left=u??K.EMPTY_NODE,this.right=m??K.EMPTY_NODE}copy(e,i,o,u,m){return new n(e??this.key,i??this.value,o??this.color,u??this.left,m??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,o){let u=this;const m=o(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,i,o),null):0===m?u.copy(null,i,null,null,null):u.copy(null,null,null,null,u.right.insert(e,i,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return K.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let o,u;if(o=this,i(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===i(e,o.key)){if(o.right.isEmpty())return K.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class K{constructor(t,e=K.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new K(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,x.BLACK,null,null))}remove(t){return new K(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,x.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,o=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(o=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new S(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new S(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new S(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new S(this.root_,null,this.comparator_,!0,t)}}function ee(n,t){return Ih(n.name,t.name)}function ae(n,t){return Ih(n,t)}K.EMPTY_NODE=new class U{copy(t,e,i,o,u){return this}insert(t,e,i){return new x(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const He=function(n){return"number"==typeof n?"number:"+Dp(n):"string:"+n},lt=function(n){if(n.isLeafNode()){const t=n.val();(0,W.vA)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,W.gR)(t,".sv"),"Priority must be a string or number.")}else(0,W.vA)(n===Ve||n.isEmpty(),"priority of unexpected type.");(0,W.vA)(n===Ve||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let It,ln,jt,Nt=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,W.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),lt(this.priorityNode_)}static set __childrenNodeConstructor(e){It=e}static get __childrenNodeConstructor(){return It}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return vn(e)?this:".priority"===En(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const o=En(e);return null===o?i:i.isEmpty()&&".priority"!==o?this:((0,W.vA)(".priority"!==o||1===Od(e),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(rr(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+He(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Dp(this.value_):this.value_,this.lazyHash_=Zt(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,W.vA)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(i),m=n.VALUE_TYPE_ORDER.indexOf(o);return(0,W.vA)(u>=0,"Unknown leaf type: "+i),(0,W.vA)(m>=0,"Unknown leaf type: "+o),u===m?"object"===o?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:m-u}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const gn=new class No extends Hp{compare(t,e){const i=t.node.getPriority(),o=e.node.getPriority(),u=i.compareTo(o);return 0===u?Ih(t.name,e.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(Nc,new Nt("[PRIORITY-POST]",jt))}makePost(t,e){const i=ln(t);return new yn(e,new Nt("[PRIORITY-POST]",i))}toString(){return".priority"}},ko=Math.log(2);class ti{constructor(t){this.count=parseInt(Math.log(t+1)/ko,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const fs=function(n,t,e,i){n.sort(t);const o=function(A,P){const j=P-A;let Y,se;if(0===j)return null;if(1===j)return Y=n[A],se=e?e(Y):Y,new x(se,Y.node,x.BLACK,null,null);{const je=parseInt(j/2,10)+A,tt=o(A,je),St=o(je+1,P);return Y=n[je],se=e?e(Y):Y,new x(se,Y.node,x.BLACK,tt,St)}},w=function(A){let P=null,j=null,Y=n.length;const se=function(tt,St){const Jt=Y-tt,or=Y;Y-=tt;const vr=o(Jt+1,or),Wi=n[Jt],ar=e?e(Wi):Wi;je(new x(ar,Wi.node,St,null,vr))},je=function(tt){P?(P.left=tt,P=tt):(j=tt,P=tt)};for(let tt=0;tt<A.count;++tt){const St=A.nextBitIsOne(),Jt=Math.pow(2,A.count-(tt+1));St?se(Jt,x.BLACK):(se(Jt,x.BLACK),se(Jt,x.RED))}return j}(new ti(n.length));return new K(i||t,w)};let Qa;const kd={};class Fd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,W.vA)(kd&&gn,"ChildrenNode.ts has not been loaded"),Qa=Qa||new Fd({".priority":kd},{".priority":gn}),Qa}get(t){const e=(0,W.yw)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof K?e:null}hasIndex(t){return(0,W.gR)(this.indexSet_,t.toString())}addIndex(t,e){(0,W.vA)(t!==E,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const u=e.getIterator(yn.Wrap);let w,m=u.getNext();for(;m;)o=o||t.isDefinedOn(m.node),i.push(m),m=u.getNext();w=o?fs(i,t.getCompare()):kd;const A=t.toString(),P=Object.assign({},this.indexSet_);P[A]=t;const j=Object.assign({},this.indexes_);return j[A]=w,new Fd(j,P)}addToIndexes(t,e){const i=(0,W.kH)(this.indexes_,(o,u)=>{const m=(0,W.yw)(this.indexSet_,u);if((0,W.vA)(m,"Missing index implementation for "+u),o===kd){if(m.isDefinedOn(t.node)){const w=[],A=e.getIterator(yn.Wrap);let P=A.getNext();for(;P;)P.name!==t.name&&w.push(P),P=A.getNext();return w.push(t),fs(w,m.getCompare())}return kd}{const w=e.get(t.name);let A=o;return w&&(A=A.remove(new yn(t.name,w))),A.insert(t,t.node)}});return new Fd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,W.kH)(this.indexes_,o=>{if(o===kd)return o;{const u=e.get(t.name);return u?o.remove(new yn(t.name,u)):o}});return new Fd(i,this.indexSet_)}}let mm,mn=(()=>{class n{constructor(e,i,o){this.children_=e,this.priorityNode_=i,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&lt(this.priorityNode_),this.children_.isEmpty()&&(0,W.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return mm||(mm=new n(new K(ae),null,Fd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mm}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?mm:i}}getChild(e){const i=En(e);return null===i?this:this.getImmediateChild(i).getChild(rr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,W.vA)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const o=new yn(e,i);let u,m;i.isEmpty()?(u=this.children_.remove(e),m=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(e,i),m=this.indexMap_.addToIndexes(o,this.children_));const w=u.isEmpty()?mm:this.priorityNode_;return new n(u,w,m)}}updateChild(e,i){const o=En(e);if(null===o)return i;{(0,W.vA)(".priority"!==En(e)||1===Od(e),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(rr(e),i);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let o=0,u=0,m=!0;if(this.forEachChild(gn,(w,A)=>{i[w]=A.val(e),o++,m&&n.INTEGER_REGEXP_.test(w)?u=Math.max(u,Number(w)):m=!1}),!e&&m&&u<2*o){const w=[];for(const A in i)w[A]=i[A];return w}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+He(this.getPriority().val())+":"),this.forEachChild(gn,(i,o)=>{const u=o.hash();""!==u&&(e+=":"+i+":"+u)}),this.lazyHash_=""===e?"":Zt(e)}return this.lazyHash_}getPredecessorChildName(e,i,o){const u=this.resolveIndex_(o);if(u){const m=u.getPredecessorKey(new yn(e,i));return m?m.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const o=i.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new yn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const o=i.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new yn(i,this.children_.get(i)):null}forEachChild(e,i){const o=this.resolveIndex_(e);return o?o.inorderTraversal(u=>i(u.name,u.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const o=this.resolveIndex_(i);if(o)return o.getIteratorFrom(e,u=>u);{const u=this.children_.getIteratorFrom(e.name,yn.Wrap);let m=u.peek();for(;null!=m&&i.compare(m,e)<0;)u.getNext(),m=u.peek();return u}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const o=this.resolveIndex_(i);if(o)return o.getReverseIteratorFrom(e,u=>u);{const u=this.children_.getReverseIteratorFrom(e.name,yn.Wrap);let m=u.peek();for(;null!=m&&i.compare(m,e)>0;)u.getNext(),m=u.peek();return u}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Df?-1:0}withIndex(e){if(e===E||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===E||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const o=this.getIterator(gn),u=i.getIterator(gn);let m=o.getNext(),w=u.getNext();for(;m&&w;){if(m.name!==w.name||!m.node.equals(w.node))return!1;m=o.getNext(),w=u.getNext()}return null===m&&null===w}return!1}return!1}}resolveIndex_(e){return e===E?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Df=new class Pu extends mn{constructor(){super(new K(ae),mn.EMPTY_NODE,Fd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return mn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(yn,{MIN:{value:new yn(Iu,mn.EMPTY_NODE)},MAX:{value:new yn(Nc,Df)}}),f.__EMPTY_NODE=mn.EMPTY_NODE,Nt.__childrenNodeConstructor=mn,function $e(n){Ve=n}(Df),function Rn(n){jt=n}(Df);const z0=!0;function Kr(n,t=null){if(null===n)return mn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,W.vA)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Nt(n,Kr(t));if(n instanceof Array||!z0){let e=mn.EMPTY_NODE;return Ai(n,(i,o)=>{if((0,W.gR)(n,i)&&"."!==i.substring(0,1)){const u=Kr(o);(u.isLeafNode()||!u.isEmpty())&&(e=e.updateImmediateChild(i,u))}}),e.updatePriority(Kr(t))}{const e=[];let i=!1;if(Ai(n,(m,w)=>{if("."!==m.substring(0,1)){const A=Kr(w);A.isEmpty()||(i=i||!A.getPriority().isEmpty(),e.push(new yn(m,A)))}}),0===e.length)return mn.EMPTY_NODE;const u=fs(e,ee,m=>m.name,ae);if(i){const m=fs(e,gn.getCompare());return new mn(u,Kr(t),new Fd({".priority":m},{".priority":gn}))}return new mn(u,Kr(t),Fd.Default)}}!function Dn(n){ln=n}(Kr);class bE extends Hp{constructor(t){super(),this.indexPath_=t,(0,W.vA)(!vn(t)&&".priority"!==En(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),o=this.extractChild(e.node),u=i.compareTo(o);return 0===u?Ih(t.name,e.name):u}makePost(t,e){const i=Kr(t),o=mn.EMPTY_NODE.updateChild(this.indexPath_,i);return new yn(e,o)}maxPost(){const t=mn.EMPTY_NODE.updateChild(this.indexPath_,Df);return new yn(Nc,t)}toString(){return Bp(this.indexPath_,0).join("/")}}const dv=new class qw extends Hp{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Ih(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(t,e){const i=Kr(t);return new yn(e,i)}toString(){return".value"}};function _m(n){return{type:"value",snapshotNode:n}}function xh(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function hv(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function jp(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class fv{constructor(t){this.index_=t}updateChild(t,e,i,o,u,m){(0,W.vA)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const w=t.getImmediateChild(e);return w.getChild(o).equals(i.getChild(o))&&w.isEmpty()===i.isEmpty()||(null!=m&&(i.isEmpty()?t.hasChild(e)?m.trackChildChange(hv(e,w)):(0,W.vA)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):w.isEmpty()?m.trackChildChange(xh(e,i)):m.trackChildChange(jp(e,i,w))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(gn,(o,u)=>{e.hasChild(o)||i.trackChildChange(hv(o,u))}),e.isLeafNode()||e.forEachChild(gn,(o,u)=>{if(t.hasChild(o)){const m=t.getImmediateChild(o);m.equals(u)||i.trackChildChange(jp(o,u,m))}else i.trackChildChange(xh(o,u))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?mn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $p{constructor(t){this.indexedFilter_=new fv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=$p.getStartPost_(t),this.endPost_=$p.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,o,u,m){return this.matches(new yn(e,i))||(i=mn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,o,u,m)}updateFullNode(t,e,i){e.isLeafNode()&&(e=mn.EMPTY_NODE);let o=e.withIndex(this.index_);o=o.updatePriority(mn.EMPTY_NODE);const u=this;return e.forEachChild(gn,(m,w)=>{u.matches(new yn(m,w))||(o=o.updateImmediateChild(m,mn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class IE{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new $p(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,o,u,m){return this.rangedFilter_.matches(new yn(e,i))||(i=mn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,o,u,m):this.fullLimitUpdateChild_(t,e,i,u,m)}updateFullNode(t,e,i){let o;if(e.isLeafNode()||e.isEmpty())o=mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let u;o=mn.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let m=0;for(;u.hasNext()&&m<this.limit_;){const w=u.getNext();if(this.withinDirectionalStart(w)){if(!this.withinDirectionalEnd(w))break;o=o.updateImmediateChild(w.name,w.node),m++}}}else{let u;o=e.withIndex(this.index_),o=o.updatePriority(mn.EMPTY_NODE),u=this.reverse_?o.getReverseIterator(this.index_):o.getIterator(this.index_);let m=0;for(;u.hasNext();){const w=u.getNext();m<this.limit_&&this.withinDirectionalStart(w)&&this.withinDirectionalEnd(w)?m++:o=o.updateImmediateChild(w.name,mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,o,u){let m;if(this.reverse_){const Y=this.index_.getCompare();m=(se,je)=>Y(je,se)}else m=this.index_.getCompare();const w=t;(0,W.vA)(w.numChildren()===this.limit_,"");const A=new yn(e,i),P=this.reverse_?w.getFirstChild(this.index_):w.getLastChild(this.index_),j=this.rangedFilter_.matches(A);if(w.hasChild(e)){const Y=w.getImmediateChild(e);let se=o.getChildAfterChild(this.index_,P,this.reverse_);for(;null!=se&&(se.name===e||w.hasChild(se.name));)se=o.getChildAfterChild(this.index_,se,this.reverse_);const je=null==se?1:m(se,A);if(j&&!i.isEmpty()&&je>=0)return u?.trackChildChange(jp(e,i,Y)),w.updateImmediateChild(e,i);{u?.trackChildChange(hv(e,Y));const St=w.updateImmediateChild(e,mn.EMPTY_NODE);return null!=se&&this.rangedFilter_.matches(se)?(u?.trackChildChange(xh(se.name,se.node)),St.updateImmediateChild(se.name,se.node)):St}}return i.isEmpty()?t:j&&m(P,A)>=0?(null!=u&&(u.trackChildChange(hv(P.name,P.node)),u.trackChildChange(xh(e,i))),w.updateImmediateChild(e,i).updateImmediateChild(P.name,mn.EMPTY_NODE)):t}}class Pl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Iu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===gn}copy(){const t=new Pl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function AE(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function TE(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function Nh(n,t){const e=n.copy();return e.index_=t,e}function SE(n){const t={};if(n.isDefault())return t;let e;if(n.index_===gn?e="$priority":n.index_===dv?e="$value":n.index_===E?e="$key":((0,W.vA)(n.index_ instanceof bE,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,W.As)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,W.As)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,W.As)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,W.As)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,W.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function vm(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==gn&&(t.i=n.index_.toString()),t}class ME extends dm{constructor(t,e,i,o){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=xc("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,W.vA)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const m=ME.getListenId_(t,i),w={};this.listens_[m]=w;const A=SE(t._queryParams);this.restRequest_(u+".json",A,(P,j)=>{let Y=j;if(404===P&&(Y=null,P=null),null===P&&this.onDataUpdate_(u,Y,!1,i),(0,W.yw)(this.listens_,m)===w){let se;se=P?401===P?"permission_denied":"rest_error:"+P:"ok",o(se,null)}})}unlisten(t,e){const i=ME.getListenId_(t,e);delete this.listens_[i]}get(t){const e=SE(t._queryParams),i=t._path.toString(),o=new W.cY;return this.restRequest_(i+".json",e,(u,m)=>{let w=m;404===u&&(w=null,u=null),null===u?(this.onDataUpdate_(i,w,!1,null),o.resolve(w)):o.reject(new Error(w))}),o.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(e.auth=o.accessToken),u&&u.token&&(e.ac=u.token);const m=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,W.Am)(e);this.log_("Sending REST request for "+m);const w=new XMLHttpRequest;w.onreadystatechange=()=>{if(i&&4===w.readyState){this.log_("REST Response for "+m+" received. status:",w.status,"response:",w.responseText);let A=null;if(w.status>=200&&w.status<300){try{A=(0,W.$L)(w.responseText)}catch{hs("Failed to parse JSON response for "+m+": "+w.responseText)}i(null,A)}else 401!==w.status&&404!==w.status&&hs("Got unsuccessful REST response for "+m+" Status: "+w.status),i(w.status);i=null}},w.open("GET",m,!0),w.send()})}}class Q0{constructor(){this.rootNode_=mn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function ym(){return{value:null,children:new Map}}function Af(n,t,e){if(vn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=En(t);n.children.has(i)||n.children.set(i,ym()),Af(n.children.get(i),t=rr(t),e)}}function RE(n,t){if(vn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(gn,(i,o)=>{Af(n,new Hn(i),o)}),RE(n,t)}}if(n.children.size>0){const e=En(t);return t=rr(t),n.children.has(e)&&RE(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function PE(n,t,e){null!==n.value?e(t,n.value):function Xw(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,o)=>{PE(o,new Hn(t.toString()+"/"+i),e)})}class Zw{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Ai(this.last_,(i,o)=>{e[i]=e[i]-o}),this.last_=t,e}}class eb{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Zw(t);const i=1e4+2e4*Math.random();Tl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Ai(t,(o,u)=>{u>0&&(0,W.gR)(this.statsToReport_,o)&&(e[o]=u,i=!0)}),i&&this.server_.reportStats(e),Tl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ou=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ou||{});function xE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class gv{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Ou.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,W.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Hn(t));return new gv(jn(),e,this.revert)}}return(0,W.vA)(En(this.path)===t,"operationForChild called for unrelated child."),new gv(rr(this.path),this.affectedTree,this.revert)}}class Em{constructor(t,e){this.source=t,this.path=e,this.type=Ou.LISTEN_COMPLETE}operationForChild(t){return vn(this.path)?new Em(this.source,jn()):new Em(this.source,rr(this.path))}}class Sf{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Ou.OVERWRITE}operationForChild(t){return vn(this.path)?new Sf(this.source,jn(),this.snap.getImmediateChild(t)):new Sf(this.source,rr(this.path),this.snap)}}class Gp{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Ou.MERGE}operationForChild(t){if(vn(this.path)){const e=this.children.subtree(new Hn(t));return e.isEmpty()?null:e.value?new Sf(this.source,jn(),e.value):new Gp(this.source,jn(),e)}return(0,W.vA)(En(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gp(this.source,rr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kh{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(vn(t))return this.isFullyInitialized()&&!this.filtered_;const e=En(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Z0{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Kp(n,t,e,i,o,u){const m=i.filter(w=>w.type===e);m.sort((w,A)=>function eD(n,t,e){if(null==t.childName||null==e.childName)throw(0,W.Hk)("Should only compare child_ events.");const i=new yn(t.childName,t.snapshotNode),o=new yn(e.childName,e.snapshotNode);return n.index_.compare(i,o)}(n,w,A)),m.forEach(w=>{const A=function NE(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,w,u);o.forEach(P=>{P.respondsTo(w.type)&&t.push(P.createEvent(A,n.query_))})})}function Mf(n,t){return{eventCache:n,serverCache:t}}function Cm(n,t,e,i){return Mf(new kh(t,e,i),n.serverCache)}function tb(n,t,e,i){return Mf(n.eventCache,new kh(t,e,i))}function mv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kE;class Ar{constructor(t,e=(()=>(kE||(kE=new K(dE)),kE))()){this.value=t,this.children=e}static fromObject(t){let e=new Ar(null);return Ai(t,(i,o)=>{e=e.set(new Hn(i),o)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:jn(),value:this.value};if(vn(t))return null;{const i=En(t),o=this.children.get(i);if(null!==o){const u=o.findRootMostMatchingPathAndValue(rr(t),e);return null!=u?{path:ir(new Hn(i),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(vn(t))return this;{const e=En(t),i=this.children.get(e);return null!==i?i.subtree(rr(t)):new Ar(null)}}set(t,e){if(vn(t))return new Ar(e,this.children);{const i=En(t),u=(this.children.get(i)||new Ar(null)).set(rr(t),e),m=this.children.insert(i,u);return new Ar(this.value,m)}}remove(t){if(vn(t))return this.children.isEmpty()?new Ar(null):new Ar(null,this.children);{const e=En(t),i=this.children.get(e);if(i){const o=i.remove(rr(t));let u;return u=o.isEmpty()?this.children.remove(e):this.children.insert(e,o),null===this.value&&u.isEmpty()?new Ar(null):new Ar(this.value,u)}return this}}get(t){if(vn(t))return this.value;{const e=En(t),i=this.children.get(e);return i?i.get(rr(t)):null}}setTree(t,e){if(vn(t))return e;{const i=En(t),u=(this.children.get(i)||new Ar(null)).setTree(rr(t),e);let m;return m=u.isEmpty()?this.children.remove(i):this.children.insert(i,u),new Ar(this.value,m)}}fold(t){return this.fold_(jn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((o,u)=>{i[o]=u.fold_(ir(t,o),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,jn(),e)}findOnPath_(t,e,i){const o=!!this.value&&i(e,this.value);if(o)return o;if(vn(t))return null;{const u=En(t),m=this.children.get(u);return m?m.findOnPath_(rr(t),ir(e,u),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,jn(),e)}foreachOnPath_(t,e,i){if(vn(t))return this;{this.value&&i(e,this.value);const o=En(t),u=this.children.get(o);return u?u.foreachOnPath_(rr(t),ir(e,o),i):new Ar(null)}}foreach(t){this.foreach_(jn(),t)}foreach_(t,e){this.children.inorderTraversal((i,o)=>{o.foreach_(ir(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Ol{constructor(t){this.writeTree_=t}static empty(){return new Ol(new Ar(null))}}function zp(n,t,e){if(vn(t))return new Ol(new Ar(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const o=i.path;let u=i.value;const m=Os(o,t);return u=u.updateChild(m,e),new Ol(n.writeTree_.set(o,u))}{const o=new Ar(e),u=n.writeTree_.setTree(t,o);return new Ol(u)}}}function FE(n,t,e){let i=n;return Ai(e,(o,u)=>{i=zp(i,ir(t,o),u)}),i}function nD(n,t){if(vn(t))return Ol.empty();{const e=n.writeTree_.setTree(t,new Ar(null));return new Ol(e)}}function _v(n,t){return null!=Fh(n,t)}function Fh(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Os(e.path,t)):null}function rD(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(gn,(i,o)=>{t.push(new yn(i,o))}):n.writeTree_.children.inorderTraversal((i,o)=>{null!=o.value&&t.push(new yn(i,o.value))}),t}function kc(n,t){if(vn(t))return n;{const e=Fh(n,t);return new Ol(null!=e?new Ar(e):n.writeTree_.subtree(t))}}function LE(n){return n.writeTree_.isEmpty()}function qp(n,t){return vv(jn(),n.writeTree_,t)}function vv(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((o,u)=>{".priority"===o?((0,W.vA)(null!==u.value,"Priority writes must always be leaf nodes"),i=u.value):e=vv(ir(n,o),u,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(ir(n,".priority"),i)),e}}function yv(n,t){return HE(t,n)}function Ev(n,t){if(n.snap)return Ot(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ot(ir(n.path,e),t))return!0;return!1}function BE(n){return n.visible}function Of(n,t,e){let i=Ol.empty();for(let o=0;o<n.length;++o){const u=n[o];if(t(u)){const m=u.path;let w;if(u.snap)Ot(e,m)?(w=Os(e,m),i=zp(i,w,u.snap)):Ot(m,e)&&(w=Os(m,e),i=zp(i,jn(),u.snap.getChild(w)));else{if(!u.children)throw(0,W.Hk)("WriteRecord should have .snap or .children");if(Ot(e,m))w=Os(e,m),i=FE(i,w,u.children);else if(Ot(m,e))if(w=Os(m,e),vn(w))i=FE(i,jn(),u.children);else{const A=(0,W.yw)(u.children,En(w));if(A){const P=A.getChild(rr(w));i=zp(i,jn(),P)}}}}}return i}function xf(n,t,e,i,o){if(i||o){const u=kc(n.visibleWrites,t);return!o&&LE(u)?e:o||null!=e||_v(u,jn())?qp(Of(n.allWrites,function(P){return(P.visible||o)&&(!i||!~i.indexOf(P.writeId))&&(Ot(P.path,t)||Ot(t,P.path))},t),e||mn.EMPTY_NODE):null}{const u=Fh(n.visibleWrites,t);if(null!=u)return u;{const m=kc(n.visibleWrites,t);return LE(m)?e:null!=e||_v(m,jn())?qp(m,e||mn.EMPTY_NODE):null}}}function Ld(n,t,e,i){return xf(n.writeTree,n.treePath,t,e,i)}function Cv(n,t){return function Yp(n,t,e){let i=mn.EMPTY_NODE;const o=Fh(n.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(gn,(u,m)=>{i=i.updateImmediateChild(u,m)}),i;if(e){const u=kc(n.visibleWrites,t);return e.forEachChild(gn,(m,w)=>{const A=qp(kc(u,new Hn(m)),w);i=i.updateImmediateChild(m,A)}),rD(u).forEach(m=>{i=i.updateImmediateChild(m.name,m.node)}),i}return rD(kc(n.visibleWrites,t)).forEach(m=>{i=i.updateImmediateChild(m.name,m.node)}),i}(n.writeTree,n.treePath,t)}function VE(n,t,e,i){return function Qp(n,t,e,i,o){(0,W.vA)(i||o,"Either existingEventSnap or existingServerSnap must exist");const u=ir(t,e);if(_v(n.visibleWrites,u))return null;{const m=kc(n.visibleWrites,u);return LE(m)?o.getChild(e):qp(m,o.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function bm(n,t){return function Zp(n,t){return Fh(n.visibleWrites,t)}(n.writeTree,ir(n.treePath,t))}function wv(n,t,e){return function Xp(n,t,e,i){const o=ir(t,e),u=Fh(n.visibleWrites,o);return null!=u?u:i.isCompleteForChild(e)?qp(kc(n.visibleWrites,o),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function UE(n,t){return HE(ir(n.treePath,t),n.writeTree)}function HE(n,t){return{treePath:n,writeTree:t}}class rb{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,W.vA)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,W.vA)(".priority"!==i,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const u=o.type;if("child_added"===e&&"child_removed"===u)this.changeMap.set(i,jp(i,t.snapshotNode,o.snapshotNode));else if("child_removed"===e&&"child_added"===u)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===u)this.changeMap.set(i,hv(i,o.oldSnap));else if("child_changed"===e&&"child_added"===u)this.changeMap.set(i,xh(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==u)throw(0,W.Hk)("Illegal combination of changes: "+t+" occurred after "+o);this.changeMap.set(i,jp(i,t.snapshotNode,o.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const bv=new class ib{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class jE{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new kh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wv(this.writes_,t,i)}}getChildAfterChild(t,e,i){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rf(this.viewCache_),u=function nb(n,t,e,i,o,u){return function Jp(n,t,e,i,o,u,m){let w;const A=kc(n.visibleWrites,t),P=Fh(A,jn());if(null!=P)w=P;else{if(null==e)return[];w=qp(A,e)}if(w=w.withIndex(m),w.isEmpty()||w.isLeafNode())return[];{const j=[],Y=m.getCompare(),se=u?w.getReverseIteratorFrom(i,m):w.getIteratorFrom(i,m);let je=se.getNext();for(;je&&j.length<o;)0!==Y(je,i)&&j.push(je),je=se.getNext();return j}}(n.writeTree,n.treePath,t,e,i,o,u)}(this.writes_,o,e,1,i,t);return 0===u.length?null:u[0]}}function oD(n,t,e,i,o,u){const m=t.eventCache;if(null!=bm(i,e))return t;{let w,A;if(vn(e))if((0,W.vA)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const P=Rf(t),Y=Cv(i,P instanceof mn?P:mn.EMPTY_NODE);w=n.filter.updateFullNode(t.eventCache.getNode(),Y,u)}else{const P=Ld(i,Rf(t));w=n.filter.updateFullNode(t.eventCache.getNode(),P,u)}else{const P=En(e);if(".priority"===P){(0,W.vA)(1===Od(e),"Can't have a priority with additional path components");const j=m.getNode();A=t.serverCache.getNode();const Y=VE(i,e,j,A);w=null!=Y?n.filter.updatePriority(j,Y):m.getNode()}else{const j=rr(e);let Y;if(m.isCompleteForChild(P)){A=t.serverCache.getNode();const se=VE(i,e,m.getNode(),A);Y=null!=se?m.getNode().getImmediateChild(P).updateChild(j,se):m.getNode().getImmediateChild(P)}else Y=wv(i,P,t.serverCache);w=null!=Y?n.filter.updateChild(m.getNode(),P,Y,j,o,u):m.getNode()}}return Cm(t,w,m.isFullyInitialized()||vn(e),n.filter.filtersNodes())}}function Iv(n,t,e,i,o,u,m,w){const A=t.serverCache;let P;const j=m?n.filter:n.filter.getIndexedFilter();if(vn(e))P=j.updateFullNode(A.getNode(),i,null);else if(j.filtersNodes()&&!A.isFiltered()){const je=A.getNode().updateChild(e,i);P=j.updateFullNode(A.getNode(),je,null)}else{const je=En(e);if(!A.isCompleteForPath(e)&&Od(e)>1)return t;const tt=rr(e),Jt=A.getNode().getImmediateChild(je).updateChild(tt,i);P=".priority"===je?j.updatePriority(A.getNode(),Jt):j.updateChild(A.getNode(),je,Jt,tt,bv,null)}const Y=tb(t,P,A.isFullyInitialized()||vn(e),j.filtersNodes());return oD(n,Y,e,o,new jE(o,Y,u),w)}function sb(n,t,e,i,o,u,m){const w=t.eventCache;let A,P;const j=new jE(o,t,u);if(vn(e))P=n.filter.updateFullNode(t.eventCache.getNode(),i,m),A=Cm(t,P,!0,n.filter.filtersNodes());else{const Y=En(e);if(".priority"===Y)P=n.filter.updatePriority(t.eventCache.getNode(),i),A=Cm(t,P,w.isFullyInitialized(),w.isFiltered());else{const se=rr(e),je=w.getNode().getImmediateChild(Y);let tt;if(vn(se))tt=i;else{const St=j.getCompleteChild(Y);tt=null!=St?".priority"===Lp(se)&&St.getChild(xd(se)).isEmpty()?St:St.updateChild(se,i):mn.EMPTY_NODE}A=je.equals(tt)?t:Cm(t,n.filter.updateChild(w.getNode(),Y,tt,se,j,m),w.isFullyInitialized(),n.filter.filtersNodes())}}return A}function ob(n,t){return n.eventCache.isCompleteForChild(t)}function ab(n,t,e){return e.foreach((i,o)=>{t=t.updateChild(i,o)}),t}function Im(n,t,e,i,o,u,m,w){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let P,A=t;P=vn(e)?i:new Ar(null).setTree(e,i);const j=t.serverCache.getNode();return P.children.inorderTraversal((Y,se)=>{if(j.hasChild(Y)){const tt=ab(0,t.serverCache.getNode().getImmediateChild(Y),se);A=Iv(n,A,new Hn(Y),tt,o,u,m,w)}}),P.children.inorderTraversal((Y,se)=>{const je=!t.serverCache.isCompleteForChild(Y)&&null===se.value;if(!j.hasChild(Y)&&!je){const St=ab(0,t.serverCache.getNode().getImmediateChild(Y),se);A=Iv(n,A,new Hn(Y),St,o,u,m,w)}}),A}class lb{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new fv(i.getIndex()),u=function q0(n){return n.loadsAllData()?new fv(n.getIndex()):n.hasLimit()?new IE(n):new $p(n)}(i);this.processor_=function nS(n){return{filter:n}}(u);const m=e.serverCache,w=e.eventCache,A=o.updateFullNode(mn.EMPTY_NODE,m.getNode(),null),P=u.updateFullNode(mn.EMPTY_NODE,w.getNode(),null),j=new kh(A,m.isFullyInitialized(),o.filtersNodes()),Y=new kh(P,w.isFullyInitialized(),u.filtersNodes());this.viewCache_=Mf(Y,j),this.eventGenerator_=new Z0(this.query_)}get query(){return this.query_}}function lD(n,t){const e=Rf(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!vn(t)&&!e.getImmediateChild(En(t)).isEmpty())?e.getChild(t):null}function tg(n){return 0===n.eventRegistrations_.length}function ub(n,t,e){const i=[];if(e){(0,W.vA)(null==t,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const m=u.createCancelEvent(e,o);m&&i.push(m)})}if(t){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const m=n.eventRegistrations_[u];if(m.matches(t)){if(t.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(m)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return i}function db(n,t,e,i){t.type===Ou.MERGE&&null!==t.source.queryId&&((0,W.vA)(Rf(n.viewCache_),"We should always have a full cache before handling merges"),(0,W.vA)(mv(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function iD(n,t,e,i,o){const u=new rb;let m,w;if(e.type===Ou.OVERWRITE){const P=e;P.source.fromUser?m=sb(n,t,P.path,P.snap,i,o,u):((0,W.vA)(P.source.fromServer,"Unknown source."),w=P.source.tagged||t.serverCache.isFiltered()&&!vn(P.path),m=Iv(n,t,P.path,P.snap,i,o,w,u))}else if(e.type===Ou.MERGE){const P=e;P.source.fromUser?m=function aD(n,t,e,i,o,u,m){let w=t;return i.foreach((A,P)=>{const j=ir(e,A);ob(t,En(j))&&(w=sb(n,w,j,P,o,u,m))}),i.foreach((A,P)=>{const j=ir(e,A);ob(t,En(j))||(w=sb(n,w,j,P,o,u,m))}),w}(n,t,P.path,P.children,i,o,u):((0,W.vA)(P.source.fromServer,"Unknown source."),w=P.source.tagged||t.serverCache.isFiltered(),m=Im(n,t,P.path,P.children,i,o,w,u))}else if(e.type===Ou.ACK_USER_WRITE){const P=e;m=P.revert?function Dv(n,t,e,i,o,u){let m;if(null!=bm(i,e))return t;{const w=new jE(i,t,o),A=t.eventCache.getNode();let P;if(vn(e)||".priority"===En(e)){let j;if(t.serverCache.isFullyInitialized())j=Ld(i,Rf(t));else{const Y=t.serverCache.getNode();(0,W.vA)(Y instanceof mn,"serverChildren would be complete if leaf node"),j=Cv(i,Y)}P=n.filter.updateFullNode(A,j,u)}else{const j=En(e);let Y=wv(i,j,t.serverCache);null==Y&&t.serverCache.isCompleteForChild(j)&&(Y=A.getImmediateChild(j)),P=null!=Y?n.filter.updateChild(A,j,Y,rr(e),w,u):t.eventCache.getNode().hasChild(j)?n.filter.updateChild(A,j,mn.EMPTY_NODE,rr(e),w,u):A,P.isEmpty()&&t.serverCache.isFullyInitialized()&&(m=Ld(i,Rf(t)),m.isLeafNode()&&(P=n.filter.updateFullNode(P,m,u)))}return m=t.serverCache.isFullyInitialized()||null!=bm(i,jn()),Cm(t,P,m,n.filter.filtersNodes())}}(n,t,P.path,i,o,u):function Dm(n,t,e,i,o,u,m){if(null!=bm(o,e))return t;const w=t.serverCache.isFiltered(),A=t.serverCache;if(null!=i.value){if(vn(e)&&A.isFullyInitialized()||A.isCompleteForPath(e))return Iv(n,t,e,A.getNode().getChild(e),o,u,w,m);if(vn(e)){let P=new Ar(null);return A.getNode().forEachChild(E,(j,Y)=>{P=P.set(new Hn(j),Y)}),Im(n,t,e,P,o,u,w,m)}return t}{let P=new Ar(null);return i.foreach((j,Y)=>{const se=ir(e,j);A.isCompleteForPath(se)&&(P=P.set(j,A.getNode().getChild(se)))}),Im(n,t,e,P,o,u,w,m)}}(n,t,P.path,P.affectedTree,i,o,u)}else{if(e.type!==Ou.LISTEN_COMPLETE)throw(0,W.Hk)("Unknown operation type: "+e.type);m=function $E(n,t,e,i,o){const u=t.serverCache;return oD(n,tb(t,u.getNode(),u.isFullyInitialized()||vn(e),u.isFiltered()),e,i,bv,o)}(n,t,e.path,i,u)}const A=u.getChanges();return function sD(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),u=mv(n);(e.length>0||!n.eventCache.isFullyInitialized()||o&&!i.getNode().equals(u)||!i.getNode().getPriority().equals(u.getPriority()))&&e.push(_m(mv(t)))}}(t,m,A),{viewCache:m,changes:A}}(n.processor_,o,t,e,i);return function rS(n,t){(0,W.vA)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,W.vA)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,W.vA)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,Av(n,u.changes,u.viewCache.eventCache.getNode(),null)}function Av(n,t,e,i){return function J0(n,t,e,i){const o=[],u=[];return t.forEach(m=>{"child_changed"===m.type&&n.index_.indexedValueChanged(m.oldSnap,m.snapshotNode)&&u.push(function Yw(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(m.childName,m.snapshotNode))}),Kp(n,o,"child_removed",t,i,e),Kp(n,o,"child_added",t,i,e),Kp(n,o,"child_moved",u,i,e),Kp(n,o,"child_changed",t,i,e),Kp(n,o,"value",t,i,e),o}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let Nf,Sv;class Tm{constructor(){this.views=new Map}}function Sm(n,t,e,i){const o=t.source.queryId;if(null!==o){const u=n.views.get(o);return(0,W.vA)(null!=u,"SyncTree gave us an op for an invalid query."),db(u,t,e,i)}{let u=[];for(const m of n.views.values())u=u.concat(db(m,t,e,i));return u}}function hb(n,t,e,i,o){const m=n.views.get(t._queryIdentifier);if(!m){let w=Ld(e,o?i:null),A=!1;w?A=!0:i instanceof mn?(w=Cv(e,i),A=!1):(w=mn.EMPTY_NODE,A=!1);const P=Mf(new kh(w,A,!1),new kh(i,o,!1));return new lb(t,P)}return m}function pb(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Bd(n,t){let e=null;for(const i of n.views.values())e=e||lD(i,t);return e}function WE(n,t){return t._queryParams.loadsAllData()?Tv(n):n.views.get(t._queryIdentifier)}function GE(n,t){return null!=WE(n,t)}function Lh(n){return null!=Tv(n)}function Tv(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let zE=1;class mb{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ar(null),this.pendingWriteTree_=function eg(){return{visibleWrites:Ol.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ng(n,t,e,i,o){return function xu(n,t,e,i,o){(0,W.vA)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:o}),o&&(n.visibleWrites=zp(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,o),o?kf(n,new Sf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Nu(n,t,e=!1){const i=function eo(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Pf(n,t){const e=n.allWrites.findIndex(w=>w.writeId===t);(0,W.vA)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let o=i.visible,u=!1,m=n.allWrites.length-1;for(;o&&m>=0;){const w=n.allWrites[m];w.visible&&(m>=e&&Ev(w,i.path)?o=!1:Ot(i.path,w.path)&&(u=!0)),m--}return!!o&&(u?(function xl(n){n.visibleWrites=Of(n.allWrites,BE,jn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=nD(n.visibleWrites,i.path):Ai(i.children,A=>{n.visibleWrites=nD(n.visibleWrites,ir(i.path,A))}),!0))}(n.pendingWriteTree_,t)){let u=new Ar(null);return null!=i.snap?u=u.set(jn(),!0):Ai(i.children,m=>{u=u.set(new Hn(m),!0)}),kf(n,new gv(i.path,u,e))}return[]}function rg(n,t,e){return kf(n,new Sf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function ig(n,t,e,i,o=!1){const u=t._path,m=n.syncPointTree_.get(u);let w=[];if(m&&("default"===t._queryIdentifier||GE(m,t))){const A=function fD(n,t,e,i){const o=t._queryIdentifier,u=[];let m=[];const w=Lh(n);if("default"===o)for(const[A,P]of n.views.entries())m=m.concat(ub(P,e,i)),tg(P)&&(n.views.delete(A),P.query._queryParams.loadsAllData()||u.push(P.query));else{const A=n.views.get(o);A&&(m=m.concat(ub(A,e,i)),tg(A)&&(n.views.delete(o),A.query._queryParams.loadsAllData()||u.push(A.query)))}return w&&!Lh(n)&&u.push(new(function dD(){return(0,W.vA)(Nf,"Reference.ts has not been loaded"),Nf}())(t._repo,t._path)),{removed:u,events:m}}(m,t,e,i);(function hD(n){return 0===n.views.size})(m)&&(n.syncPointTree_=n.syncPointTree_.remove(u));const P=A.removed;if(w=A.events,!o){const j=-1!==P.findIndex(se=>se._queryParams.loadsAllData()),Y=n.syncPointTree_.findOnPath(u,(se,je)=>Lh(je));if(j&&!Y){const se=n.syncPointTree_.subtree(u);if(!se.isEmpty()){const je=function vb(n){return n.fold((t,e,i)=>{if(e&&Lh(e))return[Tv(e)];{let o=[];return e&&(o=pb(e)),Ai(i,(u,m)=>{o=o.concat(m)}),o}})}(se);for(let tt=0;tt<je.length;++tt){const St=je[tt],Jt=St.query,or=Nv(n,St);n.listenProvider_.startListening(Mm(Jt),sg(n,Jt),or.hashFn,or.onComplete)}}}!Y&&P.length>0&&!i&&(j?n.listenProvider_.stopListening(Mm(t),null):P.forEach(se=>{const je=n.queryToTagMap.get(kv(se));n.listenProvider_.stopListening(Mm(se),je)}))}!function vD(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const o=kv(i),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,P)}return w}function Rv(n,t,e,i){const o=Fv(n,i);if(null!=o){const u=Lv(o),m=u.path,w=u.queryId,A=Os(m,t);return Bv(n,m,new Sf(xE(w),A,e))}return[]}function Pv(n,t,e,i=!1){const o=t._path;let u=null,m=!1;n.syncPointTree_.foreachOnPath(o,(se,je)=>{const tt=Os(se,o);u=u||Bd(je,tt),m=m||Lh(je)});let A,w=n.syncPointTree_.get(o);w?(m=m||Lh(w),u=u||Bd(w,jn())):(w=new Tm,n.syncPointTree_=n.syncPointTree_.set(o,w)),null!=u?A=!0:(A=!1,u=mn.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((je,tt)=>{const St=Bd(tt,jn());St&&(u=u.updateImmediateChild(je,St))}));const P=GE(w,t);if(!P&&!t._queryParams.loadsAllData()){const se=kv(t);(0,W.vA)(!n.queryToTagMap.has(se),"View does not exist, but we have a tag");const je=function yD(){return zE++}();n.queryToTagMap.set(se,je),n.tagToQueryMap.set(je,se)}let Y=function fb(n,t,e,i,o,u){const m=hb(n,t,i,o,u);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,m),function cD(n,t){n.eventRegistrations_.push(t)}(m,e),function uD(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(gn,(u,m)=>{i.push(xh(u,m))}),e.isFullyInitialized()&&i.push(_m(e.getNode())),Av(n,i,e.getNode(),t)}(m,e)}(w,t,e,yv(n.pendingWriteTree_,o),u,A);if(!P&&!m&&!i){const se=WE(w,t);Y=Y.concat(function yb(n,t,e){const i=t._path,o=sg(n,t),u=Nv(n,e),m=n.listenProvider_.startListening(Mm(t),o,u.hashFn,u.onComplete),w=n.syncPointTree_.subtree(i);if(o)(0,W.vA)(!Lh(w.value),"If we're adding a query, it shouldn't be shadowed");else{const A=w.fold((P,j,Y)=>{if(!vn(P)&&j&&Lh(j))return[Tv(j).query];{let se=[];return j&&(se=se.concat(pb(j).map(je=>je.query))),Ai(Y,(je,tt)=>{se=se.concat(tt)}),se}});for(let P=0;P<A.length;++P){const j=A[P];n.listenProvider_.stopListening(Mm(j),sg(n,j))}}return m}(n,t,se))}return Y}function Ov(n,t,e){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(t,(m,w)=>{const P=Bd(w,Os(m,t));if(P)return P});return xf(o,t,u,e,!0)}function kf(n,t){return xv(t,n.syncPointTree_,null,yv(n.pendingWriteTree_,jn()))}function xv(n,t,e,i){if(vn(n.path))return qE(n,t,e,i);{const o=t.get(jn());null==e&&null!=o&&(e=Bd(o,jn()));let u=[];const m=En(n.path),w=n.operationForChild(m),A=t.children.get(m);if(A&&w){const P=e?e.getImmediateChild(m):null,j=UE(i,m);u=u.concat(xv(w,A,P,j))}return o&&(u=u.concat(Sm(o,n,i,e))),u}}function qE(n,t,e,i){const o=t.get(jn());null==e&&null!=o&&(e=Bd(o,jn()));let u=[];return t.children.inorderTraversal((m,w)=>{const A=e?e.getImmediateChild(m):null,P=UE(i,m),j=n.operationForChild(m);j&&(u=u.concat(qE(j,w,A,P)))}),o&&(u=u.concat(Sm(o,n,i,e))),u}function Nv(n,t){const e=t.query,i=sg(n,e);return{hashFn:()=>(function Am(n){return n.viewCache_.serverCache.getNode()}(t)||mn.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return i?function mD(n,t,e){const i=Fv(n,e);if(i){const o=Lv(i),u=o.path,m=o.queryId,w=Os(u,t);return Bv(n,u,new Em(xE(m),w))}return[]}(n,e._path,i):function gD(n,t){return kf(n,new Em({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const u=function Ap(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(o,e);return ig(n,e,null,u)}}}}function sg(n,t){const e=kv(t);return n.queryToTagMap.get(e)}function kv(n){return n._path.toString()+"$"+n._queryIdentifier}function Fv(n,t){return n.tagToQueryMap.get(t)}function Lv(n){const t=n.indexOf("$");return(0,W.vA)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Hn(n.substr(0,t))}}function Bv(n,t,e){const i=n.syncPointTree_.get(t);return(0,W.vA)(i,"Missing sync point for query tag that we're tracking"),Sm(i,e,yv(n.pendingWriteTree_,t),null)}function Mm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function KE(){return(0,W.vA)(Sv,"Reference.ts has not been loaded"),Sv}())(n._repo,n._path):n}class Rm{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Rm(e)}node(){return this.node_}}class Vv{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=ir(this.path_,t);return new Vv(this.syncTree_,e)}node(){return Ov(this.syncTree_,this.path_)}}const Eb=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},YE=function(n,t,e){return n&&"object"==typeof n?((0,W.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Cb(n[".sv"],t,e):"object"==typeof n[".sv"]?wb(n[".sv"],t):void(0,W.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Cb=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,W.vA)(!1,"Unexpected server value: "+n)},wb=function(n,t,e){n.hasOwnProperty("increment")||(0,W.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,W.vA)(!1,"Unexpected increment value: "+i);const o=t.node();if((0,W.vA)(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const m=o.getValue();return"number"!=typeof m?i:m+i},QE=function(n,t,e,i){return Hv(t,new Vv(e,n),i)},Uv=function(n,t,e){return Hv(n,new Rm(t),e)};function Hv(n,t,e){const i=n.getPriority().val(),o=YE(i,t.getImmediateChild(".priority"),e);let u;if(n.isLeafNode()){const m=n,w=YE(m.getValue(),t,e);return w!==m.getValue()||o!==m.getPriority().val()?new Nt(w,Kr(o)):n}{const m=n;return u=m,o!==m.getPriority().val()&&(u=u.updatePriority(new Nt(o))),m.forEachChild(gn,(w,A)=>{const P=Hv(A,t.getImmediateChild(w),e);P!==A&&(u=u.updateImmediateChild(w,P))}),u}}class og{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Fc(n,t){let e=t instanceof Hn?t:new Hn(t),i=n,o=En(e);for(;null!==o;){const u=(0,W.yw)(i.node.children,o)||{children:{},childCount:0};i=new og(o,i,u),e=rr(e),o=En(e)}return i}function Ff(n){return n.node.value}function XE(n,t){n.node.value=t,Ib(n)}function jv(n){return n.node.childCount>0}function ag(n,t){Ai(n.node.children,(e,i)=>{t(new og(e,n,i))})}function bb(n,t,e,i){e&&!i&&t(n),ag(n,o=>{bb(o,t,!0,i)}),e&&i&&t(n)}function $v(n){return new Hn(null===n.parent?n.name:$v(n.parent)+"/"+n.name)}function Ib(n){null!==n.parent&&function ED(n,t,e){const i=function Lf(n){return void 0===Ff(n)&&!jv(n)}(e),o=(0,W.gR)(n.node.children,t);i&&o?(delete n.node.children[t],n.node.childCount--,Ib(n)):!i&&!o&&(n.node.children[t]=e.node,n.node.childCount++,Ib(n))}(n.parent,n.name,n)}const CD=/[\[\].#$\/\u0000-\u001F\u007F]/,Db=/[\[\].#$\u0000-\u001F\u007F]/,JE=10485760,pi=function(n){return"string"==typeof n&&0!==n.length&&!CD.test(n)},eC=function(n){return"string"==typeof n&&0!==n.length&&!Db.test(n)},Pm=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!bh(n)||n&&"object"==typeof n&&(0,W.gR)(n,".sv")},Lc=function(n,t,e,i){i&&void 0===t||Om((0,W.dI)(n,"value"),t,e)},Om=function(n,t,e){const i=e instanceof Hn?new lv(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Nd(i));if("function"==typeof t)throw new Error(n+"contains a function "+Nd(i)+" with contents = "+t.toString());if(bh(t))throw new Error(n+"contains "+t.toString()+" "+Nd(i));if("string"==typeof t&&t.length>JE/3&&(0,W.OE)(t)>JE)throw new Error(n+"contains a string greater than "+JE+" utf8 bytes "+Nd(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let o=!1,u=!1;if(Ai(t,(m,w)=>{if(".value"===m)o=!0;else if(".priority"!==m&&".sv"!==m&&(u=!0,!pi(m)))throw new Error(n+" contains an invalid key ("+m+") "+Nd(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function cv(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,W.OE)(t),hm(n)})(i,m),Om(n,w,i),function Rh(n){const t=n.parts_.pop();n.byteLength_-=(0,W.OE)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),o&&u)throw new Error(n+' contains ".value" child '+Nd(i)+" in addition to actual children.")}},tC=function(n,t,e,i){if(i&&void 0===t)return;const o=(0,W.dI)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];Ai(t,(m,w)=>{const A=new Hn(m);if(Om(o,w,ir(e,A)),".priority"===Lp(A)&&!Pm(w))throw new Error(o+"contains an invalid value for '"+A.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(A)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const u=Bp(i);for(let m=0;m<u.length;m++)if((".priority"!==u[m]||m!==u.length-1)&&!pi(u[m]))throw new Error(n+"contains an invalid key ("+u[m]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(av);let o=null;for(e=0;e<t.length;e++){if(i=t[e],null!==o&&Ot(o,i))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}}(o,u)},Bh=function(n,t,e){if(!e||void 0!==t){if(bh(t))throw new Error((0,W.dI)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pm(t))throw new Error((0,W.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xm=function(n,t,e,i){if(!(i&&void 0===e||pi(e)))throw new Error((0,W.dI)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nm=function(n,t,e,i){if(!(i&&void 0===e||eC(e)))throw new Error((0,W.dI)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Tb=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Nm(n,t,e,i)},Nl=function(n,t){if(".info"===En(t))throw new Error(n+" failed = Can't modify data under /.info/")},nC=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!pi(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),eC(n)}(e))throw new Error((0,W.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lg(n,t){let e=null;for(let i=0;i<t.length;i++){const o=t[i],u=o.getPath();null!==e&&!Vp(u,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:u}),e.events.push(o)}e&&n.eventLists_.push(e)}function Wv(n,t,e){lg(n,e),Sb(n,i=>Vp(i,t))}function gi(n,t,e){lg(n,e),Sb(n,i=>Ot(i,t)||Ot(t,i))}function Sb(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const o=n.eventLists_[i];o&&(t(o.path)?(bD(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function bD(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();fi&&zt("event: "+e.toString()),Gr(i)}}}const Bc="repo_interrupt",Vc=25;class Uc{constructor(t,e,i,o){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ym(),this.transactionQueueTree_=new og,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rC(n){const e=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function km(n){return Eb({timestamp:rC(n)})}function Rb(n,t,e,i,o){n.dataUpdateCount++;const u=new Hn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let m=[];if(o)if(i){const A=(0,W.kH)(e,P=>Kr(P));m=function _b(n,t,e,i){const o=Fv(n,i);if(o){const u=Lv(o),m=u.path,w=u.queryId,A=Os(m,t),P=Ar.fromObject(e);return Bv(n,m,new Gp(xE(w),A,P))}return[]}(n.serverSyncTree_,u,A,o)}else{const A=Kr(e);m=Rv(n.serverSyncTree_,u,A,o)}else if(i){const A=(0,W.kH)(e,P=>Kr(P));m=function pD(n,t,e){const i=Ar.fromObject(e);return kf(n,new Gp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,u,A)}else{const A=Kr(e);m=rg(n.serverSyncTree_,u,A)}let w=u;m.length>0&&(w=Bf(n,u)),gi(n.eventQueue_,w,m)}function Pb(n,t){Fm(n,"connected",t),!1===t&&function TD(n){cg(n,"onDisconnectEvents");const t=km(n),e=ym();PE(n.onDisconnect_,jn(),(o,u)=>{const m=QE(o,u,n.serverSyncTree_,t);Af(e,o,m)});let i=[];PE(e,jn(),(o,u)=>{i=i.concat(rg(n.serverSyncTree_,o,u));const m=cC(n,o);Bf(n,m)}),n.onDisconnect_=ym(),gi(n.eventQueue_,jn(),i)}(n)}function Fm(n,t,e){const i=new Hn("/.info/"+t),o=Kr(e);n.infoData_.updateSnapshot(i,o);const u=rg(n.infoSyncTree_,i,o);gi(n.eventQueue_,i,u)}function Vh(n){return n.nextWriteId_++}function Gv(n,t,e,i,o){cg(n,"set",{path:t.toString(),value:e,priority:i});const u=km(n),m=Kr(e,i),w=Ov(n.serverSyncTree_,t),A=Uv(m,w,u),P=Vh(n),j=ng(n.serverSyncTree_,t,A,P,!0);lg(n.eventQueue_,j),n.server_.put(t.toString(),m.val(!0),(se,je)=>{const tt="ok"===se;tt||hs("set at "+t+" failed: "+se);const St=Nu(n.serverSyncTree_,P,!tt);gi(n.eventQueue_,t,St),Vd(0,o,se,je)});const Y=cC(n,t);Bf(n,Y),gi(n.eventQueue_,Y,[])}function Ob(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,o)=>{"ok"===i&&RE(n.onDisconnect_,t),Vd(0,e,i,o)})}function iC(n,t,e,i){const o=Kr(e);n.server_.onDisconnectPut(t.toString(),o.val(!0),(u,m)=>{"ok"===u&&Af(n.onDisconnect_,t,o),Vd(0,i,u,m)})}function zv(n,t,e){let i;i=".info"===En(t._path)?ig(n.infoSyncTree_,t,e):ig(n.serverSyncTree_,t,e),Wv(n.eventQueue_,t._path,i)}function sC(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Bc)}function cg(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),zt(e,...t)}function Vd(n,t,e,i){t&&Gr(()=>{if("ok"===e)t(null);else{const o=(e||"error").toUpperCase();let u=o;i&&(u+=": "+i);const m=new Error(u);m.code=o,t(m)}})}function Yv(n,t,e){return Ov(n.serverSyncTree_,t,e)||mn.EMPTY_NODE}function Lm(n,t=n.transactionQueueTree_){if(t||Qv(n,t),Ff(t)){const e=aC(n,t);(0,W.vA)(e.length>0,"Sending zero length transaction queue"),e.every(o=>0===o.status)&&function Nb(n,t,e){const i=e.map(P=>P.currentWriteId),o=Yv(n,t,i);let u=o;const m=o.hash();for(let P=0;P<e.length;P++){const j=e[P];(0,W.vA)(0===j.status,"tryToSendTransactionQueue_: items in queue should all be run."),j.status=1,j.retryCount++;const Y=Os(t,j.path);u=u.updateChild(Y,j.currentOutputSnapshotRaw)}const w=u.val(!0),A=t;n.server_.put(A.toString(),w,P=>{cg(n,"transaction put response",{path:A.toString(),status:P});let j=[];if("ok"===P){const Y=[];for(let se=0;se<e.length;se++)e[se].status=2,j=j.concat(Nu(n.serverSyncTree_,e[se].currentWriteId)),e[se].onComplete&&Y.push(()=>e[se].onComplete(null,!0,e[se].currentOutputSnapshotResolved)),e[se].unwatcher();Qv(n,Fc(n.transactionQueueTree_,t)),Lm(n,n.transactionQueueTree_),gi(n.eventQueue_,t,j);for(let se=0;se<Y.length;se++)Gr(Y[se])}else{if("datastale"===P)for(let Y=0;Y<e.length;Y++)e[Y].status=3===e[Y].status?4:0;else{hs("transaction at "+A.toString()+" failed: "+P);for(let Y=0;Y<e.length;Y++)e[Y].status=4,e[Y].abortReason=P}Bf(n,t)}},m)}(n,$v(t),e)}else jv(t)&&ag(t,e=>{Lm(n,e)})}function Bf(n,t){const e=oC(n,t),i=$v(e);return function kb(n,t,e){if(0===t.length)return;const i=[];let o=[];const m=t.filter(w=>0===w.status).map(w=>w.currentWriteId);for(let w=0;w<t.length;w++){const A=t[w],P=Os(e,A.path);let Y,j=!1;if((0,W.vA)(null!==P,"rerunTransactionsUnderNode_: relativePath should not be null."),4===A.status)j=!0,Y=A.abortReason,o=o.concat(Nu(n.serverSyncTree_,A.currentWriteId,!0));else if(0===A.status)if(A.retryCount>=Vc)j=!0,Y="maxretry",o=o.concat(Nu(n.serverSyncTree_,A.currentWriteId,!0));else{const se=Yv(n,A.path,m);A.currentInputSnapshot=se;const je=t[w].update(se.val());if(void 0!==je){Om("transaction failed: Data returned ",je,A.path);let tt=Kr(je);"object"==typeof je&&null!=je&&(0,W.gR)(je,".priority")||(tt=tt.updatePriority(se.getPriority()));const Jt=A.currentWriteId,or=km(n),vr=Uv(tt,se,or);A.currentOutputSnapshotRaw=tt,A.currentOutputSnapshotResolved=vr,A.currentWriteId=Vh(n),m.splice(m.indexOf(Jt),1),o=o.concat(ng(n.serverSyncTree_,A.path,vr,A.currentWriteId,A.applyLocally)),o=o.concat(Nu(n.serverSyncTree_,Jt,!0))}else j=!0,Y="nodata",o=o.concat(Nu(n.serverSyncTree_,A.currentWriteId,!0))}gi(n.eventQueue_,e,o),o=[],j&&(t[w].status=2,setTimeout(t[w].unwatcher,Math.floor(0)),t[w].onComplete&&i.push("nodata"===Y?()=>t[w].onComplete(null,!1,t[w].currentInputSnapshot):()=>t[w].onComplete(new Error(Y),!1,null)))}Qv(n,n.transactionQueueTree_);for(let w=0;w<i.length;w++)Gr(i[w]);Lm(n,n.transactionQueueTree_)}(n,aC(n,e),i),i}function oC(n,t){let e,i=n.transactionQueueTree_;for(e=En(t);null!==e&&void 0===Ff(i);)i=Fc(i,e),e=En(t=rr(t));return i}function aC(n,t){const e=[];return lC(n,t,e),e.sort((i,o)=>i.order-o.order),e}function lC(n,t,e){const i=Ff(t);if(i)for(let o=0;o<i.length;o++)e.push(i[o]);ag(t,o=>{lC(n,o,e)})}function Qv(n,t){const e=Ff(t);if(e){let i=0;for(let o=0;o<e.length;o++)2!==e[o].status&&(e[i]=e[o],i++);e.length=i,XE(t,e.length>0?e:void 0)}ag(t,i=>{Qv(n,i)})}function cC(n,t){const e=$v(oC(n,t)),i=Fc(n.transactionQueueTree_,t);return function ZE(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,o=>{uC(n,o)}),uC(n,i),bb(i,o=>{uC(n,o)}),e}function uC(n,t){const e=Ff(t);if(e){const i=[];let o=[],u=-1;for(let m=0;m<e.length;m++)3===e[m].status||(1===e[m].status?((0,W.vA)(u===m-1,"All SENT items should be at beginning of queue."),u=m,e[m].status=3,e[m].abortReason="set"):((0,W.vA)(0===e[m].status,"Unexpected transaction status in abort"),e[m].unwatcher(),o=o.concat(Nu(n.serverSyncTree_,e[m].currentWriteId,!0)),e[m].onComplete&&i.push(e[m].onComplete.bind(null,new Error("set"),!1,null))));-1===u?XE(t,void 0):e.length=u+1,gi(n.eventQueue_,$v(t),o);for(let m=0;m<i.length;m++)Gr(i[m])}}const dC=function(n,t){const e=OD(n),i=e.namespace;return"firebase.com"===e.domain&&Js(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rp(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Hn(e.pathString)}},OD=function(n){let t="",e="",i="",o="",u="",m=!0,w="https",A=443;if("string"==typeof n){let P=n.indexOf("//");P>=0&&(w=n.substring(0,P-1),n=n.substring(P+2));let j=n.indexOf("/");-1===j&&(j=n.length);let Y=n.indexOf("?");-1===Y&&(Y=n.length),t=n.substring(0,Math.min(j,Y)),j<Y&&(o=function RD(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let o=e[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}(n.substring(j,Y)));const se=function PD(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):hs(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,Y)));P=t.indexOf(":"),P>=0?(m="https"===w||"wss"===w,A=parseInt(t.substring(P+1),10)):P=t.length;const je=t.slice(0,P);if("localhost"===je.toLowerCase())e="localhost";else if(je.split(".").length<=2)e=je;else{const tt=t.indexOf(".");i=t.substring(0,tt).toLowerCase(),e=t.substring(tt+1),u=i}"ns"in se&&(u=se.ns)}return{host:t,port:A,domain:e,subdomain:i,secure:m,scheme:w,pathString:o,namespace:u}},Fb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xD=function(){let n=0;const t=[];return function(e){const i=e===n;let o;n=e;const u=new Array(8);for(o=7;o>=0;o--)u[o]=Fb.charAt(e%64),e=Math.floor(e/64);(0,W.vA)(0===e,"Cannot push at time == 0");let m=u.join("");if(i){for(o=11;o>=0&&63===t[o];o--)t[o]=0;t[o]++}else for(o=0;o<12;o++)t[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)m+=Fb.charAt(t[o]);return(0,W.vA)(20===m.length,"nextPushId: Length should be 20."),m}}();class Lb{constructor(t,e,i,o){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=o}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.As)(this.snapshot.exportVal())}}class Bb{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class hC{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,W.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Vb{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new W.cY;return Ob(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Nl("OnDisconnect.remove",this._path);const t=new W.cY;return iC(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Nl("OnDisconnect.set",this._path),Lc("OnDisconnect.set",t,this._path,!1);const e=new W.cY;return iC(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Nl("OnDisconnect.setWithPriority",this._path),Lc("OnDisconnect.setWithPriority",t,this._path,!1),Bh("OnDisconnect.setWithPriority",e,!1);const i=new W.cY;return function Kv(n,t,e,i,o){const u=Kr(e,i);n.server_.onDisconnectPut(t.toString(),u.val(!0),(m,w)=>{"ok"===m&&Af(n.onDisconnect_,t,u),Vd(0,o,m,w)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Nl("OnDisconnect.update",this._path),tC("OnDisconnect.update",t,this._path,!1);const e=new W.cY;return function SD(n,t,e,i){if((0,W.Im)(e))return zt("onDisconnect().update() called with empty data.  Don't do anything."),void Vd(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(o,u)=>{"ok"===o&&Ai(e,(m,w)=>{const A=Kr(w);Af(n.onDisconnect_,ir(t,m),A)}),Vd(0,i,o,u)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class fa{constructor(t,e,i,o){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=o}get key(){return vn(this._path)?null:Lp(this._path)}get ref(){return new kl(this._repo,this._path)}get _queryIdentifier(){const t=vm(this._queryParams),e=Ef(t);return"{}"===e?"default":e}get _queryObject(){return vm(this._queryParams)}isEqual(t){if(!((t=(0,W.Ku)(t))instanceof fa))return!1;const e=this._repo===t._repo,i=Vp(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ov(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function Xv(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Uh(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===E){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Iu)throw new Error(i);if("string"!=typeof t)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Nc)throw new Error(i);if("string"!=typeof e)throw new Error(o)}}else if(n.getIndex()===gn){if(null!=t&&!Pm(t)||null!=e&&!Pm(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.vA)(n.getIndex()instanceof bE||n.getIndex()===dv,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zv(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class kl extends fa{constructor(t,e){super(t,e,new Pl,!1)}get parent(){const t=xd(this._path);return null===t?null:new kl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Hh{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Hn(t),i=jh(this.ref,t);return new Hh(this._node.getChild(e),i,gn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,o)=>t(new Hh(o,jh(this.ref,i),gn)))}hasChild(t){const e=new Hn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fC(n,t){return(n=(0,W.Ku)(n))._checkNotDeleted("ref"),void 0!==t?jh(n._root,t):n._root}function pC(n,t){(n=(0,W.Ku)(n))._checkNotDeleted("refFromURL");const e=dC(t,n._repo.repoInfo_.nodeAdmin);nC("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Js("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),fC(n,e.path.toString())}function jh(n,t){return null===En((n=(0,W.Ku)(n))._path)?Tb("child","path",t,!1):Nm("child","path",t,!1),new kl(n._repo,ir(n._path,t))}function Jv(n,t){n=(0,W.Ku)(n),Nl("set",n._path),Lc("set",t,n._path,!1);const e=new W.cY;return Gv(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function Wb(n,t){tC("update",t,n._path,!1);const e=new W.cY;return function AD(n,t,e,i){cg(n,"update",{path:t.toString(),value:e});let o=!0;const u=km(n),m={};if(Ai(e,(w,A)=>{o=!1,m[w]=QE(ir(t,w),Kr(A),n.serverSyncTree_,u)}),o)zt("update() called with empty data.  Don't do anything."),Vd(0,i,"ok",void 0);else{const w=Vh(n),A=function Mv(n,t,e,i){!function wm(n,t,e,i){(0,W.vA)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=FE(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const o=Ar.fromObject(e);return kf(n,new Gp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,o))}(n.serverSyncTree_,t,m,w);lg(n.eventQueue_,A),n.server_.merge(t.toString(),e,(P,j)=>{const Y="ok"===P;Y||hs("update at "+t+" failed: "+P);const se=Nu(n.serverSyncTree_,w,!Y),je=se.length>0?Bf(n,t):t;gi(n.eventQueue_,je,se),Vd(0,i,P,j)}),Ai(e,P=>{const j=cC(n,ir(t,P));Bf(n,j)}),gi(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Vf(n){n=(0,W.Ku)(n);const t=new hC(()=>{}),e=new Bm(t);return function DD(n,t,e){const i=function _D(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(P,j)=>{const Y=Os(P,e);i=i||Bd(j,Y)});let o=n.syncPointTree_.get(e);o?i=i||Bd(o,jn()):(o=new Tm,n.syncPointTree_=n.syncPointTree_.set(e,o));const u=null!=i,m=u?new kh(i,!0,!1):null;return function cb(n){return mv(n.viewCache_)}(hb(o,t,yv(n.pendingWriteTree_,t._path),u?m.getNode():mn.EMPTY_NODE,u))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(o=>{const u=Kr(o).withIndex(t._queryParams.getIndex());let m;if(Pv(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())m=rg(n.serverSyncTree_,t._path,u);else{const w=sg(n.serverSyncTree_,t);m=Rv(n.serverSyncTree_,t._path,u,w)}return gi(n.eventQueue_,t._path,m),ig(n.serverSyncTree_,t,e,null,!0),u},o=>(cg(n,"get for query "+(0,W.As)(t)+" failed: "+o),Promise.reject(new Error(o))))}(n._repo,n,e).then(i=>new Hh(i,new kl(n._repo,n._path),n._queryParams.getIndex()))}class Bm{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new Lb("value",this,new Hh(t.snapshotNode,new kl(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Bb(this,t,e):null}matches(t){return t instanceof Bm&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ey{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Bb(this,t,e):null}createEvent(t,e){(0,W.vA)(null!=t.childName,"Child events should have a childName.");const i=jh(new kl(e._repo,e._path),t.childName),o=e._queryParams.getIndex();return new Lb(t.type,this,new Hh(t.snapshotNode,i,o),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof ey&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ku(n,t,e,i,o){let u;if("object"==typeof i&&(u=void 0,o=i),"function"==typeof i&&(u=i),o&&o.onlyOnce){const A=e,P=(j,Y)=>{zv(n._repo,n,w),A(j,Y)};P.userCallback=e.userCallback,P.context=e.context,e=P}const m=new hC(e,u||void 0),w="value"===t?new Bm(m):new ey(t,m);return function xb(n,t,e){let i;i=".info"===En(t._path)?Pv(n.infoSyncTree_,t,e):Pv(n.serverSyncTree_,t,e),Wv(n.eventQueue_,t._path,i)}(n._repo,n,w),()=>zv(n._repo,n,w)}function Gb(n,t,e,i){return ku(n,"value",t,e,i)}function ty(n,t,e,i){return ku(n,"child_added",t,e,i)}function kD(n,t,e,i){return ku(n,"child_changed",t,e,i)}function gC(n,t,e,i){return ku(n,"child_moved",t,e,i)}function mC(n,t,e,i){return ku(n,"child_removed",t,e,i)}function FD(n,t,e){let i=null;const o=e?new hC(e):null;"value"===t?i=new Bm(o):t&&(i=new ey(t,o)),zv(n._repo,n,i)}class to{}class Kb extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Lc("endAt",this._value,t._path,!0);const e=TE(t._queryParams,this._value,this._key);if(Zv(e),Uh(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}class BD extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Lc("endBefore",this._value,t._path,!1);const e=function pv(n,t,e){let i;return i=TE(n,t,n.index_===E||e?e:Iu),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Zv(e),Uh(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}class zb extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Lc("startAt",this._value,t._path,!0);const e=AE(t._queryParams,this._value,this._key);if(Zv(e),Uh(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}class ry extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Lc("startAfter",this._value,t._path,!1);const e=function Qw(n,t,e){let i;return i=AE(n,t,n.index_===E||e?e:Nc),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(Zv(e),Uh(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fa(t._repo,t._path,e,t._orderByCalled)}}class oS extends to{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(t._repo,t._path,function Y0(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Yb extends to{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(t._repo,t._path,function DE(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Qb extends to{constructor(t){super(),this._path=t}_apply(t){Xv(t,"orderByChild");const e=new Hn(this._path);if(vn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new bE(e),o=Nh(t._queryParams,i);return Uh(o),new fa(t._repo,t._path,o,!0)}}class Zb extends to{_apply(t){Xv(t,"orderByKey");const e=Nh(t._queryParams,E);return Uh(e),new fa(t._repo,t._path,e,!0)}}class UD extends to{_apply(t){Xv(t,"orderByPriority");const e=Nh(t._queryParams,gn);return Uh(e),new fa(t._repo,t._path,e,!0)}}class jD extends to{_apply(t){Xv(t,"orderByValue");const e=Nh(t._queryParams,dv);return Uh(e),new fa(t._repo,t._path,e,!0)}}class $D extends to{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Lc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Kb(this._value,this._key)._apply(new zb(this._value,this._key)._apply(t))}}function Hc(n,...t){let e=(0,W.Ku)(n);for(const i of t)e=i._apply(e);return e}(function iS(n){(0,W.vA)(!Nf,"__referenceConstructor has already been defined"),Nf=n})(kl),function gb(n){(0,W.vA)(!Sv,"__referenceConstructor has already been defined"),Sv=n}(kl);const sy={};function tI(n,t,e,i,o){let u=i||n.options.databaseURL;void 0===u&&(n.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let A,P,m=dC(u,o),w=m.repoInfo;typeof process<"u"&&process.env&&(P=process.env.FIREBASE_DATABASE_EMULATOR_HOST),P?(A=!0,u=`http://${P}?ns=${w.namespace}`,m=dC(u,o),w=m.repoInfo):A=!m.repoInfo.secure;const j=o&&A?new Ah(Ah.OWNER):new K_(n.name,n.options,t);nC("Invalid Firebase Database URL",m),vn(m.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path).");const Y=function Hm(n,t,e,i){let o=sy[t.name];o||(o={},sy[t.name]=o);let u=o[n.toURLString()];return u&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new Uc(n,false,e,i),o[n.toURLString()]=u,u}(w,n,j,new Cf(n.name,e));return new KD(Y,n)}class KD{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Mb(n,t,e){if(n.stats_=Pp(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ME(n.repoInfo_,(i,o,u,m)=>{Rb(n,i,o,u,m)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Pb(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.As)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Ru(n.repoInfo_,t,(i,o,u,m)=>{Rb(n,i,o,u,m)},i=>{Pb(n,i)},i=>{!function ID(n,t){Ai(t,(e,i)=>{Fm(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function tm(n,t){const e=n.toString();return X_[e]||(X_[e]=t()),X_[e]}(n.repoInfo_,()=>new eb(n.stats_,n.server_)),n.infoData_=new Q0,n.infoSyncTree_=new mb({startListening:(i,o,u,m)=>{let w=[];const A=n.infoData_.getNode(i._path);return A.isEmpty()||(w=rg(n.infoSyncTree_,i._path,A),setTimeout(()=>{m("ok")},0)),w},stopListening:()=>{}}),Fm(n,"connected",!1),n.serverSyncTree_=new mb({startListening:(i,o,u,m)=>(n.server_.listen(i,u,o,(w,A)=>{const P=m(w,A);gi(n.eventQueue_,i._path,P)}),[]),stopListening:(i,o)=>{n.server_.unlisten(i,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new kl(this._repo,jn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Um(n,t){const e=sy[t];(!e||e[n.key]!==n)&&Js(`Database ${t}(${n.repoInfo_}) has already been deleted.`),sC(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Js("Cannot call "+t+" on a deleted database.")}}function nI(){om.IS_TRANSPORT_INITIALIZED&&hs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function rI(){nI(),Tu.forceDisallow()}function iI(){nI(),Pd.forceDisallow(),Tu.forceAllow()}function YD(n,t){cE(n,t)}const lS={".sv":"timestamp"};class aI{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ru.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Ru.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function aS(n){Md(Al.SDK_VERSION),(0,Al._registerComponent)(new Pc.uA("database",(t,{instanceIdentifier:e})=>tI(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Al.registerVersion)(j_,"0.14.4",n),(0,Al.registerVersion)(j_,"0.14.4","esm2017")}();const QD=new wp.Vy("@firebase/database-compat"),cI=function(n){QD.warn("FIREBASE WARNING: "+n)};class fS{constructor(t){this._delegate=t}cancel(t){(0,W.od)("OnDisconnect.cancel",0,1,arguments.length),(0,W.oD)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,W.od)("OnDisconnect.remove",0,1,arguments.length),(0,W.oD)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,W.od)("OnDisconnect.set",1,2,arguments.length),(0,W.oD)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),o=>e(o)),i}setWithPriority(t,e,i){(0,W.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.oD)("OnDisconnect.setWithPriority","onComplete",i,!0);const o=this._delegate.setWithPriority(t,e);return i&&o.then(()=>i(null),u=>i(u)),o}update(t,e){if((0,W.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const o={};for(let u=0;u<t.length;++u)o[""+u]=t[u];t=o,cI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.oD)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),o=>e(o)),i}}class JD{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,W.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ud{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,W.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,W.od)("DataSnapshot.child",0,1,arguments.length),t=String(t),Nm("DataSnapshot.child","path",t,!1),new Ud(this._database,this._delegate.child(t))}hasChild(t){return(0,W.od)("DataSnapshot.hasChild",1,1,arguments.length),Nm("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,W.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,W.od)("DataSnapshot.forEach",1,1,arguments.length),(0,W.oD)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Ud(this._database,e)))}hasChildren(){return(0,W.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.od)("DataSnapshot.ref",0,0,arguments.length),new Xa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class xs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,o){var u;(0,W.od)("Query.on",2,4,arguments.length),(0,W.oD)("Query.on","callback",e,!1);const m=xs.getCancelAndContextArgs_("Query.on",i,o),w=(P,j)=>{e.call(m.context,new Ud(this.database,P),j)};w.userCallback=e,w.context=m.context;const A=null===(u=m.cancel)||void 0===u?void 0:u.bind(m.context);switch(t){case"value":return Gb(this._delegate,w,A),e;case"child_added":return ty(this._delegate,w,A),e;case"child_removed":return mC(this._delegate,w,A),e;case"child_changed":return kD(this._delegate,w,A),e;case"child_moved":return gC(this._delegate,w,A),e;default:throw new Error((0,W.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,W.od)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,W.oD)("Query.off","callback",e,!0),(0,W.HN)("Query.off","context",i,!0),e){const o=()=>{};o.userCallback=e,o.context=i,FD(this._delegate,t,o)}else FD(this._delegate,t)}get(){return Vf(this._delegate).then(t=>new Ud(this.database,t))}once(t,e,i,o){(0,W.od)("Query.once",1,4,arguments.length),(0,W.oD)("Query.once","callback",e,!0);const u=xs.getCancelAndContextArgs_("Query.once",i,o),m=new W.cY,w=(P,j)=>{const Y=new Ud(this.database,P);e&&e.call(u.context,Y,j),m.resolve(Y)};w.userCallback=e,w.context=u.context;const A=P=>{u.cancel&&u.cancel.call(u.context,P),m.reject(P)};switch(t){case"value":Gb(this._delegate,w,A,{onlyOnce:!0});break;case"child_added":ty(this._delegate,w,A,{onlyOnce:!0});break;case"child_removed":mC(this._delegate,w,A,{onlyOnce:!0});break;case"child_changed":kD(this._delegate,w,A,{onlyOnce:!0});break;case"child_moved":gC(this._delegate,w,A,{onlyOnce:!0});break;default:throw new Error((0,W.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return m.promise}limitToFirst(t){return(0,W.od)("Query.limitToFirst",1,1,arguments.length),new xs(this.database,Hc(this._delegate,function qb(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oS(n)}(t)))}limitToLast(t){return(0,W.od)("Query.limitToLast",1,1,arguments.length),new xs(this.database,Hc(this._delegate,function VD(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Yb(n)}(t)))}orderByChild(t){return(0,W.od)("Query.orderByChild",1,1,arguments.length),new xs(this.database,Hc(this._delegate,function Xb(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nm("orderByChild","path",n,!1),new Qb(n)}(t)))}orderByKey(){return(0,W.od)("Query.orderByKey",0,0,arguments.length),new xs(this.database,Hc(this._delegate,function Jb(){return new Zb}()))}orderByPriority(){return(0,W.od)("Query.orderByPriority",0,0,arguments.length),new xs(this.database,Hc(this._delegate,function HD(){return new UD}()))}orderByValue(){return(0,W.od)("Query.orderByValue",0,0,arguments.length),new xs(this.database,Hc(this._delegate,function Vm(){return new jD}()))}startAt(t=null,e){return(0,W.od)("Query.startAt",0,2,arguments.length),new xs(this.database,Hc(this._delegate,function ny(n=null,t){return xm("startAt","key",t,!0),new zb(n,t)}(t,e)))}startAfter(t=null,e){return(0,W.od)("Query.startAfter",0,2,arguments.length),new xs(this.database,Hc(this._delegate,function pa(n,t){return xm("startAfter","key",t,!0),new ry(n,t)}(t,e)))}endAt(t=null,e){return(0,W.od)("Query.endAt",0,2,arguments.length),new xs(this.database,Hc(this._delegate,function LD(n,t){return xm("endAt","key",t,!0),new Kb(n,t)}(t,e)))}endBefore(t=null,e){return(0,W.od)("Query.endBefore",0,2,arguments.length),new xs(this.database,Hc(this._delegate,function ug(n,t){return xm("endBefore","key",t,!0),new BD(n,t)}(t,e)))}equalTo(t,e){return(0,W.od)("Query.equalTo",1,2,arguments.length),new xs(this.database,Hc(this._delegate,function WD(n,t){return xm("equalTo","key",t,!0),new $D(n,t)}(t,e)))}toString(){return(0,W.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,W.od)("Query.isEqual",1,1,arguments.length),!(t instanceof xs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const o={cancel:void 0,context:void 0};if(e&&i)o.cancel=e,(0,W.oD)(t,"cancel",o.cancel,!0),o.context=i,(0,W.HN)(t,"context",o.context,!0);else if(e)if("object"==typeof e&&null!==e)o.context=e;else{if("function"!=typeof e)throw new Error((0,W.dI)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=e}return o}get ref(){return new Xa(this.database,new kl(this._delegate._repo,this._delegate._path))}}class Xa extends xs{constructor(t,e){super(t,new fa(e._repo,e._path,new Pl,!1)),this.database=t,this._delegate=e}getKey(){return(0,W.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,W.od)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Xa(this.database,jh(this._delegate,t))}getParent(){(0,W.od)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Xa(this.database,t):null}getRoot(){return(0,W.od)("Reference.root",0,0,arguments.length),new Xa(this.database,this._delegate.root)}set(t,e){(0,W.od)("Reference.set",1,2,arguments.length),(0,W.oD)("Reference.set","onComplete",e,!0);const i=Jv(this._delegate,t);return e&&i.then(()=>e(null),o=>e(o)),i}update(t,e){if((0,W.od)("Reference.update",1,2,arguments.length),Array.isArray(t)){const o={};for(let u=0;u<t.length;++u)o[""+u]=t[u];t=o,cI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nl("Reference.update",this._delegate._path),(0,W.oD)("Reference.update","onComplete",e,!0);const i=Wb(this._delegate,t);return e&&i.then(()=>e(null),o=>e(o)),i}setWithPriority(t,e,i){(0,W.od)("Reference.setWithPriority",2,3,arguments.length),(0,W.oD)("Reference.setWithPriority","onComplete",i,!0);const o=function $b(n,t,e){if(Nl("setWithPriority",n._path),Lc("setWithPriority",t,n._path,!1),Bh("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new W.cY;return Gv(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&o.then(()=>i(null),u=>i(u)),o}remove(t){(0,W.od)("Reference.remove",0,1,arguments.length),(0,W.oD)("Reference.remove","onComplete",t,!0);const e=function Hb(n){return Nl("remove",n._path),Jv(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,W.od)("Reference.transaction",1,3,arguments.length),(0,W.oD)("Reference.transaction","transactionUpdate",t,!1),(0,W.oD)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,W.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const o=function oy(n,t,e){var i;if(n=(0,W.Ku)(n),Nl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(i=e?.applyLocally)||void 0===i||i,u=new W.cY,w=Gb(n,()=>{});return function qv(n,t,e,i,o,u){cg(n,"transaction on "+t);const m={path:t,update:e,onComplete:i,status:null,order:xo(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},w=Yv(n,t,void 0);m.currentInputSnapshot=w;const A=m.update(w.val());if(void 0===A)m.unwatcher(),m.currentOutputSnapshotRaw=null,m.currentOutputSnapshotResolved=null,m.onComplete&&m.onComplete(null,!1,m.currentInputSnapshot);else{Om("transaction failed: Data returned ",A,m.path),m.status=0;const P=Fc(n.transactionQueueTree_,t),j=Ff(P)||[];let Y;j.push(m),XE(P,j),"object"==typeof A&&null!==A&&(0,W.gR)(A,".priority")?(Y=(0,W.yw)(A,".priority"),(0,W.vA)(Pm(Y),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Y=(Ov(n.serverSyncTree_,t)||mn.EMPTY_NODE).getPriority().val();const se=km(n),je=Kr(A,Y),tt=Uv(je,w,se);m.currentOutputSnapshotRaw=je,m.currentOutputSnapshotResolved=tt,m.currentWriteId=Vh(n);const St=ng(n.serverSyncTree_,t,tt,m.currentWriteId,m.applyLocally);gi(n.eventQueue_,t,St),Lm(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(A,P,j)=>{let Y=null;A?u.reject(A):(Y=new Hh(j,new kl(n._repo,n._path),gn),u.resolve(new aI(P,Y)))},w,o),u.promise}(this._delegate,t,{applyLocally:i}).then(u=>new JD(u.committed,new Ud(this.database,u.snapshot)));return e&&o.then(u=>e(null,u.committed,u.snapshot),u=>e(u,!1,null)),o}setPriority(t,e){(0,W.od)("Reference.setPriority",1,2,arguments.length),(0,W.oD)("Reference.setPriority","onComplete",e,!0);const i=function jb(n,t){n=(0,W.Ku)(n),Nl("setPriority",n._path),Bh("setPriority",t,!1);const e=new W.cY;return Gv(n._repo,ir(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),o=>e(o)),i}push(t,e){(0,W.od)("Reference.push",0,2,arguments.length),(0,W.oD)("Reference.push","onComplete",e,!0);const i=function Ub(n,t){n=(0,W.Ku)(n),Nl("push",n._path),Lc("push",t,n._path,!0);const e=rC(n._repo),i=xD(e),o=jh(n,i),u=jh(n,i);let m;return m=null!=t?Jv(u,t).then(()=>u):Promise.resolve(u),o.then=m.then.bind(m),o.catch=m.then.bind(m,void 0),o}(this._delegate,t),o=i.then(m=>new Xa(this.database,m));e&&o.then(()=>e(null),m=>e(m));const u=new Xa(this.database,i);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return Nl("Reference.onDisconnect",this._delegate._path),new fS(new Vb(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Hd{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:rI,forceLongPolling:iI}}useEmulator(t,e,i={}){!function sI(n,t,e,i={}){(n=(0,W.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Js("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&Js('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Ah(Ah.OWNER);else if(i.mockUserToken){const m="string"==typeof i.mockUserToken?i.mockUserToken:(0,W.Fy)(i.mockUserToken,n.app.options.projectId);u=new Ah(m)}!function eI(n,t,e,i){n.repoInfo_=new Rp(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(o,t,e,u)}(this._delegate,t,e,i)}ref(t){if((0,W.od)("database.ref",0,1,arguments.length),t instanceof Xa){const e=pC(this._delegate,t.toString());return new Xa(this,e)}{const e=fC(this._delegate,t);return new Xa(this,e)}}refFromURL(t){(0,W.od)("database.refFromURL",1,1,arguments.length);const i=pC(this._delegate,t);return new Xa(this,i)}goOffline(){return(0,W.od)("database.goOffline",0,0,arguments.length),function oI(n){(n=(0,W.Ku)(n))._checkNotDeleted("goOffline"),sC(n._repo)}(this._delegate)}goOnline(){return(0,W.od)("database.goOnline",0,0,arguments.length),function qD(n){(n=(0,W.Ku)(n))._checkNotDeleted("goOnline"),function MD(n){n.persistentConnection_&&n.persistentConnection_.resume(Bc)}(n._repo)}(this._delegate)}}Hd.ServerValue={TIMESTAMP:function cS(){return lS}(),increment:n=>function uS(n){return{".sv":{increment:n}}}(n)};var uI=Object.freeze({__proto__:null,initStandalone:function eA({app:n,url:t,version:e,customAuthImpl:i,namespace:o,nodeAdmin:u=!1}){Md(e);const m=new Pc.Kq("auth-internal",new Pc.h1("database-standalone"));return m.setComponent(new Pc.uA("auth-internal",()=>i,"PRIVATE")),{instance:new Hd(tI(n,m,void 0,t,u),n),namespace:o}}});const tA=Hd.ServerValue;!function dI(n){n.INTERNAL.registerComponent(new Pc.uA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),o=t.getProvider("database").getImmediate({identifier:e});return new Hd(o,i)},"PUBLIC").setServiceProps({Reference:Xa,Query:xs,Database:Hd,DataSnapshot:Ud,enableLogging:YD,INTERNAL:uI,ServerValue:tA}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(H_.A);var ay=V(941),hI=V(6129);class nA extends Bt.B{constructor(t=1/0,e=1/0,i=hI.U){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:m}=this;e||(i.push(t),!o&&i.push(u.now()+m)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:o}=this,u=o.slice();for(let m=0;m<u.length&&!t.closed;m+=i?1:2)t.next(u[m]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:o}=this,u=(o?1:2)*t;if(t<1/0&&u<i.length&&i.splice(0,i.length-u),!o){const m=e.now();let w=0;for(let A=1;A<i.length&&i[A]<=m;A+=2)w=A;w&&i.splice(0,w+1)}}}function ly(n,t,e){let i,o=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:o=!1,scheduler:e}=n):i=n??1/0,(0,Xn.u)({connector:()=>new nA(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function fI(n,t){return(0,Na.T)(t)?(0,qn.n)(()=>n,t):(0,qn.n)(()=>n)}var cy=V(6745);V(7037);const CC=new Map,wC={activated:!1,tokenObservers:[]},cA={initialized:!1,enabled:!1};function mi(n){return CC.get(n)||Object.assign({},wC)}function dy(){return cA}const $m="https://content-firebaseappcheck.googleapis.com/v1",IC="exchangeDebugToken",gI={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class DC{constructor(t,e,i,o,u){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,wu.A)(function*(){e.stop();try{e.pending=new W.cY,yield function hA(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new W.cY,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const ni=new W.FA("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function AC(n){if(!mi(n).activated)throw ni.create("use-before-activation",{appName:n.name})}function hg(n,t){return TC.apply(this,arguments)}function TC(){return(TC=(0,wu.A)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const Y=yield o.getHeartbeatsHeader();Y&&(i["X-Firebase-Client"]=Y)}const u={method:"POST",body:JSON.stringify(t),headers:i};let m,w;try{m=yield fetch(n,u)}catch(Y){throw ni.create("fetch-network-error",{originalErrorMessage:Y?.message})}if(200!==m.status)throw ni.create("fetch-status-error",{httpStatus:m.status});try{w=yield m.json()}catch(Y){throw ni.create("fetch-parse-error",{originalErrorMessage:Y?.message})}const A=w.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const P=1e3*Number(A[1]),j=Date.now();return{token:w.token,expireTimeMillis:j+P,issuedAtTimeMillis:j}})).apply(this,arguments)}function EI(n,t){const{projectId:e,appId:i,apiKey:o}=n.options;return{url:`${$m}/projects/${e}/apps/${i}:${IC}?key=${o}`,body:{debug_token:t}}}const CI="firebase-app-check-database",SC=1,fg="firebase-app-check-store";let Gm=null;function wI(){return(wI=(0,wu.A)(function*(n,t){const i=(yield function RC(){return Gm||(Gm=new Promise((n,t)=>{try{const e=indexedDB.open(CI,SC);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var o;t(ni.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(fg,{keyPath:"compositeKey"})}}catch(e){t(ni.create("storage-open",{originalErrorMessage:e?.message}))}}),Gm)}()).transaction(fg,"readwrite"),u=i.objectStore(fg).put({compositeKey:n,value:t});return new Promise((m,w)=>{u.onsuccess=A=>{m()},i.onerror=A=>{var P;w(ni.create("storage-set",{originalErrorMessage:null===(P=A.target.error)||void 0===P?void 0:P.message}))}})})).apply(this,arguments)}const hy=new wp.Vy("@firebase/app-check");function fy(n,t){return(0,W.zW)()?function pA(n,t){return function PC(n,t){return wI.apply(this,arguments)}(function bI(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{hy.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function FC(){return dy().enabled}function LC(){return BC.apply(this,arguments)}function BC(){return(BC=(0,wu.A)(function*(){const n=dy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const EA={error:"UNKNOWN_ERROR"};function CA(n){return W.K3.encodeString(JSON.stringify(n),!1)}function py(n){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,wu.A)(function*(n,t=!1){const e=n.app;AC(e);const i=mi(e);let u,o=i.token;if(o&&!Km(o)&&(i.token=void 0,o=void 0),!o){const A=yield i.cachedTokenPromise;A&&(Km(A)?o=A:yield fy(e,void 0))}if(!t&&o&&Km(o))return{token:o.token};let w,m=!1;if(FC()){i.exchangeTokenPromise||(i.exchangeTokenPromise=hg(EI(e,yield LC()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),m=!0);const A=yield i.exchangeTokenPromise;return yield fy(e,A),i.token=A,{token:A.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),m=!0),o=yield mi(e).exchangeTokenPromise}catch(A){"appCheck/throttled"===A.code?hy.warn(A.message):hy.error(A),u=A}return o?u?w=Km(o)?{token:o.token,internalError:u}:wA(u):(w={token:o.token},i.token=o,yield fy(e,o)):w=wA(u),m&&function DI(n,t){const e=mi(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}(e,w),w})).apply(this,arguments)}function VC(n){return gy.apply(this,arguments)}function gy(){return(gy=(0,wu.A)(function*(n){const t=n.app;AC(t);const{provider:e}=mi(t);if(FC()){const i=yield LC(),{token:o}=yield hg(EI(t,i),n.heartbeatServiceProvider);return{token:o}}{const{token:i}=yield e.getToken();return{token:i}}})).apply(this,arguments)}function _y(n,t){const e=mi(n),i=e.tokenObservers.filter(o=>o.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function UC(n){const{app:t}=n,e=mi(t);let i=e.tokenRefresher;i||(i=function II(n){const{app:t}=n;return new DC((0,wu.A)(function*(){let i;if(i=mi(t).token?yield py(n,!0):yield py(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=mi(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},gI.RETRIAL_MIN_WAIT,gI.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Km(n){return n.expireTimeMillis-Date.now()>0}function wA(n){return{token:CA(EA),error:n}}class AI{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=mi(this.app);for(const e of t)_y(this.app,e.next);return Promise.resolve()}}const MI="app-check-internal";!function RI(){(0,Al._registerComponent)(new Pc.uA("app-check",n=>function bA(n,t){return new AI(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(MI).initialize()})),(0,Al._registerComponent)(new Pc.uA(MI,n=>function IA(n){return{getToken:t=>py(n,t),getLimitedUseToken:()=>VC(n),addTokenListener:t=>function my(n,t,e,i){const{app:o}=n,u=mi(o);if(u.tokenObservers=[...u.tokenObservers,{next:e,error:i,type:t}],u.token&&Km(u.token)){const w=u.token;Promise.resolve().then(()=>{e({token:w.token}),UC(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>UC(n))}(n,"INTERNAL",t),removeTokenListener:t=>_y(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Al.registerVersion)("@firebase/app-check","0.8.0")}();class yy{constructor(){return(0,Zs.CA)("app-check")}}typeof window<"u"&&window;var QC=V(762);const XC=new h.nKC("angularfire2.auth.use-emulator"),ZC=new h.nKC("angularfire2.auth.settings"),JC=new h.nKC("angularfire2.auth.tenant-id"),xI=new h.nKC("angularfire2.auth.langugage-code"),ew=new h.nKC("angularfire2.auth.use-device-language"),tw=new h.nKC("angularfire.auth.persistence"),NI=(n,t,e,i,o,u,m,w)=>(0,da.BM)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const A=t.runOutsideAngular(()=>n.auth());if(e&&A.useEmulator(...e),i&&(A.tenantId=i),A.languageCode=o,u&&A.useDeviceLanguage(),m)for(const[P,j]of Object.entries(m))A.settings[P]=j;return w&&A.setPersistence(w),A},[e,i,o,u,m,w]);let nw=(()=>{class n{constructor(e,i,o,u,m,w,A,P,j,Y,se,je){const tt=new Bt.B,St=(0,Dt.of)(void 0).pipe((0,ay.Q)(m.outsideAngular),(0,qn.n)(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,455)))),(0,Ut.T)(()=>(0,da.iB)(e,u,i)),(0,Ut.T)(Jt=>NI(Jt,u,w,P,j,Y,A,se)),ly({bufferSize:1,refCount:!1}));if(Ir(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Dt.of)(null);else{St.pipe(ea()).subscribe();const or=St.pipe((0,qn.n)(ar=>ar.getRedirectResult().then(ma=>ma,()=>null)),Zs.U0,ly({bufferSize:1,refCount:!1})),vr=St.pipe((0,qn.n)(ar=>new Un.c(ma=>({unsubscribe:u.runOutsideAngular(()=>ar.onAuthStateChanged(u_=>ma.next(u_),u_=>ma.error(u_),()=>ma.complete()))})))),Wi=St.pipe((0,qn.n)(ar=>new Un.c(ma=>({unsubscribe:u.runOutsideAngular(()=>ar.onIdTokenChanged(u_=>ma.next(u_),u_=>ma.error(u_),()=>ma.complete()))}))));this.authState=or.pipe(fI(vr),(0,cy._)(m.outsideAngular),(0,ay.Q)(m.insideAngular)),this.user=or.pipe(fI(Wi),(0,cy._)(m.outsideAngular),(0,ay.Q)(m.insideAngular)),this.idToken=this.user.pipe((0,qn.n)(ar=>ar?(0,kr.H)(ar.getIdToken()):(0,Dt.of)(null))),this.idTokenResult=this.user.pipe((0,qn.n)(ar=>ar?(0,kr.H)(ar.getIdTokenResult()):(0,Dt.of)(null))),this.credential=(0,Rc.h)(or,tt,this.authState.pipe(us(ar=>!ar))).pipe((0,Ut.T)(ar=>ar?.user?ar:null),(0,cy._)(m.outsideAngular),(0,ay.Q)(m.insideAngular))}return(0,da.Gt)(this,St,u,{spy:{apply:(Jt,or,vr)=>{(Jt.startsWith("signIn")||Jt.startsWith("createUser"))&&vr.then(Wi=>tt.next(Wi))}}})}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(da.rx),h.KVO(da.uP,8),h.KVO(h.Agw),h.KVO(h.SKi),h.KVO(Zs.u0),h.KVO(XC,8),h.KVO(ZC,8),h.KVO(JC,8),h.KVO(xI,8),h.KVO(ew,8),h.KVO(tw,8),h.KVO(yy,8))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function kI(n){return null==n}function FI(n){return"function"==typeof n.set}function HA(n,t){return FI(t)?t:n.ref(t)}function jA(n,t){if(function Fo(n){return"string"==typeof n}(n))return t.stringCase();if(FI(n))return t.firebaseCase();if(function pg(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function gg(n,t,e="on",i=Ch.E){return new Un.c(o=>{let u=null;return u=n[e](t,(m,w)=>{i.schedule(()=>{o.next({snapshot:m,prevKey:w})}),"once"===e&&i.schedule(()=>o.complete())},m=>{i.schedule(()=>o.error(m))}),"on"===e?{unsubscribe(){null!=u&&n.off(t,u)}}:{unsubscribe(){}}}).pipe((0,Ut.T)(o=>{const{snapshot:u,prevKey:m}=o;let w=null;return u.exists()&&(w=u.key),{type:t,payload:u,prevKey:m,key:w}}),(0,Xn.u)())}function $A(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function OS(n,t){const{payload:e,prevKey:i,key:o}=t,u=$A(n,o),m=function PS(n,t){if(kI(t))return 0;{const e=$A(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let w=null;t.payload.forEach(A=>{const P={payload:A,type:"value",prevKey:w,key:A.key};return w=A.key,n=[...n,P],!1})}return n;case"child_added":if(u>-1){const w=n[u-1];(w&&w.key||null)!==i&&(n=n.filter(A=>A.payload.key!==e.key)).splice(m,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(m,0,t)}return n;case"child_removed":return n.filter(w=>w.payload.key!==e.key);case"child_changed":return n.map(w=>w.payload.key===o?t:w);case"child_moved":if(u>-1){const w=n.splice(u,1)[0];return(n=n.slice()).splice(m,0,w),n}return n;default:return n}}function mg(n){return(kI(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function LI(n,t,e){return function rw(n,t,e){return gg(n,"value","once",e).pipe((0,qn.n)(i=>{const o=[(0,Dt.of)(i)];return t.forEach(u=>o.push(gg(n,u,"on",e))),(0,Rc.h)(...o).pipe(zs(OS,[]))}),(0,Wr.F)())}(n,t=mg(t),e)}function Cy(n,t,e){const i=(t=mg(t)).map(o=>gg(n,o,"on",e));return(0,Rc.h)(...i)}function VI(n,t){return function(i,o){return jA(i,{stringCase:()=>n.child(i)[t](o),firebaseCase:()=>i[t](o),snapshotCase:()=>i.ref[t](o)})}}function KA(n){return function(e){return e?jA(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function sw(n,t){return function(){return gg(n,"value","on",t)}}const wy=new h.nKC("angularfire2.realtimeDatabaseURL"),ow=new h.nKC("angularfire2.database.use-emulator");let qA=(()=>{class n{constructor(e,i,o,u,m,w,A,P,j,Y,se,je,tt,St,Jt){this.schedulers=w;const or=A,vr=(0,da.iB)(e,m,i);P&&NI(vr,m,j,se,je,tt,Y,St),this.database=(0,da.BM)(`${vr.name}.database.${o}`,"AngularFireDatabase",vr.name,()=>{const Wi=m.runOutsideAngular(()=>vr.database(o||void 0));return or&&Wi.useEmulator(...or),Wi},[or])}list(e,i){const o=this.schedulers.ngZone.runOutsideAngular(()=>HA(this.database,e));let u=o;return i&&(u=i(o)),function iw(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:VI(i,"update"),set:VI(i,"set"),push:o=>i.push(o),remove:KA(i),snapshotChanges:o=>LI(n,o,e).pipe(Zs.U0),stateChanges:o=>Cy(n,o,e).pipe(Zs.U0),auditTrail:o=>function WA(n,t,e){return function GA(n,t,e){return function BI(n,t){return gg(n,"value","on",t).pipe((0,Ut.T)(e=>{let i;return e.payload.forEach(o=>(i=o.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function U_(...n){const t=(0,cs.ms)(n);return(0,Cr.N)((e,i)=>{const o=n.length,u=new Array(o);let m=n.map(()=>!1),w=!1;for(let A=0;A<o;A++)(0,Ks.Tg)(n[A]).subscribe((0,Kt._)(i,P=>{u[A]=P,!w&&!m[A]&&(m[A]=!0,(w=m.every(wi.D))&&(m=null))},ml.l));e.subscribe((0,Kt._)(i,A=>{if(w){const P=[A,...u];i.next(t?t(...P):P)}}))})}(t),(0,Ut.T)(([o,u])=>{const m=o.lastKeyToLoad,w=u.map(A=>A.key);return{actions:u,lastKeyToLoad:m,loadedKeys:w}}),function lE(n){return(0,Cr.N)((t,e)=>{let i=!1,o=0;t.subscribe((0,Kt._)(e,u=>(i||(i=!n(u,o++)))&&e.next(u)))})}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,Ut.T)(o=>o.actions))}(n,Cy(n,t).pipe(zs((o,u)=>[...o,u],[])),e)}(n,o,e).pipe(Zs.U0),valueChanges:(o,u)=>LI(n,o,e).pipe((0,Ut.T)(w=>w.map(A=>u&&u.idField?Object.assign(Object.assign({},A.payload.val()),{[u.idField]:A.key}):A.payload.val())),Zs.U0)}}(u,this)}object(e){return function zA(n,t){return{query:n,snapshotChanges:()=>sw(n,t.schedulers.outsideAngular)().pipe(Zs.U0),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>sw(n,t.schedulers.outsideAngular)().pipe(Zs.U0,(0,Ut.T)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>HA(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(da.rx),h.KVO(da.uP,8),h.KVO(wy,8),h.KVO(h.Agw),h.KVO(h.SKi),h.KVO(Zs.u0),h.KVO(ow,8),h.KVO(nw,8),h.KVO(XC,8),h.KVO(ZC,8),h.KVO(JC,8),h.KVO(xI,8),h.KVO(ew,8),h.KVO(tw,8),h.KVO(yy,8))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UI=(()=>{class n{constructor(){QC.A.registerVersion("angularfire",Zs.xv.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.$C({type:n}),n.\u0275inj=h.G2t({providers:[qA]}),n})(),HI=(()=>{class n{get gameId(){return this._gameId}get player(){return this._player}constructor(e){this.db=e,this._gameId=null,this._player=null}createGame(){return this._gameId=this.db.list("games").push({fen:"",player:Ji.white,checkmate:!1}).key,this._player=Ji.white,this.db.object(`games/${this._gameId}`).valueChanges()}joinGame(e){return this._gameId=e,this._player=Ji.black,this.db.object(`games/${this._gameId}`).valueChanges()}makeMove(e){this.db.object(`games/${this.gameId}`).update(e)}endGame(){return this.db.object(`games/${this.gameId}`).remove()}static{this.\u0275fac=function(i){return new(i||n)(h.KVO(qA))}}static{this.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jf=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h.sFG),h.rXU(h.aKT))}}static{this.\u0275dir=h.FsC({type:n})}}return n})(),$f=(()=>{class n extends jf{static{this.\u0275fac=function(){let e;return function(o){return(e||(e=h.xGo(n)))(o||n)}}()}static{this.\u0275dir=h.FsC({type:n,features:[h.Vt3]})}}return n})();const jc=new h.nKC("NgValueAccessor"),QA={provide:jc,useExisting:(0,h.Rfq)(()=>by),multi:!0},XA=new h.nKC("CompositionEventMode");let by=(()=>{class n extends jf{constructor(e,i,o){super(e,i),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xS(){const n=H()?H().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(h.sFG),h.rXU(h.aKT),h.rXU(XA,8))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){1&i&&h.bIt("input",function(m){return o._handleInput(m.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(m){return o._compositionEnd(m.target.value)})},features:[h.Jv_([QA]),h.Vt3]})}}return n})();const Ns=new h.nKC("NgValidators"),Wh=new h.nKC("NgAsyncValidators");function zI(n){return null!=n}function JA(n){return(0,h.jNT)(n)?(0,kr.H)(n):n}function pw(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function eT(n,t){return t.map(e=>e(n))}function tT(n){return n.map(t=>function NS(n){return!n.validate}(t)?t:e=>t.validate(e))}function qI(n){return null!=n?function nT(n){if(!n)return null;const t=n.filter(zI);return 0==t.length?null:function(e){return pw(eT(e,t))}}(tT(n)):null}function YI(n){return null!=n?function rT(n){if(!n)return null;const t=n.filter(zI);return 0==t.length?null:function(e){return function jI(...n){const t=(0,cs.ms)(n),{args:e,keys:i}=ls(n),o=new Un.c(u=>{const{length:m}=e;if(!m)return void u.complete();const w=new Array(m);let A=m,P=m;for(let j=0;j<m;j++){let Y=!1;(0,Ks.Tg)(e[j]).subscribe((0,Kt._)(u,se=>{Y||(Y=!0,P--),w[j]=se},()=>A--,void 0,()=>{(!A||!Y)&&(P||u.next(i?Ki(i,w):w),u.complete())}))}});return t?o.pipe(Ui(t)):o}(eT(e,t).map(JA)).pipe((0,Ut.T)(pw))}}(tT(n)):null}function iT(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Xm(n){return n?Array.isArray(n)?n:[n]:[]}function Zm(n,t){return Array.isArray(n)?n.includes(t):n===t}function QI(n,t){const e=Xm(t);return Xm(n).forEach(o=>{Zm(e,o)||e.push(o)}),e}function Jm(n,t){return Xm(t).filter(e=>!Zm(n,e))}class XI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qI(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=YI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ga extends XI{get formDirective(){return null}get path(){return null}}class Wf extends XI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ZI{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let JI=(()=>{class n extends ZI{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(Wf,2))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){2&i&&h.AVh("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[h.Vt3]})}}return n})();const t_="VALID",Ay="INVALID",vg="PENDING",n_="DISABLED";function Ty(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class s0{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===t_}get invalid(){return this.status===Ay}get pending(){return this.status==vg}get disabled(){return this.status===n_}get enabled(){return this.status!==n_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(QI(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(QI(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Jm(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Jm(t,this._rawAsyncValidators))}hasValidator(t){return Zm(this._rawValidators,t)}hasAsyncValidator(t){return Zm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=vg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=n_,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=t_,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===t_||this.status===vg)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?n_:t_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=vg,this._hasOwnPendingAsyncValidator=!0;const e=JA(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,o)=>i&&i._find(o),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new h.bkB,this.statusChanges=new h.bkB}_calculateStatus(){return this._allControlsDisabled()?n_:this.errors?Ay:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vg)?vg:this._anyControlsHaveStatus(Ay)?Ay:t_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ty(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function r0(n){return Array.isArray(n)?qI(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function uT(n){return Array.isArray(n)?YI(n):n||null}(this._rawAsyncValidators)}}const yg=new h.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>Eg}),Eg="always";function Cg(n,t,e=Eg){(function o0(n,t){const e=function sT(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(iT(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function gw(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(iT(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const o=()=>n.updateValueAndValidity();bg(t._rawValidators,o),bg(t._rawAsyncValidators,o)})(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function mT(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&a0(n,t)})}(n,t),function vT(n,t){const e=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function _T(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&a0(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function gT(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function bg(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function a0(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function h0(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function f0(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const CT=class extends s0{constructor(t=null,e,i){super(function mw(n){return(Ty(n)?n.validators:n)||null}(e),function r_(n,t){return(Ty(t)?t.asyncValidators:n)||null}(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ty(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=f0(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){h0(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){h0(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){f0(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},AT={provide:Wf,useExisting:(0,h.Rfq)(()=>m0)},TT=(()=>Promise.resolve())();let m0=(()=>{class n extends Wf{constructor(e,i,o,u,m,w){super(),this._changeDetectorRef=m,this.callSetDisabledState=w,this.control=new CT,this._registered=!1,this.name="",this.update=new h.bkB,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=function Ry(n,t){if(!t)return null;let e,i,o;return Array.isArray(t),t.forEach(u=>{u.constructor===by?e=u:function c0(n){return Object.getPrototypeOf(n.constructor)===$f}(u)?i=u:o=u}),o||i||e||null}(0,u)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function My(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){TT.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,o=0!==i&&(0,h.L39)(i);TT.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function $c(n,t){return[...t.path,n]}(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(ga,9),h.rXU(Ns,10),h.rXU(Wh,10),h.rXU(jc,10),h.rXU(h.gRc,8),h.rXU(yg,8))}}static{this.\u0275dir=h.FsC({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h.Jv_([AT]),h.Vt3,h.OA$]})}}return n})(),v0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({})}}return n})(),UT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({imports:[v0]})}}return n})(),jT=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:yg,useValue:e.callSetDisabledState??Eg}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({imports:[UT]})}}return n})();var $T=V(6780);const Vy={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Vy;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const o=t(u=>{e=void 0,n(u)});return new As.yU(()=>e?.(o))},requestAnimationFrame(...n){const{delegate:t}=Vy;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Vy;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var WT=V(9687);const F0=new class nM extends WT.q{flush(t){let e;this._active=!0,t?e=t.id:(e=this._scheduled,this._scheduled=void 0);const{actions:i}=this;let o;t=t||i.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw o}}}(class tM extends $T.R{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Vy.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var o;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:u}=t;null!=e&&e===t._scheduled&&(null===(o=u[u.length-1])||void 0===o?void 0:o.id)!==e&&(Vy.cancelAnimationFrame(e),t._scheduled=void 0)}});let L0,rM=1;const Rw={};function GT(n){return n in Rw&&(delete Rw[n],!0)}const KT={setImmediate(n){const t=rM++;return Rw[t]=!0,L0||(L0=Promise.resolve()),L0.then(()=>GT(t)&&n()),t},clearImmediate(n){GT(n)}},{setImmediate:r,clearImmediate:s}=KT,a={setImmediate(...n){const{delegate:t}=a;return(t?.setImmediate||r)(...n)},clearImmediate(n){const{delegate:t}=a;return(t?.clearImmediate||s)(n)},delegate:void 0};new class d extends WT.q{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let o;t=t||i.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw o}}}(class l extends $T.R{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=a.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var o;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:u}=t;null!=e&&(null===(o=u[u.length-1])||void 0===o?void 0:o.id)!==e&&(a.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});var D=V(9470);function F(n=0,t,e=Ch.b){let i=-1;return null!=t&&((0,D.m)(t)?e=t:i=t),new Un.c(o=>{let u=function R(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;u<0&&(u=0);let m=0;return e.schedule(function(){o.closed||(o.next(m++),0<=i?this.schedule(void 0,i):o.complete())},u)})}let te;try{te=typeof Intl<"u"&&Intl.v8BreakIterator}catch{te=!1}let We,l_,ce=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Hl(n){return n===fr}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!te)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(h.Agw))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dn(n){return function nn(){if(null==We&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>We=!0}))}finally{We=We||!1}return We}()?n:!!n.capture}function B0(n){if(function zT(){if(null==l_){const n=typeof document<"u"?document.head:null;l_=!(!n||!n.createShadowRoot&&!n.attachShadow)}return l_}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function V0(n){return n.composedPath?n.composedPath()[0]:n.target}let KM=(()=>{class n{constructor(e,i,o){this._platform=e,this._change=new Bt.B,this._changeListener=u=>{this._change.next(u)},this._document=o,i.runOutsideAngular(()=>{if(e.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),o=e.documentElement,u=o.getBoundingClientRect();return{top:-u.top||e.body.scrollTop||i.scrollY||o.scrollTop||0,left:-u.left||e.body.scrollLeft||i.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(function $(n,t=Ch.E){return function b(n){return(0,Cr.N)((t,e)=>{let i=!1,o=null,u=null,m=!1;const w=()=>{if(u?.unsubscribe(),u=null,i){i=!1;const P=o;o=null,e.next(P)}m&&e.complete()},A=()=>{u=null,m&&e.complete()};t.subscribe((0,Kt._)(e,P=>{i=!0,o=P,u||(0,Ks.Tg)(n(P)).subscribe(u=(0,Kt._)(e,w,A))},()=>{m=!0,(!i||!u||u.closed)&&e.complete()}))})}(()=>F(n,t))}(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(ce),h.KVO(h.SKi),h.KVO(Ee,8))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.$C({type:n}),n.\u0275inj=h.G2t({}),n})();function iM(n){return null!=n&&"false"!=`${n}`}function Wc(n){return n instanceof h.aKT?n.nativeElement:n}const TR=new h.nKC("cdk-dir-doc",{providedIn:"root",factory:function SR(){return(0,h.WQX)(Ee)}}),MR=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let PR=(()=>{class n{constructor(e){this.value="ltr",this.change=new h.bkB,e&&(this.value=function RR(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?MR.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(TR,8))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qT(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const o=t[i];o?n.setProperty(i,o,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Uy(n,t){const e=t?"":"none";qT(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function lM(n,t,e){qT(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function U0(n,t){return t&&"none"!=t?n+" "+t:n}function cM(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function YT(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function QT(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function XT(n,t,e){const{top:i,bottom:o,left:u,right:m}=n;return e>=i&&e<=o&&t>=u&&t<=m}function Pw(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function uM(n,t,e,i){const{top:o,right:u,bottom:m,left:w,width:A,height:P}=n,j=A*t,Y=P*t;return i>o-Y&&i<m+Y&&e>w-j&&e<u+j}class dM{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:QT(e)})})}handleScroll(t){const e=V0(t),i=this.positions.get(e);if(!i)return null;const o=i.scrollPosition;let u,m;if(e===this._document){const P=this.getViewportScrollPosition();u=P.top,m=P.left}else u=e.scrollTop,m=e.scrollLeft;const w=o.top-u,A=o.left-m;return this.positions.forEach((P,j)=>{P.clientRect&&e!==j&&e.contains(j)&&Pw(P.clientRect,w,A)}),o.top=u,o.left=m,{top:w,left:A}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function hM(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===i?gM(n,t):("input"===i||"select"===i||"textarea"===i)&&pM(n,t),fM("canvas",n,t,gM),fM("input, textarea, select",n,t,pM),t}function fM(n,t,e,i){const o=t.querySelectorAll(n);if(o.length){const u=e.querySelectorAll(n);for(let m=0;m<o.length;m++)i(o[m],u[m])}}let xR=0;function pM(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${xR++}`)}function gM(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const mM=dn({passive:!0}),H0=dn({passive:!1}),ZT=new Set(["position"]);class kR{constructor(t,e,i,o,u,m){this._config=e,this._document=i,this._ngZone=o,this._viewportRuler=u,this._dragDropRegistry=m,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Bt.B,this._pointerMoveSubscription=As.yU.EMPTY,this._pointerUpSubscription=As.yU.EMPTY,this._scrollSubscription=As.yU.EMPTY,this._resizeSubscription=As.yU.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Bt.B,this.started=new Bt.B,this.released=new Bt.B,this.ended=new Bt.B,this.entered=new Bt.B,this.exited=new Bt.B,this.dropped=new Bt.B,this.moved=this._moveEvents,this._pointerDown=w=>{if(this.beforeStarted.next(),this._handles.length){const A=this._getTargetHandle(w);A&&!this._disabledHandles.has(A)&&!this.disabled&&this._initializeDragSequence(A,w)}else this.disabled||this._initializeDragSequence(this._rootElement,w)},this._pointerMove=w=>{const A=this._getPointerPositionOnPage(w);if(!this._hasStartedDragging){if(Math.abs(A.x-this._pickupPositionOnPage.x)+Math.abs(A.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const je=Date.now()>=this._dragStartTime+this._getDragStartDelay(w),tt=this._dropContainer;if(!je)return void this._endDragSequence(w);(!tt||!tt.isDragging()&&!tt.isReceiving())&&(w.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(w)))}return}w.preventDefault();const P=this._getConstrainedPointerPosition(A);if(this._hasMoved=!0,this._lastKnownPointerPosition=A,this._updatePointerDirectionDelta(P),this._dropContainer)this._updateActiveDropContainer(P,A);else{const j=this._activeTransform;j.x=P.x-this._pickupPositionOnPage.x+this._passiveTransform.x,j.y=P.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(j.x,j.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:P,event:w,distance:this._getDragDistance(P),delta:this._pointerDirectionDelta})})},this._pointerUp=w=>{this._endDragSequence(w)},this._nativeDragStart=w=>{if(this._handles.length){const A=this._getTargetHandle(w);A&&!this._disabledHandles.has(A)&&!this.disabled&&w.preventDefault()}else this.disabled||w.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new dM(i),m.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=iM(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Uy(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>Wc(i)),this._handles.forEach(i=>Uy(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Wc(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,H0),e.addEventListener("touchstart",this._pointerDown,mM),e.addEventListener("dragstart",this._nativeDragStart,H0)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Wc(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Uy(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Uy(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Ow(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,o=i.parentNode,u=this._placeholder=this._createPlaceholderElement(),m=this._anchor=this._anchor||this._document.createComment(""),w=this._getShadowRoot();o.insertBefore(m,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),lM(i,!1,ZT),this._document.body.appendChild(o.replaceChild(u,i)),this._getPreviewInsertionPoint(o,w).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),o=Ow(e),u=!o&&0!==e.button,m=this._rootElement,w=V0(e),A=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),P=o?function IR(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(e):function bR(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e);if(w&&w.draggable&&"mousedown"===e.type&&e.preventDefault(),i||u||A||P)return;if(this._handles.length){const se=m.style;this._rootElementTapHighlight=se.webkitTapHighlightColor||"",se.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(se=>this._updateOnScroll(se)),this._boundaryElement&&(this._boundaryRect=QT(this._boundaryElement));const j=this._previewTemplate;this._pickupPositionInElement=j&&j.template&&!j.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const Y=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:Y.x,y:Y.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){lM(this._rootElement,!0,ZT),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),o=this._getPointerPositionOnPage(t),u=this._getDragDistance(o),m=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:u,dropPoint:o}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:m,distance:u,dropPoint:o}),e.drop(this,i,this._initialIndex,this._initialContainer,m,u,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:o}){let u=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!u&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(u=this._initialContainer),u&&u!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=u,this._dropContainer.enter(this,t,e,u===this._initialContainer&&u.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:u,currentIndex:u.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,o),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let o;if(i&&t){const u=t.matchSize?this._rootElement.getBoundingClientRect():null,m=t.viewContainer.createEmbeddedView(i,t.context);m.detectChanges(),o=vM(m,this._document),this._previewRef=m,t.matchSize?yM(o,u):o.style.transform=j0(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const u=this._rootElement;o=hM(u),yM(o,u.getBoundingClientRect()),this._initialTransform&&(o.style.transform=this._initialTransform)}return qT(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},ZT),Uy(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(u=>o.classList.add(u)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function OR(n){const t=getComputedStyle(n),e=YT(t,"transition-property"),i=e.find(w=>"transform"===w||"all"===w);if(!i)return 0;const o=e.indexOf(i),u=YT(t,"transition-duration"),m=YT(t,"transition-delay");return cM(u[o])+cM(m[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const o=m=>{(!m||V0(m)===this._preview&&"transform"===m.propertyName)&&(this._preview?.removeEventListener("transitionend",o),i(),clearTimeout(u))},u=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=vM(this._placeholderRef,this._document)):i=hM(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e){const i=this._rootElement.getBoundingClientRect(),o=t===this._rootElement?null:t,u=o?o.getBoundingClientRect():i,m=Ow(e)?e.targetTouches[0]:e,w=this._getViewportScrollPosition();return{x:u.left-i.left+(m.pageX-u.left-w.left),y:u.top-i.top+(m.pageY-u.top-w.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=Ow(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=i.pageX-e.left,u=i.pageY-e.top;if(this._ownerSVGElement){const m=this._ownerSVGElement.getScreenCTM();if(m){const w=this._ownerSVGElement.createSVGPoint();return w.x=o,w.y=u,w.matrixTransform(m.inverse())}}return{x:o,y:u}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:o}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:u,y:m}=this._pickupPositionInElement,w=this._boundaryRect,{width:A,height:P}=this._getPreviewRect(),j=w.top+m,Y=w.bottom-(P-m);i=_M(i,w.left+u,w.right-(A-u)),o=_M(o,j,Y)}return{x:i,y:o}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,o=this._pointerDirectionDelta,u=this._pointerPositionAtLastDirectionChange,m=Math.abs(e-u.x),w=Math.abs(i-u.y);return m>this._config.pointerDirectionChangeThreshold&&(o.x=e>u.x?1:-1,u.x=e),w>this._config.pointerDirectionChangeThreshold&&(o.y=i>u.y?1:-1,u.y=i),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Uy(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,H0),t.removeEventListener("touchstart",this._pointerDown,mM),t.removeEventListener("dragstart",this._nativeDragStart,H0)}_applyRootElementTransform(t,e){const i=j0(t,e),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=U0(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,o=j0(t,e);this._preview.style.transform=U0(o,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===o.width&&0===o.height)return;const u=i.left-o.left,m=o.right-i.right,w=i.top-o.top,A=o.bottom-i.bottom;i.width>o.width?(u>0&&(t+=u),m>0&&(t-=m)):t=0,i.height>o.height?(w>0&&(e+=w),A>0&&(e-=A)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Ow(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=V0(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Pw(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=B0(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return Wc(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function j0(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function _M(n,t,e){return Math.max(t,Math.min(e,n))}function Ow(n){return"t"===n.type[0]}function vM(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(o=>i.appendChild(o)),i}function yM(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=j0(t.left,t.top)}function xw(n,t){return Math.max(0,Math.min(t,n))}class LR{constructor(t,e,i,o,u){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=u,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Bt.B,this.entered=new Bt.B,this.exited=new Bt.B,this.dropped=new Bt.B,this.sorted=new Bt.B,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=As.yU.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Bt.B,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function AR(n=0,t=Ch.E){return n<0&&(n=0),F(n,n,t)}(0,F0).pipe(Ba(this._stopScrollTimers)).subscribe(()=>{const m=this._scrollNode,w=this.autoScrollStep;1===this._verticalScrollDirection?m.scrollBy(0,-w):2===this._verticalScrollDirection&&m.scrollBy(0,w),1===this._horizontalScrollDirection?m.scrollBy(-w,0):2===this._horizontalScrollDirection&&m.scrollBy(w,0)})},this.element=Wc(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new dM(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,o){let u;this._draggingStarted(),null==o?(u=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===u&&(u=this._getItemIndexFromPointerPosition(t,e,i))):u=o;const m=this._activeDraggables,w=m.indexOf(t),A=t.getPlaceholderElement();let P=m[u];if(P===t&&(P=m[u+1]),!P&&(null==u||-1===u||u<m.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(P=m[0]),w>-1&&m.splice(w,1),P&&!this._dragDropRegistry.isDragging(P)){const j=P.getRootElement();j.parentElement.insertBefore(A,j),m.splice(u,0,t)}else Wc(this.element).appendChild(A),m.push(t);A.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,o,u,m,w){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:o,isPointerOverContainer:u,distance:m,dropPoint:w})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===t.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Wc(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,o){if(this.sortingDisabled||!this._clientRect||!uM(this._clientRect,.05,e,i))return;const u=this._itemPositions,m=this._getItemIndexFromPointerPosition(t,e,i,o);if(-1===m&&u.length>0)return;const w="horizontal"===this._orientation,A=u.findIndex(Jt=>Jt.drag===t),P=u[m],Y=P.clientRect,se=A>m?1:-1,je=this._getItemOffsetPx(u[A].clientRect,Y,se),tt=this._getSiblingOffsetPx(A,u,se),St=u.slice();(function FR(n,t,e){const i=xw(t,n.length-1),o=xw(e,n.length-1);if(i===o)return;const u=n[i],m=o<i?-1:1;for(let w=i;w!==o;w+=m)n[w]=n[w+m];n[o]=u})(u,A,m),this.sorted.next({previousIndex:A,currentIndex:m,container:this,item:t}),u.forEach((Jt,or)=>{if(St[or]===Jt)return;const vr=Jt.drag===t,Wi=vr?je:tt,ar=vr?t.getPlaceholderElement():Jt.drag.getRootElement();Jt.offset+=Wi,w?(ar.style.transform=U0(`translate3d(${Math.round(Jt.offset)}px, 0, 0)`,Jt.initialTransform),Pw(Jt.clientRect,0,Wi)):(ar.style.transform=U0(`translate3d(0, ${Math.round(Jt.offset)}px, 0)`,Jt.initialTransform),Pw(Jt.clientRect,Wi,0))}),this._previousSwap.overlaps=XT(Y,e,i),this._previousSwap.drag=P.drag,this._previousSwap.delta=w?o.x:o.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,o=0,u=0;if(this._parentPositions.positions.forEach((m,w)=>{w===this._document||!m.clientRect||i||uM(m.clientRect,.05,t,e)&&([o,u]=function BR(n,t,e,i){const o=wM(t,i),u=bM(t,e);let m=0,w=0;if(o){const A=n.scrollTop;1===o?A>0&&(m=1):n.scrollHeight-A>n.clientHeight&&(m=2)}if(u){const A=n.scrollLeft;1===u?A>0&&(w=1):n.scrollWidth-A>n.clientWidth&&(w=2)}return[m,w]}(w,m.clientRect,t,e),(o||u)&&(i=w))}),!o&&!u){const{width:m,height:w}=this._viewportRuler.getViewportSize(),A={width:m,height:w,top:0,right:m,bottom:w,left:0};o=wM(A,e),u=bM(A,t),i=window}i&&(o!==this._verticalScrollDirection||u!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=u,this._scrollNode=i,(o||u)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Wc(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Wc(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:QT(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const t=Wc(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const i=e.getRootElement();if(i){const o=this._itemPositions.find(u=>u.drag===e)?.initialTransform;i.style.transform=o||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,i){const o="horizontal"===this._orientation,u=e[t].clientRect,m=e[t+-1*i];let w=u[o?"width":"height"]*i;if(m){const A=o?"left":"top",P=o?"right":"bottom";-1===i?w-=m.clientRect[A]-u[P]:w+=u[A]-m.clientRect[P]}return w}_getItemOffsetPx(t,e,i){const o="horizontal"===this._orientation;let u=o?e.left-t.left:e.top-t.top;return-1===i&&(u+=o?e.width-t.width:e.height-t.height),u}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,o="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const m=i[i.length-1].clientRect;return o?t>=m.right:e>=m.bottom}{const m=i[0].clientRect;return o?t<=m.left:e<=m.top}}_getItemIndexFromPointerPosition(t,e,i,o){const u="horizontal"===this._orientation,m=this._itemPositions.findIndex(({drag:w,clientRect:A})=>w!==t&&((!o||w!==this._previousSwap.drag||!this._previousSwap.overlaps||(u?o.x:o.y)!==this._previousSwap.delta)&&(u?e>=Math.floor(A.left)&&e<Math.floor(A.right):i>=Math.floor(A.top)&&i<Math.floor(A.bottom))));return-1!==m&&this.sortPredicate(m,t,this)?m:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&XT(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(o=>o._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!XT(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,i);if(!o)return!1;const u=Wc(this.element);return o===u||u.contains(o)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:i})=>{Pw(i,e.top,e.left)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=B0(Wc(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function wM(n,t){const{top:e,bottom:i,height:o}=n,u=.05*o;return t>=e-u&&t<=e+u?1:t>=i-u&&t<=i+u?2:0}function bM(n,t){const{left:e,right:i,width:o}=n,u=.05*o;return t>=e-u&&t<=e+u?1:t>=i-u&&t<=i+u?2:0}const $0=dn({passive:!1,capture:!0});let VR=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new Bt.B,this.pointerUp=new Bt.B,this.scroll=new Bt.B,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,$0)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,$0)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=i.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:u=>this.pointerUp.next(u),options:!0}).set("scroll",{handler:u=>this.scroll.next(u),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:$0}),o||this._globalListeners.set("mousemove",{handler:u=>this.pointerMove.next(u),options:$0}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((u,m)=>{this._document.addEventListener(m,u.handler,u.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new Un.c(o=>this._ngZone.runOutsideAngular(()=>{const m=w=>{this._activeDragInstances.length&&o.next(w)};return e.addEventListener("scroll",m,!0),()=>{e.removeEventListener("scroll",m,!0)}}))),(0,Rc.h)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(h.SKi),h.KVO(Ee))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UR={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let IM=(()=>{class n{constructor(e,i,o,u){this._document=e,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=u}createDrag(e,i=UR){return new kR(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new LR(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(h.KVO(Ee),h.KVO(h.SKi),h.KVO(KM),h.KVO(VR))},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DM=new h.nKC("CDK_DRAG_PARENT"),HR=new h.nKC("CDK_DRAG_CONFIG"),jR=new h.nKC("CdkDropList"),AM=new h.nKC("CdkDragHandle"),$R=new h.nKC("CdkDragPlaceholder"),WR=new h.nKC("CdkDragPreview");let KR=(()=>{class n{constructor(e,i,o,u,m,w,A,P,j,Y,se){this.element=e,this.dropContainer=i,this._ngZone=u,this._viewContainerRef=m,this._dir=A,this._changeDetectorRef=j,this._selfHandle=Y,this._parentDrag=se,this._destroyed=new Bt.B,this.started=new h.bkB,this.released=new h.bkB,this.ended=new h.bkB,this.entered=new h.bkB,this.exited=new h.bkB,this.dropped=new h.bkB,this.moved=new Un.c(je=>{const tt=this._dragRef.moved.pipe((0,Ut.T)(St=>({source:this,pointerPosition:St.pointerPosition,event:St.event,delta:St.delta,distance:St.distance}))).subscribe(je);return()=>{tt.unsubscribe()}}),this._dragRef=P.createDrag(e,{dragStartThreshold:w&&null!=w.dragStartThreshold?w.dragStartThreshold:5,pointerDirectionChangeThreshold:w&&null!=w.pointerDirectionChangeThreshold?w.pointerDirectionChangeThreshold:5,zIndex:w?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),w&&this._assignDefaults(w),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=iM(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ts(1),Ba(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const i=e.rootElementSelector,o=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let i=e;this.rootElementSelector&&(i=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):Wc(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const i=this._dir,o=this.dragStartDelay,u=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,m=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof o&&o?o:function qM(n,t=0){return function YM(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(u).withPreviewTemplate(m).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Ts(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){e.withParent(n._dragInstances.find(o=>o.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint})})}_assignDefaults(e){const{lockAxis:i,dragStartDelay:o,constrainPosition:u,previewClass:m,boundaryElement:w,draggingDisabled:A,rootElementSelector:P,previewContainer:j}=e;this.disabled=A??!1,this.dragStartDelay=o||0,i&&(this.lockAxis=i),u&&(this.constrainPosition=u),m&&(this.previewClass=m),w&&(this.boundaryElement=w),P&&(this.rootElementSelector=P),j&&(this.previewContainer=j)}_setupHandlesListener(){this._handles.changes.pipe(Fa(this._handles),(0,Yn.M)(e=>{const i=e.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,qn.n)(e=>(0,Rc.h)(...e.map(i=>i._stateChanges.pipe(Fa(i))))),Ba(this._destroyed)).subscribe(e=>{const i=this._dragRef,o=e.element.nativeElement;e.disabled?i.disableHandle(o):i.enableHandle(o)})}}return n._dragInstances=[],n.\u0275fac=function(e){return new(e||n)(h.rXU(h.aKT),h.rXU(jR,12),h.rXU(Ee),h.rXU(h.SKi),h.rXU(h.c1b),h.rXU(HR,8),h.rXU(PR,8),h.rXU(IM),h.rXU(h.gRc),h.rXU(AM,10),h.rXU(DM,12))},n.\u0275dir=h.FsC({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(e,i,o){if(1&e&&(h.wni(o,WR,5),h.wni(o,$R,5),h.wni(o,AM,5)),2&e){let u;h.mGM(u=h.lsd())&&(i._previewTemplate=u.first),h.mGM(u=h.lsd())&&(i._placeholderTemplate=u.first),h.mGM(u=h.lsd())&&(i._handles=u)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,i){2&e&&h.AVh("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[h.Jv_([{provide:DM,useExisting:n}]),h.OA$]}),n})(),zR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.$C({type:n}),n.\u0275inj=h.G2t({providers:[IM],imports:[zM]}),n})();var qR=V(7376);const YR=["myModal"];function QR(n,t){if(1&n){const e=h.RV6();h.j41(0,"div",5)(1,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(1))}),h.nrm(2,"img",7),h.k0s(),h.j41(3,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(2))}),h.nrm(4,"img",8),h.k0s(),h.j41(5,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(3))}),h.nrm(6,"img",9),h.k0s(),h.j41(7,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(4))}),h.nrm(8,"img",10),h.k0s()()}if(2&n){const e=h.XpG();h.R7$(2),h.Y8G("src",e.getPieceIcon("queen"),h.B4B),h.R7$(2),h.Y8G("src",e.getPieceIcon("rook"),h.B4B),h.R7$(2),h.Y8G("src",e.getPieceIcon("bishop"),h.B4B),h.R7$(2),h.Y8G("src",e.getPieceIcon("knight"),h.B4B)}}function XR(n,t){if(1&n){const e=h.RV6();h.j41(0,"div",5)(1,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(1))}),h.EFF(2,"\u265b"),h.k0s(),h.j41(3,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(2))}),h.EFF(4,"\u265c"),h.k0s(),h.j41(5,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(3))}),h.EFF(6,"\u265d"),h.k0s(),h.j41(7,"div",6),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.changeSelection(4))}),h.EFF(8,"\u265e"),h.k0s()()}}const ZR=["boardRef"],JR=["modal"];function eP(n,t){if(1&n){const e=h.RV6();h.j41(0,"div",11),h.bIt("cdkDragEnded",function(o){h.eBV(e);const u=h.XpG();return h.Njj(u.dragEnded(o))})("cdkDragMoved",function(o){h.eBV(e);const u=h.XpG();return h.Njj(u.dragMoved(o))})("cdkDragStarted",function(o){h.eBV(e);const u=h.XpG();return h.Njj(u.dragStart(o))}),h.k0s()}if(2&n){const e=t.$implicit,i=h.XpG();h.xc7("transform","translate3d("+e.point.col*i.pieceSize+"px, "+e.point.row*i.pieceSize+"px,0px)")("max-height",i.pieceSize+"px")("font-size",.8*i.pieceSize+"px")("width",i.pieceSize+"px")("height",i.pieceSize+"px"),h.Y8G("cdkDragDisabled",i.engineFacade.dragDisabled)("innerHTML",i.engineFacade.pieceIconManager.isDefaultIcons()?e.constant.icon:"",h.npT)("ngStyle",i.engineFacade.pieceIconManager.isDefaultIcons()?"":i.getCustomPieceIcons(e))}}function tP(n,t){if(1&n&&(h.j41(0,"span",18),h.EFF(1),h.k0s()),2&n){const e=h.XpG(2).index,i=h.XpG();h.xc7("color",e%2==0?i.lightTileColor:i.darkTileColor)("font-size",i.pieceSize/4,"px"),h.R7$(1),h.SpI(" ",i.engineFacade.coords.yCoords[e]," ")}}function nP(n,t){if(1&n&&(h.j41(0,"span",19),h.EFF(1),h.k0s()),2&n){const e=h.XpG().index,i=h.XpG(2);h.xc7("color",e%2==0?i.lightTileColor:i.darkTileColor)("font-size",i.pieceSize/4,"px"),h.R7$(1),h.SpI(" ",i.engineFacade.coords.xCoords[e]," ")}}function rP(n,t){if(1&n&&(h.j41(0,"div",20),h.nrm(1,"div",21),h.k0s()),2&n){const e=h.XpG(3);h.R7$(1),h.xc7("font-size",e.pieceSize+"px"),h.Y8G("ngClass","piece")}}function iP(n,t){if(1&n&&(h.j41(0,"div",14),h.DNE(1,tP,2,5,"span",15),h.DNE(2,nP,2,5,"span",16),h.DNE(3,rP,2,3,"div",17),h.k0s()),2&n){const e=t.index,i=h.XpG().index,o=h.XpG();h.xc7("background-color",o.getTileBackgroundColor(i,e)),h.AVh("current-selection",o.showActivePiece&&o.engineFacade.board.isXYInActiveMove(i,e))("king-check",o.engineFacade.board.isKingChecked(o.engineFacade.board.getPieceByPoint(i,e)))("point-circle",o.engineFacade.board.isXYInPointSelection(i,e))("possible-capture",o.showPossibleCaptures&&o.engineFacade.board.isXYInPossibleCaptures(i,e))("possible-point",o.engineFacade.board.isXYInPossibleMoves(i,e)&&o.showLegalMoves),h.R7$(1),h.Y8G("ngIf",o.showCoords&&7===e),h.R7$(1),h.Y8G("ngIf",o.showCoords&&7===i),h.R7$(1),h.Y8G("ngIf",o.engineFacade.board.getPieceByPoint(i,e))}}function sP(n,t){if(1&n&&(h.j41(0,"div",12),h.DNE(1,iP,4,15,"div",13),h.k0s()),2&n){const e=t.$implicit;h.R7$(1),h.Y8G("ngForOf",e)}}function oP(n,t){if(1&n&&(h.qSk(),h.j41(0,"defs")(1,"marker",22),h.nrm(2,"path",23),h.k0s()()),2&n){const e=t.$implicit;h.R7$(1),h.Y8G("id",e+"Arrow"),h.R7$(1),h.xc7("fill",e)}}function aP(n,t){if(1&n&&(h.qSk(),h.nrm(0,"line",24)),2&n){const e=t.$implicit;h.BMQ("marker-end","url(#"+e.end.color+"Arrow)")("stroke",e.end.color)("x1",e.start.x)("x2",e.end.x)("y1",e.start.y)("y2",e.end.y)}}function lP(n,t){if(1&n&&(h.qSk(),h.nrm(0,"circle",25)),2&n){const e=t.$implicit,i=h.XpG();h.BMQ("cx",e.drawPoint.x)("cy",e.drawPoint.y)("r",i.engineFacade.heightAndWidth/18)("stroke",e.drawPoint.color)}}const cP=function(){return["red","green","blue","orange"]};var z=function(n){return n[n.WHITE=0]="WHITE",n[n.BLACK=1]="BLACK",n}(z||{});class Hy{constructor(t,e,i,o,u){this.checkPoints=[],this.color=e,this.constant=i,this.point=t,this.relValue=o,this.board=u}}class pe{constructor(t,e){this.row=t,this.col=e}isEqual(t){return t&&this.row===t.row&&this.col===t.col}hasCoordsEqual(t,e){return t&&e&&this.row===t&&this.col===e}isInRange(){return this.row>=0&&this.row<=7&&this.col>=0&&this.col<=7}clone(){return new pe(this.row,this.col)}}class ro extends Hy{constructor(t,e,i,o){super(t,e,i,5,o),this.isMovedAlready=!1}getPossibleMoves(){const t=[],e=this.point.row,i=this.point.col;for(let o=e+1;o<8&&this.board.isFieldEmpty(o,i);++o)t.push(new pe(o,i));for(let o=e-1;o>=0&&this.board.isFieldEmpty(o,i);--o)t.push(new pe(o,i));for(let o=i-1;o>=0&&this.board.isFieldEmpty(e,o);--o)t.push(new pe(e,o));for(let o=i+1;o<8&&this.board.isFieldEmpty(e,o);++o)t.push(new pe(e,o));return t}getPossibleCaptures(){const t=[],e=this.point.row,i=this.point.col;for(let o=e+1;o<8;++o){if(this.board.isFieldTakenByEnemy(o,i,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,i));break}if(!this.board.isFieldEmpty(o,i))break}for(let o=e-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(o,i,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,i));break}if(!this.board.isFieldEmpty(o,i))break}for(let o=i-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(e,o,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(e,o));break}if(!this.board.isFieldEmpty(e,o))break}for(let o=i+1;o<8;++o){if(this.board.isFieldTakenByEnemy(e,o,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(e,o));break}if(!this.board.isFieldEmpty(e,o))break}return t}getCoveredFields(){const t=[],e=this.point.row,i=this.point.col;for(let o=e+1;o<8;++o)if(this.board.isFieldEmpty(o,i))t.push(new pe(o,i));else if(!(this.board.getPieceByField instanceof sr)){t.push(new pe(o,i));break}for(let o=e-1;o>=0;--o)if(this.board.isFieldEmpty(o,i))t.push(new pe(o,i));else if(!(this.board.getPieceByField instanceof sr)){t.push(new pe(o,i));break}for(let o=i-1;o>=0;--o)if(this.board.isFieldEmpty(e,o))t.push(new pe(e,o));else if(!(this.board.getPieceByField instanceof sr)){t.push(new pe(e,o));break}for(let o=i+1;o<8;++o)if(this.board.isFieldEmpty(e,o))t.push(new pe(e,o));else if(!(this.board.getPieceByField instanceof sr)){t.push(new pe(e,o));break}return t}}class sr extends Hy{constructor(t,e,i,o){super(t,e,i,0,o),this.castledAlready=!1,this.shortCastled=!1,this.longCastled=!1,this.isCastling=!1}getPossibleMoves(){const t=[],e=this.point.row,i=this.point.col;if(this.board.isFieldEmpty(e,i-1)&&!this.board.isFieldUnderAttack(e,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e,i-1)),this.board.isFieldEmpty(e,i+1)&&!this.board.isFieldUnderAttack(e,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e,i+1)),this.board.isFieldEmpty(e+1,i)&&!this.board.isFieldUnderAttack(e+1,i,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i)),this.board.isFieldEmpty(e-1,i)&&!this.board.isFieldUnderAttack(e-1,i,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i)),this.board.isFieldEmpty(e-1,i-1)&&!this.board.isFieldUnderAttack(e-1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i-1)),this.board.isFieldEmpty(e-1,i+1)&&!this.board.isFieldUnderAttack(e-1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i+1)),this.board.isFieldEmpty(e+1,i-1)&&!this.board.isFieldUnderAttack(e+1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i-1)),this.board.isFieldEmpty(e+1,i+1)&&!this.board.isFieldUnderAttack(e+1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i+1)),!this.isMovedAlready){let o=!0;for(let m=i-1;m>0;--m)if(!this.board.isFieldEmpty(e,m)||this.board.isFieldUnderAttack(e,m,this.color===z.WHITE?z.BLACK:z.WHITE)){o=!1;break}if(o&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(e,0)){const m=this.board.getPieceByField(e,0);m instanceof ro&&(m.isMovedAlready||t.push(new pe(e,i-2)))}let u=!0;for(let m=i+1;m<7;++m)if(!this.board.isFieldEmpty(e,m)||this.board.isFieldUnderAttack(e,m,this.color===z.WHITE?z.BLACK:z.WHITE)){u=!1;break}if(u&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(e,7)){const m=this.board.getPieceByField(e,7);m instanceof ro&&(m.isMovedAlready||t.push(new pe(e,i+2)))}}return t}getPossibleCaptures(){const t=[],e=this.point.row,i=this.point.col;return this.board.isFieldTakenByEnemy(e,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e,i-1)),this.board.isFieldTakenByEnemy(e,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e,i+1)),this.board.isFieldTakenByEnemy(e+1,i,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e+1,i,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i)),this.board.isFieldTakenByEnemy(e-1,i,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e-1,i,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i)),this.board.isFieldTakenByEnemy(e-1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e-1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i-1)),this.board.isFieldTakenByEnemy(e-1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e-1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i+1)),this.board.isFieldTakenByEnemy(e+1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e+1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i-1)),this.board.isFieldTakenByEnemy(e+1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&!this.board.isFieldUnderAttack(e+1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i+1)),t}getCoveredFields(){const t=[],e=this.point.row,i=this.point.col;return t.push(new pe(e,i-1)),t.push(new pe(e,i+1)),t.push(new pe(e+1,i)),t.push(new pe(e-1,i)),t.push(new pe(e-1,i-1)),t.push(new pe(e-1,i+1)),t.push(new pe(e+1,i-1)),t.push(new pe(e+1,i+1)),t}}class Fu extends Hy{constructor(t,e,i,o){super(t,e,i,3,o)}getPossibleMoves(){const t=[],e=this.point.row,i=this.point.col;for(let o=e-1,u=i-1;o>=0&&u>=0&&this.board.isFieldEmpty(o,u);--o,--u)t.push(new pe(o,u));for(let o=e-1,u=i+1;o>=0&&u<8&&this.board.isFieldEmpty(o,u);--o,++u)t.push(new pe(o,u));for(let o=e+1,u=i-1;o<8&&u>=0&&this.board.isFieldEmpty(o,u);++o,--u)t.push(new pe(o,u));for(let o=e+1,u=i+1;o<8&&u<8&&this.board.isFieldEmpty(o,u);++o,++u)t.push(new pe(o,u));return t}getPossibleCaptures(){const t=[],e=this.point.row,i=this.point.col;for(let o=e-1,u=i-1;o>=0&&u>=0;--o,--u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e-1,u=i+1;o>=0&&u<8;--o,++u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e+1,u=i-1;o<8&&u>=0;++o,--u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e+1,u=i+1;o<8&&u<8;++o,++u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}return t}getCoveredFields(){const t=[],e=this.point.row,i=this.point.col;for(let o=e-1,u=i-1;o>=0&&u>=0;--o,--u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}for(let o=e-1,u=i+1;o>=0&&u<8;--o,++u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}for(let o=e+1,u=i-1;o<8&&u>=0;++o,--u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}for(let o=e+1,u=i+1;o<8&&u<8;++o,++u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}return t}}class Lu extends Hy{constructor(t,e,i,o){super(t,e,i,3,o),this.isMovedAlready=!1}getPossibleMoves(){const t=[],e=this.point.row,i=this.point.col;return this.board.isFieldEmpty(e-2,i-1)&&t.push(new pe(e-2,i-1)),this.board.isFieldEmpty(e-2,i+1)&&t.push(new pe(e-2,i+1)),this.board.isFieldEmpty(e-1,i-2)&&t.push(new pe(e-1,i-2)),this.board.isFieldEmpty(e-1,i+2)&&t.push(new pe(e-1,i+2)),this.board.isFieldEmpty(e+1,i-2)&&t.push(new pe(e+1,i-2)),this.board.isFieldEmpty(e+1,i+2)&&t.push(new pe(e+1,i+2)),this.board.isFieldEmpty(e+2,i-1)&&t.push(new pe(e+2,i-1)),this.board.isFieldEmpty(e+2,i+1)&&t.push(new pe(e+2,i+1)),t}getPossibleCaptures(){const t=[],e=this.point.row,i=this.point.col;return this.board.isFieldTakenByEnemy(e-2,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-2,i-1)),this.board.isFieldTakenByEnemy(e-2,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-2,i+1)),this.board.isFieldTakenByEnemy(e-1,i-2,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i-2)),this.board.isFieldTakenByEnemy(e-1,i+2,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i+2)),this.board.isFieldTakenByEnemy(e+1,i-2,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i-2)),this.board.isFieldTakenByEnemy(e+1,i+2,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i+2)),this.board.isFieldTakenByEnemy(e+2,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+2,i-1)),this.board.isFieldTakenByEnemy(e+2,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+2,i+1)),t}getCoveredFields(){const t=[],e=this.point.row,i=this.point.col;return t.push(new pe(e-2,i-1)),t.push(new pe(e-2,i+1)),t.push(new pe(e-1,i-2)),t.push(new pe(e-1,i+2)),t.push(new pe(e+1,i-2)),t.push(new pe(e+1,i+2)),t.push(new pe(e+2,i-1)),t.push(new pe(e+2,i+1)),t}}class io extends Hy{constructor(t,e,i,o){super(t,e,i,1,o),this.isMovedAlready=!1}getPossibleMoves(){const t=[],e=this.point.row,i=this.point.col;return!this.board.reverted&&this.color===z.WHITE||this.board.reverted&&this.color===z.BLACK?this.board.isFieldEmpty(e-1,i)&&(t.push(new pe(e-1,i)),!this.isMovedAlready&&this.board.isFieldEmpty(e-2,i)&&t.push(new pe(e-2,i))):
/*!board.isFieldTakenByEnemy(row + 1, col, Color.WHITE) &&*/this.board.isFieldEmpty(e+1,i)&&(t.push(new pe(e+1,i)),!this.isMovedAlready&&this.board.isFieldEmpty(e+2,i)&&t.push(new pe(e+2,i))),t}getPossibleCaptures(){const t=[],e=this.point.row,i=this.point.col;return!this.board.reverted&&this.color===z.WHITE||this.board.reverted&&this.color===z.BLACK?(this.board.isFieldTakenByEnemy(e-1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i-1)),this.board.isFieldTakenByEnemy(e-1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e-1,i+1))):(this.board.isFieldTakenByEnemy(e+1,i-1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i-1)),this.board.isFieldTakenByEnemy(e+1,i+1,this.color===z.WHITE?z.BLACK:z.WHITE)&&t.push(new pe(e+1,i+1))),this.board.enPassantPoint&&this.board.enPassantPiece.color===(this.color===z.WHITE?z.BLACK:z.WHITE)&&e===this.board.enPassantPiece.point.row&&1===Math.abs(this.board.enPassantPiece.point.col-i)&&t.push(this.board.enPassantPoint),t}getCoveredFields(){const t=[],e=this.point.row,i=this.point.col;return!this.board.reverted&&this.color===z.WHITE||this.board.reverted&&this.color===z.BLACK?(t.push(new pe(e-1,i-1)),t.push(new pe(e-1,i+1))):(t.push(new pe(e+1,i-1)),t.push(new pe(e+1,i+1))),t}}class Kh extends Hy{constructor(t,e,i,o){super(t,e,i,9,o)}getPossibleMoves(){const t=[],e=this.point.row,i=this.point.col;for(let o=e-1,u=i-1;o>=0&&u>=0&&this.board.isFieldEmpty(o,u);--o,--u)t.push(new pe(o,u));for(let o=e-1,u=i+1;o>=0&&u<8&&this.board.isFieldEmpty(o,u);--o,++u)t.push(new pe(o,u));for(let o=e+1,u=i-1;o<8&&u>=0&&this.board.isFieldEmpty(o,u);++o,--u)t.push(new pe(o,u));for(let o=e+1,u=i+1;o<8&&u<8&&this.board.isFieldEmpty(o,u);++o,++u)t.push(new pe(o,u));for(let o=e+1;o<8&&this.board.isFieldEmpty(o,i);++o)t.push(new pe(o,i));for(let o=e-1;o>=0&&this.board.isFieldEmpty(o,i);--o)t.push(new pe(o,i));for(let o=i-1;o>=0&&this.board.isFieldEmpty(e,o);--o)t.push(new pe(e,o));for(let o=i+1;o<8&&this.board.isFieldEmpty(e,o);++o)t.push(new pe(e,o));return t}getPossibleCaptures(){const t=[],e=this.point.row,i=this.point.col;for(let o=e-1,u=i-1;o>=0&&u>=0;--o,--u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e-1,u=i+1;o>=0&&u<8;--o,++u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e+1,u=i-1;o<8&&u>=0;++o,--u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e+1,u=i+1;o<8&&u<8;++o,++u){if(this.board.isFieldTakenByEnemy(o,u,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,u));break}if(!this.board.isFieldEmpty(o,u))break}for(let o=e+1;o<8;++o){if(this.board.isFieldTakenByEnemy(o,i,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,i));break}if(!this.board.isFieldEmpty(o,i))break}for(let o=e-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(o,i,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(o,i));break}if(!this.board.isFieldEmpty(o,i))break}for(let o=i-1;o>=0;--o){if(this.board.isFieldTakenByEnemy(e,o,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(e,o));break}if(!this.board.isFieldEmpty(e,o))break}for(let o=i+1;o<8;++o){if(this.board.isFieldTakenByEnemy(e,o,this.color===z.WHITE?z.BLACK:z.WHITE)){t.push(new pe(e,o));break}if(!this.board.isFieldEmpty(e,o))break}return t}getCoveredFields(){const t=[],e=this.point.row,i=this.point.col;for(let o=e+1;o<8;++o){if(!this.board.isFieldEmpty(o,i)){this.board.getPieceByField(o,i)instanceof sr||t.push(new pe(o,i));break}t.push(new pe(o,i))}for(let o=e-1;o>=0;--o){if(!this.board.isFieldEmpty(o,i)){this.board.getPieceByField(o,i)instanceof sr||t.push(new pe(o,i));break}t.push(new pe(o,i))}for(let o=i-1;o>=0;--o){if(!this.board.isFieldEmpty(e,o)){this.board.getPieceByField(e,o)instanceof sr||t.push(new pe(e,o));break}t.push(new pe(e,o))}for(let o=i+1;o<8;++o){if(!this.board.isFieldEmpty(e,o)){this.board.getPieceByField(e,o)instanceof sr||t.push(new pe(e,o));break}t.push(new pe(e,o))}for(let o=e-1,u=i-1;o>=0&&u>=0;--o,--u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}for(let o=e-1,u=i+1;o>=0&&u<8;--o,++u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}for(let o=e+1,u=i-1;o<8&&u>=0;++o,--u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}for(let o=e+1,u=i+1;o<8&&u<8;++o,++u){if(!this.board.isFieldEmpty(o,u)){this.board.getPieceByField(o,u)instanceof sr||t.push(new pe(o,u));break}t.push(new pe(o,u))}return t}}const en={WHITE_KING:{name:"King",icon:"&#x2654;"},WHITE_QUEEN:{name:"Queen",icon:"&#x2655;"},WHITE_KNIGHT:{name:"Knight",icon:"&#x2658"},WHITE_ROOK:{name:"Rook",icon:"&#x2656"},WHITE_PAWN:{name:"Pawn",icon:"&#x2659"},WHITE_BISHOP:{name:"Bishop",icon:"&#x2657"},BLACK_KING:{name:"King",icon:"&#x265A"},BLACK_QUEEN:{name:"Queen",icon:"&#x265B"},BLACK_KNIGHT:{name:"Knight",icon:"&#x265E"},BLACK_ROOK:{name:"Rook",icon:"&#x265C"},BLACK_PAWN:{name:"Pawn",icon:"&#x265F"},BLACK_BISHOP:{name:"Bishop",icon:"&#x265D"}};class TM{process(t,e){let i=t;if(!t)throw Error("Incorrect FEN provided");{e.board.reverted=!1,e.board.pieces=[];const o=i.split("/");for(let u=0;u<8;++u){let m=0;for(let w=0;w<o[u].split(" ")[0].length;++w){const A=o[u].charAt(w);if(A.match(/[0-9]/))m+=Number(A);else{switch(A){case"r":e.board.pieces.push(new ro(new pe(u,m),z.BLACK,en.BLACK_ROOK,e.board));break;case"n":e.board.pieces.push(new Lu(new pe(u,m),z.BLACK,en.BLACK_KNIGHT,e.board));break;case"b":e.board.pieces.push(new Fu(new pe(u,m),z.BLACK,en.BLACK_BISHOP,e.board));break;case"q":e.board.pieces.push(new Kh(new pe(u,m),z.BLACK,en.BLACK_QUEEN,e.board));break;case"k":e.board.pieces.push(new sr(new pe(u,m),z.BLACK,en.BLACK_KING,e.board));break;case"p":{const P=new io(new pe(u,m),z.BLACK,en.BLACK_PAWN,e.board);(P.color===z.BLACK&&1!==P.point.row||P.color===z.WHITE&&6!==P.point.row)&&(P.isMovedAlready=!0),e.board.pieces.push(P);break}case"R":e.board.pieces.push(new ro(new pe(u,m),z.WHITE,en.WHITE_ROOK,e.board));break;case"N":e.board.pieces.push(new Lu(new pe(u,m),z.WHITE,en.WHITE_KNIGHT,e.board));break;case"B":e.board.pieces.push(new Fu(new pe(u,m),z.WHITE,en.WHITE_BISHOP,e.board));break;case"Q":e.board.pieces.push(new Kh(new pe(u,m),z.WHITE,en.WHITE_QUEEN,e.board));break;case"K":e.board.pieces.push(new sr(new pe(u,m),z.WHITE,en.WHITE_KING,e.board));break;case"P":{const P=new io(new pe(u,m),z.WHITE,en.WHITE_PAWN,e.board);(P.color===z.BLACK&&1!==P.point.row||P.color===z.WHITE&&6!==P.point.row)&&(P.isMovedAlready=!0),e.board.pieces.push(P);break}}++m}}}this.setCurrentPlayer(e.board,i),this.setCastles(e.board,i),this.setEnPassant(i),this.setFullMoveCount(i),e.board.fen=i}}setCurrentPlayer(t,e){if(e){const i=e.split(" ");t.currentWhitePlayer="w"===i[1]}}setCastles(t,e){if(e){const o=e.split(" ")[2];o.includes("K")||this.setRookAlreadyMoved(t,z.WHITE,7),o.includes("Q")||this.setRookAlreadyMoved(t,z.WHITE,0),o.includes("k")||this.setRookAlreadyMoved(t,z.BLACK,7),o.includes("q")||this.setRookAlreadyMoved(t,z.BLACK,0)}}setFullMoveCount(t){}setEnPassant(t){t&&t.split(" ")}setRookAlreadyMoved(t,e,i){const o=t.pieces.find(u=>u.color===e&&u instanceof ro&&u.point.col===i);o&&(o.isMovedAlready=!0)}}class uP{constructor(t,e,i){this._xAxis=t,this._yAxis=e,this._reverted=i}get xAxis(){return this._xAxis}set xAxis(t){this._xAxis=t}get yAxis(){return this._yAxis}set yAxis(t){this._yAxis=t}get reverted(){return this._reverted}set reverted(t){this._reverted=t}}class kt{static willMoveCauseCheck(t,e,i,o,u,m){const w=m.getPieceByField(e,i),A=m.getPieceByField(o,u);w&&(w.point.row=o,w.point.col=u),A&&(m.pieces=m.pieces.filter(j=>j!==A));const P=m.isKingInCheck(t,m.pieces);return w&&(w.point.col=i,w.point.row=e),A&&m.pieces.push(A),P}static format(t,e,i){if(i){const u=104-e.col;return String.fromCharCode(104-t.col)+(t.row+1)+String.fromCharCode(u)+(e.row+1)}return String.fromCharCode(t.col+97)+(Math.abs(t.row-7)+1)+String.fromCharCode(e.col+97)+(Math.abs(e.row-7)+1)}static translateCoordsToIndex(t,e){let i,o;return e?(i=104-t.charCodeAt(0),o=+t.charAt(1)-1):(i=t.charCodeAt(0)-97,o=Math.abs(+t.charAt(1)-8)),new uP(i,o,e)}static findPieceByPossibleMovesContaining(t,e,i){let o=this.translateCoordsToIndex(t,e.reverted),u=new pe(o.yAxis,o.xAxis),m=[];for(let w of e.pieces.filter(A=>A.color===i))for(let A of w.getPossibleMoves())!kt.willMoveCauseCheck(w.color,w.point.row,w.point.col,o.yAxis,o.xAxis,e)&&A.isEqual(u)&&m.push(w);return m}static findPieceByPossibleCapturesContaining(t,e,i){let o=this.translateCoordsToIndex(t,e.reverted),u=new pe(o.yAxis,o.xAxis),m=[];for(let w of e.pieces.filter(A=>A.color===i))for(let A of w.getPossibleCaptures())!kt.willMoveCauseCheck(w.color,w.point.row,w.point.col,o.yAxis,o.xAxis,e)&&A.isEqual(u)&&m.push(w);return m}static formatSingle(t,e){return e?String.fromCharCode(104-t.col)+(t.row+1):String.fromCharCode(t.col+97)+(Math.abs(t.row-7)+1)}static getFirstLetterPiece(t){return t instanceof io?"P":t instanceof Lu?"N":t instanceof Fu?"B":t instanceof ro?"R":t instanceof sr?"K":t instanceof Kh?"Q":""}static reverse(t,e){return t.reverted?e+1:Math.abs(e-7)+1}static formatCol(t,e){return String.fromCharCode(t.reverted?104-e:97+e)}}class SM{static loadDefaultPieces(t){t.pieces=[];for(let e=0;e<8;++e)t.pieces.push(new io(new pe(1,e),z.BLACK,en.BLACK_PAWN,t));t.pieces.push(new ro(new pe(0,0),z.BLACK,en.BLACK_ROOK,t)),t.pieces.push(new Lu(new pe(0,1),z.BLACK,en.BLACK_KNIGHT,t)),t.pieces.push(new Fu(new pe(0,2),z.BLACK,en.BLACK_BISHOP,t)),t.pieces.push(new Kh(new pe(0,3),z.BLACK,en.BLACK_QUEEN,t)),t.pieces.push(new sr(new pe(0,4),z.BLACK,en.BLACK_KING,t)),t.pieces.push(new Fu(new pe(0,5),z.BLACK,en.BLACK_BISHOP,t)),t.pieces.push(new Lu(new pe(0,6),z.BLACK,en.BLACK_KNIGHT,t)),t.pieces.push(new ro(new pe(0,7),z.BLACK,en.BLACK_ROOK,t));for(let e=0;e<8;++e)t.pieces.push(new io(new pe(6,e),z.WHITE,en.WHITE_PAWN,t));t.pieces.push(new ro(new pe(7,0),z.WHITE,en.WHITE_ROOK,t)),t.pieces.push(new Lu(new pe(7,1),z.WHITE,en.WHITE_KNIGHT,t)),t.pieces.push(new Fu(new pe(7,2),z.WHITE,en.WHITE_BISHOP,t)),t.pieces.push(new Kh(new pe(7,3),z.WHITE,en.WHITE_QUEEN,t)),t.pieces.push(new sr(new pe(7,4),z.WHITE,en.WHITE_KING,t)),t.pieces.push(new Fu(new pe(7,5),z.WHITE,en.WHITE_BISHOP,t)),t.pieces.push(new Lu(new pe(7,6),z.WHITE,en.WHITE_KNIGHT,t)),t.pieces.push(new ro(new pe(7,7),z.WHITE,en.WHITE_ROOK,t)),t.calculateFEN()}}class dP{process(t,e){if(t){e.board.reverted=!1,e.board.pieces=[],e.reset(),SM.loadDefaultPieces(e.board);let i=this.extractMoves(t),o=-1;for(let u of i){++o,u=u.replace(/[+#]/g,"");let m="";u.includes("=")&&(m=this.resolvePromotion(u.substring(u.length-1)),u=u.substring(0,u.length-2));let w=0===o||o%2==0?z.WHITE:z.BLACK;if(/^[a-z]\d$/g.test(u)){let A=kt.findPieceByPossibleMovesContaining(u,e.board,w).find(P=>P instanceof io);A||(A=kt.findPieceByPossibleCapturesContaining(u,e.board,w).find(P=>P instanceof io)),A&&e.move(kt.formatSingle(A.point,!1)+u+m)}else if(/^[A-Z][a-h]\d$/g.test(u)){let P=kt.findPieceByPossibleMovesContaining(u.substring(1),e.board,w).find(j=>this.resolvePieceByFirstChar(u.charAt(0),j));P&&e.move(kt.formatSingle(P.point,!1)+u.substring(1)+m)}else if("O-O"===u)e.move(w===z.WHITE?"e1g1":"e8g8");else if(/^[a-z]x[a-z]\d$/g.test(u)){let P,A=kt.findPieceByPossibleCapturesContaining(u.substring(u.indexOf("x")+1),e.board,w).filter(j=>j instanceof io);P=A.length>1?this.resolveByCol(A,u.substring(0,1)):A[0],P&&e.move(kt.formatSingle(P.point,!1)+u.substring(u.indexOf("x")+1)+m)}else if(/^[A-Z]x[a-z]\d$/g.test(u)){let A=kt.findPieceByPossibleCapturesContaining(u.substring(u.indexOf("x")+1),e.board,w).find(P=>this.resolvePieceByFirstChar(u.substring(0,1),P));A&&e.move(kt.formatSingle(A.point,!1)+u.substring(u.indexOf("x")+1)+m)}else if("O-O-O"===u)e.move(w===z.WHITE?"e1c1":"e8c8");else if(/^[A-Z]\dx[a-z]\d$/g.test(u)){let A=kt.findPieceByPossibleCapturesContaining(u.substring(u.indexOf("x")+1),e.board,w).filter(j=>this.resolvePieceByFirstChar(u.charAt(0),j)),P=this.resolveByRow(A,u.substring(1,2));P&&e.move(kt.formatSingle(P.point,!1)+u.substring(u.indexOf("x")+1)+m)}else if(/^[A-Z][a-z][a-z]\d$/g.test(u)){let A=kt.findPieceByPossibleMovesContaining(u.substring(2,4),e.board,w).filter(j=>this.resolvePieceByFirstChar(u.charAt(0),j)),P=this.resolveByCol(A,u.substring(1,2));P&&e.move(kt.formatSingle(P.point,!1)+u.substring(2,4)+m)}else if(/^[A-Z][a-z]x[a-z]\d$/g.test(u)){let A=kt.findPieceByPossibleCapturesContaining(u.substring(u.indexOf("x")+1),e.board,w).filter(j=>this.resolvePieceByFirstChar(u.charAt(0),j)),P=this.resolveByCol(A,u.substring(1,2));P&&e.move(kt.formatSingle(P.point,!1)+u.substring(u.indexOf("x")+1)+m)}else this.processR1f2(u,e,w,m)}}}processR1f2(t,e,i,o){if(/^[A-Z]\d[a-z]\d$/g.test(t)){let u=kt.findPieceByPossibleMovesContaining(t.substring(2,4),e.board,i).filter(w=>this.resolvePieceByFirstChar(t.charAt(0),w)),m=this.resolveByRow(u,t.substring(1,2));m&&e.move(kt.formatSingle(m.point,!1)+t.substring(2,4)+o)}}extractMoves(t){return t.substring(t.lastIndexOf("]")+1).replace(/[0-9]+\./g,"").replace(/\s+/g," ").replace(/{[^}]*}/g,"").trim().split(" ").filter(e=>e)}movePiece(t,e,i){let o=kt.translateCoordsToIndex(i,e.reverted);t.point.col=o.xAxis,t.point.row=o.yAxis}hasUpperCase(t){return/[A-Z]/.test(t)}resolvePieceByFirstChar(t,e){let i="";return e instanceof sr?i="K":e instanceof Kh?i="Q":e instanceof ro?i="R":e instanceof Fu?i="B":e instanceof Lu?i="N":e instanceof io&&(i="P"),t===i}isShortCastle(t){return"O-O"===t}removePiece(t,e){let i=kt.translateCoordsToIndex(t,e.reverted);e.pieces=e.pieces.filter(o=>!o.point.isEqual(new pe(i.yAxis,i.xAxis)))}isLongCastle(t){return"O-O-O"===t}resolveByCol(t,e){let i=kt.formatSingle(t[0].point,!1);return kt.formatSingle(t[1].point,!1),i.substring(0,1)===e?t[0]:t[1]}resolveByRow(t,e){let i=kt.formatSingle(t[0].point,!1);return kt.formatSingle(t[1].point,!1),i.substring(1,2)===e?t[0]:t[1]}replacePromotion(t){return t.replace("=Q","1").replace("=R","2").replace("=B","3").replace("=K","4")}resolvePromotion(t){switch(t){case"Q":return"1";case"R":return"2";case"B":return"3";case"N":return"4"}return""}}class JT{static getProcessor(t){switch(t){case Nw.FEN:return new TM;case Nw.PGN:return new dP}}static getDefaultProcessor(){return new TM}}var Nw=function(n){return n[n.FEN=1]="FEN",n[n.PGN=2]="PGN",n}(Nw||{});class hP{constructor(t,e,i){this.x=t+.5,this.y=e+.5,this.color=i}isEqual(t){return t&&t.x===this.x&&this.y===t.y}}class eS{static getClickPoint(t,e,i,o,u){return new pe(Math.floor((t.y-e)/(i/8)),Math.floor((t.x-o)/(u/8)))}static getDrawingPoint(t,e,i,o,u,m,w,A,P){const j=t/8,Y=Math.floor((i-A)/j),se=Math.floor((o-P)/j);let je=e.resolve(u,w,m);return new hP(Math.floor(Y*j+j/2),Math.floor(se*j+j/2),je)}}class fP{constructor(t,e,i,o){this.move=t,this.piece=e,this.color=i,this.x=o}setGameStates(t,e,i){this.check=t,this.stalemate=e,this.mate=i}}class pP{constructor(){this.historyMovesSubject$=new Fr.t([])}get historyMoves(){return this.historyMovesSubject$.value}set historyMoves(t){this.historyMovesSubject$.next(t)}addMove(t){this.historyMoves=[...this.historyMoves,t]}pop(){const t=this.getLastMove();return this.historyMoves=this.historyMoves.filter(e=>e!==t),t}getAll(){return this.historyMoves}clear(){this.historyMoves=[]}getLastMove(){return this.historyMoves[this.getLastMoveIndex()]}getLastMoveIndex(){return this.historyMoves.length-1}}let zf=(()=>{class n{}return n.DEFAULT_DARK_TILE_COLOR="rgb(97, 84, 61)",n.DEFAULT_LIGHT_TILE_COLOR="#BAA378",n.DEFAULT_SIZE=500,n.MIN_BOARD_SIZE=100,n.MAX_BOARD_SIZE=4e3,n.DEFAULT_SOURCE_POINT_COLOR="rgba(146, 111, 26, 0.79)",n.DEFAULT_DESTINATION_POINT_COLOR="#b28e1a",n.DEFAULT_LEGAL_MOVE_POINT_COLOR="radial-gradient(#13262F 15%, transparent 20%);",n})();class gP{constructor(){this._defaultIcons=!1}get pieceIconInput(){return this._pieceIconInput}set pieceIconInput(t){this._pieceIconInput=t}get defaultIcons(){return this._defaultIcons}set defaultIcons(t){this._defaultIcons=t}isDefaultIcons(){return null==this.pieceIconInput}getPieceIcon(t){let e=t.color===z.WHITE;switch(t.constructor){case sr:return e?this.pieceIconInput.whiteKingUrl:this.pieceIconInput.blackKingUrl;case Kh:return e?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;case ro:return e?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;case Fu:return e?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;case Lu:return e?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl;case io:return e?this.pieceIconInput.whitePawnUrl:this.pieceIconInput.blackPawnUrl}}loadDefaultData(){this.pieceIconInput={blackBishopUrl:"",blackKingUrl:"",blackKnightUrl:"",blackQueenUrl:"",blackRookUrl:"",whiteBishopUrl:"",whiteKingUrl:"",whiteKnightUrl:"",whitePawnUrl:"",whiteQueenUrl:"",whiteRookUrl:"",blackPawnUrl:"a"}}}class mP{constructor(){this.defaultXCoords=["a","b","c","d","e","f","g","h"],this.defaultYCoords=[8,7,6,5,4,3,2,1],this.currentXCoords=[...this.defaultXCoords],this.currentYCoords=[...this.defaultYCoords]}get xCoords(){return this.currentXCoords}get yCoords(){return this.currentYCoords}reverse(){this.currentXCoords=this.currentXCoords.reverse(),this.currentYCoords=this.currentYCoords.reverse()}reset(){this.init()}init(){this.currentXCoords=[...this.defaultXCoords],this.currentYCoords=[...this.defaultYCoords]}}class _P{dragEnded(t,e,i){e||i&&(t.source._dragRef.getRootElement().style.transform=i)}}class vP{constructor(){this.dragEndProcessor=new _P}process(t,e,i){this.dragEndProcessor.dragEnded(t,e,i)}setDragEndProcessor(t){this.dragEndProcessor=t}}class yP{dragStarted(t){const e=t.source.getRootElement().style;e.zIndex="1000",e.position="absolute"}}class EP{constructor(){this.dragStartProcessor=new yP}process(t){this.dragStartProcessor.dragStarted(t)}setDragStartProcessor(t){this.dragStartProcessor=t}}class CP{resolve(t,e,i){let o="green";return(t||e)&&(o="red"),i&&(o="blue"),(e||t)&&i&&(o="orange"),o}}class wP{constructor(){this.colorProcessor=new CP}resolve(t,e,i){return this.colorProcessor.resolve(t,e,i)}setColorProcessor(t){this.colorProcessor=t}}class bP{constructor(){this.arrowsSubject$=new Fr.t([]),this.circlesSubject$=new Fr.t([]),this.arrows$=this.arrowsSubject$.asObservable(),this.circles$=this.circlesSubject$.asObservable()}get circles(){return this.circlesSubject$.value}set circles(t){this.circlesSubject$.next(t)}get arrows(){return this.arrowsSubject$.value}set arrows(t){this.arrowsSubject$.next(t)}addCircle(t){this.circles=[...this.circles,t]}reomveCircle(t){this.circles=this.circles.filter(e=>!e.isEqual(t))}addArrow(t){this.arrows=[...this.arrows,t]}removeArrow(t){this.arrows=this.arrows.filter(e=>!e.isEqual(t))}containsCircle(t){return this.circles.some(e=>e.isEqual(t))}containsArrow(t){return this.arrows.some(e=>e.isEqual(t))}clear(){this.arrows=[],this.circles=[]}}class IP{constructor(){this.pgn=[],this.currentIndex=.5}getPGN(){return this.pgn.join(" ")}getLast(){return this.pgn[this.pgn.length-1]}appendToLast(t){this.pgn[this.pgn.length-1]=this.getLast()+t}processChecks(t,e,i){t?this.appendToLast("#"):e&&this.appendToLast("+")}reset(){this.pgn=[],this.currentIndex=.5}addPromotionChoice(t){switch(t){case 1:this.appendToLast("=Q");break;case 2:this.appendToLast("=R");break;case 3:this.appendToLast("=B");break;case 4:this.appendToLast("=N")}}removeLast(){this.pgn.pop(),this.currentIndex-=.5}}class DP extends IP{process(t,e,i,o){this.currentIndex+=.5;let u="";this.currentIndex%Math.floor(this.currentIndex)==0&&(u=this.currentIndex+". ");let m=[],w=[];o&&(m=kt.findPieceByPossibleCapturesContaining(kt.formatSingle(i,t.reverted),t,e.color).filter(A=>A.constructor.name===e.constructor.name)),w=kt.findPieceByPossibleMovesContaining(kt.formatSingle(i,t.reverted),t,e.color).filter(A=>A.constructor.name===e.constructor.name),e instanceof io&&!o&&0===m.length?u+=kt.formatSingle(i,t.reverted):e instanceof io&&o?u+=kt.formatSingle(e.point,t.reverted).substring(0,1)+"x"+kt.formatSingle(i,t.reverted):e instanceof sr&&2===Math.abs(e.point.col-i.col)?u+=t.reverted?i.col<2?"O-O":"O-O-O":i.col<3?"O-O-O":"O-O":!(e instanceof io)&&0===m.length&&w.length<2?u+=kt.getFirstLetterPiece(e)+kt.formatSingle(i,t.reverted):w&&2===w.length&&0===m.length?this.isEqualByCol(w[0],w[1])?u+=kt.getFirstLetterPiece(e)+kt.reverse(t,e.point.row)+kt.formatSingle(i,t.reverted):u+=kt.getFirstLetterPiece(e)+kt.formatCol(t,e.point.col)+kt.formatSingle(i,t.reverted):m.length>1?this.isEqualByCol(m[0],m[1])?u+=kt.getFirstLetterPiece(e)+kt.reverse(t,e.point.row)+"x"+kt.formatSingle(i,t.reverted):u+=kt.getFirstLetterPiece(e)+kt.formatCol(t,e.point.col)+"x"+kt.formatSingle(i,t.reverted):u+=kt.getFirstLetterPiece(e)+"x"+kt.formatSingle(i,t.reverted),this.pgn.push(u)}resolvePieceByFirstChar(t,e){return kt.getFirstLetterPiece(e)===t}isEqualByCol(t,e){return t.point.col===e.point.col}}class AP{constructor(t){this.dragStartStrategy=new EP,this.dragEndStrategy=new vP,this.pgnProcessor=new DP,this.colorStrategy=new wP,this.coords=new mP,this.heightAndWidth=zf.DEFAULT_SIZE,this.freeMode=!1,this.drawProvider=new bP,this.pieceIconManager=new gP,this.moveHistoryProvider=new pP,this.disabling=!1,this.board=t}checkIfPawnFirstMove(t){t instanceof io&&(t.isMovedAlready=!0)}checkIfRookMoved(t){t instanceof ro&&(t.isMovedAlready=!0)}checkIfKingMoved(t){t instanceof sr&&(t.isMovedAlready=!0)}getMoveHistory(){return this.moveHistoryProvider.getAll()}}class TP{constructor(t,e){this.engineFacade=t,this.notationProcessor=e||JT.getDefaultProcessor()}addPieces(){SM.loadDefaultPieces(this.engineFacade.board)}loadFEN(t){this.notationProcessor.process(t,this.engineFacade)}loadPGN(t){this.notationProcessor.process(t,this.engineFacade)}setEngineFacade(t){this.engineFacade=t}setNotationProcessor(t){this.notationProcessor=t}}class MM{constructor(t){this.board=t}}class SP{constructor(){this.statesSubject$=new Fr.t([])}get states(){return this.statesSubject$.value}set states(t){this.statesSubject$.next(t)}addMove(t){this.states=[...this.states,t]}getStates(){return this.states}pop(){const t=this.getLastState();return this.states=this.states.filter(e=>e!==t),t}isEmpty(){return 0===this.states.length}clear(){this.states=[]}getLastState(){return this.states[this.getLastStateIndex()]}getLastStateIndex(){return this.states.length-1}}class MP{isEqual(t){return t&&this.start.isEqual(t.start)&&this.end.isEqual(t.end)}}class RP{isEqual(t){return t&&this.drawPoint.isEqual(t.drawPoint)}}class PP{constructor(t){this.piece=t}}class RM extends PP{constructor(t,e,i,o){super(t),this.pointClicked=e,this.color=i,this.board=o}getPossibleCaptures(){return this.piece.getPossibleCaptures().filter(t=>!kt.willMoveCauseCheck(this.color,this.pointClicked.row,this.pointClicked.col,t.row,t.col,this.board))}getPossibleMoves(){return this.piece.getPossibleMoves().filter(t=>!kt.willMoveCauseCheck(this.color,this.pointClicked.row,this.pointClicked.col,t.row,t.col,this.board))}}class PM{static resolvePromotionChoice(t,e,i){const o=e.color===z.WHITE;switch(i){case 1:t.pieces.push(new Kh(e.point,e.color,o?en.WHITE_QUEEN:en.BLACK_QUEEN,t));break;case 2:t.pieces.push(new ro(e.point,e.color,o?en.WHITE_ROOK:en.BLACK_ROOK,t));break;case 3:t.pieces.push(new Fu(e.point,e.color,o?en.WHITE_BISHOP:en.BLACK_BISHOP,t));break;case 4:t.pieces.push(new Lu(e.point,e.color,o?en.WHITE_KNIGHT:en.BLACK_KNIGHT,t))}}}var c_=function(n){return n[n.KING=1]="KING",n[n.QUEEN=2]="QUEEN",n[n.BISHOP=3]="BISHOP",n[n.KNIGHT=4]="KNIGHT",n[n.ROOK=5]="ROOK",n[n.PAWN=6]="PAWN",n}(c_||{}),OM=function(n){return n[n.LIGHT=1]="LIGHT",n[n.DARK=2]="DARK",n}(OM||{});class OP{static create(t,e,i,o){let u,m=i===OM.LIGHT?z.WHITE:z.BLACK;switch(e){case c_.QUEEN:u=new Kh(new pe(t.yAxis,t.xAxis),m,m===z.WHITE?en.WHITE_QUEEN:en.BLACK_QUEEN,o);break;case c_.KING:u=new sr(new pe(t.yAxis,t.xAxis),m,m===z.WHITE?en.WHITE_KING:en.BLACK_KING,o);break;case c_.KNIGHT:u=new Lu(new pe(t.yAxis,t.xAxis),m,m===z.WHITE?en.WHITE_KNIGHT:en.BLACK_KNIGHT,o);break;case c_.BISHOP:u=new Fu(new pe(t.yAxis,t.xAxis),m,m===z.WHITE?en.WHITE_BISHOP:en.BLACK_BISHOP,o);break;case c_.ROOK:u=new ro(new pe(t.yAxis,t.xAxis),m,m===z.WHITE?en.WHITE_ROOK:en.BLACK_ROOK,o);break;case c_.PAWN:u=new io(new pe(t.yAxis,t.xAxis),m,m===z.WHITE?en.WHITE_PAWN:en.BLACK_PAWN,o)}return u}}class xP extends AP{constructor(t,e){super(t),this._selected=!1,this.moveChange=e,this.boardLoader=new TP(this),this.boardLoader.addPieces(),this.boardStateProvider=new SP}reset(){this.boardStateProvider.clear(),this.moveHistoryProvider.clear(),this.boardLoader.addPieces(),this.board.reset(),this.coords.reset(),this.drawProvider.clear(),this.pgnProcessor.reset()}undo(){if(!this.boardStateProvider.isEmpty()){const t=this.boardStateProvider.pop().board;this.board.reverted&&t.reverse(),this.board=t,this.board.possibleCaptures=[],this.board.possibleMoves=[],this.board.activePiece=null,this.moveHistoryProvider.pop(),this.board.calculateFEN(),this.pgnProcessor.removeLast()}}saveMoveClone(){const t=this.board.clone();this.board.reverted&&t.reverse(),this.moveStateProvider.addMove(new MM(t))}move(t){if(t){const e=kt.translateCoordsToIndex(t.substring(0,2),this.board.reverted),i=kt.translateCoordsToIndex(t.substring(2,4),this.board.reverted),o=this.board.getPieceByPoint(e.yAxis,e.xAxis);if(o){if(this.board.currentWhitePlayer&&o.color===z.BLACK||!this.board.currentWhitePlayer&&o.color===z.WHITE)return;this.prepareActivePiece(o,o.point),this.board.isPointInPossibleMoves(new pe(i.yAxis,i.xAxis))||this.board.isPointInPossibleCaptures(new pe(i.yAxis,i.xAxis))?(this.saveClone(),this.movePiece(o,new pe(i.yAxis,i.xAxis),5===t.length?+t.substring(4,5):0),this.board.lastMoveSrc=new pe(e.yAxis,e.xAxis),this.board.lastMoveDest=new pe(i.yAxis,i.xAxis),this.disableSelection()):this.disableSelection()}}}prepareActivePiece(t,e){this.board.activePiece=t,this._selected=!0,this.board.possibleCaptures=new RM(t,e,this.board.currentWhitePlayer?z.WHITE:z.BLACK,this.board).getPossibleCaptures(),this.board.possibleMoves=new RM(t,e,this.board.currentWhitePlayer?z.WHITE:z.BLACK,this.board).getPossibleMoves()}onPieceClicked(t,e){this.board.currentWhitePlayer&&t.color===z.BLACK||!this.board.currentWhitePlayer&&t.color===z.WHITE||this.prepareActivePiece(t,e)}handleClickEvent(t,e){let i=!1;(this.board.isPointInPossibleMoves(t)||this.board.isPointInPossibleCaptures(t)||this.freeMode)&&t.isInRange()&&(this.saveClone(),this.board.lastMoveSrc=new pe(this.board.activePiece.point.row,this.board.activePiece.point.col),this.board.lastMoveDest=t.clone(),this.movePiece(this.board.activePiece,t),this.board.activePiece.point.isEqual(this.board.lastMoveSrc)||(i=!0)),(e||i)&&this.disableSelection(),this.disableSelection();const o=this.board.getPieceByPoint(t.row,t.col);o&&!i&&(this.onFreeMode(o),this.onPieceClicked(o,t))}onMouseDown(t,e,i,o){if(this.moveDone=!1,0!==t.button)return void(this.drawPoint=eS.getDrawingPoint(this.heightAndWidth,this.colorStrategy,t.x,t.y,t.ctrlKey,t.altKey,t.shiftKey,i,o));if(this.drawProvider.clear(),this.board.activePiece&&e.isEqual(this.board.activePiece.point))return void(this.disabling=!0);const u=this.board.getPieceByPoint(e.row,e.col);if(this.freeMode&&u){if(t.ctrlKey)return void(this.board.pieces=this.board.pieces.filter(m=>m!==u));this.board.currentWhitePlayer=u.color===z.WHITE}this.isPieceDisabled(u)||(this._selected?this.handleClickEvent(e,!0):u&&(this.onFreeMode(u),this.onPieceClicked(u,e)))}onMouseUp(t,e,i,o){if(this.moveDone=!1,0!==t.button&&!this.drawDisabled)return void this.addDrawPoint(t.x,t.y,t.ctrlKey,t.altKey,t.shiftKey,i,o);if(this.drawProvider.clear(),this.dragDisabled)return;if(this.board.activePiece&&e.isEqual(this.board.activePiece.point)&&this.disabling)return this.disableSelection(),void(this.disabling=!1);const u=this.board.getPieceByPoint(e.row,e.col);this.isPieceDisabled(u)||this._selected&&this.handleClickEvent(e,!1)}saveClone(){const t=this.board.clone();this.board.reverted&&t.reverse(),this.boardStateProvider.addMove(new MM(t))}movePiece(t,e,i){const o=this.board.pieces.find(u=>u.point.col===e.col&&u.point.row===e.row);if(this.pgnProcessor.process(this.board,t,e,o),o&&t.color!==o.color)this.board.pieces=this.board.pieces.filter(u=>u!==o);else if(o&&t.color===o.color)return;if(this.historyMoveCandidate=new fP(kt.format(t.point,e,this.board.reverted),t.constant.name,t.color===z.WHITE?"white":"black",!!o),this.moveHistoryProvider.addMove(this.historyMoveCandidate),t instanceof sr&&Math.abs(e.col-t.point.col)>1)if(e.col<3){const m=this.board.getPieceByField(t.point.row,0);this.freeMode||(m.point.col=this.board.reverted?2:3)}else{const m=this.board.getPieceByField(t.point.row,7);this.freeMode||(m.point.col=this.board.reverted?4:5)}t instanceof io?(this.board.checkIfPawnTakesEnPassant(e),this.board.checkIfPawnEnpassanted(t,e)):(this.board.enPassantPoint=null,this.board.enPassantPiece=null),t.point=e,this.increaseFullMoveCount(),this.board.currentWhitePlayer=!this.board.currentWhitePlayer,this.checkForPawnPromote(t,i)||this.afterMoveActions()}checkForPawnPromote(t,e){if(t instanceof io&&(0===t.point.row||7===t.point.row))return this.board.pieces=this.board.pieces.filter(i=>i!==t),e?(PM.resolvePromotionChoice(this.board,t,e),this.afterMoveActions(e)):this.openPromoteDialog(t),!0}afterMoveActions(t){this.checkIfPawnFirstMove(this.board.activePiece),this.checkIfRookMoved(this.board.activePiece),this.checkIfKingMoved(this.board.activePiece),this.board.blackKingChecked=this.board.isKingInCheck(z.BLACK,this.board.pieces),this.board.whiteKingChecked=this.board.isKingInCheck(z.WHITE,this.board.pieces);const e=this.board.blackKingChecked||this.board.whiteKingChecked,i=this.checkForPossibleMoves(z.BLACK)||this.checkForPossibleMoves(z.WHITE),o=this.checkForPat(z.BLACK)||this.checkForPat(z.WHITE);this.historyMoveCandidate.setGameStates(e,o,i),this.pgnProcessor.processChecks(i,e,o),this.pgnProcessor.addPromotionChoice(t),this.disabling=!1,this.board.calculateFEN();const u=this.moveHistoryProvider.getLastMove();u&&t&&(u.move+=t),this.moveChange.emit({...u,check:e,checkmate:i,stalemate:o,fen:this.board.fen,pgn:{pgn:this.pgnProcessor.getPGN()},freeMode:this.freeMode}),this.moveDone=!0}checkForPat(t){return t===z.WHITE&&!this.board.whiteKingChecked||t===z.BLACK&&!this.board.blackKingChecked?this.checkForPossibleMoves(t):void 0}openPromoteDialog(t){t.color===this.board.activePiece.color&&this.modal.open(e=>{PM.resolvePromotionChoice(this.board,t,e),this.afterMoveActions(e)})}checkForPossibleMoves(t){return!this.board.pieces.filter(e=>e.color===t).some(e=>e.getPossibleMoves().some(i=>!kt.willMoveCauseCheck(t,e.point.row,e.point.col,i.row,i.col,this.board))||e.getPossibleCaptures().some(i=>!kt.willMoveCauseCheck(t,e.point.row,e.point.col,i.row,i.col,this.board)))}disableSelection(){this._selected=!1,this.board.possibleCaptures=[],this.board.activePiece=null,this.board.possibleMoves=[]}onFreeMode(t){!this.freeMode||null==t||(this.board.currentWhitePlayer=t.color===z.WHITE)}isPieceDisabled(t){return!(t&&t.point&&this.board.possibleCaptures.find(i=>i.col===t.point.col&&i.row===t.point.row))&&t&&(this.lightDisabled&&t.color===z.WHITE||this.darkDisabled&&t.color===z.BLACK)}addDrawPoint(t,e,i,o,u,m,w){const A=eS.getDrawingPoint(this.heightAndWidth,this.colorStrategy,t,e,i,o,u,m,w);if(this.drawPoint.isEqual(A)){const P=new RP;P.drawPoint=A,this.drawProvider.containsCircle(P)?this.drawProvider.reomveCircle(P):this.drawProvider.addCircle(P)}else{const P=new MP;P.start=this.drawPoint,P.end=A,this.drawProvider.containsArrow(P)?this.drawProvider.removeArrow(P):this.drawProvider.addArrow(P)}}increaseFullMoveCount(){this.board.currentWhitePlayer||++this.board.fullMoveCount}addPiece(t,e,i){if(this.freeMode&&i&&t>0&&e>0){let o=kt.translateCoordsToIndex(i,this.board.reverted),u=this.board.getPieceByPoint(o.yAxis,o.xAxis);u&&(this.board.pieces=this.board.pieces.filter(w=>w!==u));let m=OP.create(o,t,e,this.board);this.saveClone(),this.board.pieces.push(m),this.afterMoveActions()}}}class NP{constructor(){this.board=[],this.pieces=[],this.enPassantPoint=null,this.enPassantPiece=null,this.lastMoveSrc=null,this.lastMoveDest=null,this.possibleCaptures=[],this.possibleMoves=[],this.currentWhitePlayer=!0,this.reverted=!1,this.fullMoveCount=1;for(let t=0;t<8;++t){this.board[t]=[];for(let e=0;e<8;++e)this.board[t][e]=0}}isXYInPossibleMoves(t,e){return this.possibleMoves.some(i=>i.row===t&&i.col===e)}isXYInPossibleCaptures(t,e){return this.possibleCaptures.some(i=>i.row===t&&i.col===e)}isXYInSourceMove(t,e){return this.lastMoveSrc&&this.lastMoveSrc.row===t&&this.lastMoveSrc.col===e}isXYInDestMove(t,e){return this.lastMoveDest&&this.lastMoveDest.row===t&&this.lastMoveDest.col===e}isXYInActiveMove(t,e){return this.activePiece&&this.activePiece.point.row===t&&this.activePiece.point.col===e}isPointInPossibleMoves(t){return this.possibleMoves.some(e=>e.row===t.row&&e.col===t.col)}isPointInPossibleCaptures(t){return this.possibleCaptures.some(e=>e.row===t.row&&e.col===t.col)}reset(){this.lastMoveDest=null,this.lastMoveSrc=null,this.whiteKingChecked=!1,this.blackKingChecked=!1,this.possibleCaptures=[],this.possibleMoves=[],this.activePiece=null,this.reverted=!1,this.currentWhitePlayer=!0,this.enPassantPoint=null,this.enPassantPiece=null,this.fullMoveCount=1,this.calculateFEN()}reverse(){this.reverted=!this.reverted,this.activePiece=null,this.possibleMoves=[],this.possibleCaptures=[],this.pieces.forEach(t=>this.reversePoint(t.point)),this.reversePoint(this.lastMoveSrc),this.reversePoint(this.lastMoveDest),this.enPassantPoint&&this.enPassantPiece&&this.reversePoint(this.enPassantPoint)}clone(){return(0,qR.cloneDeep)(this)}isFieldTakenByEnemy(t,e,i){return!(t>7||t<0||e>7||e<0)&&this.pieces.some(o=>o.point.col===e&&o.point.row===t&&o.color===i)}isFieldEmpty(t,e){return!(t>7||t<0||e>7||e<0||this.pieces.some(i=>i.point.col===e&&i.point.row===t))}isFieldUnderAttack(t,e,i){return this.pieces.filter(o=>o.color===i).some(o=>o.getCoveredFields().some(u=>u.col===e&&u.row===t))}getPieceByField(t,e){if(!this.isFieldEmpty(t,e))return this.pieces.find(i=>i.point.col===e&&i.point.row===t)}isKingInCheck(t,e){const i=e.find(o=>o.color===t&&o instanceof sr);return!!i&&e.some(o=>o.getPossibleCaptures().some(u=>u.col===i.point.col&&u.row===i.point.row)&&o.color!==t)}getKingByColor(t){return this.pieces.find(e=>e instanceof sr&&e.color===t)}getCastleFENString(t){const e=this.getKingByColor(t);if(!e||e.isMovedAlready)return"";let i="";const o=this.getPieceByField(e.point.row,0),u=this.getPieceByField(e.point.row,7);return u instanceof ro&&u.color===t&&(u.isMovedAlready||(i+=this.reverted?"q":"k")),o instanceof ro&&o.color===t&&(o.isMovedAlready||(i+=this.reverted?"k":"q")),i=i.split("").sort().join(""),t===z.BLACK?i:i.toUpperCase()}getEnPassantFENString(){return this.enPassantPoint?this.reverted?String.fromCharCode(104-this.enPassantPoint.col)+(this.enPassantPoint.row+1):String.fromCharCode(97+this.enPassantPoint.col)+(Math.abs(this.enPassantPoint.row-7)+1):"-"}calculateFEN(){let t="";for(let u=0;u<8;++u){let m=0;for(let w=0;w<8;++w){const A=this.pieces.find(P=>P.point.col===w&&P.point.row===u);A?(m>0&&(t+=m,m=0),A instanceof ro?t+=A.color===z.BLACK?"r":"R":A instanceof Lu?t+=A.color===z.BLACK?"n":"N":A instanceof Fu?t+=A.color===z.BLACK?"b":"B":A instanceof Kh?t+=A.color===z.BLACK?"q":"Q":A instanceof sr?t+=A.color===z.BLACK?"k":"K":A instanceof io&&(t+=A.color===z.BLACK?"p":"P")):++m}m>0&&(t+=m),t+="/"}t=t.substr(0,t.length-1),this.reverted&&(t=t.split("").reverse().join("")),t+=" "+(this.currentWhitePlayer?"w":"b");let o=this.getCastleFENString(z.WHITE)+this.getCastleFENString(z.BLACK);o||(o="-"),t+=" "+o,t+=" "+this.getEnPassantFENString(),t+=" 0",t+=" "+this.fullMoveCount,this.fen=t}isXYInPointSelection(t,e){return!1}reversePoint(t){t&&(t.row=Math.abs(t.row-7),t.col=Math.abs(t.col-7))}getPieceByPoint(t,e){return t=Math.floor(t),e=Math.floor(e),this.pieces.find(i=>i.point.col===e&&i.point.row===t)}checkIfPawnTakesEnPassant(t){t.isEqual(this.enPassantPoint)&&(this.pieces=this.pieces.filter(e=>e!==this.enPassantPiece),this.enPassantPoint=null,this.enPassantPiece=null)}checkIfPawnEnpassanted(t,e){Math.abs(t.point.row-e.row)>1?(this.enPassantPiece=t,this.enPassantPoint=new pe((t.point.row+e.row)/2,t.point.col)):(this.enPassantPoint=null,this.enPassantPiece=null)}isKingChecked(t){if(t instanceof sr)return t.color===z.WHITE?this.whiteKingChecked:this.blackKingChecked}getCurrentPlayerColor(){return this.currentWhitePlayer?z.WHITE:z.BLACK}}let xM=(()=>{class n{constructor(){this.componentMethodCallSource=new Bt.B,this.componentMethodCalled$=this.componentMethodCallSource.asObservable()}reset(){this.componentMethodCallSource.next()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kP=(()=>{class n{constructor(){this.color="white",this.opened=!1}open(e){this.opened=!0,this.onCloseCallback=e,this.modal.nativeElement.style.display="block"}changeSelection(e){this.modal.nativeElement.style.display="none",this.opened=!1,this.onCloseCallback(e)}getPieceIcon(e){let i="";switch(e.toLowerCase()){case"queen":i="white"===this.color?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;break;case"rook":i="white"===this.color?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;break;case"bishop":i="white"===this.color?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;break;case"knight":i="white"===this.color?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl}return i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=h.VBU({type:n,selectors:[["app-piece-promotion-modal"]],viewQuery:function(e,i){if(1&e&&h.GBs(YR,5),2&e){let o;h.mGM(o=h.lsd())&&(i.modal=o.first)}},inputs:{pieceIconInput:"pieceIconInput",color:"color"},decls:6,vars:2,consts:[[1,"container"],["myModal",""],[1,"wrapper"],[1,"content"],["class","piece-wrapper",4,"ngIf"],[1,"piece-wrapper"],[1,"piece",3,"click"],["alt","Queen",3,"src"],["alt","Rook",3,"src"],["alt","Bishop",3,"src"],["alt","Knight",3,"src"]],template:function(e,i){1&e&&(h.j41(0,"div",0,1)(2,"div",2)(3,"div",3),h.DNE(4,QR,9,4,"div",4),h.DNE(5,XR,9,0,"div",4),h.k0s()()()),2&e&&(h.R7$(4),h.Y8G("ngIf",i.pieceIconInput),h.R7$(1),h.Y8G("ngIf",!i.pieceIconInput))},dependencies:[ho],styles:[".container[_ngcontent-%COMP%]{display:none;position:absolute;z-index:9999;top:0;color:#000;width:100%;height:100%;overflow:auto;background-color:#0006}.wrapper[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;position:relative;top:30%;font-size:100%;height:40%;padding:10px;border:1px solid #888;width:90%}.piece[_ngcontent-%COMP%]{font-size:5rem;height:100%;width:25%;cursor:pointer;display:inline-block;text-align:center}.piece[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.piece[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:5px}.piece-wrapper[_ngcontent-%COMP%]{height:80%;width:100%}#close-button[_ngcontent-%COMP%]{border-radius:4px;background-color:#4caf50;border:none;color:#fff;padding-left:5px;padding-right:5px;text-align:center;text-decoration:none;display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #00B919;border-radius:4px;box-sizing:border-box}"]}),n})(),FP=(()=>{class n{constructor(e){this.ngxChessBoardService=e,this.darkTileColor=zf.DEFAULT_DARK_TILE_COLOR,this.lightTileColor=zf.DEFAULT_LIGHT_TILE_COLOR,this.showCoords=!0,this.sourcePointColor=zf.DEFAULT_SOURCE_POINT_COLOR,this.destinationPointColor=zf.DEFAULT_DESTINATION_POINT_COLOR,this.legalMovesPointColor=zf.DEFAULT_LEGAL_MOVE_POINT_COLOR,this.showLastMove=!0,this.showLegalMoves=!0,this.showActivePiece=!0,this.showPossibleCaptures=!0,this.moveChange=new h.bkB,this.checkmate=new h.bkB,this.stalemate=new h.bkB,this.selected=!1,this.isDragging=!1,this.startTransition="",this.engineFacade=new xP(new NP,this.moveChange)}set size(e){this.engineFacade.heightAndWidth=e&&e>=zf.MIN_BOARD_SIZE&&e<=zf.MAX_BOARD_SIZE?e:zf.DEFAULT_SIZE,this.engineFacade.drawProvider.clear(),this.calculatePieceSize()}set freeMode(e){this.engineFacade.freeMode=e}set dragDisabled(e){this.engineFacade.dragDisabled=e}set drawDisabled(e){this.engineFacade.drawDisabled=e}set pieceIcons(e){this.engineFacade.pieceIconManager.pieceIconInput=e}set lightDisabled(e){this.engineFacade.lightDisabled=e}set darkDisabled(e){this.engineFacade.darkDisabled=e}onRightClick(e){e.preventDefault()}ngOnChanges(e){(e.lightDisabled&&this.lightDisabled&&this.engineFacade.board.currentWhitePlayer||e.darkDisabled&&this.darkDisabled&&!this.engineFacade.board.currentWhitePlayer)&&(this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[])}ngOnInit(){this.ngxChessBoardService.componentMethodCalled$.subscribe(()=>{this.engineFacade.reset()})}ngAfterViewInit(){this.engineFacade.modal=this.modal,this.calculatePieceSize()}onMouseUp(e){this.engineFacade.onMouseUp(e,this.getClickPoint(e),this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().top)}reverse(){this.selected=!1,this.engineFacade.board.reverse(),this.engineFacade.coords.reverse()}updateBoard(e){this.engineFacade.board=e,this.boardLoader.setEngineFacade(this.engineFacade),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[]}setFEN(e){try{this.engineFacade.boardLoader.setNotationProcessor(JT.getProcessor(Nw.FEN)),this.engineFacade.boardLoader.loadFEN(e),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[],this.engineFacade.coords.reset()}catch{this.engineFacade.boardLoader.addPieces()}}setPGN(e){try{this.engineFacade.pgnProcessor.reset(),this.engineFacade.boardLoader.setNotationProcessor(JT.getProcessor(Nw.PGN)),this.engineFacade.boardLoader.loadPGN(e),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[],this.engineFacade.coords.reset()}catch(i){console.log(i),this.engineFacade.boardLoader.addPieces()}}getFEN(){return this.engineFacade.board.fen}dragEnded(e){this.isDragging=!1,this.engineFacade.dragEndStrategy.process(e,this.engineFacade.moveDone,this.startTransition)}dragStart(e){this.isDragging=!0;let i=e.source.getRootElement().style.transform.split(") ");this.startTransition=2===i.length?i[1]:i[0],this.engineFacade.dragStartStrategy.process(e)}onMouseDown(e){this.engineFacade.onMouseDown(e,this.getClickPoint(e),this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().top)}getClickPoint(e){return eS.getClickPoint(e,this.boardRef.nativeElement.getBoundingClientRect().top,this.boardRef.nativeElement.getBoundingClientRect().height,this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().width)}calculatePieceSize(){this.pieceSize=this.engineFacade.heightAndWidth/8}getCustomPieceIcons(e){return JSON.parse(`{ "background-image": "url('${this.engineFacade.pieceIconManager.getPieceIcon(e)}')"}`)}move(e){this.engineFacade.move(e)}getMoveHistory(){return this.engineFacade.getMoveHistory()}reset(){this.engineFacade.reset()}undo(){this.engineFacade.undo()}addPiece(e,i,o){this.engineFacade.addPiece(e,i,o)}getPGN(){return this.engineFacade.pgnProcessor.getPGN()}dragMoved(e){let i=e.pointerPosition.x-e.source.getRootElement().parentElement.getBoundingClientRect().left-this.pieceSize/2,o=e.pointerPosition.y-e.source.getRootElement().parentElement.getBoundingClientRect().top-this.pieceSize/2;e.source.getRootElement().style.transform="translate3d("+i+"px, "+o+"px,0px)"}getTileBackgroundColor(e,i){let o=(e+i)%2==0?this.lightTileColor:this.darkTileColor;return this.showLastMove&&(this.engineFacade.board.isXYInSourceMove(e,i)&&(o=this.sourcePointColor),this.engineFacade.board.isXYInDestMove(e,i)&&(o=this.destinationPointColor)),o}}return n.\u0275fac=function(e){return new(e||n)(h.rXU(xM))},n.\u0275cmp=h.VBU({type:n,selectors:[["ngx-chess-board"]],viewQuery:function(e,i){if(1&e&&(h.GBs(ZR,5),h.GBs(JR,5)),2&e){let o;h.mGM(o=h.lsd())&&(i.boardRef=o.first),h.mGM(o=h.lsd())&&(i.modal=o.first)}},hostBindings:function(e,i){1&e&&h.bIt("contextmenu",function(u){return i.onRightClick(u)})},inputs:{darkTileColor:"darkTileColor",lightTileColor:"lightTileColor",showCoords:"showCoords",sourcePointColor:"sourcePointColor",destinationPointColor:"destinationPointColor",legalMovesPointColor:"legalMovesPointColor",showLastMove:"showLastMove",showLegalMoves:"showLegalMoves",showActivePiece:"showActivePiece",showPossibleCaptures:"showPossibleCaptures",size:"size",freeMode:"freeMode",dragDisabled:"dragDisabled",drawDisabled:"drawDisabled",pieceIcons:"pieceIcons",lightDisabled:"lightDisabled",darkDisabled:"darkDisabled"},outputs:{moveChange:"moveChange",checkmate:"checkmate",stalemate:"stalemate"},features:[h.OA$],decls:13,vars:18,consts:[["id","board",3,"pointerdown","pointerup"],["boardRef",""],["id","drag"],["class","single-piece","cdkDrag","",3,"cdkDragDisabled","innerHTML","ngStyle","transform","max-height","font-size","width","height","cdkDragEnded","cdkDragMoved","cdkDragStarted",4,"ngFor","ngForOf"],["class","board-row",4,"ngFor","ngForOf"],[2,"position","absolute","top","0","pointer-events","none"],[4,"ngFor","ngForOf"],["class","arrow",4,"ngFor","ngForOf"],["fill-opacity","0.0","stroke-width","2",4,"ngFor","ngForOf"],[3,"pieceIconInput","color"],["modal",""],["cdkDrag","",1,"single-piece",3,"cdkDragDisabled","innerHTML","ngStyle","cdkDragEnded","cdkDragMoved","cdkDragStarted"],[1,"board-row"],["class","board-col",3,"current-selection","king-check","point-circle","possible-capture","possible-point","background-color",4,"ngFor","ngForOf"],[1,"board-col"],["class","yCoord",3,"color","font-size",4,"ngIf"],["class","xCoord",3,"color","font-size",4,"ngIf"],["style","height:100%; width:100%",4,"ngIf"],[1,"yCoord"],[1,"xCoord"],[2,"height","100%","width","100%"],[3,"ngClass"],["markerHeight","13","markerWidth","13","orient","auto","refX","9","refY","6",3,"id"],["d","M2,2 L2,11 L10,6 L2,2"],[1,"arrow"],["fill-opacity","0.0","stroke-width","2"]],template:function(e,i){if(1&e){const o=h.RV6();h.j41(0,"div",0,1),h.bIt("pointerdown",function(m){h.eBV(o);const w=h.sdS(12);return h.Njj(!w.opened&&i.onMouseDown(m))})("pointerup",function(m){h.eBV(o);const w=h.sdS(12);return h.Njj(!w.opened&&i.onMouseUp(m))}),h.j41(2,"div",2),h.DNE(3,eP,1,13,"div",3),h.DNE(4,sP,2,1,"div",4),h.k0s(),h.qSk(),h.j41(5,"svg",5),h.DNE(6,oP,3,3,"defs",6),h.DNE(7,aP,1,6,"line",7),h.nI1(8,"async"),h.DNE(9,lP,1,4,"circle",8),h.nI1(10,"async"),h.k0s(),h.joV(),h.nrm(11,"app-piece-promotion-modal",9,10),h.k0s()}2&e&&(h.xc7("height",i.engineFacade.heightAndWidth,"px")("width",i.engineFacade.heightAndWidth,"px"),h.R7$(3),h.Y8G("ngForOf",i.engineFacade.board.pieces),h.R7$(1),h.Y8G("ngForOf",i.engineFacade.board.board),h.R7$(1),h.BMQ("height",i.engineFacade.heightAndWidth)("width",i.engineFacade.heightAndWidth),h.R7$(1),h.Y8G("ngForOf",h.lJ4(17,cP)),h.R7$(1),h.Y8G("ngForOf",h.bMT(8,13,i.engineFacade.drawProvider.arrows$)),h.R7$(2),h.Y8G("ngForOf",h.bMT(10,15,i.engineFacade.drawProvider.circles$)),h.R7$(2),h.Y8G("pieceIconInput",i.engineFacade.pieceIconManager.pieceIconInput)("color",i.engineFacade.board.getCurrentPlayerColor()?"white":"black"))},dependencies:[kP,Uo,KR,jo,ho,Ja,Qc],styles:['@charset "UTF-8";#board[_ngcontent-%COMP%]{font-family:Courier New,serif;position:relative}.board-row[_ngcontent-%COMP%]{display:block;width:100%;height:12.5%;position:relative}.board-col[_ngcontent-%COMP%]{position:relative;display:inline-block;width:12.5%;vertical-align:top;cursor:default;height:100%}.piece[_ngcontent-%COMP%]{height:100%;cursor:-webkit-grab;cursor:grab;width:100%;-moz-user-select:none;user-select:none;-webkit-user-select:none;background-size:cover;justify-content:center;text-align:center;color:#000!important;box-sizing:border-box}.piece[_ngcontent-%COMP%]:after{content:"\\200b";box-sizing:border-box}#drag[_ngcontent-%COMP%]{height:100%;width:100%}.possible-point[_ngcontent-%COMP%]{background:radial-gradient(#13262F 15%,transparent 20%)}.possible-point[_ngcontent-%COMP%]:hover, .possible-capture[_ngcontent-%COMP%]:hover{opacity:.4}.possible-capture[_ngcontent-%COMP%]{background:radial-gradient(transparent 0%,transparent 80%,#13262F 80%);opacity:.5;box-sizing:border-box;margin:0;padding:0}.king-check[_ngcontent-%COMP%]{background:radial-gradient(ellipse at center,red 0%,#e70000 25%,rgba(169,0,0,0) 89%,rgba(158,0,0,0) 100%)}.current-selection[_ngcontent-%COMP%]{background-color:#72620b!important}.yCoord[_ngcontent-%COMP%]{position:absolute;-moz-user-select:none;user-select:none;-webkit-user-select:none;cursor:pointer;right:.2em;font-family:Lucida Console,Courier,monospace;box-sizing:border-box}.xCoord[_ngcontent-%COMP%]{position:absolute;-moz-user-select:none;user-select:none;-webkit-user-select:none;cursor:pointer;left:.2em;bottom:0;font-family:Lucida Console,Courier,monospace;box-sizing:border-box}.hovering[_ngcontent-%COMP%]{background-color:red!important}.arrow[_ngcontent-%COMP%]{stroke-width:2}svg[_ngcontent-%COMP%]{filter:drop-shadow(1px 1px 0px #111) drop-shadow(-1px 1px 0px #111) drop-shadow(1px -1px 0px #111) drop-shadow(-1px -1px 0px #111)}[_nghost-%COMP%]{display:inline-block!important}.single-piece[_ngcontent-%COMP%]{position:absolute;z-index:999;justify-content:center;text-align:center;-moz-user-select:none;user-select:none;-webkit-user-select:none;color:#000!important;cursor:-webkit-grab;cursor:grab;background-size:cover}.single-piece[_ngcontent-%COMP%]:after{content:"\\200b";box-sizing:border-box}.cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-dragging){transition:transform .2s cubic-bezier(0,.3,.14,.49)}']}),n})(),LP=(()=>{class n{static forRoot(){return{ngModule:n,providers:[xM]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.$C({type:n}),n.\u0275inj=h.G2t({imports:[[is,zR]]}),n})();const BP=["board"];function VP(n,t){if(1&n&&(h.j41(0,"div",5),h.EFF(1),h.k0s()),2&n){const e=h.XpG();h.R7$(1),h.SpI(" ",e.player,"'s turn ")}}let NM=(()=>{class n{constructor(){this.player=Ji.white,this.myTurn=!1,this.onMove=new h.bkB}reset(){this.board.reset(),this.board.darkDisabled=!0,this.board.lightDisabled=!1,this.myTurn=!0,this.player===Ji.black&&(this.myTurn=!1,this.board.reverse())}initWithPlayer(e){this.player=e,this.player===Ji.black?(this.board.reverse(),this.board.lightDisabled=!0):(this.board.darkDisabled=!0,this.myTurn=!0)}updateMove(e){e.player!==this.player?this.takeTurn():this.passTurn(),this.board.setFEN(e.fen),this.player===Ji.black&&this.board.reverse()}takeTurn(){this.myTurn=!0,this.player!==Ji.white?this.board.darkDisabled=!1:this.board.lightDisabled=!1}passTurn(){this.myTurn=!1,this.player!==Ji.white?this.board.darkDisabled=!0:this.board.lightDisabled=!0}moveChange(e){this.onMove.emit({fen:e.fen,checkmate:e.checkmate,player:this.player}),this.passTurn()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["app-chess-board"]],viewQuery:function(i,o){if(1&i&&h.GBs(BP,5),2&i){let u;h.mGM(u=h.lsd())&&(o.board=u.first)}},outputs:{onMove:"onMove"},decls:6,vars:5,consts:[[1,"d-flex","flex-column","align-items-center"],[1,"mb-2"],[3,"size","moveChange"],["board",""],["class","mt-2 container-sm bg-success text-center rounded","style","width: 50%; --bs-bg-opacity: .7",4,"ngIf"],[1,"mt-2","container-sm","bg-success","text-center","rounded",2,"width","50%","--bs-bg-opacity",".7"]],template:function(i,o){1&i&&(h.j41(0,"div",0)(1,"h2",1),h.EFF(2),h.k0s(),h.j41(3,"ngx-chess-board",2,3),h.bIt("moveChange",function(m){return o.moveChange(m)}),h.k0s(),h.DNE(5,VP,2,1,"div",4),h.k0s()),2&i&&(h.R7$(2),h.SpI("Player ",o.player,""),h.R7$(1),h.xc7("opacity",o.myTurn?1:.7),h.Y8G("size",400),h.R7$(2),h.Y8G("ngIf",o.myTurn))},dependencies:[ho,FP],encapsulation:2})}}return n})();const UP=["board"];function HP(n,t){if(1&n){const e=h.RV6();h.j41(0,"div",6)(1,"h2"),h.EFF(2,"Join or create a game to play online!"),h.k0s(),h.j41(3,"button",7),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.createGame())}),h.EFF(4,"Create New Game"),h.k0s(),h.j41(5,"input",8),h.bIt("ngModelChange",function(o){h.eBV(e);const u=h.XpG();return h.Njj(u.joinCode=o)}),h.k0s(),h.j41(6,"button",9),h.bIt("click",function(){h.eBV(e);const o=h.XpG();return h.Njj(o.joinGame())}),h.EFF(7,"Join Game"),h.k0s()()}if(2&n){const e=h.XpG();h.R7$(5),h.Y8G("ngModel",e.joinCode)}}let jP=(()=>{class n{constructor(e,i){this.service=e,this.router=i,this.gameId=null,this.joinCode=""}handleBeforeUnload(e){this.service.endGame()}ngOnDestroy(){this.subscription?.unsubscribe(),this.service.endGame()}createGame(){this.subscription=this.service.createGame().subscribe(e=>this.opponentMoveMade(e)),this.gameId=this.service.gameId,this.board.initWithPlayer(this.service.player??Ji.white)}joinGame(){this.joinCode&&(this.subscription=this.service.joinGame(this.joinCode).subscribe(e=>this.opponentMoveMade(e)),this.gameId=this.service.gameId,this.board.initWithPlayer(this.service.player??Ji.black))}opponentMoveMade(e){e.fen&&(e.checkmate&&this.showResult(e),this.board.updateMove(e))}onMove(e){this.service.makeMove(e),e.checkmate&&this.showResult(e)}showResult(e){window.alert(`Game Over! ${e.player} wins!`),this.service.endGame(),this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(HI),h.rXU(Ps))}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["app-online-mode"]],viewQuery:function(i,o){if(1&i&&h.GBs(UP,5),2&i){let u;h.mGM(u=h.lsd())&&(o.board=u.first)}},hostBindings:function(i,o){1&i&&h.bIt("beforeunload",function(m){return o.handleBeforeUnload(m)},!1,h.tSv)},decls:8,vars:4,consts:[[1,"d-flex","flex-column","align-items-center",2,"height","100%"],[1,"my-5"],["class","d-flex flex-column align-items-center",4,"ngIf"],[3,"hidden","onMove"],["board",""],[1,"mt-5","fw-bold",3,"hidden"],[1,"d-flex","flex-column","align-items-center"],[1,"btn","btn-primary","mt-5",3,"click"],["placeholder","Enter game code",1,"form-control",2,"width","400px","margin-top","80px",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(i,o){1&i&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Online Chess Game"),h.k0s(),h.DNE(3,HP,8,1,"div",2),h.j41(4,"app-chess-board",3,4),h.bIt("onMove",function(m){return o.onMove(m)}),h.k0s(),h.j41(6,"p",5),h.EFF(7),h.k0s()()),2&i&&(h.R7$(3),h.Y8G("ngIf",!o.gameId),h.R7$(1),h.Y8G("hidden",!o.gameId),h.R7$(2),h.Y8G("hidden",!o.gameId),h.R7$(1),h.SpI("Game code: ",o.gameId,""))},dependencies:[ho,by,JI,m0,NM]})}}return n})();const $P=["board"],WP=[{path:"mainpage",component:Mc},{path:"iframepage",component:(()=>{class n{constructor(e){this.router=e}ngOnInit(){window.top===window.self&&this.router.navigate(["/mainpage"]),window.addEventListener("message",e=>{switch(e.data.type){case ua.name:return this.board.initWithPlayer(e.data.player);case Eu.name:return this.board.updateMove(e.data.move);case Kg.name:return this.board.reset()}})}onMove(e){parent.postMessage(new Eu(e))}static{this.\u0275fac=function(i){return new(i||n)(h.rXU(Ps))}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["app-iframe-page"]],viewQuery:function(i,o){if(1&i&&h.GBs($P,5),2&i){let u;h.mGM(u=h.lsd())&&(o.board=u.first)}},decls:2,vars:0,consts:[[3,"onMove"],["board",""]],template:function(i,o){1&i&&(h.j41(0,"app-chess-board",0,1),h.bIt("onMove",function(m){return o.onMove(m)}),h.k0s())},dependencies:[NM],encapsulation:2})}}return n})()},{path:"onlinemode",component:jP},{path:"",redirectTo:"/mainpage",pathMatch:"full"},{path:"**",component:(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["app-not-found"]],decls:5,vars:0,consts:[[1,"d-flex","flex-column","align-items-center",2,"height","100%","margin-top","200px"],[1,"mb-5"],["routerLink","/mainpage",1,"btn","btn-primary"]],template:function(i,o){1&i&&(h.j41(0,"div",0)(1,"h1",1),h.EFF(2,"Not Found"),h.k0s(),h.j41(3,"a",2),h.EFF(4,"Go To Main Page"),h.k0s()())},dependencies:[yp],encapsulation:2})}}return n})()}];let GP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({imports:[Sd.forRoot(WP),Sd]})}}return n})(),KP=(()=>{class n{constructor(){this.title="pencil-spaces-chess"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=h.VBU({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){1&i&&h.nrm(0,"router-outlet")},dependencies:[lh],encapsulation:2})}}return n})(),tS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({imports:[is,LP,Sd]})}}return n})(),zP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({providers:[qa,vf],imports:[is,tS,Sd]})}}return n})(),qP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n})}static{this.\u0275inj=h.G2t({providers:[HI],imports:[is,UI,jT,tS,Sd]})}}return n})();const YP_firebase={databaseURL:"https://pencil-spaces-chess-e866e-default-rtdb.firebaseio.com/",apiKey:"AIzaSyBAQGzFML4eAwgN39yNgjfkQmxQCrlVfvA",authDomain:"pencil-spaces-chess-e866e.firebaseapp.com",projectId:"pencil-spaces-chess-e866e",storageBucket:"pencil-spaces-chess-e866e.firebasestorage.app",messagingSenderId:"242495162955",appId:"1:242495162955:web:4301d7accce0ff03eedbce"};let QP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=h.$C({type:n,bootstrap:[KP]})}static{this.\u0275inj=h.G2t({imports:[qo,GP,da.bf.initializeApp(YP_firebase),tS,zP,qP]})}}return n})();Hr().bootstrapModule(QP).catch(n=>console.error(n))},7376:function(ut,Oe,V){var h;ut=V.nmd(ut),function(){var N,Ee="Expected a function",Ge="__lodash_hash_undefined__",G="__lodash_placeholder__",$n=1/0,Ri=9007199254740991,Br=4294967295,ge=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ve="[object Arguments]",ke="[object Array]",pt="[object Boolean]",Wt="[object Date]",ot="[object Error]",On="[object Function]",Sn="[object GeneratorFunction]",Kn="[object Map]",Ft="[object Number]",Fn="[object Object]",Tr="[object Promise]",zr="[object RegExp]",Vr="[object Set]",ao="[object String]",Et="[object Symbol]",xt="[object WeakMap]",Bn="[object ArrayBuffer]",Sr="[object DataView]",An="[object Float32Array]",Mr="[object Float64Array]",Lo="[object Int8Array]",gt="[object Int16Array]",ri="[object Int32Array]",Qt="[object Uint8Array]",gs="[object Uint8ClampedArray]",ts="[object Uint16Array]",Bo="[object Uint32Array]",_i=/\b__p \+= '';/g,Vo=/\b(__p \+=) '' \+/g,ms=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rr=/&(?:amp|lt|gt|quot|#39);/g,Pr=/[&<>"']/g,lo=RegExp(Rr.source),cr=RegExp(Pr.source),_s=/<%-([\s\S]+?)%>/g,vi=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ie=/^\w*$/,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,me=/[\\^$.*+?()[\]{}|]/g,dt=RegExp(me.source),wt=/^\s+/,_n=/\s/,Tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wr=/\{\n\/\* \[wrapped with (.+)\] \*/,Gt=/,? & /,hn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qr=/[()=,{}\[\]\/\s]/,Pi=/\\(\\)?/g,co=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Za=/\w*$/,Te=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,at=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fn=/($^)/,br=/['\n\r\u2028\u2029\\]/g,Zn="\\ud800-\\udfff",Gc="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ja="\\u2700-\\u27bf",Fl="a-z\\xdf-\\xf6\\xf8-\\xff",ur="A-Z\\xc0-\\xd6\\xd8-\\xde",ho="\\ufe0e\\ufe0f",jd="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zc="["+Zn+"]",Yr="["+jd+"]",Ll="["+Gc+"]",qc="\\d+",qf="["+Ja+"]",Ho="["+Fl+"]",Uu="[^"+Zn+jd+qc+Ja+Fl+ur+"]",jo="\\ud83c[\\udffb-\\udfff]",ju="[^"+Zn+"]",xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Bl="[\\ud800-\\udbff][\\udc00-\\udfff]",dr="["+ur+"]",Vl="(?:"+Ho+"|"+Uu+")",Qc="(?:"+dr+"|"+Uu+")",Ul="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Xc="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",_a="(?:"+Ll+"|"+jo+")?",Zc="["+ho+"]?",Ur=Zc+_a+"(?:\\u200d(?:"+[ju,xi,Bl].join("|")+")"+Zc+_a+")*",$o="(?:"+[qf,xi,Bl].join("|")+")"+Ur,Ni="(?:"+[ju+Ll+"?",Ll,xi,Bl,zc].join("|")+")",zh=RegExp("['\u2019]","g"),$u=RegExp(Ll,"g"),fo=RegExp(jo+"(?="+jo+")|"+Ni+Ur,"g"),rs=RegExp([dr+"?"+Ho+"+"+Ul+"(?="+[Yr,dr,"$"].join("|")+")",Qc+"+"+Xc+"(?="+[Yr,dr+Vl,"$"].join("|")+")",dr+"?"+Vl+"+"+Ul,dr+"+"+Xc,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qc,$o].join("|"),"g"),Wu=RegExp("[\\u200d"+Zn+Gc+ho+"]"),hr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,Mt={};Mt[An]=Mt[Mr]=Mt[Lo]=Mt[gt]=Mt[ri]=Mt[Qt]=Mt[gs]=Mt[ts]=Mt[Bo]=!0,Mt[ve]=Mt[ke]=Mt[Bn]=Mt[pt]=Mt[Sr]=Mt[Wt]=Mt[ot]=Mt[On]=Mt[Kn]=Mt[Ft]=Mt[Fn]=Mt[zr]=Mt[Vr]=Mt[ao]=Mt[xt]=!1;var un={};un[ve]=un[ke]=un[Bn]=un[Sr]=un[pt]=un[Wt]=un[An]=un[Mr]=un[Lo]=un[gt]=un[ri]=un[Kn]=un[Ft]=un[Fn]=un[zr]=un[Vr]=un[ao]=un[Et]=un[Qt]=un[gs]=un[ts]=un[Bo]=!0,un[ot]=un[On]=un[xt]=!1;var fr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wo=parseFloat,vs=parseInt,Ct="object"==typeof global&&global&&global.Object===Object&&global,Hl="object"==typeof self&&self&&self.Object===Object&&self,Ir=Ct||Hl||Function("return this")(),Fs=Oe&&!Oe.nodeType&&Oe,tr=Fs&&ut&&!ut.nodeType&&ut,va=tr&&tr.exports===Fs,ii=va&&Ct.process,zn=function(){try{return tr&&tr.require&&tr.require("util").types||ii&&ii.binding&&ii.binding("util")}catch{}}(),Gi=zn&&zn.isArrayBuffer,Gu=zn&&zn.isDate,ss=zn&&zn.isMap,Ls=zn&&zn.isRegExp,po=zn&&zn.isSet,ys=zn&&zn.isTypedArray;function Lt(ne,Re,we){switch(we.length){case 0:return ne.call(Re);case 1:return ne.call(Re,we[0]);case 2:return ne.call(Re,we[0],we[1]);case 3:return ne.call(Re,we[0],we[1],we[2])}return ne.apply(Re,we)}function Ku(ne,Re,we,ht){for(var qt=-1,Pn=null==ne?0:ne.length;++qt<Pn;){var gr=ne[qt];Re(ht,gr,we(gr),ne)}return ht}function si(ne,Re){for(var we=-1,ht=null==ne?0:ne.length;++we<ht&&!1!==Re(ne[we],we,ne););return ne}function Bs(ne,Re){for(var we=null==ne?0:ne.length;we--&&!1!==Re(ne[we],we,ne););return ne}function ki(ne,Re){for(var we=-1,ht=null==ne?0:ne.length;++we<ht;)if(!Re(ne[we],we,ne))return!1;return!0}function nr(ne,Re){for(var we=-1,ht=null==ne?0:ne.length,qt=0,Pn=[];++we<ht;){var gr=ne[we];Re(gr,we,ne)&&(Pn[qt++]=gr)}return Pn}function os(ne,Re){return!(null==ne||!ne.length)&&nl(ne,Re,0)>-1}function ya(ne,Re,we){for(var ht=-1,qt=null==ne?0:ne.length;++ht<qt;)if(we(Re,ne[ht]))return!0;return!1}function tn(ne,Re){for(var we=-1,ht=null==ne?0:ne.length,qt=Array(ht);++we<ht;)qt[we]=Re(ne[we],we,ne);return qt}function Es(ne,Re){for(var we=-1,ht=Re.length,qt=ne.length;++we<ht;)ne[qt+we]=Re[we];return ne}function Xr(ne,Re,we,ht){var qt=-1,Pn=null==ne?0:ne.length;for(ht&&Pn&&(we=ne[++qt]);++qt<Pn;)we=Re(we,ne[qt],qt,ne);return we}function oi(ne,Re,we,ht){var qt=null==ne?0:ne.length;for(ht&&qt&&(we=ne[--qt]);qt--;)we=Re(we,ne[qt],qt,ne);return we}function jl(ne,Re){for(var we=-1,ht=null==ne?0:ne.length;++we<ht;)if(Re(ne[we],we,ne))return!0;return!1}var ai=$l("length");function go(ne,Re,we){var ht;return we(ne,function(qt,Pn,gr){if(Re(qt,Pn,gr))return ht=Pn,!1}),ht}function tl(ne,Re,we,ht){for(var qt=ne.length,Pn=we+(ht?1:-1);ht?Pn--:++Pn<qt;)if(Re(ne[Pn],Pn,ne))return Pn;return-1}function nl(ne,Re,we){return Re==Re?function Kd(ne,Re,we){for(var ht=we-1,qt=ne.length;++ht<qt;)if(ne[ht]===Re)return ht;return-1}(ne,Re,we):tl(ne,eu,we)}function zu(ne,Re,we,ht){for(var qt=we-1,Pn=ne.length;++qt<Pn;)if(ht(ne[qt],Re))return qt;return-1}function eu(ne){return ne!=ne}function tu(ne,Re){var we=null==ne?0:ne.length;return we?$d(ne,Re)/we:NaN}function $l(ne){return function(Re){return null==Re?N:Re[ne]}}function nu(ne){return function(Re){return null==ne?N:ne[Re]}}function qh(ne,Re,we,ht,qt){return qt(ne,function(Pn,gr,Wn){we=ht?(ht=!1,Pn):Re(we,Pn,gr,Wn)}),we}function $d(ne,Re){for(var we,ht=-1,qt=ne.length;++ht<qt;){var Pn=Re(ne[ht]);Pn!==N&&(we=we===N?Pn:we+Pn)}return we}function qu(ne,Re){for(var we=-1,ht=Array(ne);++we<ne;)ht[we]=Re(we);return ht}function Wd(ne){return ne&&ne.slice(0,Or(ne)+1).replace(wt,"")}function Li(ne){return function(Re){return ne(Re)}}function Cs(ne,Re){return tn(Re,function(we){return ne[we]})}function Ca(ne,Re){return ne.has(Re)}function Wl(ne,Re){for(var we=-1,ht=ne.length;++we<ht&&nl(Re,ne[we],0)>-1;);return we}function ru(ne,Re){for(var we=ne.length;we--&&nl(Re,ne[we],0)>-1;);return we}var Ag=nu({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Gl=nu({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Yf(ne){return"\\"+fr[ne]}function Ei(ne){return Wu.test(ne)}function pr(ne){var Re=-1,we=Array(ne.size);return ne.forEach(function(ht,qt){we[++Re]=[qt,ht]}),we}function ba(ne,Re){return function(we){return ne(Re(we))}}function er(ne,Re){for(var we=-1,ht=ne.length,qt=0,Pn=[];++we<ht;){var gr=ne[we];(gr===Re||gr===G)&&(ne[we]=G,Pn[qt++]=we)}return Pn}function rl(ne){var Re=-1,we=Array(ne.size);return ne.forEach(function(ht){we[++Re]=ht}),we}function ws(ne){return Ei(ne)?function Yu(ne){for(var Re=fo.lastIndex=0;fo.test(ne);)++Re;return Re}(ne):ai(ne)}function bs(ne){return Ei(ne)?function Qu(ne){return ne.match(fo)||[]}(ne):function Ea(ne){return ne.split("")}(ne)}function Or(ne){for(var Re=ne.length;Re--&&_n.test(ne.charAt(Re)););return Re}var iu=nu({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Vs=function ne(Re){var c,we=(Re=null==Re?Ir:Vs.defaults(Ir.Object(),Re,Vs.pick(Ir,nt))).Array,ht=Re.Date,qt=Re.Error,Pn=Re.Function,gr=Re.Math,Wn=Re.Object,ql=Re.RegExp,Zu=Re.String,Ci=Re.TypeError,sl=we.prototype,_o=Wn.prototype,Yl=Re["__core-js_shared__"],Ql=Pn.prototype.toString,wn=_o.hasOwnProperty,Xl=0,zd=(c=/[^.]+$/.exec(Yl&&Yl.keys&&Yl.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"",al=_o.toString,Qf=Ql.call(Wn),qd=Ir._,Yd=ql("^"+Ql.call(wn).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ia=va?Re.Buffer:N,Da=Re.Symbol,Zl=Re.Uint8Array,Aa=Ia?Ia.allocUnsafe:N,Jl=ba(Wn.getPrototypeOf,Wn),Go=Wn.create,Us=_o.propertyIsEnumerable,Hs=sl.splice,su=Da?Da.isConcatSpreadable:N,Ta=Da?Da.iterator:N,vo=Da?Da.toStringTag:N,ec=function(){try{var c=Ga(Wn,"defineProperty");return c({},"",{}),c}catch{}}(),js=Re.clearTimeout!==Ir.clearTimeout&&Re.clearTimeout,Qd=ht&&ht.now!==Ir.Date.now&&ht.now,Sa=Re.setTimeout!==Ir.setTimeout&&Re.setTimeout,bn=gr.ceil,yo=gr.floor,Eo=Wn.getOwnPropertySymbols,Bi=Ia?Ia.isBuffer:N,Ju=Re.isFinite,ed=sl.join,$s=ba(Wn.keys,Wn),Mn=gr.max,Er=gr.min,Yh=ht.now,Ma=Re.parseInt,Ko=gr.random,ou=sl.reverse,tc=Ga(Re,"DataView"),au=Ga(Re,"Map"),Vn=Ga(Re,"Promise"),ll=Ga(Re,"Set"),Ra=Ga(Re,"WeakMap"),Rt=Ga(Wn,"create"),Pa=Ra&&new Ra,zo={},Hr=Q(tc),Xd=Q(au),li=Q(Vn),cl=Q(ll),qo=Q(Ra),Oa=Da?Da.prototype:N,Yo=Oa?Oa.valueOf:N,Qh=Oa?Oa.toString:N;function L(c){if(Wr(c)&&!rn(c)&&!(c instanceof an)){if(c instanceof At)return c;if(wn.call(c,"__wrapped__"))return Ue(c)}return new At(c)}var Ws=function(){function c(){}return function(f){if(!Xn(f))return{};if(Go)return Go(f);c.prototype=f;var E=new c;return c.prototype=N,E}}();function Le(){}function At(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=N}function an(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Br,this.__views__=[]}function Co(c){var f=-1,E=null==c?0:c.length;for(this.clear();++f<E;){var S=c[f];this.set(S[0],S[1])}}function wo(c){var f=-1,E=null==c?0:c.length;for(this.clear();++f<E;){var S=c[f];this.set(S[0],S[1])}}function Io(c){var f=-1,E=null==c?0:c.length;for(this.clear();++f<E;){var S=c[f];this.set(S[0],S[1])}}function xa(c){var f=-1,E=null==c?0:c.length;for(this.__data__=new Io;++f<E;)this.add(c[f])}function Un(c){var f=this.__data__=new wo(c);this.size=f.size}function ka(c,f){var E=rn(c),S=!E&&Eh(c),x=!E&&!S&&ua(c),U=!E&&!S&&!x&&Md(c),K=E||S||x||U,ee=K?qu(c.length,Zu):[],ae=ee.length;for(var Ve in c)(f||wn.call(c,Ve))&&(!K||!("length"==Ve||x&&("offset"==Ve||"parent"==Ve)||U&&("buffer"==Ve||"byteLength"==Ve||"byteOffset"==Ve)||Ii(Ve,ae)))&&ee.push(Ve);return ee}function dl(c){var f=c.length;return f?c[cc(0,f-1)]:N}function od(c,f){return C(Qi(c),Ki(f,0,c.length))}function Zr(c){return C(Qi(c))}function ls(c,f,E){(E!==N&&!Qs(c[f],E)||E===N&&!(f in c))&&Ui(c,f,E)}function In(c,f,E){var S=c[f];(!wn.call(c,f)||!Qs(S,E)||E===N&&!(f in c))&&Ui(c,f,E)}function wi(c,f){for(var E=c.length;E--;)if(Qs(c[E][0],f))return E;return-1}function Ut(c,f,E,S){return Do(c,function(x,U,K){f(S,x,E(x),K)}),S}function cu(c,f){return c&&Rs(f,Ti(f),c)}function Ui(c,f,E){"__proto__"==f&&ec?ec(c,f,{configurable:!0,enumerable:!0,value:E,writable:!0}):c[f]=E}function cs(c,f){for(var E=-1,S=f.length,x=we(S),U=null==c;++E<S;)x[E]=U?N:Dh(c,f[E]);return x}function Ki(c,f,E){return c==c&&(E!==N&&(c=c<=E?c:E),f!==N&&(c=c>=f?c:f)),c}function Kt(c,f,E,S,x,U){var K,ee=1&f,ae=2&f,Ve=4&f;if(E&&(K=x?E(c,S,x,U):E(c)),K!==N)return K;if(!Xn(c))return c;var $e=rn(c);if($e){if(K=function _d(c){var f=c.length,E=new c.constructor(f);return f&&"string"==typeof c[0]&&wn.call(c,"index")&&(E.index=c.index,E.input=c.input),E}(c),!ee)return Qi(c,K)}else{var He=Nn(c),lt=He==On||He==Sn;if(ua(c))return Jh(c,ee);if(He==Fn||He==ve||lt&&!x){if(K=ae||lt?{}:vd(c),!ee)return ae?function hd(c,f){return Rs(c,oa(c),f)}(c,function eh(c,f){return c&&Rs(f,Gr(f),c)}(K,c)):function fc(c,f){return Rs(c,Hi(c),f)}(c,cu(K,c))}else{if(!un[He])return x?c:{};K=function Cc(c,f,E){var S=c.constructor;switch(f){case Bn:return tp(c);case pt:case Wt:return new S(+c);case Sr:return function Ms(c,f){var E=f?tp(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.byteLength)}(c,E);case An:case Mr:case Lo:case gt:case ri:case Qt:case gs:case ts:case Bo:return np(c,E);case Kn:return new S;case Ft:case ao:return new S(c);case zr:return function ef(c){var f=new c.constructor(c.source,Za.exec(c));return f.lastIndex=c.lastIndex,f}(c);case Vr:return new S;case Et:return function dc(c){return Yo?Wn(Yo.call(c)):{}}(c)}}(c,He,ee)}}U||(U=new Un);var It=U.get(c);if(It)return It;U.set(c,K),j_(c)?c.forEach(function(jt){K.add(Kt(jt,f,E,jt,c,U))}):U_(c)&&c.forEach(function(jt,Dn){K.set(Dn,Kt(jt,f,E,Dn,c,U))});var ln=$e?N:(Ve?ae?af:fu:ae?Gr:Ti)(c);return si(ln||c,function(jt,Dn){ln&&(jt=c[Dn=jt]),In(K,Dn,Kt(jt,f,E,Dn,c,U))}),K}function Qo(c,f,E){var S=E.length;if(null==c)return!S;for(c=Wn(c);S--;){var x=E[S],K=c[x];if(K===N&&!(x in c)||!(0,f[x])(K))return!1}return!0}function sc(c,f,E){if("function"!=typeof c)throw new Ci(Ee);return hh(function(){c.apply(N,E)},f)}function Is(c,f,E,S){var x=-1,U=os,K=!0,ee=c.length,ae=[],Ve=f.length;if(!ee)return ae;E&&(f=tn(f,Li(E))),S?(U=ya,K=!1):f.length>=200&&(U=Ca,K=!1,f=new xa(f));e:for(;++x<ee;){var $e=c[x],He=null==E?$e:E($e);if($e=S||0!==$e?$e:0,K&&He==He){for(var lt=Ve;lt--;)if(f[lt]===He)continue e;ae.push($e)}else U(f,He,S)||ae.push($e)}return ae}L.templateSettings={escape:_s,evaluate:vi,interpolate:Z,variable:"",imports:{_:L}},(L.prototype=Le.prototype).constructor=L,(At.prototype=Ws(Le.prototype)).constructor=At,(an.prototype=Ws(Le.prototype)).constructor=an,Co.prototype.clear=function Vi(){this.__data__=Rt?Rt(null):{},this.size=0},Co.prototype.delete=function rd(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f},Co.prototype.get=function id(c){var f=this.__data__;if(Rt){var E=f[c];return E===Ge?N:E}return wn.call(f,c)?f[c]:N},Co.prototype.has=function Xf(c){var f=this.__data__;return Rt?f[c]!==N:wn.call(f,c)},Co.prototype.set=function Xh(c,f){var E=this.__data__;return this.size+=this.has(c)?0:1,E[c]=Rt&&f===N?Ge:f,this},wo.prototype.clear=function Nr(){this.__data__=[],this.size=0},wo.prototype.delete=function bo(c){var f=this.__data__,E=wi(f,c);return!(E<0||(E==f.length-1?f.pop():Hs.call(f,E,1),--this.size,0))},wo.prototype.get=function sd(c){var f=this.__data__,E=wi(f,c);return E<0?N:f[E][1]},wo.prototype.has=function nc(c){return wi(this.__data__,c)>-1},wo.prototype.set=function Gs(c,f){var E=this.__data__,S=wi(E,c);return S<0?(++this.size,E.push([c,f])):E[S][1]=f,this},Io.prototype.clear=function rc(){this.size=0,this.__data__={hash:new Co,map:new(au||wo),string:new Co}},Io.prototype.delete=function Zf(c){var f=Wa(this,c).delete(c);return this.size-=f?1:0,f},Io.prototype.get=function Zd(c){return Wa(this,c).get(c)},Io.prototype.has=function Jd(c){return Wa(this,c).has(c)},Io.prototype.set=function ic(c,f){var E=Wa(this,c),S=E.size;return E.set(c,f),this.size+=E.size==S?0:1,this},xa.prototype.add=xa.prototype.push=function lu(c){return this.__data__.set(c,Ge),this},xa.prototype.has=function Jf(c){return this.__data__.has(c)},Un.prototype.clear=function Na(){this.__data__=new wo,this.size=0},Un.prototype.delete=function ul(c){var f=this.__data__,E=f.delete(c);return this.size=f.size,E},Un.prototype.get=function kr(c){return this.__data__.get(c)},Un.prototype.has=function Dt(c){return this.__data__.has(c)},Un.prototype.set=function Fr(c,f){var E=this.__data__;if(E instanceof wo){var S=E.__data__;if(!au||S.length<199)return S.push([c,f]),this.size=++E.size,this;E=this.__data__=new Io(S)}return E.set(c,f),this.size=E.size,this};var Do=fd(Jr),Xo=fd(As,!0);function Zo(c,f){var E=!0;return Do(c,function(S,x,U){return E=!!f(S,x,U)}),E}function hl(c,f,E){for(var S=-1,x=c.length;++S<x;){var U=c[S],K=f(U);if(null!=K&&(ee===N?K==K&&!ji(K):E(K,ee)))var ee=K,ae=U}return ae}function Ks(c,f){var E=[];return Do(c,function(S,x,U){f(S,x,U)&&E.push(S)}),E}function Dr(c,f,E,S,x){var U=-1,K=c.length;for(E||(E=gu),x||(x=[]);++U<K;){var ee=c[U];f>0&&E(ee)?f>1?Dr(ee,f-1,E,S,x):Es(x,ee):S||(x[x.length]=ee)}return x}var ld=gc(),Ao=gc(!0);function Jr(c,f){return c&&ld(c,f,Ti)}function As(c,f){return c&&Ao(c,f,Ti)}function Cr(c,f){return nr(f,function(E){return Mc(c[E])})}function Jo(c,f){for(var E=0,S=(f=Yi(f,c)).length;null!=c&&E<S;)c=c[k(f[E++])];return E&&E==S?c:N}function uu(c,f,E){var S=f(c);return rn(c)?S:Es(S,E(c))}function Bt(c){return null==c?c===N?"[object Undefined]":"[object Null]":vo&&vo in Wn(c)?function lf(c){var f=wn.call(c,vo),E=c[vo];try{c[vo]=N;var S=!0}catch{}var x=al.call(c);return S&&(f?c[vo]=E:delete c[vo]),x}(c):function ch(c){return al.call(c)}(c)}function qn(c,f){return c>f}function Ts(c,f){return null!=c&&wn.call(c,f)}function Fa(c,f){return null!=c&&f in Wn(c)}function mr(c,f,E){for(var S=E?ya:os,x=c[0].length,U=c.length,K=U,ee=we(U),ae=1/0,Ve=[];K--;){var $e=c[K];K&&f&&($e=tn($e,Li(f))),ae=Er($e.length,ae),ee[K]=!E&&(f||x>=120&&$e.length>=120)?new xa(K&&$e):N}$e=c[0];var He=-1,lt=ee[0];e:for(;++He<x&&Ve.length<ae;){var It=$e[He],Nt=f?f(It):It;if(It=E||0!==It?It:0,!(lt?Ca(lt,Nt):S(Ve,Nt,E))){for(K=U;--K;){var ln=ee[K];if(!(ln?Ca(ln,Nt):S(c[K],Nt,E)))continue e}lt&&lt.push(Nt),Ve.push(It)}}return Ve}function fl(c,f,E){var S=null==(c=$r(c,f=Yi(f,c)))?c:c[k(Di(f))];return null==S?N:Lt(S,c,E)}function oc(c){return Wr(c)&&Bt(c)==ve}function Yn(c,f,E,S,x){return c===f||(null==c||null==f||!Wr(c)&&!Wr(f)?c!=c&&f!=f:function ds(c,f,E,S,x,U){var K=rn(c),ee=rn(f),ae=K?ke:Nn(c),Ve=ee?ke:Nn(f),$e=(ae=ae==ve?Fn:ae)==Fn,He=(Ve=Ve==ve?Fn:Ve)==Fn,lt=ae==Ve;if(lt&&ua(c)){if(!ua(f))return!1;K=!0,$e=!1}if(lt&&!$e)return U||(U=new Un),K||Md(c)?sf(c,f,E,S,x,U):function h_(c,f,E,S,x,U,K){switch(E){case Sr:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case Bn:return!(c.byteLength!=f.byteLength||!U(new Zl(c),new Zl(f)));case pt:case Wt:case Ft:return Qs(+c,+f);case ot:return c.name==f.name&&c.message==f.message;case zr:case ao:return c==f+"";case Kn:var ee=pr;case Vr:if(ee||(ee=rl),c.size!=f.size&&!(1&S))return!1;var Ve=K.get(c);if(Ve)return Ve==f;S|=2,K.set(c,f);var $e=sf(ee(c),ee(f),S,x,U,K);return K.delete(c),$e;case Et:if(Yo)return Yo.call(c)==Yo.call(f)}return!1}(c,f,ae,E,S,x,U);if(!(1&E)){var It=$e&&wn.call(c,"__wrapped__"),Nt=He&&wn.call(f,"__wrapped__");if(It||Nt){var ln=It?c.value():c,jt=Nt?f.value():f;return U||(U=new Un),x(ln,jt,E,S,U)}}return!!lt&&(U||(U=new Un),function gd(c,f,E,S,x,U){var K=1&E,ee=fu(c),ae=ee.length;if(ae!=fu(f).length&&!K)return!1;for(var He=ae;He--;){var lt=ee[He];if(!(K?lt in f:wn.call(f,lt)))return!1}var It=U.get(c),Nt=U.get(f);if(It&&Nt)return It==f&&Nt==c;var ln=!0;U.set(c,f),U.set(f,c);for(var jt=K;++He<ae;){var Dn=c[lt=ee[He]],Rn=f[lt];if(S)var No=K?S(Rn,Dn,lt,f,c,U):S(Dn,Rn,lt,c,f,U);if(!(No===N?Dn===Rn||x(Dn,Rn,E,S,U):No)){ln=!1;break}jt||(jt="constructor"==lt)}if(ln&&!jt){var gn=c.constructor,ko=f.constructor;gn!=ko&&"constructor"in c&&"constructor"in f&&!("function"==typeof gn&&gn instanceof gn&&"function"==typeof ko&&ko instanceof ko)&&(ln=!1)}return U.delete(c),U.delete(f),ln}(c,f,E,S,x,U))}(c,f,E,S,Yn,x))}function zs(c,f,E,S){var x=E.length,U=x,K=!S;if(null==c)return!U;for(c=Wn(c);x--;){var ee=E[x];if(K&&ee[2]?ee[1]!==c[ee[0]]:!(ee[0]in c))return!1}for(;++x<U;){var ae=(ee=E[x])[0],Ve=c[ae],$e=ee[1];if(K&&ee[2]){if(Ve===N&&!(ae in c))return!1}else{var He=new Un;if(S)var lt=S(Ve,$e,ae,c,f,He);if(!(lt===N?Yn($e,Ve,3,S,He):lt))return!1}}return!0}function To(c){return!(!Xn(c)||function Cd(c){return!!zd&&zd in c}(c))&&(Mc(c)?Yd:Ke).test(Q(c))}function ml(c){return"function"==typeof c?c:null==c?es:"object"==typeof c?rn(c)?So(c[0],c[1]):zi(c):rr(c)}function Ba(c){if(!wc(c))return $s(c);var f=[];for(var E in Wn(c))wn.call(c,E)&&"constructor"!=E&&f.push(E);return f}function _l(c,f){return c<f}function ac(c,f){var E=-1,S=Xs(c)?we(c.length):[];return Do(c,function(x,U,K){S[++E]=f(x,U,K)}),S}function zi(c){var f=md(c);return 1==f.length&&f[0][2]?sp(f[0][0],f[0][1]):function(E){return E===c||zs(E,c,f)}}function So(c,f){return yd(c)&&Ka(f)?sp(k(c),f):function(E){var S=Dh(E,c);return S===N&&S===f?Ap(E,c):Yn(f,S,3)}}function vl(c,f,E,S,x){c!==f&&ld(f,function(U,K){if(x||(x=new Un),Xn(U))!function Ss(c,f,E,S,x,U,K){var ee=dh(c,E),ae=dh(f,E),Ve=K.get(ae);if(Ve)ls(c,E,Ve);else{var $e=U?U(ee,ae,E+"",c,f,K):N,He=$e===N;if(He){var lt=rn(ae),It=!lt&&ua(ae),Nt=!lt&&!It&&Md(ae);$e=ae,lt||It||Nt?rn(ee)?$e=ee:_r(ee)?$e=Qi(ee):It?(He=!1,$e=Jh(ae,!0)):Nt?(He=!1,$e=np(ae,!0)):$e=[]:Al(ae)||Eh(ae)?($e=ee,Eh(ee)?$e=wh(ee):(!Xn(ee)||Mc(ee))&&($e=vd(ae))):He=!1}He&&(K.set(ae,$e),x($e,ae,S,U,K),K.delete(ae)),ls(c,E,$e)}}(c,f,K,E,vl,S,x);else{var ee=S?S(dh(c,K),U,K+"",c,f,x):N;ee===N&&(ee=U),ls(c,K,ee)}},Gr)}function ta(c,f){var E=c.length;if(E)return Ii(f+=f<0?E:0,E)?c[f]:N}function Mo(c,f,E){f=f.length?tn(f,function(U){return rn(U)?function(K){return Jo(K,1===U.length?U[0]:U)}:U}):[es];var S=-1;return f=tn(f,Li(Vt())),function Jn(ne,Re){var we=ne.length;for(ne.sort(Re);we--;)ne[we]=ne[we].value;return ne}(ac(c,function(U,K,ee){return{criteria:tn(f,function(Ve){return Ve(U)}),index:++S,value:U}}),function(U,K){return function hc(c,f,E){for(var S=-1,x=c.criteria,U=f.criteria,K=x.length,ee=E.length;++S<K;){var ae=nh(x[S],U[S]);if(ae)return S>=ee?ae:ae*("desc"==E[S]?-1:1)}return c.index-f.index}(U,K,E)})}function na(c,f,E){for(var S=-1,x=f.length,U={};++S<x;){var K=f[S],ee=Jo(c,K);E(ee,K)&&B(U,Yi(K,c),ee)}return U}function lc(c,f,E,S){var x=S?zu:nl,U=-1,K=f.length,ee=c;for(c===f&&(f=Qi(f)),E&&(ee=tn(c,Li(E)));++U<K;)for(var ae=0,Ve=f[U],$e=E?E(Ve):Ve;(ae=x(ee,$e,ae,S))>-1;)ee!==c&&Hs.call(ee,ae,1),Hs.call(c,ae,1);return c}function ud(c,f){for(var E=c?f.length:0,S=E-1;E--;){var x=f[E];if(E==S||x!==U){var U=x;Ii(x)?Hs.call(c,x,1):uc(c,x)}}return c}function cc(c,f){return c+yo(Ko()*(f-c+1))}function ra(c,f){var E="";if(!c||f<1||f>Ri)return E;do{f%2&&(E+=c),(f=yo(f/2))&&(c+=c)}while(f);return E}function I(c,f){return y(uh(c,f,es),c+"")}function T(c){return dl(Th(c))}function O(c,f){var E=Th(c);return C(E,Ki(f,0,E.length))}function B(c,f,E,S){if(!Xn(c))return c;for(var x=-1,U=(f=Yi(f,c)).length,K=U-1,ee=c;null!=ee&&++x<U;){var ae=k(f[x]),Ve=E;if("__proto__"===ae||"constructor"===ae||"prototype"===ae)return c;if(x!=K){var $e=ee[ae];(Ve=S?S($e,ae,ee):N)===N&&(Ve=Xn($e)?$e:Ii(f[x+1])?[]:{})}In(ee,ae,Ve),ee=ee[ae]}return c}var J=Pa?function(c,f){return Pa.set(c,f),c}:es,oe=ec?function(c,f){return ec(c,"toString",{configurable:!0,enumerable:!1,value:Np(f),writable:!0})}:es;function Ie(c){return C(Th(c))}function Xe(c,f,E){var S=-1,x=c.length;f<0&&(f=-f>x?0:x+f),(E=E>x?x:E)<0&&(E+=x),x=f>E?0:E-f>>>0,f>>>=0;for(var U=we(x);++S<x;)U[S]=c[S+f];return U}function Ze(c,f){var E;return Do(c,function(S,x,U){return!(E=f(S,x,U))}),!!E}function ft(c,f,E){var S=0,x=null==c?S:c.length;if("number"==typeof f&&f==f&&x<=2147483647){for(;S<x;){var U=S+x>>>1,K=c[U];null!==K&&!ji(K)&&(E?K<=f:K<f)?S=U+1:x=U}return x}return $t(c,f,es,E)}function $t(c,f,E,S){var x=0,U=null==c?0:c.length;if(0===U)return 0;for(var K=(f=E(f))!=f,ee=null===f,ae=ji(f),Ve=f===N;x<U;){var $e=yo((x+U)/2),He=E(c[$e]),lt=He!==N,It=null===He,Nt=He==He,ln=ji(He);if(K)var jt=S||Nt;else jt=Ve?Nt&&(S||lt):ee?Nt&&lt&&(S||!It):ae?Nt&&lt&&!It&&(S||!ln):!It&&!ln&&(S?He<=f:He<f);jt?x=$e+1:U=$e}return Er(U,4294967294)}function Ht(c,f){for(var E=-1,S=c.length,x=0,U=[];++E<S;){var K=c[E],ee=f?f(K):K;if(!E||!Qs(ee,ae)){var ae=ee;U[x++]=0===K?0:K}}return U}function ui(c){return"number"==typeof c?c:ji(c)?NaN:+c}function pn(c){if("string"==typeof c)return c;if(rn(c))return tn(c,pn)+"";if(ji(c))return Qh?Qh.call(c):"";var f=c+"";return"0"==f&&1/c==-$n?"-0":f}function di(c,f,E){var S=-1,x=os,U=c.length,K=!0,ee=[],ae=ee;if(E)K=!1,x=ya;else if(U>=200){var Ve=f?null:ip(c);if(Ve)return rl(Ve);K=!1,x=Ca,ae=new xa}else ae=f?[]:ee;e:for(;++S<U;){var $e=c[S],He=f?f($e):$e;if($e=E||0!==$e?$e:0,K&&He==He){for(var lt=ae.length;lt--;)if(ae[lt]===He)continue e;f&&ae.push(He),ee.push($e)}else x(ae,He,E)||(ae!==ee&&ae.push(He),ee.push($e))}return ee}function uc(c,f){return null==(c=$r(c,f=Yi(f,c)))||delete c[k(Di(f))]}function xn(c,f,E,S){return B(c,f,E(Jo(c,f)),S)}function ei(c,f,E,S){for(var x=c.length,U=S?x:-1;(S?U--:++U<x)&&f(c[U],U,c););return E?Xe(c,S?0:U,S?U+1:x):Xe(c,S?U+1:0,S?x:U)}function bi(c,f){var E=c;return E instanceof an&&(E=E.value()),Xr(f,function(S,x){return x.func.apply(x.thisArg,Es([S],x.args))},E)}function yl(c,f,E){var S=c.length;if(S<2)return S?di(c[0]):[];for(var x=-1,U=we(S);++x<S;)for(var K=c[x],ee=-1;++ee<S;)ee!=x&&(U[x]=Is(U[x]||K,c[ee],f,E));return di(Dr(U,1),f,E)}function qi(c,f,E){for(var S=-1,x=c.length,U=f.length,K={};++S<x;)E(K,c[S],S<U?f[S]:N);return K}function El(c){return _r(c)?c:[]}function Zh(c){return"function"==typeof c?c:es}function Yi(c,f){return rn(c)?c:yd(c,f)?[c]:M(zt(c))}var hu=I;function Ro(c,f,E){var S=c.length;return E=E===N?S:E,!f&&E>=S?c:Xe(c,f,E)}var ep=js||function(c){return Ir.clearTimeout(c)};function Jh(c,f){if(f)return c.slice();var E=c.length,S=Aa?Aa(E):new c.constructor(E);return c.copy(S),S}function tp(c){var f=new c.constructor(c.byteLength);return new Zl(f).set(new Zl(c)),f}function np(c,f){var E=f?tp(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.length)}function nh(c,f){if(c!==f){var E=c!==N,S=null===c,x=c==c,U=ji(c),K=f!==N,ee=null===f,ae=f==f,Ve=ji(f);if(!ee&&!Ve&&!U&&c>f||U&&K&&ae&&!ee&&!Ve||S&&K&&ae||!E&&ae||!x)return 1;if(!S&&!U&&!Ve&&c<f||Ve&&E&&x&&!S&&!U||ee&&E&&x||!K&&x||!ae)return-1}return 0}function Tg(c,f,E,S){for(var x=-1,U=c.length,K=E.length,ee=-1,ae=f.length,Ve=Mn(U-K,0),$e=we(ae+Ve),He=!S;++ee<ae;)$e[ee]=f[ee];for(;++x<K;)(He||x<U)&&($e[E[x]]=c[x]);for(;Ve--;)$e[ee++]=c[x++];return $e}function Va(c,f,E,S){for(var x=-1,U=c.length,K=-1,ee=E.length,ae=-1,Ve=f.length,$e=Mn(U-ee,0),He=we($e+Ve),lt=!S;++x<$e;)He[x]=c[x];for(var It=x;++ae<Ve;)He[It+ae]=f[ae];for(;++K<ee;)(lt||x<U)&&(He[It+E[K]]=c[x++]);return He}function Qi(c,f){var E=-1,S=c.length;for(f||(f=we(S));++E<S;)f[E]=c[E];return f}function Rs(c,f,E,S){var x=!E;E||(E={});for(var U=-1,K=f.length;++U<K;){var ee=f[U],ae=S?S(E[ee],c[ee],ee,E,c):N;ae===N&&(ae=c[ee]),x?Ui(E,ee,ae):In(E,ee,ae)}return E}function ia(c,f){return function(E,S){var x=rn(E)?Ku:Ut,U=f?f():{};return x(E,c,Vt(S,2),U)}}function pc(c){return I(function(f,E){var S=-1,x=E.length,U=x>1?E[x-1]:N,K=x>2?E[2]:N;for(U=c.length>3&&"function"==typeof U?(x--,U):N,K&&hi(E[0],E[1],K)&&(U=x<3?N:U,x=1),f=Wn(f);++S<x;){var ee=E[S];ee&&c(f,ee,S,U)}return f})}function fd(c,f){return function(E,S){if(null==E)return E;if(!Xs(E))return c(E,S);for(var x=E.length,U=f?x:-1,K=Wn(E);(f?U--:++U<x)&&!1!==S(K[U],U,K););return E}}function gc(c){return function(f,E,S){for(var x=-1,U=Wn(f),K=S(f),ee=K.length;ee--;){var ae=K[c?ee:++x];if(!1===E(U[ae],ae,U))break}return f}}function rp(c){return function(f){var E=Ei(f=zt(f))?bs(f):N,S=E?E[0]:f.charAt(0),x=E?Ro(E,1).join(""):f.slice(1);return S[c]()+x}}function Ua(c){return function(f){return Xr(rv(ha(f).replace(zh,"")),c,"")}}function Cl(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var E=Ws(c.prototype),S=c.apply(E,f);return Xn(S)?S:E}}function tf(c){return function(f,E,S){var x=Wn(f);if(!Xs(f)){var U=Vt(E,3);f=Ti(f),E=function(ee){return U(x[ee],ee,x)}}var K=c(f,E,S);return K>-1?x[U?f[K]:K]:N}}function ih(c){return $a(function(f){var E=f.length,S=E,x=At.prototype.thru;for(c&&f.reverse();S--;){var U=f[S];if("function"!=typeof U)throw new Ci(Ee);if(x&&!K&&"wrapper"==bl(U))var K=new At([],!0)}for(S=K?S:E;++S<E;){var ee=bl(U=f[S]),ae="wrapper"==ee?oh(U):N;K=ae&&Ed(ae[0])&&424==ae[1]&&!ae[4].length&&1==ae[9]?K[bl(ae[0])].apply(K,ae[3]):1==U.length&&Ed(U)?K[ee]():K.thru(U)}return function(){var Ve=arguments,$e=Ve[0];if(K&&1==Ve.length&&rn($e))return K.plant($e).value();for(var He=0,lt=E?f[He].apply(this,Ve):$e;++He<E;)lt=f[He].call(this,lt);return lt}})}function sh(c,f,E,S,x,U,K,ee,ae,Ve){var $e=128&f,He=1&f,lt=2&f,It=24&f,Nt=512&f,ln=lt?N:Cl(c);return function jt(){for(var Dn=arguments.length,Rn=we(Dn),No=Dn;No--;)Rn[No]=arguments[No];if(It)var gn=ah(jt),ko=function wa(ne,Re){for(var we=ne.length,ht=0;we--;)ne[we]===Re&&++ht;return ht}(Rn,gn);if(S&&(Rn=Tg(Rn,S,x,It)),U&&(Rn=Va(Rn,U,K,It)),Dn-=ko,It&&Dn<Ve){var ti=er(Rn,gn);return yc(c,f,sh,jt.placeholder,E,Rn,ti,ee,ae,Ve-Dn)}var fs=He?E:this,Qa=lt?fs[c]:c;return Dn=Rn.length,ee?Rn=function mu(c,f){for(var E=c.length,S=Er(f.length,E),x=Qi(c);S--;){var U=f[S];c[S]=Ii(U,E)?x[U]:N}return c}(Rn,ee):Nt&&Dn>1&&Rn.reverse(),$e&&ae<Dn&&(Rn.length=ae),this&&this!==Ir&&this instanceof jt&&(Qa=ln||Cl(Qa)),Qa.apply(fs,Rn)}}function Ha(c,f){return function(E,S){return function cd(c,f,E,S){return Jr(c,function(x,U,K){f(S,E(x),U,K)}),S}(E,c,f(S),{})}}function Po(c,f){return function(E,S){var x;if(E===N&&S===N)return f;if(E!==N&&(x=E),S!==N){if(x===N)return S;"string"==typeof E||"string"==typeof S?(E=pn(E),S=pn(S)):(E=ui(E),S=ui(S)),x=c(E,S)}return x}}function mc(c){return $a(function(f){return f=tn(f,Li(Vt())),I(function(E){var S=this;return c(f,function(x){return Lt(x,S,E)})})})}function qs(c,f){var E=(f=f===N?" ":pn(f)).length;if(E<2)return E?ra(f,c):f;var S=ra(f,bn(c/ws(f)));return Ei(f)?Ro(bs(S),0,c).join(""):S.slice(0,c)}function Oo(c){return function(f,E,S){return S&&"number"!=typeof S&&hi(f,E,S)&&(E=S=N),f=xo(f),E===N?(E=f,f=0):E=xo(E),function dd(c,f,E,S){for(var x=-1,U=Mn(bn((f-c)/(E||1)),0),K=we(U);U--;)K[S?U:++x]=c,c+=E;return K}(f,E,S=S===N?f<E?1:-1:xo(S),c)}}function vc(c){return function(f,E){return"string"==typeof f&&"string"==typeof E||(f=fi(f),E=fi(E)),c(f,E)}}function yc(c,f,E,S,x,U,K,ee,ae,Ve){var $e=8&f;f|=$e?32:64,4&(f&=~($e?64:32))||(f&=-4);var ln=[c,f,x,$e?U:N,$e?K:N,$e?N:U,$e?N:K,ee,ae,Ve],jt=E.apply(N,ln);return Ed(c)&&op(jt,ln),jt.placeholder=S,p(jt,c,f)}function ja(c){var f=gr[c];return function(E,S){if(E=fi(E),(S=null==S?0:Er(Zt(S),292))&&Ju(E)){var x=(zt(E)+"e").split("e");return+((x=(zt(f(x[0]+"e"+(+x[1]+S)))+"e").split("e"))[0]+"e"+(+x[1]-S))}return f(E)}}var ip=ll&&1/rl(new ll([,-0]))[1]==$n?function(c){return new ll(c)}:Fp;function pd(c){return function(f){var E=Nn(f);return E==Kn?pr(f):E==Vr?function Kl(ne){var Re=-1,we=Array(ne.size);return ne.forEach(function(ht){we[++Re]=[ht,ht]}),we}(f):function Dg(ne,Re){return tn(Re,function(we){return[we,ne[we]]})}(f,c(f))}}function sa(c,f,E,S,x,U,K,ee){var ae=2&f;if(!ae&&"function"!=typeof c)throw new Ci(Ee);var Ve=S?S.length:0;if(Ve||(f&=-97,S=x=N),K=K===N?K:Mn(Zt(K),0),ee=ee===N?ee:Zt(ee),Ve-=x?x.length:0,64&f){var $e=S,He=x;S=x=N}var lt=ae?N:oh(c),It=[c,f,E,S,x,$e,He,U,K,ee];if(lt&&function jr(c,f){var E=c[1],S=f[1],x=E|S;if(!(x<131)&&!(128==S&&8==E||128==S&&256==E&&c[7].length<=f[8]||384==S&&f[7].length<=f[8]&&8==E))return c;1&S&&(c[2]=f[2],x|=1&E?0:4);var ee=f[3];if(ee){var ae=c[3];c[3]=ae?Tg(ae,ee,f[4]):ee,c[4]=ae?er(c[3],G):f[4]}(ee=f[5])&&(c[5]=(ae=c[5])?Va(ae,ee,f[6]):ee,c[6]=ae?er(c[5],G):f[6]),(ee=f[7])&&(c[7]=ee),128&S&&(c[8]=null==c[8]?f[8]:Er(c[8],f[8])),null==c[9]&&(c[9]=f[9]),c[0]=f[0],c[1]=x}(It,lt),c=It[0],f=It[1],E=It[2],S=It[3],x=It[4],!(ee=It[9]=It[9]===N?ae?0:c.length:Mn(It[9]-Ve,0))&&24&f&&(f&=-25),f&&1!=f)Nt=8==f||16==f?function wl(c,f,E){var S=Cl(c);return function x(){for(var U=arguments.length,K=we(U),ee=U,ae=ah(x);ee--;)K[ee]=arguments[ee];var Ve=U<3&&K[0]!==ae&&K[U-1]!==ae?[]:er(K,ae);return(U-=Ve.length)<E?yc(c,f,sh,x.placeholder,N,K,Ve,N,N,E-U):Lt(this&&this!==Ir&&this instanceof x?S:c,this,K)}}(c,f,ee):32!=f&&33!=f||x.length?sh.apply(N,It):function _c(c,f,E,S){var x=1&f,U=Cl(c);return function K(){for(var ee=-1,ae=arguments.length,Ve=-1,$e=S.length,He=we($e+ae),lt=this&&this!==Ir&&this instanceof K?U:c;++Ve<$e;)He[Ve]=S[Ve];for(;ae--;)He[Ve++]=arguments[++ee];return Lt(lt,x?E:this,He)}}(c,f,E,S);else var Nt=function rh(c,f,E){var S=1&f,x=Cl(c);return function U(){return(this&&this!==Ir&&this instanceof U?x:c).apply(S?E:this,arguments)}}(c,f,E);return p((lt?J:op)(Nt,It),c,f)}function nf(c,f,E,S){return c===N||Qs(c,_o[E])&&!wn.call(S,E)?f:c}function rf(c,f,E,S,x,U){return Xn(c)&&Xn(f)&&(U.set(f,c),vl(c,f,N,rf,U),U.delete(f)),c}function d_(c){return Al(c)?N:c}function sf(c,f,E,S,x,U){var K=1&E,ee=c.length,ae=f.length;if(ee!=ae&&!(K&&ae>ee))return!1;var Ve=U.get(c),$e=U.get(f);if(Ve&&$e)return Ve==f&&$e==c;var He=-1,lt=!0,It=2&E?new xa:N;for(U.set(c,f),U.set(f,c);++He<ee;){var Nt=c[He],ln=f[He];if(S)var jt=K?S(ln,Nt,He,f,c,U):S(Nt,ln,He,c,f,U);if(jt!==N){if(jt)continue;lt=!1;break}if(It){if(!jl(f,function(Dn,Rn){if(!Ca(It,Rn)&&(Nt===Dn||x(Nt,Dn,E,S,U)))return It.push(Rn)})){lt=!1;break}}else if(Nt!==ln&&!x(Nt,ln,E,S,U)){lt=!1;break}}return U.delete(c),U.delete(f),lt}function $a(c){return y(uh(c,N,Dl),c+"")}function fu(c){return uu(c,Ti,Hi)}function af(c){return uu(c,Gr,oa)}var oh=Pa?function(c){return Pa.get(c)}:Fp;function bl(c){for(var f=c.name+"",E=zo[f],S=wn.call(zo,f)?E.length:0;S--;){var x=E[S],U=x.func;if(null==U||U==c)return x.name}return f}function ah(c){return(wn.call(L,"placeholder")?L:c).placeholder}function Vt(){var c=L.iteratee||Mu;return c=c===Mu?ml:c,arguments.length?c(arguments[0],arguments[1]):c}function Wa(c,f){var E=c.__data__;return function lh(c){var f=typeof c;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==c:null===c}(f)?E["string"==typeof f?"string":"hash"]:E.map}function md(c){for(var f=Ti(c),E=f.length;E--;){var S=f[E],x=c[S];f[E]=[S,x,Ka(x)]}return f}function Ga(c,f){var E=function mo(ne,Re){return null==ne?N:ne[Re]}(c,f);return To(E)?E:N}var Hi=Eo?function(c){return null==c?[]:(c=Wn(c),nr(Eo(c),function(f){return Us.call(c,f)}))}:xd,oa=Eo?function(c){for(var f=[];c;)Es(f,Hi(c)),c=Jl(c);return f}:xd,Nn=Bt;function Ys(c,f,E){for(var S=-1,x=(f=Yi(f,c)).length,U=!1;++S<x;){var K=k(f[S]);if(!(U=null!=c&&E(c,K)))break;c=c[K]}return U||++S!=x?U:!!(x=null==c?0:c.length)&&Rc(x)&&Ii(K,x)&&(rn(c)||Eh(c))}function vd(c){return"function"!=typeof c.constructor||wc(c)?{}:Ws(Jl(c))}function gu(c){return rn(c)||Eh(c)||!!(su&&c&&c[su])}function Ii(c,f){var E=typeof c;return!!(f=f??Ri)&&("number"==E||"symbol"!=E&&bt.test(c))&&c>-1&&c%1==0&&c<f}function hi(c,f,E){if(!Xn(E))return!1;var S=typeof f;return!!("number"==S?Xs(E)&&Ii(f,E.length):"string"==S&&f in E)&&Qs(E[f],c)}function yd(c,f){if(rn(c))return!1;var E=typeof c;return!("number"!=E&&"symbol"!=E&&"boolean"!=E&&null!=c&&!ji(c))||ie.test(c)||!q.test(c)||null!=f&&c in Wn(f)}function Ed(c){var f=bl(c),E=L[f];if("function"!=typeof E||!(f in an.prototype))return!1;if(c===E)return!0;var S=oh(E);return!!S&&c===S[0]}(tc&&Nn(new tc(new ArrayBuffer(1)))!=Sr||au&&Nn(new au)!=Kn||Vn&&Nn(Vn.resolve())!=Tr||ll&&Nn(new ll)!=Vr||Ra&&Nn(new Ra)!=xt)&&(Nn=function(c){var f=Bt(c),E=f==Fn?c.constructor:N,S=E?Q(E):"";if(S)switch(S){case Hr:return Sr;case Xd:return Kn;case li:return Tr;case cl:return Vr;case qo:return xt}return f});var Xi=Yl?Mc:ir;function wc(c){var f=c&&c.constructor;return c===("function"==typeof f&&f.prototype||_o)}function Ka(c){return c==c&&!Xn(c)}function sp(c,f){return function(E){return null!=E&&E[c]===f&&(f!==N||c in Wn(E))}}function uh(c,f,E){return f=Mn(f===N?c.length-1:f,0),function(){for(var S=arguments,x=-1,U=Mn(S.length-f,0),K=we(U);++x<U;)K[x]=S[f+x];x=-1;for(var ee=we(f+1);++x<f;)ee[x]=S[x];return ee[f]=E(K),Lt(c,this,ee)}}function $r(c,f){return f.length<2?c:Jo(c,Xe(f,0,-1))}function dh(c,f){if(("constructor"!==f||"function"!=typeof c[f])&&"__proto__"!=f)return c[f]}var op=_(J),hh=Sa||function(c,f){return Ir.setTimeout(c,f)},y=_(oe);function p(c,f,E){var S=f+"";return y(c,function pu(c,f){var E=f.length;if(!E)return c;var S=E-1;return f[S]=(E>1?"& ":"")+f[S],f=f.join(E>2?", ":" "),c.replace(Tn,"{\n/* [wrapped with "+f+"] */\n")}(S,function re(c,f){return si(ge,function(E){var S="_."+E[0];f&E[1]&&!os(c,S)&&c.push(S)}),c.sort()}(function cf(c){var f=c.match(wr);return f?f[1].split(Gt):[]}(S),E)))}function _(c){var f=0,E=0;return function(){var S=Yh(),x=16-(S-E);if(E=S,x>0){if(++f>=800)return arguments[0]}else f=0;return c.apply(N,arguments)}}function C(c,f){var E=-1,S=c.length,x=S-1;for(f=f===N?S:f;++E<f;){var U=cc(E,x),K=c[U];c[U]=c[E],c[E]=K}return c.length=f,c}var M=function za(c){var f=vh(c,function(S){return 500===E.size&&E.clear(),S}),E=f.cache;return f}(function(c){var f=[];return 46===c.charCodeAt(0)&&f.push(""),c.replace(Ne,function(E,S,x,U){f.push(x?U.replace(Pi,"$1"):S||E)}),f});function k(c){if("string"==typeof c||ji(c))return c;var f=c+"";return"0"==f&&1/c==-$n?"-0":f}function Q(c){if(null!=c){try{return Ql.call(c)}catch{}try{return c+""}catch{}}return""}function Ue(c){if(c instanceof an)return c.clone();var f=new At(c.__wrapped__,c.__chain__);return f.__actions__=Qi(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}var Cn=I(function(c,f){return _r(c)?Is(c,Dr(f,1,_r,!0)):[]}),Zi=I(function(c,f){var E=Di(f);return _r(E)&&(E=N),_r(c)?Is(c,Dr(f,1,_r,!0),Vt(E,2)):[]}),aa=I(function(c,f){var E=Di(f);return _r(E)&&(E=N),_r(c)?Is(c,Dr(f,1,_r,!0),N,E):[]});function _u(c,f,E){var S=null==c?0:c.length;if(!S)return-1;var x=null==E?0:Zt(E);return x<0&&(x=Mn(S+x,0)),tl(c,Vt(f,3),x)}function Dc(c,f,E){var S=null==c?0:c.length;if(!S)return-1;var x=S-1;return E!==N&&(x=Zt(E),x=E<0?Mn(S+x,0):Er(x,S-1)),tl(c,Vt(f,3),x,!0)}function Dl(c){return null!=c&&c.length?Dr(c,1):[]}function lp(c){return c&&c.length?c[0]:N}var p_=I(function(c){var f=tn(c,El);return f.length&&f[0]===c[0]?mr(f):[]}),Mg=I(function(c){var f=Di(c),E=tn(c,El);return f===Di(E)?f=N:E.pop(),E.length&&E[0]===c[0]?mr(E,Vt(f,2)):[]}),g_=I(function(c){var f=Di(c),E=tn(c,El);return(f="function"==typeof f?f:N)&&E.pop(),E.length&&E[0]===c[0]?mr(E,N,f):[]});function Di(c){var f=null==c?0:c.length;return f?c[f-1]:N}var __=I(Rg);function Rg(c,f){return c&&c.length&&f&&f.length?lc(c,f):c}var dp=$a(function(c,f){var E=null==c?0:c.length,S=cs(c,f);return ud(c,tn(f,function(x){return Ii(x,E)?+x:x}).sort(nh)),S});function hp(c){return null==c?c:ou.call(c)}var Wy=I(function(c){return di(Dr(c,1,_r,!0))}),Gy=I(function(c){var f=Di(c);return _r(f)&&(f=N),di(Dr(c,1,_r,!0),Vt(f,2))}),Ky=I(function(c){var f=Di(c);return f="function"==typeof f?f:N,di(Dr(c,1,_r,!0),N,f)});function hf(c){if(!c||!c.length)return[];var f=0;return c=nr(c,function(E){if(_r(E))return f=Mn(E.length,f),!0}),qu(f,function(E){return tn(c,$l(E))})}function Ad(c,f){if(!c||!c.length)return[];var E=hf(c);return null==f?E:tn(E,function(S){return Lt(f,N,S)})}var zy=I(function(c,f){return _r(c)?Is(c,f):[]}),qy=I(function(c){return yl(nr(c,_r))}),Yy=I(function(c){var f=Di(c);return _r(f)&&(f=N),yl(nr(c,_r),Vt(f,2))}),Fw=I(function(c){var f=Di(c);return f="function"==typeof f?f:N,yl(nr(c,_r),N,f)}),mp=I(hf),_p=I(function(c){var f=c.length,E=f>1?c[f-1]:N;return E="function"==typeof E?(c.pop(),E):N,Ad(c,E)});function vp(c){var f=L(c);return f.__chain__=!0,f}function ff(c,f){return f(c)}var D_=$a(function(c){var f=c.length,E=f?c[0]:0,S=this.__wrapped__,x=function(U){return cs(U,c)};return!(f>1||this.__actions__.length)&&S instanceof an&&Ii(E)?((S=S.slice(E,+E+(f?1:0))).__actions__.push({func:ff,args:[x],thisArg:N}),new At(S,this.__chain__).thru(function(U){return f&&!U.length&&U.push(N),U})):this.thru(x)}),vu=ia(function(c,f,E){wn.call(c,E)?++c[E]:Ui(c,E,1)}),Lw=tf(_u),Bw=tf(Dc);function T_(c,f){return(rn(c)?si:Do)(c,Vt(f,3))}function S_(c,f){return(rn(c)?Bs:Xo)(c,Vt(f,3))}var gf=ia(function(c,f,E){wn.call(c,E)?c[E].push(f):Ui(c,E,[f])}),Bg=I(function(c,f,E){var S=-1,x="function"==typeof f,U=Xs(c)?we(c.length):[];return Do(c,function(K){U[++S]=x?Lt(f,K,E):fl(K,f,E)}),U}),Sc=ia(function(c,f,E){Ui(c,E,f)});function yu(c,f){return(rn(c)?tn:ac)(c,Vt(f,3))}var Ps=ia(function(c,f,E){c[E?0:1].push(f)},function(){return[[],[]]}),O_=I(function(c,f){if(null==c)return[];var E=f.length;return E>1&&hi(c,f[0],f[1])?f=[]:E>2&&hi(f[0],f[1],f[2])&&(f=[f[0]]),Mo(c,Dr(f,1),[])}),_h=Qd||function(){return Ir.Date.now()};function eE(c,f,E){return f=E?N:f,sa(c,128,N,N,N,N,f=c&&null==f?c.length:f)}function Ug(c,f){var E;if("function"!=typeof f)throw new Ci(Ee);return c=Zt(c),function(){return--c>0&&(E=f.apply(this,arguments)),c<=1&&(f=N),E}}var ca=I(function(c,f,E){var S=1;if(E.length){var x=er(E,ah(ca));S|=32}return sa(c,S,f,E,x)}),mf=I(function(c,f,E){var S=3;if(E.length){var x=er(E,ah(mf));S|=32}return sa(f,S,c,E,x)});function nE(c,f,E){var S,x,U,K,ee,ae,Ve=0,$e=!1,He=!1,lt=!0;if("function"!=typeof c)throw new Ci(Ee);function It(ti){var fs=S,Qa=x;return S=x=N,Ve=ti,K=c.apply(Qa,fs)}function jt(ti){var fs=ti-ae;return ae===N||fs>=f||fs<0||He&&ti-Ve>=U}function Dn(){var ti=_h();if(jt(ti))return Rn(ti);ee=hh(Dn,function ln(ti){var kd=f-(ti-ae);return He?Er(kd,U-(ti-Ve)):kd}(ti))}function Rn(ti){return ee=N,lt&&S?It(ti):(S=x=N,K)}function ko(){var ti=_h(),fs=jt(ti);if(S=arguments,x=this,ae=ti,fs){if(ee===N)return function Nt(ti){return Ve=ti,ee=hh(Dn,f),$e?It(ti):K}(ae);if(He)return ep(ee),ee=hh(Dn,f),It(ae)}return ee===N&&(ee=hh(Dn,f)),K}return f=fi(f)||0,Xn(E)&&($e=!!E.leading,U=(He="maxWait"in E)?Mn(fi(E.maxWait)||0,f):U,lt="trailing"in E?!!E.trailing:lt),ko.cancel=function No(){ee!==N&&ep(ee),Ve=0,S=ae=x=ee=N},ko.flush=function gn(){return ee===N?K:Rn(_h())},ko}var Td=I(function(c,f){return sc(c,1,f)}),jg=I(function(c,f,E){return sc(c,fi(f)||0,E)});function vh(c,f){if("function"!=typeof c||null!=f&&"function"!=typeof f)throw new Ci(Ee);var E=function(){var S=arguments,x=f?f.apply(this,S):S[0],U=E.cache;if(U.has(x))return U.get(x);var K=c.apply(this,S);return E.cache=U.set(x,K)||U,K};return E.cache=new(vh.Cache||Io),E}function _f(c){if("function"!=typeof c)throw new Ci(Ee);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}vh.Cache=Io;var N_=hu(function(c,f){var E=(f=1==f.length&&rn(f[0])?tn(f[0],Li(Vt())):tn(Dr(f,1),Li(Vt()))).length;return I(function(S){for(var x=-1,U=Er(S.length,E);++x<U;)S[x]=f[x].call(this,S[x]);return Lt(c,this,S)})}),Wg=I(function(c,f){var E=er(f,ah(Wg));return sa(c,32,N,f,E)}),rE=I(function(c,f){var E=er(f,ah(rE));return sa(c,64,N,f,E)}),iE=$a(function(c,f){return sa(c,256,N,N,N,f)});function Qs(c,f){return c===f||c!=c&&f!=f}var oE=vc(qn),Gg=vc(function(c,f){return c>=f}),Eh=oc(function(){return arguments}())?oc:function(c){return Wr(c)&&wn.call(c,"callee")&&!Us.call(c,"callee")},rn=we.isArray,aE=Gi?Li(Gi):function ea(c){return Wr(c)&&Bt(c)==Bn};function Xs(c){return null!=c&&Rc(c.length)&&!Mc(c)}function _r(c){return Wr(c)&&Xs(c)}var ua=Bi||ir,Eu=Gu?Li(Gu):function ci(c){return Wr(c)&&Bt(c)==Wt};function Cu(c){if(!Wr(c))return!1;var f=Bt(c);return f==ot||"[object DOMException]"==f||"string"==typeof c.message&&"string"==typeof c.name&&!Al(c)}function Mc(c){if(!Xn(c))return!1;var f=Bt(c);return f==On||f==Sn||"[object AsyncFunction]"==f||"[object Proxy]"==f}function Ch(c){return"number"==typeof c&&c==Zt(c)}function Rc(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=Ri}function Xn(c){var f=typeof c;return null!=c&&("object"==f||"function"==f)}function Wr(c){return null!=c&&"object"==typeof c}var U_=ss?Li(ss):function pl(c){return Wr(c)&&Nn(c)==Kn};function wu(c){return"number"==typeof c||Wr(c)&&Bt(c)==Ft}function Al(c){if(!Wr(c)||Bt(c)!=Fn)return!1;var f=Jl(c);if(null===f)return!0;var E=wn.call(f,"constructor")&&f.constructor;return"function"==typeof E&&E instanceof E&&Ql.call(E)==Qf}var W=Ls?Li(Ls):function gl(c){return Wr(c)&&Bt(c)==zr},j_=po?Li(po):function du(c){return Wr(c)&&Nn(c)==Vr};function bp(c){return"string"==typeof c||!rn(c)&&Wr(c)&&Bt(c)==ao}function ji(c){return"symbol"==typeof c||Wr(c)&&Bt(c)==Et}var Md=ys?Li(ys):function La(c){return Wr(c)&&Rc(c.length)&&!!Mt[Bt(c)]},Oc=vc(_l),yf=vc(function(c,f){return c<=f});function Ya(c){if(!c)return[];if(Xs(c))return bp(c)?bs(c):Qi(c);if(Ta&&c[Ta])return function Gd(ne){for(var Re,we=[];!(Re=ne.next()).done;)we.push(Re.value);return we}(c[Ta]());var f=Nn(c);return(f==Kn?pr:f==Vr?rl:Th)(c)}function xo(c){return c?(c=fi(c))===$n||c===-$n?17976931348623157e292*(c<0?-1:1):c==c?c:0:0===c?c:0}function Zt(c){var f=xo(c),E=f%1;return f==f?E?f-E:f:0}function bu(c){return c?Ki(Zt(c),0,Br):0}function fi(c){if("number"==typeof c)return c;if(ji(c))return NaN;if(Xn(c)){var f="function"==typeof c.valueOf?c.valueOf():c;c=Xn(f)?f+"":f}if("string"!=typeof c)return 0===c?c:+c;c=Wd(c);var E=fe.test(c);return E||mt.test(c)?vs(c.slice(2),E?2:8):Te.test(c)?NaN:+c}function wh(c){return Rs(c,Gr(c))}function zt(c){return null==c?"":pn(c)}var xc=pc(function(c,f){if(wc(f)||Xs(f))Rs(f,Ti(f),c);else for(var E in f)wn.call(f,E)&&In(c,E,f[E])}),Ip=pc(function(c,f){Rs(f,Gr(f),c)}),Js=pc(function(c,f,E,S){Rs(f,Gr(f),c,S)}),hs=pc(function(c,f,E,S){Rs(f,Ti(f),c,S)}),uE=$a(cs),$_=I(function(c,f){c=Wn(c);var E=-1,S=f.length,x=S>2?f[2]:N;for(x&&hi(f[0],f[1],x)&&(S=1);++E<S;)for(var U=f[E],K=Gr(U),ee=-1,ae=K.length;++ee<ae;){var Ve=K[ee],$e=c[Ve];($e===N||Qs($e,_o[Ve])&&!wn.call(c,Ve))&&(c[Ve]=U[Ve])}return c}),Iu=I(function(c){return c.push(N,rf),Lt(K_,N,c)});function Dh(c,f,E){var S=null==c?N:Jo(c,f);return S===N?E:S}function Ap(c,f){return null!=c&&Ys(c,f,Fa)}var fE=Ha(function(c,f,E){null!=f&&"function"!=typeof f.toString&&(f=al.call(f)),c[f]=E},Np(es)),G_=Ha(function(c,f,E){null!=f&&"function"!=typeof f.toString&&(f=al.call(f)),wn.call(c,f)?c[f].push(E):c[f]=[E]},Vt),Kw=I(fl);function Ti(c){return Xs(c)?ka(c):Ba(c)}function Gr(c){return Xs(c)?ka(c,!0):function Yt(c){if(!Xn(c))return function wd(c){var f=[];if(null!=c)for(var E in Wn(c))f.push(E);return f}(c);var f=wc(c),E=[];for(var S in c)"constructor"==S&&(f||!wn.call(c,S))||E.push(S);return E}(c)}var Cf=pc(function(c,f,E){vl(c,f,E)}),K_=pc(function(c,f,E,S){vl(c,f,E,S)}),Ah=$a(function(c,f){var E={};if(null==c)return E;var S=!1;f=tn(f,function(U){return U=Yi(U,c),S||(S=U.length>1),U}),Rs(c,af(c),E),S&&(E=Kt(E,7,d_));for(var x=f.length;x--;)uc(E,f[x]);return E}),z_=$a(function(c,f){return null==c?{}:function Qn(c,f){return na(c,f,function(E,S){return Ap(c,S)})}(c,f)});function Qg(c,f){if(null==c)return{};var E=tn(af(c),function(S){return[S]});return f=Vt(f),na(c,E,function(S,x){return f(S,x[0])})}var q_=pd(Ti),wf=pd(Gr);function Th(c){return null==c?[]:Cs(c,Ti(c))}var Pp=Ua(function(c,f,E){return f=f.toLowerCase(),c+(E?tm(f):f)});function tm(c){return xp(zt(c).toLowerCase())}function ha(c){return(c=zt(c))&&c.replace(at,Ag).replace($u,"")}var Au=Ua(function(c,f,E){return c+(E?"-":"")+f.toLowerCase()}),bf=Ua(function(c,f,E){return c+(E?" ":"")+f.toLowerCase()}),Z_=rp("toLowerCase"),vE=Ua(function(c,f,E){return c+(E?"_":"")+f.toLowerCase()}),yE=Ua(function(c,f,E){return c+(E?" ":"")+xp(f)}),CE=Ua(function(c,f,E){return c+(E?" ":"")+f.toUpperCase()}),xp=rp("toUpperCase");function rv(c,f,E){return c=zt(c),(f=E?N:f)===N?function as(ne){return hr.test(ne)}(c)?function Xu(ne){return ne.match(rs)||[]}(c):function Fi(ne){return ne.match(hn)||[]}(c):c.match(f)||[]}var am=I(function(c,f){try{return Lt(c,N,f)}catch(E){return Cu(E)?E:new qt(E)}}),Su=$a(function(c,f){return si(f,function(E){E=k(E),Ui(c,E,ca(c[E],c))}),c});function Np(c){return function(){return c}}var lm=ih(),cm=ih(!0);function es(c){return c}function Mu(c){return ml("function"==typeof c?c:Kt(c,1))}var dm=I(function(c,f){return function(E){return fl(E,c,f)}}),iv=I(function(c,f){return function(E){return fl(c,E,f)}});function Mh(c,f,E){var S=Ti(f),x=Cr(f,S);null==E&&(!Xn(f)||!x.length&&S.length)&&(E=f,f=c,c=this,x=Cr(f,Ti(f)));var U=!(Xn(E)&&"chain"in E&&!E.chain),K=Mc(c);return si(x,function(ee){var ae=f[ee];c[ee]=ae,K&&(c.prototype[ee]=function(){var Ve=this.__chain__;if(U||Ve){var $e=c(this.__wrapped__);return($e.__actions__=Qi(this.__actions__)).push({func:ae,args:arguments,thisArg:c}),$e.__chain__=Ve,$e}return ae.apply(c,Es([this.value()],arguments))})}),c}function Fp(){}var jn=mc(tn),En=mc(ki),Od=mc(jl);function rr(c){return yd(c)?$l(k(c)):function th(c){return function(f){return Jo(f,c)}}(c)}var ov=Oo(),Bp=Oo(!0);function xd(){return[]}function ir(){return!1}var cv=Po(function(c,f){return c+f},0),Rh=ja("ceil"),hm=Po(function(c,f){return c/f},1),Nd=ja("floor"),gm=Po(function(c,f){return c*f},1),Up=ja("round"),Ru=Po(function(c,f){return c-f},0);return L.after=function x_(c,f){if("function"!=typeof f)throw new Ci(Ee);return c=Zt(c),function(){if(--c<1)return f.apply(this,arguments)}},L.ary=eE,L.assign=xc,L.assignIn=Ip,L.assignInWith=Js,L.assignWith=hs,L.at=uE,L.before=Ug,L.bind=ca,L.bindAll=Su,L.bindKey=mf,L.castArray=function F_(){if(!arguments.length)return[];var c=arguments[0];return rn(c)?c:[c]},L.chain=vp,L.chunk=function et(c,f,E){f=(E?hi(c,f,E):f===N)?1:Mn(Zt(f),0);var S=null==c?0:c.length;if(!S||f<1)return[];for(var x=0,U=0,K=we(bn(S/f));x<S;)K[U++]=Xe(c,x,x+=f);return K},L.compact=function yt(c){for(var f=-1,E=null==c?0:c.length,S=0,x=[];++f<E;){var U=c[f];U&&(x[S++]=U)}return x},L.concat=function st(){var c=arguments.length;if(!c)return[];for(var f=we(c-1),E=arguments[0],S=c;S--;)f[S-1]=arguments[S];return Es(rn(E)?Qi(E):[E],Dr(f,1))},L.cond=function Ml(c){var f=null==c?0:c.length,E=Vt();return c=f?tn(c,function(S){if("function"!=typeof S[1])throw new Ci(Ee);return[E(S[0]),S[1]]}):[],I(function(S){for(var x=-1;++x<f;){var U=c[x];if(Lt(U[0],this,S))return Lt(U[1],this,S)}})},L.conforms=function Sh(c){return function ad(c){var f=Ti(c);return function(E){return Qo(E,c,f)}}(Kt(c,1))},L.constant=Np,L.countBy=vu,L.create=function bh(c,f){var E=Ws(c);return null==f?E:cu(E,f)},L.curry=function tE(c,f,E){var S=sa(c,8,N,N,N,N,N,f=E?N:f);return S.placeholder=tE.placeholder,S},L.curryRight=function Hg(c,f,E){var S=sa(c,16,N,N,N,N,N,f=E?N:f);return S.placeholder=Hg.placeholder,S},L.debounce=nE,L.defaults=$_,L.defaultsDeep=Iu,L.defer=Td,L.delay=jg,L.difference=Cn,L.differenceBy=Zi,L.differenceWith=aa,L.drop=function bc(c,f,E){var S=null==c?0:c.length;return S?Xe(c,(f=E||f===N?1:Zt(f))<0?0:f,S):[]},L.dropRight=function Il(c,f,E){var S=null==c?0:c.length;return S?Xe(c,0,(f=S-(f=E||f===N?1:Zt(f)))<0?0:f):[]},L.dropRightWhile=function la(c,f){return c&&c.length?ei(c,Vt(f,3),!0,!0):[]},L.dropWhile=function Ic(c,f){return c&&c.length?ei(c,Vt(f,3),!0):[]},L.fill=function bd(c,f,E,S){var x=null==c?0:c.length;return x?(E&&"number"!=typeof E&&hi(c,f,E)&&(E=0,S=x),function Ds(c,f,E,S){var x=c.length;for((E=Zt(E))<0&&(E=-E>x?0:x+E),(S=S===N||S>x?x:Zt(S))<0&&(S+=x),S=E>S?0:bu(S);E<S;)c[E++]=f;return c}(c,f,E,S)):[]},L.filter=function Zy(c,f){return(rn(c)?nr:Ks)(c,Vt(f,3))},L.flatMap=function Vw(c,f){return Dr(yu(c,f),1)},L.flatMapDeep=function Uw(c,f){return Dr(yu(c,f),$n)},L.flatMapDepth=function pf(c,f,E){return E=E===N?1:Zt(E),Dr(yu(c,f),E)},L.flatten=Dl,L.flattenDeep=function ap(c){return null!=c&&c.length?Dr(c,$n):[]},L.flattenDepth=function Sg(c,f){return null!=c&&c.length?Dr(c,f=f===N?1:Zt(f)):[]},L.flip=function $g(c){return sa(c,512)},L.flow=lm,L.flowRight=cm,L.fromPairs=function uf(c){for(var f=-1,E=null==c?0:c.length,S={};++f<E;){var x=c[f];S[x[0]]=x[1]}return S},L.functions=function Ai(c){return null==c?[]:Cr(c,Ti(c))},L.functionsIn=function Dp(c){return null==c?[]:Cr(c,Gr(c))},L.groupBy=gf,L.initial=function cp(c){return null!=c&&c.length?Xe(c,0,-1):[]},L.intersection=p_,L.intersectionBy=Mg,L.intersectionWith=g_,L.invert=fE,L.invertBy=G_,L.invokeMap=Bg,L.iteratee=Mu,L.keyBy=Sc,L.keys=Ti,L.keysIn=Gr,L.map=yu,L.mapKeys=function pE(c,f){var E={};return f=Vt(f,3),Jr(c,function(S,x,U){Ui(E,f(S,x,U),S)}),E},L.mapValues=function Tl(c,f){var E={};return f=Vt(f,3),Jr(c,function(S,x,U){Ui(E,x,f(S,x,U))}),E},L.matches=function kp(c){return zi(Kt(c,1))},L.matchesProperty=function um(c,f){return So(c,Kt(f,1))},L.memoize=vh,L.merge=Cf,L.mergeWith=K_,L.method=dm,L.methodOf=iv,L.mixin=Mh,L.negate=_f,L.nthArg=function Hn(c){return c=Zt(c),I(function(f){return ta(f,c)})},L.omit=Ah,L.omitBy=function Tp(c,f){return Qg(c,_f(Vt(f)))},L.once=function jw(c){return Ug(2,c)},L.orderBy=function R_(c,f,E,S){return null==c?[]:(rn(f)||(f=null==f?[]:[f]),rn(E=S?N:E)||(E=null==E?[]:[E]),Mo(c,f,E))},L.over=jn,L.overArgs=N_,L.overEvery=En,L.overSome=Od,L.partial=Wg,L.partialRight=rE,L.partition=Ps,L.pick=z_,L.pickBy=Qg,L.property=rr,L.propertyOf=function Lp(c){return function(f){return null==c?N:Jo(c,f)}},L.pull=__,L.pullAll=Rg,L.pullAllBy=function jy(c,f,E){return c&&c.length&&f&&f.length?lc(c,f,Vt(E,2)):c},L.pullAllWith=function kw(c,f,E){return c&&c.length&&f&&f.length?lc(c,f,N,E):c},L.pullAt=dp,L.range=ov,L.rangeRight=Bp,L.rearg=iE,L.reject=function yp(c,f){return(rn(c)?nr:Ks)(c,_f(Vt(f,3)))},L.remove=function $y(c,f){var E=[];if(!c||!c.length)return E;var S=-1,x=[],U=c.length;for(f=Vt(f,3);++S<U;){var K=c[S];f(K,S,c)&&(E.push(K),x.push(S))}return ud(c,x),E},L.rest=function K0(c,f){if("function"!=typeof c)throw new Ci(Ee);return I(c,f=f===N?f:Zt(f))},L.reverse=hp,L.sampleSize=function Vg(c,f,E){return f=(E?hi(c,f,E):f===N)?1:Zt(f),(rn(c)?od:O)(c,f)},L.set=function Zg(c,f,E){return null==c?c:B(c,f,E)},L.setWith=function Sp(c,f,E,S){return S="function"==typeof S?S:N,null==c?c:B(c,f,E,S)},L.shuffle=function Ep(c){return(rn(c)?Zr:Ie)(c)},L.slice=function Pg(c,f,E){var S=null==c?0:c.length;return S?(E&&"number"!=typeof E&&hi(c,f,E)?(f=0,E=S):(f=null==f?0:Zt(f),E=E===N?S:Zt(E)),Xe(c,f,E)):[]},L.sortBy=O_,L.sortedUniq=function xg(c){return c&&c.length?Ht(c):[]},L.sortedUniqBy=function fp(c,f){return c&&c.length?Ht(c,Vt(f,2)):[]},L.split=function Si(c,f,E){return E&&"number"!=typeof E&&hi(c,f,E)&&(f=E=N),(E=E===N?Br:E>>>0)?(c=zt(c))&&("string"==typeof f||null!=f&&!W(f))&&!(f=pn(f))&&Ei(c)?Ro(bs(c),0,E):c.split(f,E):[]},L.spread=function $w(c,f){if("function"!=typeof c)throw new Ci(Ee);return f=null==f?0:Mn(Zt(f),0),I(function(E){var S=E[f],x=Ro(E,0,f);return S&&Es(x,S),Lt(c,this,x)})},L.tail=function pp(c){var f=null==c?0:c.length;return f?Xe(c,1,f):[]},L.take=function Ng(c,f,E){return c&&c.length?Xe(c,0,(f=E||f===N?1:Zt(f))<0?0:f):[]},L.takeRight=function Dd(c,f,E){var S=null==c?0:c.length;return S?Xe(c,(f=S-(f=E||f===N?1:Zt(f)))<0?0:f,S):[]},L.takeRightWhile=function E_(c,f){return c&&c.length?ei(c,Vt(f,3),!1,!0):[]},L.takeWhile=function C_(c,f){return c&&c.length?ei(c,Vt(f,3)):[]},L.tap=function I_(c,f){return f(c),c},L.throttle=function Cp(c,f,E){var S=!0,x=!0;if("function"!=typeof c)throw new Ci(Ee);return Xn(E)&&(S="leading"in E?!!E.leading:S,x="trailing"in E?!!E.trailing:x),nE(c,f,{leading:S,maxWait:f,trailing:x})},L.thru=ff,L.toArray=Ya,L.toPairs=q_,L.toPairsIn=wf,L.toPath=function Ot(c){return rn(c)?tn(c,k):ji(c)?[c]:Qi(M(zt(c)))},L.toPlainObject=wh,L.transform=function Mp(c,f,E){var S=rn(c),x=S||ua(c)||Md(c);if(f=Vt(f,4),null==E){var U=c&&c.constructor;E=x?S?new U:[]:Xn(c)&&Mc(U)?Ws(Jl(c)):{}}return(x?si:Jr)(c,function(K,ee,ae){return f(E,K,ee,ae)}),E},L.unary=function yh(c){return eE(c,1)},L.union=Wy,L.unionBy=Gy,L.unionWith=Ky,L.uniq=function df(c){return c&&c.length?di(c):[]},L.uniqBy=function w_(c,f){return c&&c.length?di(c,Vt(f,2)):[]},L.uniqWith=function gp(c,f){return f="function"==typeof f?f:N,c&&c.length?di(c,N,f):[]},L.unset=function Y_(c,f){return null==c||uc(c,f)},L.unzip=hf,L.unzipWith=Ad,L.update=function Q_(c,f,E){return null==c?c:xn(c,f,Zh(E))},L.updateWith=function Rp(c,f,E,S){return S="function"==typeof S?S:N,null==c?c:xn(c,f,Zh(E),S)},L.values=Th,L.valuesIn=function Jg(c){return null==c?[]:Cs(c,Gr(c))},L.without=zy,L.words=rv,L.wrap=function k_(c,f){return Wg(Zh(f),c)},L.xor=qy,L.xorBy=Yy,L.xorWith=Fw,L.zip=mp,L.zipObject=function b_(c,f){return qi(c||[],f||[],In)},L.zipObjectDeep=function gh(c,f){return qi(c||[],f||[],B)},L.zipWith=_p,L.entries=q_,L.entriesIn=wf,L.extend=Ip,L.extendWith=Js,Mh(L,L),L.add=cv,L.attempt=am,L.camelCase=Pp,L.capitalize=tm,L.ceil=Rh,L.clamp=function gE(c,f,E){return E===N&&(E=f,f=N),E!==N&&(E=(E=fi(E))==E?E:0),f!==N&&(f=(f=fi(f))==f?f:0),Ki(fi(c),f,E)},L.clone=function Sd(c){return Kt(c,4)},L.cloneDeep=function sE(c){return Kt(c,5)},L.cloneDeepWith=function B_(c,f){return Kt(c,5,f="function"==typeof f?f:N)},L.cloneWith=function L_(c,f){return Kt(c,4,f="function"==typeof f?f:N)},L.conformsTo=function V_(c,f){return null==f||Qo(c,f,Ti(f))},L.deburr=ha,L.defaultTo=function wE(c,f){return null==c||c!=c?f:c},L.divide=hm,L.endsWith=function nm(c,f,E){c=zt(c),f=pn(f);var S=c.length,x=E=E===N?S:Ki(Zt(E),0,S);return(E-=f.length)>=0&&c.slice(E,x)==f},L.eq=Qs,L.escape=function zw(c){return(c=zt(c))&&cr.test(c)?c.replace(Pr,Gl):c},L.escapeRegExp=function rm(c){return(c=zt(c))&&dt.test(c)?c.replace(me,"\\$&"):c},L.every=function A_(c,f,E){var S=rn(c)?ki:Zo;return E&&hi(c,f,E)&&(f=N),S(c,Vt(f,3))},L.find=Lw,L.findIndex=_u,L.findKey=function Nc(c,f){return go(c,Vt(f,3),Jr)},L.findLast=Bw,L.findLastIndex=Dc,L.findLastKey=function Ih(c,f){return go(c,Vt(f,3),As)},L.floor=Nd,L.forEach=T_,L.forEachRight=S_,L.forIn=function dE(c,f){return null==c?c:ld(c,Vt(f,3),Gr)},L.forInRight=function Du(c,f){return null==c?c:Ao(c,Vt(f,3),Gr)},L.forOwn=function Ef(c,f){return c&&Jr(c,Vt(f,3))},L.forOwnRight=function W_(c,f){return c&&As(c,Vt(f,3))},L.get=Dh,L.gt=oE,L.gte=Gg,L.has=function hE(c,f){return null!=c&&Ys(c,f,Ts)},L.hasIn=Ap,L.head=lp,L.identity=es,L.includes=function M_(c,f,E,S){c=Xs(c)?c:Th(c),E=E&&!S?Zt(E):0;var x=c.length;return E<0&&(E=Mn(x+E,0)),bp(c)?E<=x&&c.indexOf(f,E)>-1:!!x&&nl(c,f,E)>-1},L.indexOf=function f_(c,f,E){var S=null==c?0:c.length;if(!S)return-1;var x=null==E?0:Zt(E);return x<0&&(x=Mn(S+x,0)),nl(c,f,x)},L.inRange=function em(c,f,E){return f=xo(f),E===N?(E=f,f=0):E=xo(E),function us(c,f,E){return c>=Er(f,E)&&c<Mn(f,E)}(c=fi(c),f,E)},L.invoke=Kw,L.isArguments=Eh,L.isArray=rn,L.isArrayBuffer=aE,L.isArrayLike=Xs,L.isArrayLikeObject=_r,L.isBoolean=function Ww(c){return!0===c||!1===c||Wr(c)&&Bt(c)==pt},L.isBuffer=ua,L.isDate=Eu,L.isElement=function Kg(c){return Wr(c)&&1===c.nodeType&&!Al(c)},L.isEmpty=function Ji(c){if(null==c)return!0;if(Xs(c)&&(rn(c)||"string"==typeof c||"function"==typeof c.splice||ua(c)||Md(c)||Eh(c)))return!c.length;var f=Nn(c);if(f==Kn||f==Vr)return!c.size;if(wc(c))return!Ba(c).length;for(var E in c)if(wn.call(c,E))return!1;return!0},L.isEqual=function vf(c,f){return Yn(c,f)},L.isEqualWith=function qa(c,f,E){var S=(E="function"==typeof E?E:N)?E(c,f):N;return S===N?Yn(c,f,N,E):!!S},L.isError=Cu,L.isFinite=function zg(c){return"number"==typeof c&&Ju(c)},L.isFunction=Mc,L.isInteger=Ch,L.isLength=Rc,L.isMap=U_,L.isMatch=function lE(c,f){return c===f||zs(c,f,md(f))},L.isMatchWith=function Zs(c,f,E){return E="function"==typeof E?E:N,zs(c,f,md(f),E)},L.isNaN=function da(c){return wu(c)&&c!=+c},L.isNative=function Gw(c){if(Xi(c))throw new qt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return To(c)},L.isNil=function Pc(c){return null==c},L.isNull=function H_(c){return null===c},L.isNumber=wu,L.isObject=Xn,L.isObjectLike=Wr,L.isPlainObject=Al,L.isRegExp=W,L.isSafeInteger=function wp(c){return Ch(c)&&c>=-Ri&&c<=Ri},L.isSet=j_,L.isString=bp,L.isSymbol=ji,L.isTypedArray=Md,L.isUndefined=function qg(c){return c===N},L.isWeakMap=function Yg(c){return Wr(c)&&Nn(c)==xt},L.isWeakSet=function Rd(c){return Wr(c)&&"[object WeakSet]"==Bt(c)},L.join=function up(c,f){return null==c?"":ed.call(c,f)},L.kebabCase=Au,L.last=Di,L.lastIndexOf=function m_(c,f,E){var S=null==c?0:c.length;if(!S)return-1;var x=S;return E!==N&&(x=(x=Zt(E))<0?Mn(S+x,0):Er(x,S-1)),f==f?function zl(ne,Re,we){for(var ht=we+1;ht--;)if(ne[ht]===Re)return ht;return ht}(c,f,x):tl(c,eu,x,!0)},L.lowerCase=bf,L.lowerFirst=Z_,L.lt=Oc,L.lte=yf,L.max=function Ph(c){return c&&c.length?hl(c,es,qn):N},L.maxBy=function Rl(c,f){return c&&c.length?hl(c,Vt(f,2),qn):N},L.mean=function fm(c){return tu(c,es)},L.meanBy=function Oh(c,f){return tu(c,Vt(f,2))},L.min=function uv(c){return c&&c.length?hl(c,es,_l):N},L.minBy=function pm(c,f){return c&&c.length?hl(c,Vt(f,2),_l):N},L.stubArray=xd,L.stubFalse=ir,L.stubObject=function vn(){return{}},L.stubString=function Os(){return""},L.stubTrue=function av(){return!0},L.multiply=gm,L.nth=function Id(c,f){return c&&c.length?ta(c,Zt(f)):N},L.noConflict=function sv(){return Ir._===this&&(Ir._=qd),this},L.noop=Fp,L.now=_h,L.pad=function J_(c,f,E){c=zt(c);var S=(f=Zt(f))?ws(c):0;if(!f||S>=f)return c;var x=(f-S)/2;return qs(yo(x),E)+c+qs(bn(x),E)},L.padEnd=function mE(c,f,E){c=zt(c);var S=(f=Zt(f))?ws(c):0;return f&&S<f?c+qs(f-S,E):c},L.padStart=function im(c,f,E){c=zt(c);var S=(f=Zt(f))?ws(c):0;return f&&S<f?qs(f-S,E)+c:c},L.parseInt=function Sl(c,f,E){return E||null==f?f=0:f&&(f=+f),Ma(zt(c).replace(wt,""),f||0)},L.random=function X_(c,f,E){if(E&&"boolean"!=typeof E&&hi(c,f,E)&&(f=E=N),E===N&&("boolean"==typeof f?(E=f,f=N):"boolean"==typeof c&&(E=c,c=N)),c===N&&f===N?(c=0,f=1):(c=xo(c),f===N?(f=c,c=0):f=xo(f)),c>f){var S=c;c=f,f=S}if(E||c%1||f%1){var x=Ko();return Er(c+x*(f-c+Wo("1e-"+((x+"").length-1))),f)}return cc(c,f)},L.reduce=function P_(c,f,E){var S=rn(c)?Xr:qh,x=arguments.length<3;return S(c,Vt(f,4),E,x,Do)},L.reduceRight=function Jy(c,f,E){var S=rn(c)?oi:qh,x=arguments.length<3;return S(c,Vt(f,4),E,x,Xo)},L.repeat=function ev(c,f,E){return f=(E?hi(c,f,E):f===N)?1:Zt(f),ra(zt(c),f)},L.replace=function _E(){var c=arguments,f=zt(c[0]);return c.length<3?f:f.replace(c[1],c[2])},L.result=function Xg(c,f,E){var S=-1,x=(f=Yi(f,c)).length;for(x||(x=1,c=N);++S<x;){var U=null==c?N:c[k(f[S])];U===N&&(S=x,U=E),c=Mc(U)?U.call(c):U}return c},L.round=Up,L.runInContext=ne,L.sample=function Hw(c){return(rn(c)?dl:T)(c)},L.size=function W0(c){if(null==c)return 0;if(Xs(c))return bp(c)?ws(c):c.length;var f=Nn(c);return f==Kn||f==Vr?c.size:Ba(c).length},L.snakeCase=vE,L.some=function G0(c,f,E){var S=rn(c)?jl:Ze;return E&&hi(c,f,E)&&(f=N),S(c,Vt(f,3))},L.sortedIndex=function v_(c,f){return ft(c,f)},L.sortedIndexBy=function fh(c,f,E){return $t(c,f,Vt(E,2))},L.sortedIndexOf=function Og(c,f){var E=null==c?0:c.length;if(E){var S=ft(c,f);if(S<E&&Qs(c[S],f))return S}return-1},L.sortedLastIndex=function Ac(c,f){return ft(c,f,!0)},L.sortedLastIndexBy=function ph(c,f,E){return $t(c,f,Vt(E,2),!0)},L.sortedLastIndexOf=function y_(c,f){if(null!=c&&c.length){var S=ft(c,f,!0)-1;if(Qs(c[S],f))return S}return-1},L.startCase=yE,L.startsWith=function sm(c,f,E){return c=zt(c),E=null==E?0:Ki(Zt(E),0,c.length),f=pn(f),c.slice(E,E+f.length)==f},L.subtract=Ru,L.sum=function yn(c){return c&&c.length?$d(c,es):0},L.sumBy=function Hp(c,f){return c&&c.length?$d(c,Vt(f,2)):0},L.template=function EE(c,f,E){var S=L.templateSettings;E&&hi(c,f,E)&&(f=N),c=zt(c),f=Js({},f,S,nf);var ee,ae,x=Js({},f.imports,S.imports,nf),U=Ti(x),K=Cs(x,U),Ve=0,$e=f.interpolate||fn,He="__p += '",lt=ql((f.escape||fn).source+"|"+$e.source+"|"+($e===Z?co:fn).source+"|"+(f.evaluate||fn).source+"|$","g"),It="//# sourceURL="+(wn.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xt+"]")+"\n";c.replace(lt,function(jt,Dn,Rn,No,gn,ko){return Rn||(Rn=No),He+=c.slice(Ve,ko).replace(br,Yf),Dn&&(ee=!0,He+="' +\n__e("+Dn+") +\n'"),gn&&(ae=!0,He+="';\n"+gn+";\n__p += '"),Rn&&(He+="' +\n((__t = ("+Rn+")) == null ? '' : __t) +\n'"),Ve=ko+jt.length,jt}),He+="';\n";var Nt=wn.call(f,"variable")&&f.variable;if(Nt){if(qr.test(Nt))throw new qt("Invalid `variable` option passed into `_.template`")}else He="with (obj) {\n"+He+"\n}\n";He=(ae?He.replace(_i,""):He).replace(Vo,"$1").replace(ms,"$1;"),He="function("+(Nt||"obj")+") {\n"+(Nt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+He+"return __p\n}";var ln=am(function(){return Pn(U,It+"return "+He).apply(N,K)});if(ln.source=He,Cu(ln))throw ln;return ln},L.times=function Vp(c,f){if((c=Zt(c))<1||c>Ri)return[];var E=Br,S=Er(c,Br);f=Vt(f),c-=Br;for(var x=qu(S,f);++E<c;)f(E);return x},L.toFinite=xo,L.toInteger=Zt,L.toLength=bu,L.toLower=function Tu(c){return zt(c).toLowerCase()},L.toNumber=fi,L.toSafeInteger=function cE(c){return c?Ki(Zt(c),-Ri,Ri):0===c?c:0},L.toString=zt,L.toUpper=function If(c){return zt(c).toUpperCase()},L.trim=function tv(c,f,E){if((c=zt(c))&&(E||f===N))return Wd(c);if(!c||!(f=pn(f)))return c;var S=bs(c),x=bs(f);return Ro(S,Wl(S,x),ru(S,x)+1).join("")},L.trimEnd=function nv(c,f,E){if((c=zt(c))&&(E||f===N))return c.slice(0,Or(c)+1);if(!c||!(f=pn(f)))return c;var S=bs(c);return Ro(S,0,ru(S,bs(f))+1).join("")},L.trimStart=function Op(c,f,E){if((c=zt(c))&&(E||f===N))return c.replace(wt,"");if(!c||!(f=pn(f)))return c;var S=bs(c);return Ro(S,Wl(S,bs(f))).join("")},L.truncate=function Pd(c,f){var E=30,S="...";if(Xn(f)){var x="separator"in f?f.separator:x;E="length"in f?Zt(f.length):E,S="omission"in f?pn(f.omission):S}var U=(c=zt(c)).length;if(Ei(c)){var K=bs(c);U=K.length}if(E>=U)return c;var ee=E-ws(S);if(ee<1)return S;var ae=K?Ro(K,0,ee).join(""):c.slice(0,ee);if(x===N)return ae+S;if(K&&(ee+=ae.length-ee),W(x)){if(c.slice(ee).search(x)){var Ve,$e=ae;for(x.global||(x=ql(x.source,zt(Za.exec(x))+"g")),x.lastIndex=0;Ve=x.exec($e);)var He=Ve.index;ae=ae.slice(0,He===N?ee:He)}}else if(c.indexOf(pn(x),ee)!=ee){var lt=ae.lastIndexOf(x);lt>-1&&(ae=ae.slice(0,lt))}return ae+S},L.unescape=function om(c){return(c=zt(c))&&lo.test(c)?c.replace(Rr,iu):c},L.uniqueId=function lv(c){var f=++Xl;return zt(c)+f},L.upperCase=CE,L.upperFirst=xp,L.each=T_,L.eachRight=S_,L.first=lp,Mh(L,function(){var c={};return Jr(L,function(f,E){wn.call(L.prototype,E)||(c[E]=f)}),c}(),{chain:!1}),L.VERSION="4.17.21",si(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){L[c].placeholder=L}),si(["drop","take"],function(c,f){an.prototype[c]=function(E){E=E===N?1:Mn(Zt(E),0);var S=this.__filtered__&&!f?new an(this):this.clone();return S.__filtered__?S.__takeCount__=Er(E,S.__takeCount__):S.__views__.push({size:Er(E,Br),type:c+(S.__dir__<0?"Right":"")}),S},an.prototype[c+"Right"]=function(E){return this.reverse()[c](E).reverse()}}),si(["filter","map","takeWhile"],function(c,f){var E=f+1,S=1==E||3==E;an.prototype[c]=function(x){var U=this.clone();return U.__iteratees__.push({iteratee:Vt(x,3),type:E}),U.__filtered__=U.__filtered__||S,U}}),si(["head","last"],function(c,f){var E="take"+(f?"Right":"");an.prototype[c]=function(){return this[E](1).value()[0]}}),si(["initial","tail"],function(c,f){var E="drop"+(f?"":"Right");an.prototype[c]=function(){return this.__filtered__?new an(this):this[E](1)}}),an.prototype.compact=function(){return this.filter(es)},an.prototype.find=function(c){return this.filter(c).head()},an.prototype.findLast=function(c){return this.reverse().find(c)},an.prototype.invokeMap=I(function(c,f){return"function"==typeof c?new an(this):this.map(function(E){return fl(E,c,f)})}),an.prototype.reject=function(c){return this.filter(_f(Vt(c)))},an.prototype.slice=function(c,f){c=Zt(c);var E=this;return E.__filtered__&&(c>0||f<0)?new an(E):(c<0?E=E.takeRight(-c):c&&(E=E.drop(c)),f!==N&&(E=(f=Zt(f))<0?E.dropRight(-f):E.take(f-c)),E)},an.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},an.prototype.toArray=function(){return this.take(Br)},Jr(an.prototype,function(c,f){var E=/^(?:filter|find|map|reject)|While$/.test(f),S=/^(?:head|last)$/.test(f),x=L[S?"take"+("last"==f?"Right":""):f],U=S||/^find/.test(f);x&&(L.prototype[f]=function(){var K=this.__wrapped__,ee=S?[1]:arguments,ae=K instanceof an,Ve=ee[0],$e=ae||rn(K),He=function(Dn){var Rn=x.apply(L,Es([Dn],ee));return S&&lt?Rn[0]:Rn};$e&&E&&"function"==typeof Ve&&1!=Ve.length&&(ae=$e=!1);var lt=this.__chain__,Nt=U&&!lt,ln=ae&&!this.__actions__.length;if(!U&&$e){K=ln?K:new an(this);var jt=c.apply(K,ee);return jt.__actions__.push({func:ff,args:[He],thisArg:N}),new At(jt,lt)}return Nt&&ln?c.apply(this,ee):(jt=this.thru(He),Nt?S?jt.value()[0]:jt.value():jt)})}),si(["pop","push","shift","sort","splice","unshift"],function(c){var f=sl[c],E=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",S=/^(?:pop|shift)$/.test(c);L.prototype[c]=function(){var x=arguments;if(S&&!this.__chain__){var U=this.value();return f.apply(rn(U)?U:[],x)}return this[E](function(K){return f.apply(rn(K)?K:[],x)})}}),Jr(an.prototype,function(c,f){var E=L[f];if(E){var S=E.name+"";wn.call(zo,S)||(zo[S]=[]),zo[S].push({name:f,func:E})}}),zo[sh(N,2).name]=[{name:"wrapper",func:N}],an.prototype.clone=function td(){var c=new an(this.__wrapped__);return c.__actions__=Qi(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Qi(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Qi(this.__views__),c},an.prototype.reverse=function xr(){if(this.__filtered__){var c=new an(this);c.__dir__=-1,c.__filtered__=!0}else(c=this.clone()).__dir__*=-1;return c},an.prototype.value=function nd(){var c=this.__wrapped__.value(),f=this.__dir__,E=rn(c),S=f<0,x=E?c.length:0,U=function Ec(c,f,E){for(var S=-1,x=E.length;++S<x;){var U=E[S],K=U.size;switch(U.type){case"drop":c+=K;break;case"dropRight":f-=K;break;case"take":f=Er(f,c+K);break;case"takeRight":c=Mn(c,f-K)}}return{start:c,end:f}}(0,x,this.__views__),K=U.start,ee=U.end,ae=ee-K,Ve=S?ee:K-1,$e=this.__iteratees__,He=$e.length,lt=0,It=Er(ae,this.__takeCount__);if(!E||!S&&x==ae&&It==ae)return bi(c,this.__actions__);var Nt=[];e:for(;ae--&&lt<It;){for(var ln=-1,jt=c[Ve+=f];++ln<He;){var Dn=$e[ln],No=Dn.type,gn=(0,Dn.iteratee)(jt);if(2==No)jt=gn;else if(!gn){if(1==No)continue e;break e}}Nt[lt++]=jt}return Nt},L.prototype.at=D_,L.prototype.chain=function kg(){return vp(this)},L.prototype.commit=function Fg(){return new At(this.value(),this.__chain__)},L.prototype.next=function mh(){this.__values__===N&&(this.__values__=Ya(this.value()));var c=this.__index__>=this.__values__.length;return{done:c,value:c?N:this.__values__[this.__index__++]}},L.prototype.plant=function Qy(c){for(var f,E=this;E instanceof Le;){var S=Ue(E);S.__index__=0,S.__values__=N,f?x.__wrapped__=S:f=S;var x=S;E=E.__wrapped__}return x.__wrapped__=c,f},L.prototype.reverse=function Xy(){var c=this.__wrapped__;if(c instanceof an){var f=c;return this.__actions__.length&&(f=new an(this)),(f=f.reverse()).__actions__.push({func:ff,args:[hp],thisArg:N}),new At(f,this.__chain__)}return this.thru(hp)},L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=function Tc(){return bi(this.__wrapped__,this.__actions__)},L.prototype.first=L.prototype.head,Ta&&(L.prototype[Ta]=function Lg(){return this}),L}();Ir._=Vs,(h=function(){return Vs}.call(Oe,V,Oe,ut))!==N&&(ut.exports=h)}.call(this)},4412:(ut,Oe,V)=>{"use strict";V.d(Oe,{t:()=>N});var h=V(1413);class N extends h.B{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const _e=super._subscribe(he);return!_e.closed&&he.next(this._value),_e}getValue(){const{hasError:he,thrownError:_e,_value:Ee}=this;if(he)throw _e;return this._throwIfClosed(),Ee}next(he){super.next(this._value=he)}}},1985:(ut,Oe,V)=>{"use strict";V.d(Oe,{c:()=>Ge});var h=V(7707),N=V(8359),H=V(3494),he=V(1203),_e=V(1026),Ee=V(8071),Se=V(9786);let Ge=(()=>{class le{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const rt=new le;return rt.source=this,rt.operator=Be,rt}subscribe(Be,rt,Fe){const Je=function X(le){return le&&le instanceof h.vU||function G(le){return le&&(0,Ee.T)(le.next)&&(0,Ee.T)(le.error)&&(0,Ee.T)(le.complete)}(le)&&(0,N.Uv)(le)}(Be)?Be:new h.Ms(Be,rt,Fe);return(0,Se.Y)(()=>{const{operator:Qe,source:_t}=this;Je.add(Qe?Qe.call(Je,_t):_t?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Be){try{return this._subscribe(Be)}catch(rt){Be.error(rt)}}forEach(Be,rt){return new(rt=Ae(rt))((Fe,Je)=>{const Qe=new h.Ms({next:_t=>{try{Be(_t)}catch(vt){Je(vt),Qe.unsubscribe()}},error:Je,complete:Fe});this.subscribe(Qe)})}_subscribe(Be){var rt;return null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(Be)}[H.s](){return this}pipe(...Be){return(0,he.m)(Be)(this)}toPromise(Be){return new(Be=Ae(Be))((rt,Fe)=>{let Je;this.subscribe(Qe=>Je=Qe,Qe=>Fe(Qe),()=>rt(Je))})}}return le.create=qe=>new le(qe),le})();function Ae(le){var qe;return null!==(qe=le??_e.$.Promise)&&void 0!==qe?qe:Promise}},1413:(ut,Oe,V)=>{"use strict";V.d(Oe,{B:()=>Se});var h=V(1985),N=V(8359);const he=(0,V(1853).L)(Ae=>function(){Ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=V(7908),Ee=V(9786);let Se=(()=>{class Ae extends h.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(X){const le=new Ge(this,this);return le.operator=X,le}_throwIfClosed(){if(this.closed)throw new he}next(X){(0,Ee.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(X)}})}error(X){(0,Ee.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=X;const{observers:le}=this;for(;le.length;)le.shift().error(X)}})}complete(){(0,Ee.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:X}=this;for(;X.length;)X.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var X;return(null===(X=this.observers)||void 0===X?void 0:X.length)>0}_trySubscribe(X){return this._throwIfClosed(),super._trySubscribe(X)}_subscribe(X){return this._throwIfClosed(),this._checkFinalizedStatuses(X),this._innerSubscribe(X)}_innerSubscribe(X){const{hasError:le,isStopped:qe,observers:Be}=this;return le||qe?N.Kn:(this.currentObservers=null,Be.push(X),new N.yU(()=>{this.currentObservers=null,(0,_e.o)(Be,X)}))}_checkFinalizedStatuses(X){const{hasError:le,thrownError:qe,isStopped:Be}=this;le?X.error(qe):Be&&X.complete()}asObservable(){const X=new h.c;return X.source=this,X}}return Ae.create=(G,X)=>new Ge(G,X),Ae})();class Ge extends Se{constructor(G,X){super(),this.destination=G,this.source=X}next(G){var X,le;null===(le=null===(X=this.destination)||void 0===X?void 0:X.next)||void 0===le||le.call(X,G)}error(G){var X,le;null===(le=null===(X=this.destination)||void 0===X?void 0:X.error)||void 0===le||le.call(X,G)}complete(){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===X||X.call(G)}_subscribe(G){var X,le;return null!==(le=null===(X=this.source)||void 0===X?void 0:X.subscribe(G))&&void 0!==le?le:N.Kn}}},7707:(ut,Oe,V)=>{"use strict";V.d(Oe,{Ms:()=>Fe,vU:()=>le});var h=V(8071),N=V(8359),H=V(1026),he=V(5334),_e=V(5343);const Ee=Ae("C",void 0,void 0);function Ae(de,Me,ue){return{kind:de,value:Me,error:ue}}var G=V(9270),X=V(9786);class le extends N.yU{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,N.Uv)(Me)&&Me.add(this)):this.destination=vt}static create(Me,ue,xe){return new Fe(Me,ue,xe)}next(Me){this.isStopped?_t(function Ge(de){return Ae("N",de,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?_t(function Se(de){return Ae("E",void 0,de)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?_t(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Be(de,Me){return qe.call(de,Me)}class rt{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:ue}=this;if(ue.next)try{ue.next(Me)}catch(xe){Je(xe)}}error(Me){const{partialObserver:ue}=this;if(ue.error)try{ue.error(Me)}catch(xe){Je(xe)}else Je(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(ue){Je(ue)}}}class Fe extends le{constructor(Me,ue,xe){let ze;if(super(),(0,h.T)(Me)||!Me)ze={next:Me??void 0,error:ue??void 0,complete:xe??void 0};else{let it;this&&H.$.useDeprecatedNextContext?(it=Object.create(Me),it.unsubscribe=()=>this.unsubscribe(),ze={next:Me.next&&Be(Me.next,it),error:Me.error&&Be(Me.error,it),complete:Me.complete&&Be(Me.complete,it)}):ze=Me}this.destination=new rt(ze)}}function Je(de){H.$.useDeprecatedSynchronousErrorHandling?(0,X.l)(de):(0,he.m)(de)}function _t(de,Me){const{onStoppedNotification:ue}=H.$;ue&&G.f.setTimeout(()=>ue(de,Me))}const vt={closed:!0,next:_e.l,error:function Qe(de){throw de},complete:_e.l}},8359:(ut,Oe,V)=>{"use strict";V.d(Oe,{Kn:()=>Ee,yU:()=>_e,Uv:()=>Se});var h=V(8071);const H=(0,V(1853).L)(Ae=>function(X){Ae(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((le,qe)=>`${qe+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X});var he=V(7908);class _e{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:X}=this;if(X)if(this._parentage=null,Array.isArray(X))for(const Be of X)Be.remove(this);else X.remove(this);const{initialTeardown:le}=this;if((0,h.T)(le))try{le()}catch(Be){G=Be instanceof H?Be.errors:[Be]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Be of qe)try{Ge(Be)}catch(rt){G=G??[],rt instanceof H?G=[...G,...rt.errors]:G.push(rt)}}if(G)throw new H(G)}}add(G){var X;if(G&&G!==this)if(this.closed)Ge(G);else{if(G instanceof _e){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(X=this._finalizers)&&void 0!==X?X:[]).push(G)}}_hasParent(G){const{_parentage:X}=this;return X===G||Array.isArray(X)&&X.includes(G)}_addParent(G){const{_parentage:X}=this;this._parentage=Array.isArray(X)?(X.push(G),X):X?[X,G]:G}_removeParent(G){const{_parentage:X}=this;X===G?this._parentage=null:Array.isArray(X)&&(0,he.o)(X,G)}remove(G){const{_finalizers:X}=this;X&&(0,he.o)(X,G),G instanceof _e&&G._removeParent(this)}}_e.EMPTY=(()=>{const Ae=new _e;return Ae.closed=!0,Ae})();const Ee=_e.EMPTY;function Se(Ae){return Ae instanceof _e||Ae&&"closed"in Ae&&(0,h.T)(Ae.remove)&&(0,h.T)(Ae.add)&&(0,h.T)(Ae.unsubscribe)}function Ge(Ae){(0,h.T)(Ae)?Ae():Ae.unsubscribe()}},1026:(ut,Oe,V)=>{"use strict";V.d(Oe,{$:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},983:(ut,Oe,V)=>{"use strict";V.d(Oe,{w:()=>N});const N=new(V(1985).c)(_e=>_e.complete())},8455:(ut,Oe,V)=>{"use strict";V.d(Oe,{H:()=>Me});var h=V(8750),N=V(941),H=V(6745),Ee=V(1985),Ge=V(4761),Ae=V(8071),G=V(5225);function le(ue,xe){if(!ue)throw new Error("Iterable cannot be null");return new Ee.c(ze=>{(0,G.N)(ze,xe,()=>{const it=ue[Symbol.asyncIterator]();(0,G.N)(ze,xe,()=>{it.next().then(Ce=>{Ce.done?ze.complete():ze.next(Ce.value)})},0,!0)})})}var qe=V(5055),Be=V(9858),rt=V(7441),Fe=V(5397),Je=V(7953),Qe=V(591),_t=V(5196);function Me(ue,xe){return xe?function de(ue,xe){if(null!=ue){if((0,qe.l)(ue))return function he(ue,xe){return(0,h.Tg)(ue).pipe((0,H._)(xe),(0,N.Q)(xe))}(ue,xe);if((0,rt.X)(ue))return function Se(ue,xe){return new Ee.c(ze=>{let it=0;return xe.schedule(function(){it===ue.length?ze.complete():(ze.next(ue[it++]),ze.closed||this.schedule())})})}(ue,xe);if((0,Be.y)(ue))return function _e(ue,xe){return(0,h.Tg)(ue).pipe((0,H._)(xe),(0,N.Q)(xe))}(ue,xe);if((0,Je.T)(ue))return le(ue,xe);if((0,Fe.x)(ue))return function X(ue,xe){return new Ee.c(ze=>{let it;return(0,G.N)(ze,xe,()=>{it=ue[Ge.l](),(0,G.N)(ze,xe,()=>{let Ce,Tt;try{({value:Ce,done:Tt}=it.next())}catch(sn){return void ze.error(sn)}Tt?ze.complete():ze.next(Ce)},0,!0)}),()=>(0,Ae.T)(it?.return)&&it.return()})}(ue,xe);if((0,_t.U)(ue))return function vt(ue,xe){return le((0,_t.C)(ue),xe)}(ue,xe)}throw(0,Qe.L)(ue)}(ue,xe):(0,h.Tg)(ue)}},8750:(ut,Oe,V)=>{"use strict";V.d(Oe,{Tg:()=>qe});var h=V(1635),N=V(7441),H=V(9858),he=V(1985),_e=V(5055),Ee=V(7953),Se=V(591),Ge=V(5397),Ae=V(5196),G=V(8071),X=V(5334),le=V(3494);function qe(de){if(de instanceof he.c)return de;if(null!=de){if((0,_e.l)(de))return function Be(de){return new he.c(Me=>{const ue=de[le.s]();if((0,G.T)(ue.subscribe))return ue.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(de);if((0,N.X)(de))return function rt(de){return new he.c(Me=>{for(let ue=0;ue<de.length&&!Me.closed;ue++)Me.next(de[ue]);Me.complete()})}(de);if((0,H.y)(de))return function Fe(de){return new he.c(Me=>{de.then(ue=>{Me.closed||(Me.next(ue),Me.complete())},ue=>Me.error(ue)).then(null,X.m)})}(de);if((0,Ee.T)(de))return Qe(de);if((0,Ge.x)(de))return function Je(de){return new he.c(Me=>{for(const ue of de)if(Me.next(ue),Me.closed)return;Me.complete()})}(de);if((0,Ae.U)(de))return function _t(de){return Qe((0,Ae.C)(de))}(de)}throw(0,Se.L)(de)}function Qe(de){return new he.c(Me=>{(function vt(de,Me){var ue,xe,ze,it;return(0,h.sH)(this,void 0,void 0,function*(){try{for(ue=(0,h.xN)(de);!(xe=yield ue.next()).done;)if(Me.next(xe.value),Me.closed)return}catch(Ce){ze={error:Ce}}finally{try{xe&&!xe.done&&(it=ue.return)&&(yield it.call(ue))}finally{if(ze)throw ze.error}}Me.complete()})})(de,Me).catch(ue=>Me.error(ue))})}},7786:(ut,Oe,V)=>{"use strict";V.d(Oe,{h:()=>Ee});var h=V(6365),N=V(8750),H=V(983),he=V(9326),_e=V(8455);function Ee(...Se){const Ge=(0,he.lI)(Se),Ae=(0,he.R0)(Se,1/0),G=Se;return G.length?1===G.length?(0,N.Tg)(G[0]):(0,h.U)(Ae)((0,_e.H)(G,Ge)):H.w}},7673:(ut,Oe,V)=>{"use strict";V.d(Oe,{of:()=>H});var h=V(9326),N=V(8455);function H(...he){const _e=(0,h.lI)(he);return(0,N.H)(he,_e)}},4360:(ut,Oe,V)=>{"use strict";V.d(Oe,{_:()=>N});var h=V(7707);function N(he,_e,Ee,Se,Ge){return new H(he,_e,Ee,Se,Ge)}class H extends h.vU{constructor(_e,Ee,Se,Ge,Ae,G){super(_e),this.onFinalize=Ae,this.shouldUnsubscribe=G,this._next=Ee?function(X){try{Ee(X)}catch(le){_e.error(le)}}:super._next,this._error=Ge?function(X){try{Ge(X)}catch(le){_e.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(X){_e.error(X)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},3294:(ut,Oe,V)=>{"use strict";V.d(Oe,{F:()=>he});var h=V(3669),N=V(9974),H=V(4360);function he(Ee,Se=h.D){return Ee=Ee??_e,(0,N.N)((Ge,Ae)=>{let G,X=!0;Ge.subscribe((0,H._)(Ae,le=>{const qe=Se(le);(X||!Ee(G,qe))&&(X=!1,G=qe,Ae.next(le))}))})}function _e(Ee,Se){return Ee===Se}},6354:(ut,Oe,V)=>{"use strict";V.d(Oe,{T:()=>H});var h=V(9974),N=V(4360);function H(he,_e){return(0,h.N)((Ee,Se)=>{let Ge=0;Ee.subscribe((0,N._)(Se,Ae=>{Se.next(he.call(_e,Ae,Ge++))}))})}},6365:(ut,Oe,V)=>{"use strict";V.d(Oe,{U:()=>H});var h=V(1397),N=V(3669);function H(he=1/0){return(0,h.Z)(N.D,he)}},1397:(ut,Oe,V)=>{"use strict";V.d(Oe,{Z:()=>Ge});var h=V(6354),N=V(8750),H=V(9974),he=V(5225),_e=V(4360),Se=V(8071);function Ge(Ae,G,X=1/0){return(0,Se.T)(G)?Ge((le,qe)=>(0,h.T)((Be,rt)=>G(le,Be,qe,rt))((0,N.Tg)(Ae(le,qe))),X):("number"==typeof G&&(X=G),(0,H.N)((le,qe)=>function Ee(Ae,G,X,le,qe,Be,rt,Fe){const Je=[];let Qe=0,_t=0,vt=!1;const de=()=>{vt&&!Je.length&&!Qe&&G.complete()},Me=xe=>Qe<le?ue(xe):Je.push(xe),ue=xe=>{Be&&G.next(xe),Qe++;let ze=!1;(0,N.Tg)(X(xe,_t++)).subscribe((0,_e._)(G,it=>{qe?.(it),Be?Me(it):G.next(it)},()=>{ze=!0},void 0,()=>{if(ze)try{for(Qe--;Je.length&&Qe<le;){const it=Je.shift();rt?(0,he.N)(G,rt,()=>ue(it)):ue(it)}de()}catch(it){G.error(it)}}))};return Ae.subscribe((0,_e._)(G,Me,()=>{vt=!0,de()})),()=>{Fe?.()}}(le,qe,Ae,X)))}},941:(ut,Oe,V)=>{"use strict";V.d(Oe,{Q:()=>he});var h=V(5225),N=V(9974),H=V(4360);function he(_e,Ee=0){return(0,N.N)((Se,Ge)=>{Se.subscribe((0,H._)(Ge,Ae=>(0,h.N)(Ge,_e,()=>Ge.next(Ae),Ee),()=>(0,h.N)(Ge,_e,()=>Ge.complete(),Ee),Ae=>(0,h.N)(Ge,_e,()=>Ge.error(Ae),Ee)))})}},7647:(ut,Oe,V)=>{"use strict";V.d(Oe,{u:()=>_e});var h=V(8750),N=V(1413),H=V(7707),he=V(9974);function _e(Se={}){const{connector:Ge=(()=>new N.B),resetOnError:Ae=!0,resetOnComplete:G=!0,resetOnRefCountZero:X=!0}=Se;return le=>{let qe,Be,rt,Fe=0,Je=!1,Qe=!1;const _t=()=>{Be?.unsubscribe(),Be=void 0},vt=()=>{_t(),qe=rt=void 0,Je=Qe=!1},de=()=>{const Me=qe;vt(),Me?.unsubscribe()};return(0,he.N)((Me,ue)=>{Fe++,!Qe&&!Je&&_t();const xe=rt=rt??Ge();ue.add(()=>{Fe--,0===Fe&&!Qe&&!Je&&(Be=Ee(de,X))}),xe.subscribe(ue),!qe&&Fe>0&&(qe=new H.Ms({next:ze=>xe.next(ze),error:ze=>{Qe=!0,_t(),Be=Ee(vt,Ae,ze),xe.error(ze)},complete:()=>{Je=!0,_t(),Be=Ee(vt,G),xe.complete()}}),(0,h.Tg)(Me).subscribe(qe))})(le)}}function Ee(Se,Ge,...Ae){if(!0===Ge)return void Se();if(!1===Ge)return;const G=new H.Ms({next:()=>{G.unsubscribe(),Se()}});return(0,h.Tg)(Ge(...Ae)).subscribe(G)}},6745:(ut,Oe,V)=>{"use strict";V.d(Oe,{_:()=>N});var h=V(9974);function N(H,he=0){return(0,h.N)((_e,Ee)=>{Ee.add(H.schedule(()=>_e.subscribe(Ee),he))})}},5558:(ut,Oe,V)=>{"use strict";V.d(Oe,{n:()=>he});var h=V(8750),N=V(9974),H=V(4360);function he(_e,Ee){return(0,N.N)((Se,Ge)=>{let Ae=null,G=0,X=!1;const le=()=>X&&!Ae&&Ge.complete();Se.subscribe((0,H._)(Ge,qe=>{Ae?.unsubscribe();let Be=0;const rt=G++;(0,h.Tg)(_e(qe,rt)).subscribe(Ae=(0,H._)(Ge,Fe=>Ge.next(Ee?Ee(qe,Fe,rt,Be++):Fe),()=>{Ae=null,le()}))},()=>{X=!0,le()}))})}},8141:(ut,Oe,V)=>{"use strict";V.d(Oe,{M:()=>_e});var h=V(8071),N=V(9974),H=V(4360),he=V(3669);function _e(Ee,Se,Ge){const Ae=(0,h.T)(Ee)||Se||Ge?{next:Ee,error:Se,complete:Ge}:Ee;return Ae?(0,N.N)((G,X)=>{var le;null===(le=Ae.subscribe)||void 0===le||le.call(Ae);let qe=!0;G.subscribe((0,H._)(X,Be=>{var rt;null===(rt=Ae.next)||void 0===rt||rt.call(Ae,Be),X.next(Be)},()=>{var Be;qe=!1,null===(Be=Ae.complete)||void 0===Be||Be.call(Ae),X.complete()},Be=>{var rt;qe=!1,null===(rt=Ae.error)||void 0===rt||rt.call(Ae,Be),X.error(Be)},()=>{var Be,rt;qe&&(null===(Be=Ae.unsubscribe)||void 0===Be||Be.call(Ae)),null===(rt=Ae.finalize)||void 0===rt||rt.call(Ae)}))}):he.D}},6780:(ut,Oe,V)=>{"use strict";V.d(Oe,{R:()=>_e});var h=V(8359);class N extends h.yU{constructor(Se,Ge){super()}schedule(Se,Ge=0){return this}}const H={setInterval(Ee,Se,...Ge){const{delegate:Ae}=H;return Ae?.setInterval?Ae.setInterval(Ee,Se,...Ge):setInterval(Ee,Se,...Ge)},clearInterval(Ee){const{delegate:Se}=H;return(Se?.clearInterval||clearInterval)(Ee)},delegate:void 0};var he=V(7908);class _e extends N{constructor(Se,Ge){super(Se,Ge),this.scheduler=Se,this.work=Ge,this.pending=!1}schedule(Se,Ge=0){var Ae;if(this.closed)return this;this.state=Se;const G=this.id,X=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(X,G,Ge)),this.pending=!0,this.delay=Ge,this.id=null!==(Ae=this.id)&&void 0!==Ae?Ae:this.requestAsyncId(X,this.id,Ge),this}requestAsyncId(Se,Ge,Ae=0){return H.setInterval(Se.flush.bind(Se,this),Ae)}recycleAsyncId(Se,Ge,Ae=0){if(null!=Ae&&this.delay===Ae&&!1===this.pending)return Ge;null!=Ge&&H.clearInterval(Ge)}execute(Se,Ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(Se,Ge);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Ge){let G,Ae=!1;try{this.work(Se)}catch(X){Ae=!0,G=X||new Error("Scheduled action threw falsy error")}if(Ae)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Ge}=this,{actions:Ae}=Ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.o)(Ae,this),null!=Se&&(this.id=this.recycleAsyncId(Ge,Se,null)),this.delay=null,super.unsubscribe()}}}},9687:(ut,Oe,V)=>{"use strict";V.d(Oe,{q:()=>H});var h=V(6129);class N{constructor(_e,Ee=N.now){this.schedulerActionCtor=_e,this.now=Ee}schedule(_e,Ee=0,Se){return new this.schedulerActionCtor(this,_e).schedule(Se,Ee)}}N.now=h.U.now;class H extends N{constructor(_e,Ee=N.now){super(_e,Ee),this.actions=[],this._active=!1}flush(_e){const{actions:Ee}=this;if(this._active)return void Ee.push(_e);let Se;this._active=!0;do{if(Se=_e.execute(_e.state,_e.delay))break}while(_e=Ee.shift());if(this._active=!1,Se){for(;_e=Ee.shift();)_e.unsubscribe();throw Se}}}},3236:(ut,Oe,V)=>{"use strict";V.d(Oe,{E:()=>H,b:()=>he});var h=V(6780);const H=new(V(9687).q)(h.R),he=H},6129:(ut,Oe,V)=>{"use strict";V.d(Oe,{U:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},9270:(ut,Oe,V)=>{"use strict";V.d(Oe,{f:()=>h});const h={setTimeout(N,H,...he){const{delegate:_e}=h;return _e?.setTimeout?_e.setTimeout(N,H,...he):setTimeout(N,H,...he)},clearTimeout(N){const{delegate:H}=h;return(H?.clearTimeout||clearTimeout)(N)},delegate:void 0}},4761:(ut,Oe,V)=>{"use strict";V.d(Oe,{l:()=>N});const N=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(ut,Oe,V)=>{"use strict";V.d(Oe,{s:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(ut,Oe,V)=>{"use strict";V.d(Oe,{R0:()=>Ee,lI:()=>_e,ms:()=>he});var h=V(8071),N=V(9470);function H(Se){return Se[Se.length-1]}function he(Se){return(0,h.T)(H(Se))?Se.pop():void 0}function _e(Se){return(0,N.m)(H(Se))?Se.pop():void 0}function Ee(Se,Ge){return"number"==typeof H(Se)?Se.pop():Ge}},7908:(ut,Oe,V)=>{"use strict";function h(N,H){if(N){const he=N.indexOf(H);0<=he&&N.splice(he,1)}}V.d(Oe,{o:()=>h})},1853:(ut,Oe,V)=>{"use strict";function h(N){const he=N(_e=>{Error.call(_e),_e.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}V.d(Oe,{L:()=>h})},9786:(ut,Oe,V)=>{"use strict";V.d(Oe,{Y:()=>H,l:()=>he});var h=V(1026);let N=null;function H(_e){if(h.$.useDeprecatedSynchronousErrorHandling){const Ee=!N;if(Ee&&(N={errorThrown:!1,error:null}),_e(),Ee){const{errorThrown:Se,error:Ge}=N;if(N=null,Se)throw Ge}}else _e()}function he(_e){h.$.useDeprecatedSynchronousErrorHandling&&N&&(N.errorThrown=!0,N.error=_e)}},5225:(ut,Oe,V)=>{"use strict";function h(N,H,he,_e=0,Ee=!1){const Se=H.schedule(function(){he(),Ee?N.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(N.add(Se),!Ee)return Se}V.d(Oe,{N:()=>h})},3669:(ut,Oe,V)=>{"use strict";function h(N){return N}V.d(Oe,{D:()=>h})},7441:(ut,Oe,V)=>{"use strict";V.d(Oe,{X:()=>h});const h=N=>N&&"number"==typeof N.length&&"function"!=typeof N},7953:(ut,Oe,V)=>{"use strict";V.d(Oe,{T:()=>N});var h=V(8071);function N(H){return Symbol.asyncIterator&&(0,h.T)(H?.[Symbol.asyncIterator])}},8071:(ut,Oe,V)=>{"use strict";function h(N){return"function"==typeof N}V.d(Oe,{T:()=>h})},5055:(ut,Oe,V)=>{"use strict";V.d(Oe,{l:()=>H});var h=V(3494),N=V(8071);function H(he){return(0,N.T)(he[h.s])}},5397:(ut,Oe,V)=>{"use strict";V.d(Oe,{x:()=>H});var h=V(4761),N=V(8071);function H(he){return(0,N.T)(he?.[h.l])}},9858:(ut,Oe,V)=>{"use strict";V.d(Oe,{y:()=>N});var h=V(8071);function N(H){return(0,h.T)(H?.then)}},5196:(ut,Oe,V)=>{"use strict";V.d(Oe,{C:()=>H,U:()=>he});var h=V(1635),N=V(8071);function H(_e){return(0,h.AQ)(this,arguments,function*(){const Se=_e.getReader();try{for(;;){const{value:Ge,done:Ae}=yield(0,h.N3)(Se.read());if(Ae)return yield(0,h.N3)(void 0);yield yield(0,h.N3)(Ge)}}finally{Se.releaseLock()}})}function he(_e){return(0,N.T)(_e?.getReader)}},9470:(ut,Oe,V)=>{"use strict";V.d(Oe,{m:()=>N});var h=V(8071);function N(H){return H&&(0,h.T)(H.schedule)}},9974:(ut,Oe,V)=>{"use strict";V.d(Oe,{N:()=>H,S:()=>N});var h=V(8071);function N(he){return(0,h.T)(he?.lift)}function H(he){return _e=>{if(N(_e))return _e.lift(function(Ee){try{return he(Ee,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(ut,Oe,V)=>{"use strict";function h(){}V.d(Oe,{l:()=>h})},1203:(ut,Oe,V)=>{"use strict";V.d(Oe,{F:()=>N,m:()=>H});var h=V(3669);function N(...he){return H(he)}function H(he){return 0===he.length?h.D:1===he.length?he[0]:function(Ee){return he.reduce((Se,Ge)=>Ge(Se),Ee)}}},5334:(ut,Oe,V)=>{"use strict";V.d(Oe,{m:()=>H});var h=V(1026),N=V(9270);function H(he){N.f.setTimeout(()=>{const{onUnhandledError:_e}=h.$;if(!_e)throw he;_e(he)})}},591:(ut,Oe,V)=>{"use strict";function h(N){return new TypeError(`You provided ${null!==N&&"object"==typeof N?"an invalid object":`'${N}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Oe,{L:()=>h})},7705:(ut,Oe,V)=>{"use strict";V.d(Oe,{$C:()=>Ul,$GK:()=>Et,$K3:()=>oT,AVh:()=>Wv,Agw:()=>Pc,B4B:()=>vh,BIS:()=>W,BMQ:()=>BE,C4Q:()=>Hf,Co$:()=>Wm,DNE:()=>Bd,EFF:()=>zv,EJ8:()=>Jc,FsC:()=>Zc,G2t:()=>Sn,GBs:()=>XC,GFd:()=>Fh,H3F:()=>Zm,H5H:()=>ty,H8p:()=>ua,HJs:()=>KT,Hbi:()=>O0,JZv:()=>An,Jv_:()=>mI,KH2:()=>to,KVO:()=>Tn,L39:()=>eM,LfX:()=>Ft,MKu:()=>Fy,NEm:()=>_T,NYb:()=>fT,Njj:()=>td,O8t:()=>Qf,OA$:()=>Aa,Ocv:()=>XI,Ol2:()=>yI,PLl:()=>H_,QTQ:()=>hm,Ql9:()=>JI,QuC:()=>$o,R7$:()=>lv,RV6:()=>kf,Rfq:()=>rt,RxE:()=>Xg,SKi:()=>Si,SpI:()=>qv,TL$:()=>b_,Tbb:()=>le,VBU:()=>dr,Vns:()=>ni,Vt3:()=>NE,WHO:()=>dT,WQX:()=>Gt,XpG:()=>vb,Xx1:()=>fd,Y8G:()=>KE,Z63:()=>yh,_9s:()=>Ah,_q3:()=>S0,aKT:()=>Cf,aNF:()=>CI,bIt:()=>Nv,bMT:()=>AI,bkB:()=>Sl,c1b:()=>GC,czy:()=>gu,e01:()=>hT,eBV:()=>an,fpN:()=>NT,gRc:()=>DT,gXe:()=>mt,giA:()=>pT,hnV:()=>gw,iLQ:()=>bg,j41:()=>ng,jDH:()=>ot,jNT:()=>xv,joV:()=>cu,k0s:()=>Mv,kS0:()=>dd,kdw:()=>rh,lJ4:()=>fy,lsd:()=>JC,mGM:()=>OI,mq5:()=>gC,n$t:()=>iE,nI1:()=>II,nKC:()=>gt,naY:()=>p0,npT:()=>jg,nrm:()=>Nu,o8S:()=>s_,oH4:()=>yT,plB:()=>rw,qSk:()=>wi,rOR:()=>vy,rXU:()=>Rh,sFG:()=>Tp,sZ2:()=>da,sdS:()=>gb,tSv:()=>xp,uvJ:()=>qa,w6W:()=>AC,wOt:()=>de,wni:()=>ZC,xGo:()=>th,xc7:()=>lg,xe9:()=>Jm,xvI:()=>Zg,zZn:()=>ha,zcH:()=>Au,zjR:()=>qE});var h=V(1413),N=V(8359),H=V(1985),he=V(7786),_e=V(4412),Ee=V(7673),Se=V(7647),Ge=V(5558),Ae=V(3294);function G(r){for(let s in r)if(r[s]===G)return s;throw Error("Could not find renamed property on target object.")}function X(r,s){for(const a in s)s.hasOwnProperty(a)&&!r.hasOwnProperty(a)&&(r[a]=s[a])}function le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function qe(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const Be=G({__forward_ref__:G});function rt(r){return r.__forward_ref__=rt,r.toString=function(){return le(this())},r}function Fe(r){return Je(r)?r():r}function Je(r){return"function"==typeof r&&r.hasOwnProperty(Be)&&r.__forward_ref__===rt}function Qe(r){return r&&!!r.\u0275providers}const vt="https://g.co/ng/security#xss";class de extends Error{constructor(s,a){super(function Me(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}(s,a)),this.code=s}}function ue(r){return"string"==typeof r?r:null==r?"":String(r)}function Tt(r,s){throw new de(-201,!1)}function ke(r,s){null==r&&function be(r,s,a,l){throw new Error(`ASSERTION ERROR: ${r}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,r,null,"!=")}function ot(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Sn(r){return{providers:r.providers||[],imports:r.imports||[]}}function Kn(r){return lr(r,yr)||lr(r,Vr)}function Ft(r){return null!==Kn(r)}function lr(r,s){return r.hasOwnProperty(s)?r[s]:null}function Tr(r){return r&&(r.hasOwnProperty(zr)||r.hasOwnProperty(ao))?r[zr]:null}const yr=G({\u0275prov:G}),zr=G({\u0275inj:G}),Vr=G({ngInjectableDef:G}),ao=G({ngInjectorDef:G});var Et=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(Et||{});let on;function Ln(r){const s=on;return on=r,s}function Bn(r,s,a){const l=Kn(r);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Et.Optional?null:void 0!==s?s:void Tt(le(r))}const An=globalThis;class gt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ot({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cr={},_s="__NG_DI_FLAG__",vi="ngTempTokenPath",q=/\n/gm,Ne="__source";let me;function wt(r){const s=me;return me=r,s}function _n(r,s=Et.Default){if(void 0===me)throw new de(-203,!1);return null===me?Bn(r,void 0,s):me.get(r,s&Et.Optional?null:void 0,s)}function Tn(r,s=Et.Default){return(function xt(){return on}()||_n)(Fe(r),s)}function Gt(r,s=Et.Default){return Tn(r,hn(s))}function hn(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function qr(r){const s=[];for(let a=0;a<r.length;a++){const l=Fe(r[a]);if(Array.isArray(l)){if(0===l.length)throw new de(900,!1);let d,g=Et.Default;for(let v=0;v<l.length;v++){const b=l[v],D=co(b);"number"==typeof D?-1===D?d=b.token:g|=D:d=b}s.push(Tn(d,g))}else s.push(Tn(l))}return s}function Pi(r,s){return r[_s]=s,r.prototype[_s]=s,r}function co(r){return r[_s]}function fe(r){return{toString:r}.toString()}var Ke=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(Ke||{}),mt=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(mt||{});const bt={},at=[],fn=G({\u0275cmp:G}),br=G({\u0275dir:G}),Zn=G({\u0275pipe:G}),ks=G({\u0275mod:G}),Oi=G({\u0275fac:G}),uo=G({__NG_ELEMENT_ID__:G}),Gc=G({__NG_ENV_ID__:G});function Ja(r,s,a){let l=r.length;for(;;){const d=r.indexOf(s,a);if(-1===d)return d;if(0===d||r.charCodeAt(d-1)<=32){const g=s.length;if(d+g===l||r.charCodeAt(d+g)<=32)return d}a=d+1}}function Fl(r,s,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const g=a[l++],v=a[l++],b=a[l++];r.setAttribute(s,v,b,g)}else{const g=d,v=a[++l];Kc(g)?r.setProperty(s,g,v):r.setAttribute(s,g,v),l++}}return l}function ns(r){return 3===r||4===r||6===r}function Kc(r){return 64===r.charCodeAt(0)}function Uo(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Bu(r,a,d,null,-1===a||2===a?s[++l]:null)}}return r}function Bu(r,s,a,l,d){let g=0,v=r.length;if(-1===s)v=-1;else for(;g<r.length;){const b=r[g++];if("number"==typeof b){if(b===s){v=-1;break}if(b>s){v=g-1;break}}}for(;g<r.length;){const b=r[g];if("number"==typeof b)break;if(b===a){if(null===l)return void(null!==d&&(r[g+1]=d));if(l===r[g+1])return void(r[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(r.splice(v,0,s),g=v+1),r.splice(g++,0,a),null!==l&&r.splice(g++,0,l),null!==d&&r.splice(g++,0,d)}const ur="ng-template";function ho(r,s,a){let l=0,d=!0;for(;l<r.length;){let g=r[l++];if("string"==typeof g&&d){const v=r[l++];if(a&&"class"===g&&-1!==Ja(v.toLowerCase(),s,0))return!0}else{if(1===g){for(;l<r.length&&"string"==typeof(g=r[l++]);)if(g.toLowerCase()===s)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function jd(r){return 4===r.type&&r.value!==ur}function Vu(r,s,a){return s===(4!==r.type||a?r.value:ur)}function zc(r,s,a){let l=4;const d=r.attrs||[],g=function Ho(r){for(let s=0;s<r.length;s++)if(ns(r[s]))return s;return r.length}(d);let v=!1;for(let b=0;b<s.length;b++){const D=s[b];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!Vu(r,D,a)||""===D&&1===s.length){if(Yr(l))return!1;v=!0}}else{const R=8&l?D:s[++b];if(8&l&&null!==r.attrs){if(!ho(r.attrs,R,a)){if(Yr(l))return!1;v=!0}continue}const $=Ll(8&l?"class":D,d,jd(r),a);if(-1===$){if(Yr(l))return!1;v=!0;continue}if(""!==R){let te;te=$>g?"":d[$+1].toLowerCase();const ce=8&l?te:null;if(ce&&-1!==Ja(ce,R,0)||2&l&&R!==te){if(Yr(l))return!1;v=!0}}}}else{if(!v&&!Yr(l)&&!Yr(D))return!1;if(v&&Yr(D))continue;v=!1,l=D|1&l}}return Yr(l)||v}function Yr(r){return 0==(1&r)}function Ll(r,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let g=!1;for(;d<s.length;){const v=s[d];if(v===r)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let b=s[++d];for(;"string"==typeof b;)b=s[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function Uu(r,s){let a=r.indexOf(4);if(a>-1)for(a++;a<r.length;){const l=r[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,r)}function qc(r,s,a=!1){for(let l=0;l<s.length;l++)if(zc(r,s[l],a))return!0;return!1}function Hu(r,s){return r?":not("+s.trim()+")":s}function ju(r){let s=r[0],a=1,l=2,d="",g=!1;for(;a<r.length;){let v=r[a];if("string"==typeof v)if(2&l){const b=r[++a];d+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Yr(v)&&(s+=Hu(g,d),d=""),l=v,g=g||!Yr(l);a++}return""!==d&&(s+=Hu(g,d)),s}function dr(r){return fe(()=>{const s=zh(r),a={...s,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Ke.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||mt.Emulated,styles:r.styles||at,_:null,schemas:r.schemas||null,tView:null,id:""};$u(a);const l=r.dependencies;return a.directiveDefs=fo(l,!1),a.pipeDefs=fo(l,!0),a.id=function Wu(r){let s=0;const a=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function Vl(r){return cn(r)||Qr(r)}function Qc(r){return null!==r}function Ul(r){return fe(()=>({type:r.type,bootstrap:r.bootstrap||at,declarations:r.declarations||at,imports:r.imports||at,exports:r.exports||at,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function _a(r,s){if(null==r)return bt;const a={};for(const l in r)if(r.hasOwnProperty(l)){let d=r[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,s&&(s[d]=g)}return a}function Zc(r){return fe(()=>{const s=zh(r);return $u(s),s})}function Jc(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function cn(r){return r[fn]||null}function Qr(r){return r[br]||null}function Ur(r){return r[Zn]||null}function $o(r){const s=cn(r)||Qr(r)||Ur(r);return null!==s&&s.standalone}function Ni(r,s){const a=r[ks]||null;if(!a&&!0===s)throw new Error(`Type ${le(r)} does not have '\u0275mod' property.`);return a}function zh(r){const s={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:r.inputs||bt,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||at,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_a(r.inputs,s),outputs:_a(r.outputs)}}function $u(r){r.features?.forEach(s=>s(r))}function fo(r,s){if(!r)return null;const a=s?Ur:Vl;return()=>("function"==typeof r?r():r).map(l=>a(l)).filter(Qc)}const hr=0,nt=1,Xt=2,Mt=3,un=4,el=5,yi=6,is=7,fr=8,Wo=9,vs=10,Ct=11,Hl=12,Ir=13,Fs=14,tr=15,va=16,ii=17,zn=18,Gi=19,Gu=20,ss=21,Ls=22,po=23,ys=24,Lt=25,si=1,Bs=2,ki=7,os=9,tn=11;function Xr(r){return Array.isArray(r)&&"object"==typeof r[si]}function oi(r){return Array.isArray(r)&&!0===r[si]}function jl(r){return 0!=(4&r.flags)}function ai(r){return r.componentOffset>-1}function Ea(r){return 1==(1&r.flags)}function Fi(r){return!!r.template}function go(r){return 0!=(512&r[Xt])}function mo(r,s){return r.hasOwnProperty(Oi)?r[Oi]:null}let pr=null,ba=!1;function er(r){const s=pr;return pr=r,s}const rl={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Kd(r){if(!Vs(r)||r.dirty){if(!r.producerMustRecompute(r)&&!Yu(r))return void(r.dirty=!1);r.producerRecomputeValue(r),r.dirty=!1}}function bs(r){r.dirty=!0,function zl(r){if(void 0===r.liveConsumerNode)return;const s=ba;ba=!0;try{for(const a of r.liveConsumerNode)a.dirty||bs(a)}finally{ba=s}}(r),r.consumerMarkedDirty?.(r)}function Or(r){return r&&(r.nextProducerIndex=0),er(r)}function iu(r,s){if(er(s),r&&void 0!==r.producerNode&&void 0!==r.producerIndexOfThis&&void 0!==r.producerLastReadVersion){if(Vs(r))for(let a=r.nextProducerIndex;a<r.producerNode.length;a++)il(r.producerNode[a],r.producerIndexOfThis[a]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function Yu(r){ne(r);for(let s=0;s<r.producerNode.length;s++){const a=r.producerNode[s],l=r.producerLastReadVersion[s];if(l!==a.version||(Kd(a),l!==a.version))return!0}return!1}function Qu(r){if(ne(r),Vs(r))for(let s=0;s<r.producerNode.length;s++)il(r.producerNode[s],r.producerIndexOfThis[s]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function il(r,s){if(function Re(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}(r),ne(r),1===r.liveConsumerNode.length)for(let l=0;l<r.producerNode.length;l++)il(r.producerNode[l],r.producerIndexOfThis[l]);const a=r.liveConsumerNode.length-1;if(r.liveConsumerNode[s]=r.liveConsumerNode[a],r.liveConsumerIndexOfThis[s]=r.liveConsumerIndexOfThis[a],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,s<r.liveConsumerNode.length){const l=r.liveConsumerIndexOfThis[s],d=r.liveConsumerNode[s];ne(d),d.producerIndexOfThis[l]=s}}function Vs(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function ne(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}let ql=null;function Qf(r){const s=er(null);try{return r()}finally{er(s)}}const Yd=()=>{},Ia=(()=>({...rl,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:r=>{r.schedule(r.ref)},hasRun:!1,cleanupFn:Yd}))();class Zl{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Aa(){return Jl}function Jl(r){return r.type.prototype.ngOnChanges&&(r.setInput=Us),Go}function Go(){const r=su(this),s=r?.current;if(s){const a=r.previous;if(a===bt)r.previous=s;else for(let l in s)a[l]=s[l];r.current=null,this.ngOnChanges(s)}}function Us(r,s,a,l){const d=this.declaredInputs[a],g=su(r)||function Ta(r,s){return r[Hs]=s}(r,{previous:bt,current:null}),v=g.current||(g.current={}),b=g.previous,D=b[d];v[d]=new Zl(D&&D.currentValue,s,b===bt),r[l]=s}Aa.ngInherit=!0;const Hs="__ngSimpleChanges__";function su(r){return r[Hs]||null}const js=function(r,s,a){},Qd="svg";function bn(r){for(;Array.isArray(r);)r=r[hr];return r}function Eo(r,s){return bn(s[r])}function Bi(r,s){return bn(s[r.index])}function ed(r,s){return r.data[s]}function $s(r,s){return r[s]}function Mn(r,s){const a=s[r];return Xr(a)?a:a[hr]}function Ko(r,s){return null==s?null:r[s]}function ou(r){r[ii]=0}function tc(r){1024&r[Xt]||(r[Xt]|=1024,Vn(r,1))}function au(r){1024&r[Xt]&&(r[Xt]&=-1025,Vn(r,-1))}function Vn(r,s){let a=r[Mt];if(null===a)return;a[el]+=s;let l=a;for(a=a[Mt];null!==a&&(1===s&&1===l[el]||-1===s&&0===l[el]);)a[el]+=s,l=a,a=a[Mt]}const Rt={lFrame:kr(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function cl(){return Rt.bindingsEnabled}function Le(){return Rt.lFrame.lView}function At(){return Rt.lFrame.tView}function an(r){return Rt.lFrame.contextLView=r,r[fr]}function td(r){return Rt.lFrame.contextLView=null,r}function xr(){let r=nd();for(;null!==r&&64===r.type;)r=r.parent;return r}function nd(){return Rt.lFrame.currentTNode}function Vi(r,s){const a=Rt.lFrame;a.currentTNode=r,a.isParent=s}function rd(){return Rt.lFrame.isParent}function Nr(){const r=Rt.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function nc(){return Rt.lFrame.bindingIndex++}function Zf(r,s){const a=Rt.lFrame;a.bindingIndex=a.bindingRootIndex=r,Jd(s)}function Jd(r){Rt.lFrame.currentDirectiveIndex=r}function xa(){return Rt.lFrame.currentQueryIndex}function lu(r){Rt.lFrame.currentQueryIndex=r}function Jf(r){const s=r[nt];return 2===s.type?s.declTNode:1===s.type?r[yi]:null}function Un(r,s,a){if(a&Et.SkipSelf){let d=s,g=r;for(;!(d=d.parent,null!==d||a&Et.Host||(d=Jf(g),null===d||(g=g[Fs],10&d.type))););if(null===d)return!1;s=d,r=g}const l=Rt.lFrame=ul();return l.currentTNode=s,l.lView=r,!0}function Na(r){const s=ul(),a=r[nt];Rt.lFrame=s,s.currentTNode=a.firstChild,s.lView=r,s.tView=a,s.contextLView=r,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ul(){const r=Rt.lFrame,s=null===r?null:r.child;return null===s?kr(r):s}function kr(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Dt(){const r=Rt.lFrame;return Rt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Fr=Dt;function ka(){const r=Dt();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Zr(){return Rt.lFrame.selectedIndex}function ls(r){Rt.lFrame.selectedIndex=r}function In(){const r=Rt.lFrame;return ed(r.tView,r.selectedIndex)}function wi(){Rt.lFrame.currentNamespace=Qd}function cu(){!function eh(){Rt.lFrame.currentNamespace=null}()}let cs=!0;function Ki(){return cs}function Kt(r){cs=r}function Qo(r,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const g=r.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:D,ngAfterViewChecked:R,ngOnDestroy:F}=g;v&&(r.contentHooks??=[]).push(-a,v),b&&((r.contentHooks??=[]).push(a,b),(r.contentCheckHooks??=[]).push(a,b)),D&&(r.viewHooks??=[]).push(-a,D),R&&((r.viewHooks??=[]).push(a,R),(r.viewCheckHooks??=[]).push(a,R)),null!=F&&(r.destroyHooks??=[]).push(a,F)}}function sc(r,s,a){Xo(r,s,3,a)}function Is(r,s,a,l){(3&r[Xt])===a&&Xo(r,s,a,l)}function Do(r,s){let a=r[Xt];(3&a)===s&&(a&=8191,a+=1,r[Xt]=a)}function Xo(r,s,a,l){const g=l??-1,v=s.length-1;let b=0;for(let D=void 0!==l?65535&r[ii]:0;D<v;D++)if("number"==typeof s[D+1]){if(b=s[D],null!=l&&b>=l)break}else s[D]<0&&(r[ii]+=65536),(b<g||-1==g)&&(hl(r,a,s,D),r[ii]=(4294901760&r[ii])+D+2),D++}function Zo(r,s){js(4,r,s);const a=er(null);try{s.call(r)}finally{er(a),js(5,r,s)}}function hl(r,s,a,l){const d=a[l]<0,g=a[l+1],b=r[d?-a[l]:a[l]];d?r[Xt]>>13<r[ii]>>16&&(3&r[Xt])===s&&(r[Xt]+=8192,Zo(b,g)):Zo(b,g)}const Ds=-1;class Ks{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Bt(r){return r!==Ds}function qn(r){return 32767&r}function Fa(r,s){let a=function Ts(r){return r>>16}(r),l=s;for(;a>0;)l=l[Fs],a--;return l}let us=!0;function mr(r){const s=us;return us=r,s}const fl=255,oc=5;let ea=0;const ci={};function ds(r,s){const a=zs(r,s);if(-1!==a)return a;const l=s[nt];l.firstCreatePass&&(r.injectorIndex=s.length,pl(l.data,r),pl(s,null),pl(l.blueprint,null));const d=To(r,s),g=r.injectorIndex;if(Bt(d)){const v=qn(d),b=Fa(d,s),D=b[nt].data;for(let R=0;R<8;R++)s[g+R]=b[v+R]|D[v+R]}return s[g+8]=d,g}function pl(r,s){r.push(0,0,0,0,0,0,0,0,s)}function zs(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function To(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){if(l=cc(d),null===l)return Ds;if(a++,d=d[Fs],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return Ds}function gl(r,s,a){!function Yn(r,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(uo)&&(l=a[uo]),null==l&&(l=a[uo]=ea++);const d=l&fl;s.data[r+(d>>oc)]|=1<<d}(r,s,a)}function La(r,s,a){if(a&Et.Optional||void 0!==r)return r;Tt()}function ml(r,s,a,l){if(a&Et.Optional&&void 0===l&&(l=null),!(a&(Et.Self|Et.Host))){const d=r[Wo],g=Ln(void 0);try{return d?d.get(s,l,a&Et.Optional):Bn(s,l,a&Et.Optional)}finally{Ln(g)}}return La(l,0,a)}function Ba(r,s,a,l=Et.Default,d){if(null!==r){if(2048&s[Xt]&&!(l&Et.Self)){const v=function ud(r,s,a,l,d){let g=r,v=s;for(;null!==g&&null!==v&&2048&v[Xt]&&!(512&v[Xt]);){const b=Yt(g,v,a,l|Et.Self,ci);if(b!==ci)return b;let D=g.parent;if(!D){const R=v[Gu];if(R){const F=R.get(a,ci,l);if(F!==ci)return F}D=cc(v),v=v[Fs]}g=D}return d}(r,s,a,l,ci);if(v!==ci)return v}const g=Yt(r,s,a,l,ci);if(g!==ci)return g}return ml(s,a,l,d)}function Yt(r,s,a,l,d){const g=function So(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(uo)?r[uo]:void 0;return"number"==typeof s?s>=0?s&fl:na:s}(a);if("function"==typeof g){if(!Un(s,r,l))return l&Et.Host?La(d,0,l):ml(s,a,l,d);try{let v;if(v=g(l),null!=v||l&Et.Optional)return v;Tt()}finally{Fr()}}else if("number"==typeof g){let v=null,b=zs(r,s),D=Ds,R=l&Et.Host?s[tr][yi]:null;for((-1===b||l&Et.SkipSelf)&&(D=-1===b?To(r,s):s[b+8],D!==Ds&&Ss(l,!1)?(v=s[nt],b=qn(D),s=Fa(D,s)):b=-1);-1!==b;){const F=s[nt];if(vl(g,b,F.data)){const $=_l(b,s,a,v,l,R);if($!==ci)return $}D=s[b+8],D!==Ds&&Ss(l,s[nt].data[b+8]===R)&&vl(g,b,s)?(v=F,b=qn(D),s=Fa(D,s)):b=-1}}return d}function _l(r,s,a,l,d,g){const v=s[nt],b=v.data[r+8],F=ac(b,v,a,null==l?ai(b)&&us:l!=v&&0!=(3&b.type),d&Et.Host&&g===b);return null!==F?zi(s,v,F,b):ci}function ac(r,s,a,l,d){const g=r.providerIndexes,v=s.data,b=1048575&g,D=r.directiveStart,F=g>>20,te=d?b+F:r.directiveEnd;for(let ce=l?b:b+F;ce<te;ce++){const Pe=v[ce];if(ce<D&&a===Pe||ce>=D&&Pe.type===a)return ce}if(d){const ce=v[D];if(ce&&Fi(ce)&&ce.type===a)return D}return null}function zi(r,s,a,l){let d=r[a];const g=s.data;if(function Dr(r){return r instanceof Ks}(d)){const v=d;v.resolving&&function ze(r,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new de(-200,`Circular dependency in DI detected for ${r}${a}`)}(function xe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():ue(r)}(g[a]));const b=mr(v.canSeeViewProviders);v.resolving=!0;const R=v.injectImpl?Ln(v.injectImpl):null;Un(r,l,Et.Default);try{d=r[a]=v.factory(void 0,g,r,l),s.firstCreatePass&&a>=l.directiveStart&&function ad(r,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(l){const v=Jl(s);(a.preOrderHooks??=[]).push(r,v),(a.preOrderCheckHooks??=[]).push(r,v)}d&&(a.preOrderHooks??=[]).push(0-r,d),g&&((a.preOrderHooks??=[]).push(r,g),(a.preOrderCheckHooks??=[]).push(r,g))}(a,g[a],s)}finally{null!==R&&Ln(R),mr(b),v.resolving=!1,Fr()}}return d}function vl(r,s,a){return!!(a[s+(r>>oc)]&1<<r)}function Ss(r,s){return!(r&Et.Self||r&Et.Host&&s)}class Qn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ba(this._tNode,this._lView,s,hn(l),a)}}function na(){return new Qn(xr(),Le())}function th(r){return fe(()=>{const s=r.prototype.constructor,a=s[Oi]||lc(s),l=Object.prototype;let d=Object.getPrototypeOf(r.prototype).constructor;for(;d&&d!==l;){const g=d[Oi]||lc(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function lc(r){return Je(r)?()=>{const s=lc(Fe(r));return s&&s()}:mo(r)}function cc(r){const s=r[nt],a=s.type;return 2===a?s.declTNode:1===a?r[yi]:null}function dd(r){return function du(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const a=r.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(ns(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(xr(),r)}const I="__parameters__";function J(r,s,a){return fe(()=>{const l=function B(r){return function(...a){if(r){const l=r(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return b.annotation=v,b;function b(D,R,F){const $=D.hasOwnProperty(I)?D[I]:Object.defineProperty(D,I,{value:[]})[I];for(;$.length<=F;)$.push(null);return($[F]=$[F]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=r,d.annotationCls=d,d})}function El(r,s){r.forEach(a=>Array.isArray(a)?El(a,s):s(a))}function Zh(r,s,a){s>=r.length?r.push(a):r.splice(s,0,a)}function Yi(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function Ms(r,s,a){let l=dc(r,s);return l>=0?r[1|l]=a:(l=~l,function Jh(r,s,a,l){let d=r.length;if(d==s)r.push(a,l);else if(1===d)r.push(l,r[0]),r[0]=a;else{for(d--,r.push(r[d-1],r[d]);d>s;)r[d]=r[d-2],d--;r[s]=a,r[s+1]=l}}(r,l,s,a)),l}function ef(r,s){const a=dc(r,s);if(a>=0)return r[1|a]}function dc(r,s){return function nh(r,s,a){let l=0,d=r.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=r[g<<a];if(s===v)return g<<a;v>s?d=g:l=g+1}return~(d<<a)}(r,s,1)}const fd=Pi(J("Optional"),8),rh=Pi(J("SkipSelf"),4);function Cc(r){return 128==(128&r.flags)}var gu=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(gu||{});const Ed=new Map;let Cd=0;const uh="__ngContext__";function $r(r,s){Xr(s)?(r[uh]=s[Gi],function wc(r){Ed.set(r[Gi],r)}(s)):r[uh]=s}let re;function Ue(r,s){return re(r,s)}function yt(r){const s=r[Mt];return oi(s)?s[Mt]:s}function Zi(r){return bc(r[Hl])}function aa(r){return bc(r[un])}function bc(r){for(;null!==r&&!oi(r);)r=r[un];return r}function Il(r,s,a,l,d){if(null!=l){let g,v=!1;oi(l)?g=l:Xr(l)&&(v=!0,l=l[hr]);const b=bn(l);0===r&&null!==a?null==d?__(s,a,b):Id(s,a,b,d||null,!0):1===r&&null!==a?Id(s,a,b,d||null,!0):2===r?function fp(r,s,a){const l=dp(r,s);l&&function jy(r,s,a,l){r.removeChild(s,a,l)}(r,l,s,a)}(s,b,v):3===r&&s.destroyNode(b),null!=g&&function Wy(r,s,a,l,d){const g=a[ki];g!==bn(a)&&Il(s,r,l,g,d);for(let b=tn;b<a.length;b++){const D=a[b];Dd(D[nt],D,r,s,l,g)}}(s,r,g,a,d)}}function _u(r,s,a){return r.createElement(s,a)}function f_(r,s){const a=r[os],l=a.indexOf(s);au(s),a.splice(l,1)}function cp(r,s){if(r.length<=tn)return;const a=tn+s,l=r[a];if(l){const d=l[va];null!==d&&d!==r&&f_(d,l),s>0&&(r[a-1][un]=l[un]);const g=Yi(r,tn+s);!function Dc(r,s){Dd(r,s,s[Ct],2,null,null),s[hr]=null,s[yi]=null}(l[nt],l);const v=g[zn];null!==v&&v.detachView(g[nt]),l[Mt]=null,l[un]=null,l[Xt]&=-129}return l}function p_(r,s){if(!(256&s[Xt])){const a=s[Ct];s[po]&&Qu(s[po]),s[ys]&&Qu(s[ys]),a.destroyNode&&Dd(r,s,a,3,null,null),function Sg(r){let s=r[Hl];if(!s)return Mg(r[nt],r);for(;s;){let a=null;if(Xr(s))a=s[Hl];else{const l=s[tn];l&&(a=l)}if(!a){for(;s&&!s[un]&&s!==r;)Xr(s)&&Mg(s[nt],s),s=s[Mt];null===s&&(s=r),Xr(s)&&Mg(s[nt],s),a=s&&s[un]}s=a}}(s)}}function Mg(r,s){if(!(256&s[Xt])){s[Xt]&=-129,s[Xt]|=256,function up(r,s){let a;if(null!=r&&null!=(a=r.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Ks)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const b=d[g[v]],D=g[v+1];js(4,b,D);try{D.call(b)}finally{js(5,b,D)}}else{js(4,d,g);try{g.call(d)}finally{js(5,d,g)}}}}}(r,s),function g_(r,s){const a=r.cleanup,l=s[is];if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+3];v>=0?l[v]():l[-v].unsubscribe(),g+=2}else a[g].call(l[a[g+1]]);null!==l&&(s[is]=null);const d=s[ss];if(null!==d){s[ss]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(r,s),1===s[nt].type&&s[Ct].destroy();const a=s[va];if(null!==a&&oi(s[Mt])){a!==s[Mt]&&f_(a,s);const l=s[zn];null!==l&&l.detachView(r)}!function sp(r){Ed.delete(r[Gi])}(s)}}function Di(r,s,a){return function m_(r,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[hr];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:g}=r.data[l.directiveStart+d];if(g===mt.None||g===mt.Emulated)return null}return Bi(l,a)}}(r,s.parent,a)}function Id(r,s,a,l,d){r.insertBefore(s,a,l,d)}function __(r,s,a){r.appendChild(s,a)}function Rg(r,s,a,l,d){null!==l?Id(r,s,a,l,d):__(r,s,a)}function dp(r,s){return r.parentNode(s)}let fh,gp,mp,_p,v_=function Pg(r,s,a){return 40&r.type?Bi(r,a):null};function Ac(r,s,a,l){const d=Di(r,l,s),g=s[Ct],b=function hp(r,s,a){return v_(r,s,a)}(l.parent||s[yi],l,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)Rg(g,d,a[D],b,!1);else Rg(g,d,a,b,!1);void 0!==fh&&fh(g,l,s,a,d)}function ph(r,s){if(null!==s){const a=s.type;if(3&a)return Bi(s,r);if(4&a)return xg(-1,r[s.index]);if(8&a){const l=s.child;if(null!==l)return ph(r,l);{const d=r[s.index];return oi(d)?xg(-1,d):bn(d)}}if(32&a)return Ue(s,r)()||bn(r[s.index]);{const l=y_(r,s);return null!==l?Array.isArray(l)?l[0]:ph(yt(r[tr]),l):ph(r,s.next)}}return null}function y_(r,s){return null!==s?r[tr][yi].projection[s.projection]:null}function xg(r,s){const a=tn+r+1;if(a<s.length){const l=s[a],d=l[nt].firstChild;if(null!==d)return ph(l,d)}return s[ki]}function Ng(r,s,a,l,d,g,v){for(;null!=a;){const b=l[a.index],D=a.type;if(v&&0===s&&(b&&$r(bn(b),l),a.flags|=2),32!=(32&a.flags))if(8&D)Ng(r,s,a.child,l,d,g,!1),Il(s,r,d,b,g);else if(32&D){const R=Ue(a,l);let F;for(;F=R();)Il(s,r,d,F,g);Il(s,r,d,b,g)}else 16&D?C_(r,s,l,a,d,g):Il(s,r,d,b,g);a=v?a.projectionNext:a.next}}function Dd(r,s,a,l,d,g){Ng(a,l,r.firstChild,s,d,g,!1)}function C_(r,s,a,l,d,g){const v=a[tr],D=v[yi].projection[l.projection];if(Array.isArray(D))for(let R=0;R<D.length;R++)Il(s,r,d,D[R],g);else{let R=D;const F=v[Mt];Cc(l)&&(R.flags|=128),Ng(r,s,R,F,d,g,!0)}}function df(r,s,a){""===a?r.removeAttribute(s,"class"):r.setAttribute(s,"class",a)}function w_(r,s,a){const{mergedAttrs:l,classes:d,styles:g}=a;null!==l&&Fl(r,s,l),null!==d&&df(r,s,d),null!==g&&function Ky(r,s,a){r.setAttribute(s,"style",a)}(r,s,g)}function Ad(r){return function hf(){if(void 0===gp&&(gp=null,An.trustedTypes))try{gp=An.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return gp}()?.createHTML(r)||r}function b_(r){mp=r}function gh(){if(void 0!==mp)return mp;if(typeof document<"u")return document;throw new de(210,!1)}function vp(){if(void 0===_p&&(_p=null,An.trustedTypes))try{_p=An.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return _p}function I_(r){return vp()?.createHTML(r)||r}function D_(r){return vp()?.createScriptURL(r)||r}class kg{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vt})`}}function Tc(r){return r instanceof kg?r.changingThisBreaksApplicationSecurity:r}function vu(r,s){const a=function A_(r){return r instanceof kg&&r.getTypeName()||null}(r);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${vt})`)}return a===s}class T_{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ad(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch{return null}}}class S_{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const a=this.inertDocument.createElement("template");return a.innerHTML=Ad(s),a}}const M_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bg(r){return(r=String(r)).match(M_)?r:"unsafe:"+r}function Sc(r){const s={};for(const a of r.split(","))s[a]=!0;return s}function yu(...r){const s={};for(const a of r)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const R_=Sc("area,br,col,hr,img,wbr"),Ps=Sc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),P_=Sc("rp,rt"),Vg=yu(R_,yu(Ps,Sc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yu(P_,Sc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yu(P_,Ps)),Ep=Sc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),O_=yu(Ep,Sc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_h=Sc("script,style,template");class x_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Vg.hasOwnProperty(a))return this.sanitizedSomething=!0,!_h.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const g=l.item(d),v=g.name,b=v.toLowerCase();if(!O_.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let D=g.value;Ep[b]&&(D=Bg(D)),this.buf.push(" ",v,'="',ca(D),'"')}return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Vg.hasOwnProperty(a)&&!R_.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(ca(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const eE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ug=/([^\#-~ |!])/g;function ca(r){return r.replace(/&/g,"&amp;").replace(eE,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Ug,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mf;function Hg(r){return"content"in r&&function nE(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Td=function(r){return r[r.NONE=0]="NONE",r[r.HTML=1]="HTML",r[r.STYLE=2]="STYLE",r[r.SCRIPT=3]="SCRIPT",r[r.URL=4]="URL",r[r.RESOURCE_URL=5]="RESOURCE_URL",r}(Td||{});function jg(r){const s=Cp();return s?I_(s.sanitize(Td.HTML,r)||""):vu(r,"HTML")?I_(Tc(r)):function tE(r,s){let a=null;try{mf=mf||function pf(r){const s=new S_(r);return function gf(){try{return!!(new window.DOMParser).parseFromString(Ad(""),"text/html")}catch{return!1}}()?new T_(s):s}(r);let l=s?String(s):"";a=mf.getInertBodyElement(l);let d=5,g=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=g,g=a.innerHTML,a=mf.getInertBodyElement(l)}while(l!==g);return Ad((new x_).sanitizeChildren(Hg(a)||a))}finally{if(a){const l=Hg(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}(gh(),ue(r))}function vh(r){const s=Cp();return s?s.sanitize(Td.URL,r)||"":vu(r,"URL")?Tc(r):Bg(ue(r))}function _f(r){const s=Cp();if(s)return D_(s.sanitize(Td.RESOURCE_URL,r)||"");if(vu(r,"ResourceURL"))return D_(Tc(r));throw new de(904,!1)}function iE(r,s,a){return function rE(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?_f:vh}(s,a)(r)}function Cp(){const r=Le();return r&&r[vs].sanitizer}const yh=new gt("ENVIRONMENT_INITIALIZER"),k_=new gt("INJECTOR",-1),F_=new gt("INJECTOR_DEF_TYPES");class Sd{get(s,a=cr){if(a===cr){const l=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw l.name="NullInjectorError",l}return a}}function sE(...r){return{\u0275providers:B_(0,r),\u0275fromNgModule:!0}}function B_(r,...s){const a=[],l=new Set;let d;const g=v=>{a.push(v)};return El(s,v=>{const b=v;Qs(b,g,[],l)&&(d||=[],d.push(b))}),void 0!==d&&V_(d,g),a}function V_(r,s){for(let a=0;a<r.length;a++){const{ngModule:l,providers:d}=r[a];Gg(d,g=>{s(g,l)})}}function Qs(r,s,a,l){if(!(r=Fe(r)))return!1;let d=null,g=Tr(r);const v=!g&&cn(r);if(g||v){if(v&&!v.standalone)return!1;d=r}else{const D=r.ngModule;if(g=Tr(D),!g)return!1;d=D}const b=l.has(d);if(v){if(b)return!1;if(l.add(d),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of D)Qs(R,s,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!b){let R;l.add(d);try{El(g.imports,F=>{Qs(F,s,a,l)&&(R||=[],R.push(F))})}finally{}void 0!==R&&V_(R,s)}if(!b){const R=mo(d)||(()=>new d);s({provide:d,useFactory:R,deps:at},d),s({provide:F_,useValue:d,multi:!0},d),s({provide:yh,useValue:()=>Tn(d),multi:!0},d)}const D=g.providers;if(null!=D&&!b){const R=r;Gg(D,F=>{s(F,R)})}}}return d!==r&&void 0!==r.providers}function Gg(r,s){for(let a of r)Qe(a)&&(a=a.\u0275providers),Array.isArray(a)?Gg(a,s):s(a)}const Eh=G({provide:String,useValue:G});function rn(r){return null!==r&&"object"==typeof r&&Eh in r}function _r(r){return"function"==typeof r}const ua=new gt("Set Injector scope."),Eu={},Kg={};let Ji;function vf(){return void 0===Ji&&(Ji=new Sd),Ji}class qa{}class Cu extends qa{get destroyed(){return this._destroyed}constructor(s,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zs(s,v=>this.processProvider(v)),this.records.set(k_,Xn(void 0,this)),d.has("environment")&&this.records.set(qa,Xn(void 0,this));const g=this.records.get(ua);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(F_.multi,at,Et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=wt(this),l=Ln(void 0);try{return s()}finally{wt(a),Ln(l)}}get(s,a=cr,l=Et.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Gc))return s[Gc](this);l=hn(l);const g=wt(this),v=Ln(void 0);try{if(!(l&Et.SkipSelf)){let D=this.records.get(s);if(void 0===D){const R=function lE(r){return"function"==typeof r||"object"==typeof r&&r instanceof gt}(s)&&Kn(s);D=R&&this.injectableDefInScope(R)?Xn(zg(s),Eu):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(l&Et.Self?vf():this.parent).get(s,a=l&Et.Optional&&a===cr?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[vi]=b[vi]||[]).unshift(le(s)),g)throw b;return function Za(r,s,a,l){const d=r[vi];throw s[Ne]&&d.unshift(s[Ne]),r.message=function Te(r,s,a,l=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let d=le(s);if(Array.isArray(s))d=s.map(le).join(" -> ");else if("object"==typeof s){let g=[];for(let v in s)if(s.hasOwnProperty(v)){let b=s[v];g.push(v+":"+("string"==typeof b?JSON.stringify(b):le(b)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${r.replace(q,"\n  ")}`}("\n"+r.message,d,a,l),r.ngTokenPath=d,r[vi]=null,r}(b,s,"R3InjectorError",this.source)}throw b}finally{Ln(v),wt(g)}}resolveInjectorInitializers(){const s=wt(this),a=Ln(void 0);try{const d=this.get(yh.multi,at,Et.Self);for(const g of d)g()}finally{wt(s),Ln(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(le(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(s){let a=_r(s=Fe(s))?s:Fe(s&&s.provide);const l=function Ch(r){return rn(r)?Xn(void 0,r.useValue):Xn(Rc(r),Eu)}(s);if(_r(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Xn(void 0,Eu,!0),d.factory=()=>qr(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===Eu&&(a.value=Kg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function U_(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Fe(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function zg(r){const s=Kn(r),a=null!==s?s.factory:mo(r);if(null!==a)return a;if(r instanceof gt)throw new de(204,!1);if(r instanceof Function)return function Mc(r){const s=r.length;if(s>0)throw function hu(r,s){const a=[];for(let l=0;l<r;l++)a.push(s);return a}(s,"?"),new de(204,!1);const a=function Fn(r){return r&&(r[yr]||r[Vr])||null}(r);return null!==a?()=>a.factory(r):()=>new r}(r);throw new de(204,!1)}function Rc(r,s,a){let l;if(_r(r)){const d=Fe(r);return mo(d)||zg(d)}if(rn(r))l=()=>Fe(r.useValue);else if(function Xs(r){return!(!r||!r.useFactory)}(r))l=()=>r.useFactory(...qr(r.deps||[]));else if(function aE(r){return!(!r||!r.useExisting)}(r))l=()=>Tn(Fe(r.useExisting));else{const d=Fe(r&&(r.useClass||r.provide));if(!function Wr(r){return!!r.deps}(r))return mo(d)||zg(d);l=()=>new d(...qr(r.deps))}return l}function Xn(r,s,a=!1){return{factory:r,value:s,multi:a?[]:void 0}}function Zs(r,s){for(const a of r)Array.isArray(a)?Zs(a,s):a&&Qe(a)?Zs(a.\u0275providers,s):s(a)}const da=new gt("AppId",{providedIn:"root",factory:()=>Gw}),Gw="ng",H_=new gt("Platform Initializer"),Pc=new gt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),W=new gt("CSP nonce",{providedIn:"root",factory:()=>gh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Js=(r,s,a)=>null;function bh(r,s,a=!1){return Js(r,s,a)}class hE{}class Ap{}class Ti{resolveComponentFactory(s){throw function fE(r){const s=Error(`No component factory found for ${le(r)}.`);return s.ngComponent=r,s}(s)}}let Gr=(()=>{class r{static{this.NULL=new Ti}}return r})();function pE(){return Tl(xr(),Le())}function Tl(r,s){return new Cf(Bi(r,s))}let Cf=(()=>{class r{constructor(a){this.nativeElement=a}static{this.__NG_ELEMENT_ID__=pE}}return r})();function K_(r){return r instanceof Cf?r.nativeElement:r}class Ah{}let Tp=(()=>{class r{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function z_(){const r=Le(),a=Mn(xr().index,r);return(Xr(a)?a:r)[Ct]}()}}return r})(),Qg=(()=>{class r{static{this.\u0275prov=ot({token:r,providedIn:"root",factory:()=>null})}}return r})();class Xg{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Zg=new Xg("16.2.12"),Sp={};function Pp(r,s=null,a=null,l){const d=tm(r,s,a,l);return d.resolveInjectorInitializers(),d}function tm(r,s=null,a=null,l,d=new Set){const g=[a||at,sE(r)];return l=l||("object"==typeof r?void 0:le(r)),new Cu(g,s||vf(),l||null,d)}let ha=(()=>{class r{static{this.THROW_IF_NOT_FOUND=cr}static{this.NULL=new Sd}static create(a,l){if(Array.isArray(a))return Pp({name:""},l,a,"");{const d=a.name??"";return Pp({name:d},a.parent,a.providers,d)}}static{this.\u0275prov=ot({token:r,providedIn:"any",factory:()=>Tn(k_)})}static{this.__NG_ELEMENT_ID__=-1}}return r})();function rm(r){return r.ngOriginalError}class Au{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&rm(s);for(;a&&rm(a);)a=rm(a);return a||null}}function im(r){return s=>{setTimeout(r,void 0,s)}}const Sl=class mE extends h.B{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){let d=s,g=a||(()=>null),v=l;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),g=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(g=im(g),d&&(d=im(d)),v&&(v=im(v)));const b=super.subscribe({next:d,error:g,complete:v});return s instanceof N.yU&&s.add(b),b}};function ev(...r){}class Si{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sl(!1),this.onMicrotaskEmpty=new Sl(!1),this.onStable=new Sl(!1),this.onError=new Sl(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function _E(){const r="function"==typeof An.requestAnimationFrame;let s=An[r?"requestAnimationFrame":"setTimeout"],a=An[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Tu(r){const s=()=>{!function EE(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(An,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,If(r),r.isCheckStableRunning=!0,sm(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),If(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,b)=>{if(function CE(r){return!(!Array.isArray(r)||1!==r.length)&&!0===r[0].data?.__ignore_ng_zone__}(b))return a.invokeTask(d,g,v,b);try{return tv(r),a.invokeTask(d,g,v,b)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||r.shouldCoalesceRunChangeDetection)&&s(),nv(r)}},onInvoke:(a,l,d,g,v,b,D)=>{try{return tv(r),a.invoke(d,g,v,b,D)}finally{r.shouldCoalesceRunChangeDetection&&s(),nv(r)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(r._hasPendingMicrotasks=g.microTask,If(r),sm(r)):"macroTask"==g.change&&(r.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),r.runOutsideAngular(()=>r.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Si.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Si.isInAngularZone())throw new de(909,!1)}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,s,yE,ev,ev);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const yE={};function sm(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function If(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function tv(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function nv(r){r._nesting--,sm(r)}class Op{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sl,this.onMicrotaskEmpty=new Sl,this.onStable=new Sl,this.onError=new Sl}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}const Pd=new gt("",{providedIn:"root",factory:om});function om(){const r=Gt(Si);let s=!0;const a=new H.c(d=>{s=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{d.next(s),d.complete()})}),l=new H.c(d=>{let g;r.runOutsideAngular(()=>{g=r.onStable.subscribe(()=>{Si.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const v=r.onUnstable.subscribe(()=>{Si.assertInAngularZone(),s&&(s=!1,r.runOutsideAngular(()=>{d.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,he.h)(a,l.pipe((0,Se.u)()))}function xp(r){return r.ownerDocument.defaultView}function Ml(r){return r instanceof Function?r():r}let es=(()=>{class r{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=ot({token:r,providedIn:"root",factory:()=>new r})}}return r})();function Mu(r){for(;r;){r[Xt]|=64;const s=yt(r);if(go(r)&&!s)return r;r=s}return null}const dm=new gt("",{providedIn:"root",factory:()=>!1});let xd=null;function ir(r,s){return r[s]??Vp()}function vn(r,s){const a=Vp();a.producerNode?.length&&(r[s]=xd,a.lView=r,xd=av())}const Os={...rl,consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{Mu(r.lView)},lView:null};function av(){return Object.create(Os)}function Vp(){return xd??=av(),xd}const Ot={};function lv(r){cv(At(),Le(),Zr()+r,!1)}function cv(r,s,a,l){if(!l)if(3==(3&s[Xt])){const g=r.preOrderCheckHooks;null!==g&&sc(s,g,a)}else{const g=r.preOrderHooks;null!==g&&Is(s,g,0,a)}ls(a)}function Rh(r,s=Et.Default){const a=Le();return null===a?Tn(r,s):Ba(xr(),a,Fe(r),s)}function hm(){throw new Error("invalid")}function Ph(r,s,a,l,d,g,v,b,D,R,F){const $=s.blueprint.slice();return $[hr]=d,$[Xt]=140|l,(null!==R||r&&2048&r[Xt])&&($[Xt]|=2048),ou($),$[Mt]=$[Fs]=r,$[fr]=a,$[vs]=v||r&&r[vs],$[Ct]=b||r&&r[Ct],$[Wo]=D||r&&r[Wo]||null,$[yi]=g,$[Gi]=function Xi(){return Cd++}(),$[Ls]=F,$[Gu]=R,$[tr]=2==s.type?r[tr]:$,$}function Rl(r,s,a,l,d){let g=r.data[s];if(null===g)g=function fm(r,s,a,l,d){const g=nd(),v=rd(),D=r.data[s]=function K(r,s,a,l,d,g){let v=s?s.injectorIndex:-1,b=0;return function qo(){return null!==Rt.skipHydrationRootTNode}()&&(b|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:b,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,s,l,d);return null===r.firstChild&&(r.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D,D.prev=g)),D}(r,s,a,l,d),function Io(){return Rt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Co(){const r=Rt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Vi(g,!0),g}function Oh(r,s,a,l){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(l),r.blueprint.push(l),r.data.push(null);return d}function uv(r,s,a,l,d){const g=ir(s,po),v=Zr(),b=2&l;try{ls(-1),b&&s.length>Lt&&cv(r,s,Lt,!1),js(b?2:0,d);const R=b?g:null,F=Or(R);try{null!==R&&(R.dirty=!1),a(l,d)}finally{iu(R,F)}}finally{b&&null===s[po]&&vn(s,po),ls(v),js(b?3:1,d)}}function pm(r,s,a){if(jl(s)){const l=er(null);try{const g=s.directiveEnd;for(let v=s.directiveStart;v<g;v++){const b=r.data[v];b.contentQueries&&b.contentQueries(1,a[v],v)}}finally{er(l)}}}function gm(r,s,a){cl()&&(function No(r,s,a,l){const d=a.directiveStart,g=a.directiveEnd;ai(a)&&function mn(r,s,a){const l=Bi(s,r),d=Ru(a);let v=16;a.signals?v=4096:a.onPush&&(v=64);const b=_m(r,Ph(r,d,null,v,l,s,null,r[vs].rendererFactory.createRenderer(l,a),null,null,null));r[s.index]=b}(s,a,r.data[d+a.componentOffset]),r.firstCreatePass||ds(a,s),$r(l,s);const v=a.initialInputs;for(let b=d;b<g;b++){const D=r.data[b],R=zi(s,r,b,a);$r(R,s),null!==v&&z0(0,b-d,R,D,0,v),Fi(D)&&(Mn(a.index,s)[fr]=zi(s,r,b,a))}}(r,s,a,Bi(a,s)),64==(64&a.flags)&&gn(r,s,a))}function Up(r,s,a=Bi){const l=s.localNames;if(null!==l){let d=s.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],b=-1===v?a(s,r):r[v];r[d++]=b}}}function Ru(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=yn(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):s}function yn(r,s,a,l,d,g,v,b,D,R,F){const $=Lt+l,te=$+d,ce=function Hp(r,s){const a=[];for(let l=0;l<s;l++)a.push(l<r?null:Ot);return a}($,te),Pe="function"==typeof R?R():R;return ce[nt]={type:r,blueprint:ce,template:a,queries:null,viewQuery:b,declTNode:s,data:ce.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Pe,incompleteFirstPass:!1,ssrId:F}}let E=r=>null;function ee(r,s,a,l){for(let d in r)if(r.hasOwnProperty(d)){a=null===a?{}:a;const g=r[d];null===l?ae(a,s,d,g):l.hasOwnProperty(d)&&ae(a,s,l[d],g)}return a}function ae(r,s,a,l){r.hasOwnProperty(a)?r[a].push(s,l):r[a]=[s,l]}function ln(r,s,a,l){if(cl()){const d=null===l?null:{"":-1},g=function ti(r,s){const a=r.directiveRegistry;let l=null,d=null;if(a)for(let g=0;g<a.length;g++){const v=a[g];if(qc(s,v.selectors,!1))if(l||(l=[]),Fi(v))if(null!==v.findHostDirectiveDefs){const b=[];d=d||new Map,v.findHostDirectiveDefs(v,b,d),l.unshift(...b,v),fs(r,s,b.length)}else l.unshift(v),fs(r,s,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,l,d),l.push(v)}return null===l?null:[l,d]}(r,a);let v,b;null===g?v=b=null:[v,b]=g,null!==v&&jt(r,s,a,v,d,b),d&&function Qa(r,s,a){if(s){const l=r.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new de(-301,!1);l.push(s[d],g)}}}(a,l,d)}a.mergedAttrs=Uo(a.mergedAttrs,a.attrs)}function jt(r,s,a,l,d,g){for(let R=0;R<l.length;R++)gl(ds(a,s),r,l[R].type);!function Fd(r,s,a){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+a,r.providerIndexes=s}(a,r.data.length,l.length);for(let R=0;R<l.length;R++){const F=l[R];F.providersResolver&&F.providersResolver(F)}let v=!1,b=!1,D=Oh(r,s,l.length,null);for(let R=0;R<l.length;R++){const F=l[R];a.mergedAttrs=Uo(a.mergedAttrs,F.hostAttrs),mm(r,a,s,D,F),kd(D,F,d),null!==F.contentQueries&&(a.flags|=4),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=64);const $=F.type.prototype;!v&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((r.preOrderHooks??=[]).push(a.index),v=!0),!b&&($.ngOnChanges||$.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(a.index),b=!0),D++}!function Ve(r,s,a){const d=s.directiveEnd,g=r.data,v=s.attrs,b=[];let D=null,R=null;for(let F=s.directiveStart;F<d;F++){const $=g[F],te=a?a.get($):null,Pe=te?te.outputs:null;D=ee($.inputs,F,D,te?te.inputs:null),R=ee($.outputs,F,R,Pe);const Ye=null===D||null===v||jd(s)?null:bE(D,F,v);b.push(Ye)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=b,s.inputs=D,s.outputs=R}(r,a,g)}function gn(r,s,a){const l=a.directiveStart,d=a.directiveEnd,g=a.index,v=function Zd(){return Rt.lFrame.currentDirectiveIndex}();try{ls(g);for(let b=l;b<d;b++){const D=r.data[b],R=s[b];Jd(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&ko(D,R)}}finally{ls(-1),Jd(v)}}function ko(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function fs(r,s,a){s.componentOffset=a,(r.components??=[]).push(s.index)}function kd(r,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=r;Fi(s)&&(a[""]=r)}}function mm(r,s,a,l,d){r.data[l]=d;const g=d.factory||(d.factory=mo(d.type)),v=new Ks(g,Fi(d),Rh);r.blueprint[l]=v,a[l]=v,function Dn(r,s,a,l,d){const g=d.hostBindings;if(g){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const b=~s.index;(function Rn(r){let s=r.length;for(;s>0;){const a=r[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=b&&v.push(b),v.push(a,l,g)}}(r,s,l,Oh(r,a,d.hostVars,Ot),d)}function Pu(r,s,a,l,d,g){const v=Bi(r,s);!function Df(r,s,a,l,d,g,v){if(null==g)r.removeAttribute(s,d,a);else{const b=null==v?ue(g):v(g,l||"",d);r.setAttribute(s,d,b,a)}}(s[Ct],v,g,r.value,a,l,d)}function z0(r,s,a,l,d,g){const v=g[s];if(null!==v)for(let b=0;b<v.length;)Kr(l,a,v[b++],v[b++],v[b++])}function Kr(r,s,a,l,d){const g=er(null);try{const v=r.inputTransforms;null!==v&&v.hasOwnProperty(l)&&(d=v[l].call(s,d)),null!==r.setInput?r.setInput(s,d,a,l):s[l]=d}finally{er(g)}}function bE(r,s,a){let l=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(r.hasOwnProperty(g)){null===l&&(l=[]);const v=r[g];for(let b=0;b<v.length;b+=2)if(v[b]===s){l.push(g,v[b+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function qw(r,s,a,l){return[r,!0,!1,s,null,0,l,a,null,null,null]}function dv(r,s){const a=r.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const g=a[l+1];if(-1!==g){const v=r.data[g];lu(a[l]),v.contentQueries(2,s[g],g)}}}function _m(r,s){return r[Hl]?r[Ir][un]=s:r[Hl]=s,r[Ir]=s,s}function xh(r,s,a){lu(0);const l=er(null);try{s(r,a)}finally{er(l)}}function jp(r){return r[is]||(r[is]=[])}function Yw(r){return r.cleanup||(r.cleanup=[])}function $p(r,s){const a=r[Wo],l=a?a.get(Au,null):null;l&&l.handleError(s)}function IE(r,s,a,l,d){for(let g=0;g<a.length;){const v=a[g++],b=a[g++];Kr(r.data[v],s[v],l,b,d)}}function q0(r,s){const a=Mn(s,r),l=a[nt];!function Y0(r,s){for(let a=s.length;a<r.blueprint.length;a++)s.push(r.blueprint[a])}(l,a);const d=a[hr];null!==d&&null===a[Ls]&&(a[Ls]=bh(d,a[Wo])),DE(l,a,a[fr])}function DE(r,s,a){Na(s);try{const l=r.viewQuery;null!==l&&xh(1,l,a);const d=r.template;null!==d&&uv(r,s,d,1,a),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&dv(r,s),r.staticViewQueries&&xh(2,r.viewQuery,a);const g=r.components;null!==g&&function AE(r,s){for(let a=0;a<s.length;a++)q0(r,s[a])}(s,g)}catch(l){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),l}finally{s[Xt]&=-5,ka()}}let Qw=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(a,l,d){const g=typeof Zone>"u"?null:Zone.current,v=function qd(r,s,a){const l=Object.create(Ia);a&&(l.consumerAllowSignalWrites=!0),l.fn=r,l.schedule=s;const d=v=>{l.cleanupFn=v};return l.ref={notify:()=>bs(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Yu(l))return;l.hasRun=!0;const v=Or(l);try{l.cleanupFn(),l.cleanupFn=Yd,l.fn(d)}finally{iu(l,v)}},cleanup:()=>l.cleanupFn()},l.ref}(a,R=>{this.all.has(R)&&this.queue.set(R,g)},d);let b;this.all.add(v),v.notify();const D=()=>{v.cleanup(),b?.(),this.all.delete(v),this.queue.delete(v)};return b=l?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,l]of this.queue)this.queue.delete(a),l?l.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=ot({token:r,providedIn:"root",factory:()=>new r})}}return r})();function pv(r,s,a){let l=a?r.styles:null,d=a?r.classes:null,g=0;if(null!==s)for(let v=0;v<s.length;v++){const b=s[v];"number"==typeof b?g=b:1==g?d=qe(d,b):2==g&&(l=qe(l,b+": "+s[++v]+";"))}a?r.styles=l:r.stylesWithoutHost=l,a?r.classes=d:r.classesWithoutHost=d}function Nh(r,s,a,l,d=!1){for(;null!==a;){const g=s[a.index];null!==g&&l.push(bn(g)),oi(g)&&SE(g,l);const v=a.type;if(8&v)Nh(r,s,a.child,l);else if(32&v){const b=Ue(a,s);let D;for(;D=b();)l.push(D)}else if(16&v){const b=y_(s,a);if(Array.isArray(b))l.push(...b);else{const D=yt(s[tr]);Nh(D[nt],D,b,l,!0)}}a=d?a.projectionNext:a.next}return l}function SE(r,s){for(let a=tn;a<r.length;a++){const l=r[a],d=l[nt].firstChild;null!==d&&Nh(l[nt],l,d,s)}r[ki]!==r[hr]&&s.push(r[ki])}function vm(r,s,a,l=!0){const d=s[vs],g=d.rendererFactory,v=d.afterRenderEventManager;g.begin?.(),v?.begin();try{ym(r,s,r.template,a)}catch(D){throw l&&$p(s,D),D}finally{g.end?.(),d.effectManager?.flush(),v?.end()}}function ym(r,s,a,l){const d=s[Xt];if(256!=(256&d)){s[vs].effectManager?.flush(),Na(s);try{ou(s),function sd(r){return Rt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==a&&uv(r,s,a,2,l);const v=3==(3&d);if(v){const R=r.preOrderCheckHooks;null!==R&&sc(s,R,null)}else{const R=r.preOrderHooks;null!==R&&Is(s,R,0,null),Do(s,0)}if(function RE(r){for(let s=Zi(r);null!==s;s=aa(s)){if(!s[Bs])continue;const a=s[os];for(let l=0;l<a.length;l++){tc(a[l])}}}(s),Af(s,2),null!==r.contentQueries&&dv(r,s),v){const R=r.contentCheckHooks;null!==R&&sc(s,R)}else{const R=r.contentHooks;null!==R&&Is(s,R,1),Do(s,1)}!function Nd(r,s){const a=r.hostBindingOpCodes;if(null===a)return;const l=ir(s,ys);try{for(let d=0;d<a.length;d++){const g=a[d];if(g<0)ls(~g);else{const v=g,b=a[++d],D=a[++d];Zf(b,v),l.dirty=!1;const R=Or(l);try{D(2,s[v])}finally{iu(l,R)}}}}finally{null===s[ys]&&vn(s,ys),ls(-1)}}(r,s);const b=r.components;null!==b&&Zw(s,b,0);const D=r.viewQuery;if(null!==D&&xh(2,D,l),v){const R=r.viewCheckHooks;null!==R&&sc(s,R)}else{const R=r.viewHooks;null!==R&&Is(s,R,2),Do(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[Xt]&=-73,au(s)}finally{ka()}}}function Af(r,s){for(let a=Zi(r);null!==a;a=aa(a))for(let l=tn;l<a.length;l++)Xw(a[l],s)}function PE(r,s,a){Xw(Mn(s,r),a)}function Xw(r,s){if(!function Yh(r){return 128==(128&r[Xt])}(r))return;const a=r[nt],l=r[Xt];if(80&l&&0===s||1024&l||2===s)ym(a,r,a.template,r[fr]);else if(r[el]>0){Af(r,1);const d=a.components;null!==d&&Zw(r,d,1)}}function Zw(r,s,a){for(let l=0;l<s.length;l++)PE(r,s[l],a)}class Wp{get rootNodes(){const s=this._lView,a=s[nt];return Nh(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fr]}set context(s){this._lView[fr]=s}get destroyed(){return 256==(256&this._lView[Xt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Mt];if(oi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(cp(s,l),Yi(a,l))}this._attachedToViewContainer=!1}p_(this._lView[nt],this._lView)}onDestroy(s){!function ll(r,s){if(256==(256&r[Xt]))throw new de(911,!1);null===r[ss]&&(r[ss]=[]),r[ss].push(s)}(this._lView,s)}markForCheck(){Mu(this._cdRefInjectingView||this._lView)}detach(){this._lView[Xt]&=-129}reattach(){this._lView[Xt]|=128}detectChanges(){vm(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ap(r,s){Dd(r,s,s[Ct],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=s}}class X0 extends Wp{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;vm(s[nt],s,s[fr],!1)}checkNoChanges(){}get context(){return null}}class Jw extends Gr{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=cn(s);return new Tf(a,this.ngModule)}}function eb(r){const s=[];for(let a in r)r.hasOwnProperty(a)&&s.push({propName:r[a],templateName:a});return s}class OE{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){l=hn(l);const d=this.injector.get(s,Sp,l);return d!==Sp||a===Sp?d:this.parentInjector.get(s,a,l)}}class Tf extends Ap{get inputs(){const s=this.componentDef,a=s.inputTransforms,l=eb(s.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return eb(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function xi(r){return r.map(ju).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,l,d){let g=(d=d||this.ngModule)instanceof qa?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new OE(s,g):s,b=v.get(Ah,null);if(null===b)throw new de(407,!1);const $={rendererFactory:b,sanitizer:v.get(Qg,null),effectManager:v.get(Qw,null),afterRenderEventManager:v.get(es,null)},te=b.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",Pe=l?function c(r,s,a,l){const g=l.get(dm,!1)||a===mt.ShadowDom,v=r.selectRootElement(s,g);return function f(r){E(r)}(v),v}(te,l,this.componentDef.encapsulation,v):_u(te,ce,function Ou(r){const s=r.toLowerCase();return"svg"===s?Qd:"math"===s?"math":null}(ce)),Pt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let We=null;null!==Pe&&(We=bh(Pe,v,!0));const nn=yn(0,null,null,1,0,null,null,null,null,null,null),dn=Ph(null,nn,null,Pt,null,null,$,te,v,null,We);let Gn,$i;Na(dn);try{const Gh=this.componentDef;let a_,l_=null;Gh.findHostDirectiveDefs?(a_=[],l_=new Map,Gh.findHostDirectiveDefs(Gh,a_,l_),a_.push(Gh)):a_=[Gh];const zT=function gv(r,s){const a=r[nt],l=Lt;return r[l]=s,Rl(a,l,2,"#host",null)}(dn,Pe),B0=function Em(r,s,a,l,d,g,v){const b=d[nt];!function Sf(r,s,a,l){for(const d of r)s.mergedAttrs=Uo(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(pv(s,s.mergedAttrs,!0),null!==a&&w_(l,a,s))}(l,r,s,v);let D=null;null!==s&&(D=bh(s,d[Wo]));const R=g.rendererFactory.createRenderer(s,a);let F=16;a.signals?F=4096:a.onPush&&(F=64);const $=Ph(d,Ru(a),null,F,d[r.index],r,g,R,null,null,D);return b.firstCreatePass&&fs(b,r,l.length-1),_m(d,$),d[r.index]=$}(zT,Pe,Gh,a_,dn,$,te);$i=ed(nn,Lt),Pe&&function kh(r,s,a,l){if(l)Fl(r,a,["ng-version",Zg.full]);else{const{attrs:d,classes:g}=function Bl(r){const s=[],a=[];let l=1,d=2;for(;l<r.length;){let g=r[l];if("string"==typeof g)2===d?""!==g&&s.push(g,r[++l]):8===d&&a.push(g);else{if(!Yr(d))break;d=g}l++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Fl(r,a,d),g&&g.length>0&&df(r,a,g.join(" "))}}(te,Gh,Pe,l),void 0!==a&&function Z0(r,s,a){const l=r.projection=[];for(let d=0;d<s.length;d++){const g=a[d];l.push(null!=g?Array.from(g):null)}}($i,this.ngContentSelectors,a),Gn=function Gp(r,s,a,l,d,g){const v=xr(),b=d[nt],D=Bi(v,d);jt(b,d,v,a,null,l);for(let F=0;F<a.length;F++)$r(zi(d,b,v.directiveStart+F,v),d);gn(b,d,v),D&&$r(D,d);const R=zi(d,b,v.directiveStart+v.componentOffset,v);if(r[fr]=d[fr]=R,null!==g)for(const F of g)F(R,s);return pm(b,v,r),R}(B0,Gh,a_,l_,dn,[J0]),DE(nn,dn,null)}finally{ka()}return new xE(this.componentType,Gn,Tl($i,dn),dn,$i)}}class xE extends hE{constructor(s,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new X0(d),this.componentType=s}setInput(s,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const g=this._rootLView;IE(g[nt],g,d,s,a),this.previousInputValues.set(s,a),Mu(Mn(this._tNode.index,g))}}get injector(){return new Qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function J0(){const r=xr();Qo(Le()[nt],r)}function NE(r){let s=function Kp(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),a=!0;const l=[r];for(;s;){let d;if(Fi(r))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new de(903,!1);d=s.\u0275dir}if(d){if(a){l.push(d);const v=r;v.inputs=Mf(r.inputs),v.inputTransforms=Mf(r.inputTransforms),v.declaredInputs=Mf(r.declaredInputs),v.outputs=Mf(r.outputs);const b=d.hostBindings;b&&mv(r,b);const D=d.viewQuery,R=d.contentQueries;if(D&&Cm(r,D),R&&tb(r,R),X(r.inputs,d.inputs),X(r.declaredInputs,d.declaredInputs),X(r.outputs,d.outputs),null!==d.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),X(v.inputTransforms,d.inputTransforms)),Fi(d)&&d.data.animation){const F=r.data;F.animation=(F.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const b=g[v];b&&b.ngInherit&&b(r),b===NE&&(a=!1)}}s=Object.getPrototypeOf(s)}!function eD(r){let s=0,a=null;for(let l=r.length-1;l>=0;l--){const d=r[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Uo(d.hostAttrs,a=Uo(a,d.hostAttrs))}}(l)}function Mf(r){return r===bt?{}:r===at?[]:r}function Cm(r,s){const a=r.viewQuery;r.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function tb(r,s){const a=r.contentQueries;r.contentQueries=a?(l,d,g)=>{s(l,d,g),a(l,d,g)}:s}function mv(r,s){const a=r.hostBindings;r.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}function Fh(r){const s=r.inputConfig,a={};for(const l in s)if(s.hasOwnProperty(l)){const d=s[l];Array.isArray(d)&&d[2]&&(a[l]=d[2])}r.inputTransforms=a}function kc(r){return!!vv(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function vv(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function xu(r,s,a){return r[s]=a}function eo(r,s,a){return!Object.is(r[s],a)&&(r[s]=a,!0)}function BE(r,s,a,l){const d=Le();return eo(d,nc(),s)&&(At(),Pu(In(),d,r,s,a,l)),BE}function Bd(r,s,a,l,d,g,v,b){const D=Le(),R=At(),F=r+Lt,$=R.firstCreatePass?function pb(r,s,a,l,d,g,v,b,D){const R=s.consts,F=Rl(s,r,4,v||null,Ko(R,b));ln(s,a,F,Ko(R,D)),Qo(s,F);const $=F.tView=yn(2,F,l,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,R,null);return null!==s.queries&&(s.queries.template(s,F),$.queries=s.queries.embeddedTView(F)),F}(F,R,D,s,a,l,d,g,v):R.data[F];Vi($,!1);const te=WE(R,D,$,r);Ki()&&Ac(R,D,te,$),$r(te,D),_m(D,D[F]=qw(te,D,te,$)),Ea($)&&gm(R,D,$),null!=v&&Up(D,$,b)}let WE=function GE(r,s,a,l){return Kt(!0),s[Ct].createComment("")};function gb(r){return $s(function Xf(){return Rt.lFrame.contextLView}(),Lt+r)}function KE(r,s,a){const l=Le();return eo(l,nc(),s)&&function He(r,s,a,l,d,g,v,b){const D=Bi(s,a);let F,R=s.inputs;!b&&null!=R&&(F=R[l])?(IE(r,a,F,l,d),ai(s)&&function lt(r,s){const a=Mn(s,r);16&a[Xt]||(a[Xt]|=64)}(a,s.index)):3&s.type&&(l=function $e(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(l),d=null!=v?v(d,s.value||"",l):d,g.setProperty(D,l,d))}(At(),In(),l,r,s,l[Ct],a,!1),KE}function zE(r,s,a,l,d){const v=d?"class":"style";IE(r,a,s.inputs[v],v,l)}function ng(r,s,a,l){const d=Le(),g=At(),v=Lt+r,b=d[Ct],D=g.firstCreatePass?function mb(r,s,a,l,d,g){const v=s.consts,D=Rl(s,r,2,l,Ko(v,d));return ln(s,a,D,Ko(v,g)),null!==D.attrs&&pv(D,D.attrs,!1),null!==D.mergedAttrs&&pv(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(v,g,d,s,a,l):g.data[v],R=rg(g,d,D,b,s,r);d[v]=R;const F=Ea(D);return Vi(D,!0),w_(b,R,D),32!=(32&D.flags)&&Ki()&&Ac(g,d,R,D),0===function Hr(){return Rt.lFrame.elementDepthCount}()&&$r(R,d),function Xd(){Rt.lFrame.elementDepthCount++}(),F&&(gm(g,d,D),pm(g,D,d)),null!==l&&Up(d,D),ng}function Mv(){let r=xr();rd()?function id(){Rt.lFrame.isParent=!1}():(r=r.parent,Vi(r,!1));const s=r;(function Oa(r){return Rt.skipHydrationRootTNode===r})(s)&&function Ws(){Rt.skipHydrationRootTNode=null}(),function li(){Rt.lFrame.elementDepthCount--}();const a=At();return a.firstCreatePass&&(Qo(a,r),jl(r)&&a.queries.elementEnd(r)),null!=s.classesWithoutHost&&function As(r){return 0!=(8&r.flags)}(s)&&zE(a,s,Le(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Cr(r){return 0!=(16&r.flags)}(s)&&zE(a,s,Le(),s.stylesWithoutHost,!1),Mv}function Nu(r,s,a,l){return ng(r,s,a,l),Mv(),Nu}let rg=(r,s,a,l,d,g)=>(Kt(!0),_u(l,d,function Ui(){return Rt.lFrame.currentNamespace}()));function kf(){return Le()}function xv(r){return!!r&&"function"==typeof r.then}function qE(r){return!!r&&"function"==typeof r.subscribe}function Nv(r,s,a,l){const d=Le(),g=At(),v=xr();return function Fv(r,s,a,l,d,g,v){const b=Ea(l),R=r.firstCreatePass&&Yw(r),F=s[fr],$=jp(s);let te=!0;if(3&l.type||v){const Ye=Bi(l,s),ct=v?v(Ye):Ye,Pt=$.length,We=v?dn=>v(bn(dn[l.index])):l.index;let nn=null;if(!v&&b&&(nn=function kv(r,s,a,l){const d=r.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const b=s[is],D=d[g+2];return b.length>D?b[D]:null}"string"==typeof v&&(g+=2)}return null}(r,s,d,l.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=g,nn.__ngLastListenerFn__=g,te=!1;else{g=Bv(l,s,F,g,!1);const dn=a.listen(ct,d,g);$.push(g,dn),R&&R.push(d,We,Pt,Pt+1)}}else g=Bv(l,s,F,g,!1);const ce=l.outputs;let Pe;if(te&&null!==ce&&(Pe=ce[d])){const Ye=Pe.length;if(Ye)for(let ct=0;ct<Ye;ct+=2){const Gn=s[Pe[ct]][Pe[ct+1]].subscribe(g),$i=$.length;$.push(g,Gn),R&&R.push(d,l.index,$i,-($i+1))}}}(g,d,d[Ct],v,r,s,l),Nv}function Lv(r,s,a,l){try{return js(6,s,a),!1!==a(l)}catch(d){return $p(r,d),!1}finally{js(7,s,a)}}function Bv(r,s,a,l,d){return function g(v){if(v===Function)return l;Mu(r.componentOffset>-1?Mn(r.index,s):s);let D=Lv(s,a,l,v),R=g.__ngNextListenerFn__;for(;R;)D=Lv(s,a,R,v)&&D,R=R.__ngNextListenerFn__;return d&&!1===D&&v.preventDefault(),D}}function vb(r=1){return function dl(r){return(Rt.lFrame.contextLView=function od(r,s){for(;r>0;)s=s[Fs],r--;return s}(r,Rt.lFrame.contextLView))[fr]}(r)}function og(r,s){return r<<17|s<<2}function Fc(r){return r>>17&32767}function jv(r){return 2|r}function Lf(r){return(131068&r)>>2}function ag(r,s){return-131069&r|s<<2}function ZE(r){return 1|r}function Db(r,s,a,l,d){const g=r[a+1],v=null===s;let b=l?Fc(g):Lf(g),D=!1;for(;0!==b&&(!1===D||v);){const F=r[b+1];JE(r[b],s)&&(D=!0,r[b+1]=l?ZE(F):jv(F)),b=l?Fc(F):Lf(F)}D&&(r[a+1]=l?jv(g):ZE(g))}function JE(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&dc(r,s)>=0}function lg(r,s,a){return Vc(r,s,a,!1),lg}function Wv(r,s){return Vc(r,s,null,!0),Wv}function Vc(r,s,a,l){const d=Le(),g=At(),v=function Gs(r){const s=Rt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,a}(2);g.firstUpdatePass&&function rC(r,s,a,l){const d=r.data;if(null===d[a+1]){const g=d[Zr()],v=function Mb(r,s){return s>=r.expandoStartIndex}(r,a);(function xb(r,s){return 0!=(r.flags&(s?8:16))})(g,l)&&null===s&&!v&&(s=!1),s=function km(r,s,a,l){const d=function ic(r){const s=Rt.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let g=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Vh(a=Fm(null,r,s,a,l),s.attrs,l),g=null);else{const v=s.directiveStylingLast;if(-1===v||r[v]!==d)if(a=Fm(d,r,s,a,l),null===g){let D=function Rb(r,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Lf(l))return r[Fc(l)]}(r,s,l);void 0!==D&&Array.isArray(D)&&(D=Fm(null,r,s,D[1],l),D=Vh(D,s.attrs,l),function Pb(r,s,a,l){r[Fc(a?s.classBindings:s.styleBindings)]=l}(r,s,l,D))}else g=function ID(r,s,a){let l;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)l=Vh(l,r[g].hostAttrs,a);return Vh(l,s.attrs,a)}(r,s,l)}return void 0!==g&&(l?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,l),function ED(r,s,a,l,d,g){let v=g?s.classBindings:s.styleBindings,b=Fc(v),D=Lf(v);r[l]=a;let F,R=!1;if(Array.isArray(a)?(F=a[1],(null===F||dc(a,F)>0)&&(R=!0)):F=a,d)if(0!==D){const te=Fc(r[b+1]);r[l+1]=og(te,b),0!==te&&(r[te+1]=ag(r[te+1],l)),r[b+1]=function XE(r,s){return 131071&r|s<<17}(r[b+1],l)}else r[l+1]=og(b,0),0!==b&&(r[b+1]=ag(r[b+1],l)),b=l;else r[l+1]=og(D,0),0===b?b=l:r[D+1]=ag(r[D+1],l),D=l;R&&(r[l+1]=jv(r[l+1])),Db(r,F,l,!0),Db(r,F,l,!1),function CD(r,s,a,l,d){const g=d?r.residualClasses:r.residualStyles;null!=g&&"string"==typeof s&&dc(g,s)>=0&&(a[l+1]=ZE(a[l+1]))}(s,F,r,l,g),v=og(b,D),g?s.classBindings=v:s.styleBindings=v}(d,g,s,a,v,l)}}(g,r,v,l),s!==Ot&&eo(d,v,s)&&function Ob(r,s,a,l,d,g,v,b){if(!(3&s.type))return;const D=r.data,R=D[b+1],F=function bb(r){return 1==(1&r)}(R)?iC(D,s,a,d,Lf(R),v):void 0;Kv(F)||(Kv(g)||function Ff(r){return 2==(2&r)}(R)&&(g=iC(D,null,a,d,b,v)),function Gy(r,s,a,l,d){if(s)d?r.addClass(a,l):r.removeClass(a,l);else{let g=-1===l.indexOf("-")?void 0:gu.DashCase;null==d?r.removeStyle(a,l,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=gu.Important),r.setStyle(a,l,d,g))}}(l,v,Eo(Zr(),a),d,g))}(g,g.data[Zr()],d,d[Ct],r,d[v+1]=function SD(r,s){return null==r||""===r||("string"==typeof s?r+=s:"object"==typeof r&&(r=le(Tc(r)))),r}(s,a),l,v)}function Fm(r,s,a,l,d){let g=null;const v=a.directiveEnd;let b=a.directiveStylingLast;for(-1===b?b=a.directiveStart:b++;b<v&&(g=s[b],l=Vh(l,g.hostAttrs,d),g!==r);)b++;return null!==r&&(a.directiveStylingLast=b),l}function Vh(r,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const v=s[g];"number"==typeof v?d=v:d===l&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Ms(r,v,!!a||s[++g]))}return void 0===r?null:r}function iC(r,s,a,l,d,g){const v=null===s;let b;for(;d>0;){const D=r[d],R=Array.isArray(D),F=R?D[1]:D,$=null===F;let te=a[d+1];te===Ot&&(te=$?at:void 0);let ce=$?ef(te,l):F===l?te:void 0;if(R&&!Kv(ce)&&(ce=ef(D,l)),Kv(ce)&&(b=ce,v))return b;const Pe=r[d+1];d=v?Fc(Pe):Lf(Pe)}if(null!==s){let D=g?s.residualClasses:s.residualStyles;null!=D&&(b=ef(D,l))}return b}function Kv(r){return void 0!==r}function zv(r,s=""){const a=Le(),l=At(),d=r+Lt,g=l.firstCreatePass?Rl(l,d,1,s,null):l.data[d],v=sC(l,a,g,s,r);a[d]=v,Ki()&&Ac(l,a,v,g),Vi(g,!1)}let sC=(r,s,a,l,d)=>(Kt(!0),function la(r,s){return r.createText(s)}(s[Ct],l));function qv(r,s,a){const l=Le(),d=function xf(r,s,a,l){return eo(r,nc(),a)?s+ue(a)+l:Ot}(l,r,s,a);return d!==Ot&&function Pl(r,s,a){const l=Eo(s,r);!function Ic(r,s,a){r.setValue(s,a)}(r[Ct],l,a)}(l,Zr(),d),qv}const Vf=void 0;var ey=["en",[["a","p"],["AM","PM"],Vf],[["AM","PM"],Vf,Vf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vf,"{1} 'at' {0}",Vf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bm(r){const a=Math.floor(Math.abs(r)),l=r.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ku={};function ty(r){const s=function Kb(r){return r.toLowerCase().replace(/_/g,"-")}(r);let a=mC(s);if(a)return a;const l=s.split("-")[0];if(a=mC(l),a)return a;if("en"===l)return ey;throw new de(701,!1)}function gC(r){return ty(r)[to.PluralCase]}function mC(r){return r in ku||(ku[r]=An.ng&&An.ng.common&&An.ng.common.locales&&An.ng.common.locales[r]),ku[r]}var to=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(to||{});const ug="en-US";let qb=ug;function $m(r,s,a,l,d){if(r=Fe(r),Array.isArray(r))for(let g=0;g<r.length;g++)$m(r[g],s,a,l,d);else{const g=At(),v=Le(),b=xr();let D=_r(r)?r:Fe(r.provide);const R=Rc(r),F=1048575&b.providerIndexes,$=b.directiveStart,te=b.providerIndexes>>20;if(_r(r)||!r.multi){const ce=new Ks(R,d,Rh),Pe=IC(D,s,d?F:F+te,$);-1===Pe?(gl(ds(b,v),g,D),bC(g,r,s.length),s.push(D),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(ce),v.push(ce)):(a[Pe]=ce,v[Pe]=ce)}else{const ce=IC(D,s,F+te,$),Pe=IC(D,s,F,F+te),ct=Pe>=0&&a[Pe];if(d&&!ct||!d&&!(ce>=0&&a[ce])){gl(ds(b,v),g,D);const Pt=function hA(r,s,a,l,d){const g=new Ks(r,a,Rh);return g.multi=[],g.index=s,g.componentProviders=0,pI(g,d,l&&!a),g}(d?dA:gI,a.length,d,l,R);!d&&ct&&(a[Pe].providerFactory=Pt),bC(g,r,s.length,0),s.push(D),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(Pt),v.push(Pt)}else bC(g,r,ce>-1?ce:Pe,pI(a[d?Pe:ce],R,!d&&l));!d&&l&&ct&&a[Pe].componentProviders++}}}function bC(r,s,a,l){const d=_r(s),g=function Ww(r){return!!r.useClass}(s);if(d||g){const D=(g?Fe(s.useClass):s).prototype.ngOnDestroy;if(D){const R=r.destroyHooks||(r.destroyHooks=[]);if(!d&&s.multi){const F=R.indexOf(a);-1===F?R.push(a,[l,D]):R[F+1].push(l,D)}else R.push(a,D)}}}function pI(r,s,a){return a&&r.componentProviders++,r.multi.push(s)-1}function IC(r,s,a,l){for(let d=a;d<l;d++)if(s[d]===r)return d;return-1}function gI(r,s,a,l){return DC(this.multi,[])}function dA(r,s,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=zi(a,a[nt],this.providerFactory.index,l);g=b.slice(0,v),DC(d,g);for(let D=v;D<b.length;D++)g.push(b[D])}else g=[],DC(d,g);return g}function DC(r,s){for(let a=0;a<r.length;a++)s.push((0,r[a])());return s}function mI(r,s=[]){return a=>{a.providersResolver=(l,d)=>function dy(r,s,a){const l=At();if(l.firstCreatePass){const d=Fi(r);$m(a,l.data,l.blueprint,d,!0),$m(s,l.data,l.blueprint,d,!1)}}(l,d?d(r):r,s)}}class ni{}class Wm{}function AC(r,s){return new dg(r,s??null,[])}class dg extends ni{constructor(s,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jw(this);const d=Ni(s);this._bootstrapComponents=Ml(d.bootstrap),this._r3Injector=tm(s,a,[{provide:ni,useValue:this},{provide:Gr,useValue:this.componentFactoryResolver},...l],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class hg extends Wm{constructor(s){super(),this.moduleType=s}create(s){return new dg(this.moduleType,s,[])}}class vI extends ni{constructor(s){super(),this.componentFactoryResolver=new Jw(this),this.instance=null;const a=new Cu([...s.providers,{provide:ni,useValue:this},{provide:Gr,useValue:this.componentFactoryResolver}],s.parent||vf(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function yI(r,s,a=null){return new vI({providers:r,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let EI=(()=>{class r{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=B_(0,a.type),d=l.length>0?yI([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ot({token:r,providedIn:"environment",factory:()=>new r(Tn(qa))})}}return r})();function CI(r){r.getStandaloneInjector=s=>s.get(EI).getOrCreateStandaloneInjector(r)}function fy(r,s,a){const l=Nr()+r,d=Le();return d[l]===Ot?xu(d,l,a?s.call(a):s()):function wm(r,s){return r[s]}(d,l)}function VC(r,s,a,l,d,g){const v=s+a;return eo(r,v,d)?xu(r,v+1,g?l.call(g,d):l(d)):function Uf(r,s){const a=r[s];return a===Ot?void 0:a}(r,v+1)}function II(r,s){const a=At();let l;const d=r+Lt;a.firstCreatePass?(l=function DI(r,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(r===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks??=[]).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=mo(l.type)),b=Ln(Rh);try{const D=mr(!1),R=g();return mr(D),function Sv(r,s,a,l){a>=r.data.length&&(r.data[a]=null,r.blueprint[a]=null),s[a]=l}(a,Le(),d,R),R}finally{Ln(b)}}function AI(r,s,a){const l=r+Lt,d=Le(),g=$s(d,l);return function zm(r,s){return r[nt].data[s].pure}(d,l)?VC(d,Nr(),s,g.transform,a,g):g.transform(a)}function TA(){return this._results[Symbol.iterator]()}class vy{get changes(){return this._changes||(this._changes=new Sl)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=vy.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=TA)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=function qi(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function yl(r,s,a){if(r.length!==s.length)return!1;for(let l=0;l<r.length;l++){let d=r[l],g=s[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function TI(r,s,a,l=!0){const d=s[nt];if(function uf(r,s,a,l){const d=tn+l,g=a.length;l>0&&(a[d-1][un]=s),l<g-tn?(s[un]=a[d],Zh(a,tn+l,s)):(a.push(s),s[un]=null),s[Mt]=a;const v=s[va];null!==v&&a!==v&&function lp(r,s){const a=r[os];s[tr]!==s[Mt][Mt][tr]&&(r[Bs]=!0),null===a?r[os]=[s]:a.push(s)}(v,s);const b=s[zn];null!==b&&b.insertView(r),s[Xt]|=128}(d,s,r,a),l){const g=xg(a,r),v=s[Ct],b=dp(v,r[ki]);null!==b&&function Dl(r,s,a,l,d,g){l[hr]=d,l[yi]=s,Dd(r,l,a,1,d,g)}(d,r[yi],v,s,b,g)}}let Hf=(()=>{class r{static{this.__NG_ELEMENT_ID__=OA}}return r})();const RA=Hf,PA=class extends RA{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,l){const d=function SA(r,s,a,l){const d=s.tView,b=Ph(r,d,a,4096&r[Xt]?4096:16,null,s,null,null,null,l?.injector??null,l?.hydrationInfo??null);b[va]=r[s.index];const R=r[zn];return null!==R&&(b[zn]=R.createEmbeddedView(d)),DE(d,b,a),b}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:l});return new Wp(d)}};function OA(){return qm(xr(),Le())}function qm(r,s){return 4&r.type?new PA(s,r,Tl(r,s)):null}let GC=(()=>{class r{static{this.__NG_ELEMENT_ID__=FA}}return r})();function FA(){return yy(xr(),Le())}const MI=GC,RI=class extends MI{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Tl(this._hostTNode,this._hostLView)}get injector(){return new Qn(this._hostTNode,this._hostLView)}get parentInjector(){const s=To(this._hostTNode,this._hostLView);if(Bt(s)){const a=Fa(s,this._hostLView),l=qn(s);return new Qn(a[nt].data[l+8],a)}return new Qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=KC(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-tn}createEmbeddedView(s,a,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const b=s.createEmbeddedViewImpl(a||{},g,null);return this.insertImpl(b,d,false),b}createComponent(s,a,l,d,g){const v=s&&!function bi(r){return"function"==typeof r}(s);let b;if(v)b=a;else{const Ye=a||{};b=Ye.index,l=Ye.injector,d=Ye.projectableNodes,g=Ye.environmentInjector||Ye.ngModuleRef}const D=v?s:new Tf(cn(s)),R=l||this.parentInjector;if(!g&&null==D.ngModule){const ct=(v?R:this.parentInjector).get(qa,null);ct&&(g=ct)}cn(D.componentType??{});const ce=D.create(R,d,null,g);return this.insertImpl(ce.hostView,b,false),ce}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,l){const d=s._lView;if(function Ma(r){return oi(r[Mt])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const R=d[Mt],F=new RI(R,R[yi],R[Mt]);F.detach(F.indexOf(s))}}const v=this._adjustIndex(a),b=this._lContainer;return TI(b,d,v,!l),s.attachToViewContainerRef(),Zh(Qm(b),v,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=KC(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=cp(this._lContainer,a);l&&(Yi(Qm(this._lContainer),a),p_(l[nt],l))}detach(s){const a=this._adjustIndex(s,-1),l=cp(this._lContainer,a);return l&&null!=Yi(Qm(this._lContainer),a)?new Wp(l):null}_adjustIndex(s,a=0){return s??this.length+a}};function KC(r){return r[8]}function Qm(r){return r[8]||(r[8]=[])}function yy(r,s){let a;const l=s[r.index];return oi(l)?a=l:(a=qw(l,s,null,r),s[r.index]=a,_m(s,a)),Ey(a,s,r,l),new RI(a,r,s)}let Ey=function LA(r,s,a,l){if(r[ki])return;let d;d=8&a.type?bn(l):function IS(r,s){const a=r[Ct],l=a.createComment(""),d=Bi(s,r);return Id(a,dp(a,d),l,function $y(r,s){return r.nextSibling(s)}(a,d),!1),l}(s,a),r[ki]=d};class zC{constructor(s){this.queryList=s,this.matches=null}clone(){return new zC(this.queryList)}setDirty(){this.queryList.setDirty()}}class qC{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new qC(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==nw(s,a).matches&&this.queries[a].setDirty()}}class VA{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class PI{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(s,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new PI(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class YC{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new YC(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(s,a,AS(a,g)),this.matchTNodeWithReadOption(s,a,ac(a,s,g,!1,!1))}else l===Hf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ac(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Cf||d===GC||d===Hf&&4&a.type)this.addMatch(a.index,-2);else{const g=ac(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function AS(r,s){const a=r.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function SS(r,s,a,l){return-1===a?function TS(r,s){return 11&r.type?Tl(r,s):4&r.type?qm(r,s):null}(s,r):-2===a?function MS(r,s,a){return a===Cf?Tl(s,r):a===Hf?qm(s,r):a===GC?yy(s,r):void 0}(r,s,l):zi(r,r[nt],a,s)}function UA(r,s,a,l){const d=s[zn].queries[l];if(null===d.matches){const g=r.data,v=a.matches,b=[];for(let D=0;D<v.length;D+=2){const R=v[D];b.push(R<0?null:SS(s,g[R],v[D+1],a.metadata.read))}d.matches=b}return d.matches}function QC(r,s,a,l){const d=r.queries.getByIndex(a),g=d.matches;if(null!==g){const v=UA(r,s,d,a);for(let b=0;b<g.length;b+=2){const D=g[b];if(D>0)l.push(v[b/2]);else{const R=g[b+1],F=s[-D];for(let $=tn;$<F.length;$++){const te=F[$];te[va]===te[Mt]&&QC(te[nt],te,R,l)}if(null!==F[os]){const $=F[os];for(let te=0;te<$.length;te++){const ce=$[te];QC(ce[nt],ce,R,l)}}}}}return l}function OI(r){const s=Le(),a=At(),l=xa();lu(l+1);const d=nw(a,l);if(r.dirty&&function Er(r){return 4==(4&r[Xt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)r.reset([]);else{const g=d.crossesNgTemplate?QC(a,s,l,[]):UA(a,s,d,l);r.reset(g,K_),r.notifyOnChanges()}return!0}return!1}function XC(r,s,a){const l=At();l.firstCreatePass&&(tw(l,new VA(r,s,a),-1),2==(2&s)&&(l.staticViewQueries=!0)),ew(l,Le(),s)}function ZC(r,s,a,l){const d=At();if(d.firstCreatePass){const g=xr();tw(d,new VA(s,a,l),g.index),function NI(r,s){const a=r.contentQueries||(r.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(r.queries.length-1,s)}(d,r),2==(2&a)&&(d.staticContentQueries=!0)}ew(d,Le(),a)}function JC(){return function xI(r,s){return r[zn].queries[s].queryList}(Le(),xa())}function ew(r,s,a){const l=new vy(4==(4&a));(function U(r,s,a,l){const d=jp(s);d.push(a),r.firstCreatePass&&Yw(r).push(l,d.length-1)})(r,s,l,l.destroy),null===s[zn]&&(s[zn]=new qC),s[zn].queries.push(new zC(l))}function tw(r,s,a){null===r.queries&&(r.queries=new PI),r.queries.track(new YC(s,a))}function nw(r,s){return r.queries.getByIndex(s)}function rw(r){return!!Ni(r)}const gw=new gt("Application Initializer");let Xm=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=Gt(gw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const g=d();if(xv(g))a.push(g);else if(qE(g)){const v=new Promise((b,D)=>{g.subscribe({complete:b,error:D})});a.push(v)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Zm=(()=>{class r{log(a){console.log(a)}warn(a){console.warn(a)}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();const Jm=new gt("LocaleId",{providedIn:"root",factory:()=>Gt(Jm,Et.Optional|Et.SkipSelf)||function QI(){return typeof $localize<"u"&&$localize.locale||ug}()}),XI=new gt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let oT=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _e.t(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();class kS{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let JI=(()=>{class r{compileModuleSync(a){return new hg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=Ml(Ni(a).declarations).reduce((v,b)=>{const D=cn(b);return D&&v.push(new Tf(D)),v},[]);return new kS(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const dT=new gt(""),hT=new gt("");let Eg,fT=(()=>{class r{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Eg||(function yg(r){Eg=r}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Si.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}static{this.\u0275fac=function(l){return new(l||r)(Tn(Si),Tn(pT),Tn(hT))}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac})}}return r})(),pT=(()=>{class r{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Eg?.findTestabilityInTree(this,a,l)??null}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})(),$c=null;const Cg=new gt("AllowMultipleToken"),wg=new gt("PlatformDestroyListeners"),bg=new gt("appBootstrapListener");class _T{constructor(s,a){this.name=s,this.token=a}}function yT(r,s,a=[]){const l=`Platform: ${s}`,d=new gt(l);return(g=[])=>{let v=l0();if(!v||v.injector.get(Cg,!1)){const b=[...a,...g,{provide:d,useValue:!0}];r?r(b):function a0(r){if($c&&!$c.get(Cg,!1))throw new de(400,!1);(function i_(){!function Ci(r){ql=r}(()=>{throw new de(600,!1)})})(),$c=r;const s=r.get(My);(function yw(r){r.get(H_,null)?.forEach(a=>a())})(r)}(function Sy(r=[],s){return ha.create({name:s,providers:[{provide:ua,useValue:"platform"},{provide:wg,useValue:new Set([()=>$c=null])},...r]})}(b,l))}return function ET(r){const s=l0();if(!s)throw new de(401,!1);return s}()}}function l0(){return $c?.get(My)??null}let My=(()=>{class r{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function u0(r="zone.js",s){return"noop"===r?new Op:"zone.js"===r?new Si(s):r}(l?.ngZone,function c0(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const g=function TC(r,s,a){return new dg(r,s,a)}(a.moduleType,this.injector,function wT(r){return[{provide:Si,useFactory:r},{provide:yh,multi:!0,useFactory:()=>{const s=Gt(f0,{optional:!0});return()=>s.initialize()}},{provide:Oy,useFactory:h0},{provide:Pd,useFactory:om}]}(()=>d)),v=g.injector.get(Au,null);return d.runOutsideAngular(()=>{const b=d.onError.subscribe({next:D=>{v.handleError(D)}});g.onDestroy(()=>{Py(this._modules,g),b.unsubscribe()})}),function Ry(r,s,a){try{const l=a();return xv(l)?l.catch(d=>{throw s.runOutsideAngular(()=>r.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>r.handleError(l)),l}}(v,d,()=>{const b=g.injector.get(Xm);return b.runInitializers(),b.donePromise.then(()=>(function Yb(r){ke(r,"Expected localeId to be defined"),"string"==typeof r&&(qb=r.toLowerCase().replace(/_/g,"-"))}(g.injector.get(Jm,ug)||ug),this._moduleDoBootstrap(g),g))})})}bootstrapModule(a,l=[]){const d=d0({},l);return function gT(r,s,a){const l=new hg(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(s_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new de(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(wg,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(l){return new(l||r)(Tn(ha))}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();function d0(r,s){return Array.isArray(s)?s.reduce(d0,r):{...r,...s}}let s_=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Gt(Oy),this.zoneIsStable=Gt(Pd),this.componentTypes=[],this.components=[],this.isStable=Gt(oT).hasPendingTasks.pipe((0,Ge.n)(a=>a?(0,Ee.of)(!1):this.zoneIsStable),(0,Ae.F)(),(0,Se.u)()),this._injector=Gt(qa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Ap;if(!this._injector.get(Xm).done)throw!d&&$o(a),new de(405,!1);let v;v=d?a:this._injector.get(Gr).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const b=function mT(r){return r.isBoundToModule}(v)?void 0:this._injector.get(ni),R=v.create(ha.NULL,[],l||v.selector,b),F=R.location.nativeElement,$=R.injector.get(dT,null);return $?.registerApplication(F),R.onDestroy(()=>{this.detachView(R.hostView),Py(this.components,R),$?.unregisterApplication(F)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Py(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(bg,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Py(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new de(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Py(r,s){const a=r.indexOf(s);a>-1&&r.splice(a,1)}const Oy=new gt("",{providedIn:"root",factory:()=>Gt(Au).handleError.bind(void 0)});function h0(){const r=Gt(Si),s=Gt(Au);return a=>r.runOutsideAngular(()=>s.handleError(a))}let f0=(()=>{class r{constructor(){this.zone=Gt(Si),this.applicationRef=Gt(s_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275prov=ot({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function p0(){return!1}let DT=(()=>{class r{static{this.__NG_ELEMENT_ID__=g0}}return r})();function g0(r){return function AT(r,s,a){if(ai(r)&&!a){const l=Mn(r.index,s);return new Wp(l,l)}return 47&r.type?new Wp(s[tr],s):null}(xr(),Le(),16==(16&r))}class Dw{constructor(){}supports(s){return kc(s)}create(s){return new w0(s)}}const RT=(r,s)=>s;class w0{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||RT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<ky(l,d,g)?a:l,b=ky(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const R=b-d,F=D-d;if(R!=F){for(let te=0;te<R;te++){const ce=te<g.length?g[te]:g[te]=0,Pe=ce+te;F<=Pe&&Pe<R&&(g[te]=ce+1)}g[v.previousIndex]=F-R}}b!==D&&s(v,b,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!kc(s))throw new de(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let b=0;b<this.length;b++)g=s[b],v=this._trackByFn(b,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,b)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,b),l=!0),a=a._next}else d=0,function qp(r,s){if(Array.isArray(r))for(let a=0;a<r.length;a++)s(r[a]);else{const a=r[Symbol.iterator]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,b=>{v=this._trackByFn(d,b),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,b,v,d)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new PT(a,l),g,d),s}_verifyReinsertion(s,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new I0),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new I0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class PT{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class b0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class I0{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new b0,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ky(r,s,a){const l=r.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class D0{constructor(){}supports(s){return s instanceof Map||vv(s)}create(){return new OT}}class OT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||vv(s)))throw new de(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new A0(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class A0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function T0(){return new S0([new Dw])}let S0=(()=>{class r{static{this.\u0275prov=ot({token:r,providedIn:"root",factory:T0})}constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new r(a)}static extend(a){return{provide:r,useFactory:l=>r.create(a,l||T0()),deps:[[r,new rh,new fd]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new de(901,!1)}}return r})();function R0(){return new Fy([new D0])}let Fy=(()=>{class r{static{this.\u0275prov=ot({token:r,providedIn:"root",factory:R0})}constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new r(a)}static extend(a){return{provide:r,useFactory:l=>r.create(a,l||R0()),deps:[[r,new rh,new fd]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new de(901,!1)}}return r})();const NT=yT(null,"core",[]);let O0=(()=>{class r{constructor(a){}static{this.\u0275fac=function(l){return new(l||r)(Tn(s_))}}static{this.\u0275mod=Ul({type:r})}static{this.\u0275inj=Sn({})}}return r})();function eM(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function KT(r){const s=cn(r);if(!s)return null;const a=new Tf(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},9574:(ut,Oe,V)=>{"use strict";V.d(Oe,{A:()=>rt});var h=V(1401),N=V(8779),H=V(2979),he=V(5398);class _e{constructor(Je,Qe){this._delegate=Je,this.firebase=Qe,(0,H._addComponent)(Je,new N.uA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,H.deleteApp)(this._delegate)))}_getService(Je,Qe=H._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const vt=this._delegate.container.getProvider(Je);return!vt.isInitialized()&&"EXPLICIT"===(null===(_t=vt.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&vt.initialize(),vt.getImmediate({identifier:Qe})}_removeServiceInstance(Je,Qe=H._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(Qe)}_addComponent(Je){(0,H._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,H._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new h.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function Ae(){const Fe=function Ge(Fe){const Je={},Qe={__esModule:!0,initializeApp:function de(ze,it={}){const Ce=H.initializeApp(ze,it);if((0,h.gR)(Je,Ce.name))return Je[Ce.name];const Tt=new Fe(Ce,Qe);return Je[Ce.name]=Tt,Tt},app:vt,registerVersion:H.registerVersion,setLogLevel:H.setLogLevel,onLog:H.onLog,apps:null,SDK_VERSION:H.SDK_VERSION,INTERNAL:{registerComponent:function ue(ze){const it=ze.name,Ce=it.replace("-compat","");if(H._registerComponent(ze)&&"PUBLIC"===ze.type){const Tt=(sn=vt())=>{if("function"!=typeof sn[Ce])throw Se.create("invalid-app-argument",{appName:it});return sn[Ce]()};void 0!==ze.serviceProps&&(0,h.zw)(Tt,ze.serviceProps),Qe[Ce]=Tt,Fe.prototype[Ce]=function(...sn){return this._getService.bind(this,it).apply(this,ze.multipleInstances?sn:[])}}return"PUBLIC"===ze.type?Qe[Ce]:null},removeApp:function _t(ze){delete Je[ze]},useAsService:function xe(ze,it){return"serverAuth"===it?null:it},modularAPIs:H}};function vt(ze){if(!(0,h.gR)(Je,ze=ze||H._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:ze});return Je[ze]}return Qe.default=Qe,Object.defineProperty(Qe,"apps",{get:function Me(){return Object.keys(Je).map(ze=>Je[ze])}}),vt.App=Fe,Qe}(_e);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:Ae,extendNamespace:function Je(Qe){(0,h.zw)(Fe,Qe)},createSubscribe:h.tD,ErrorFactory:h.FA,deepExtend:h.zw}),Fe}(),X=new he.Vy("@firebase/app-compat");if((0,h.Bd)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=G;!function Be(Fe){(0,H.registerVersion)("@firebase/app-compat","0.2.13",Fe)}()},2979:(ut,Oe,V)=>{"use strict";V.r(Oe),V.d(Oe,{FirebaseError:()=>he.g,SDK_VERSION:()=>ts,_DEFAULT_ENTRY_NAME:()=>Et,_addComponent:()=>Bn,_addOrOverwriteComponent:()=>Sr,_apps:()=>xt,_clearComponents:()=>gt,_components:()=>Ln,_getProvider:()=>Mr,_registerComponent:()=>An,_removeServiceInstance:()=>Lo,deleteApp:()=>ms,getApp:()=>_i,getApps:()=>Vo,initializeApp:()=>Bo,onLog:()=>lo,registerVersion:()=>Pr,setLogLevel:()=>cr});var h=V(467),N=V(8779),H=V(5398),he=V(1401);const _e=(Te,fe)=>fe.some(Ke=>Te instanceof Ke);let Ee,Se;const G=new WeakMap,X=new WeakMap,le=new WeakMap,qe=new WeakMap,Be=new WeakMap;let Je={get(Te,fe,Ke){if(Te instanceof IDBTransaction){if("done"===fe)return X.get(Te);if("objectStoreNames"===fe)return Te.objectStoreNames||le.get(Te);if("store"===fe)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return de(Te[fe])},set:(Te,fe,Ke)=>(Te[fe]=Ke,!0),has:(Te,fe)=>Te instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in Te};function vt(Te){return"function"==typeof Te?function _t(Te){return Te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Te)?function(...fe){return Te.apply(Me(this),fe),de(G.get(this))}:function(...fe){return de(Te.apply(Me(this),fe))}:function(fe,...Ke){const mt=Te.call(Me(this),fe,...Ke);return le.set(mt,fe.sort?fe.sort():[fe]),de(mt)}}(Te):(Te instanceof IDBTransaction&&function Fe(Te){if(X.has(Te))return;const fe=new Promise((Ke,mt)=>{const bt=()=>{Te.removeEventListener("complete",at),Te.removeEventListener("error",fn),Te.removeEventListener("abort",fn)},at=()=>{Ke(),bt()},fn=()=>{mt(Te.error||new DOMException("AbortError","AbortError")),bt()};Te.addEventListener("complete",at),Te.addEventListener("error",fn),Te.addEventListener("abort",fn)});X.set(Te,fe)}(Te),_e(Te,function Ge(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Te,Je):Te)}function de(Te){if(Te instanceof IDBRequest)return function rt(Te){const fe=new Promise((Ke,mt)=>{const bt=()=>{Te.removeEventListener("success",at),Te.removeEventListener("error",fn)},at=()=>{Ke(de(Te.result)),bt()},fn=()=>{mt(Te.error),bt()};Te.addEventListener("success",at),Te.addEventListener("error",fn)});return fe.then(Ke=>{Ke instanceof IDBCursor&&G.set(Ke,Te)}).catch(()=>{}),Be.set(fe,Te),fe}(Te);if(qe.has(Te))return qe.get(Te);const fe=vt(Te);return fe!==Te&&(qe.set(Te,fe),Be.set(fe,Te)),fe}const Me=Te=>Be.get(Te),ze=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Ce=new Map;function Tt(Te,fe){if(!(Te instanceof IDBDatabase)||fe in Te||"string"!=typeof fe)return;if(Ce.get(fe))return Ce.get(fe);const Ke=fe.replace(/FromIndex$/,""),mt=fe!==Ke,bt=it.includes(Ke);if(!(Ke in(mt?IDBIndex:IDBObjectStore).prototype)||!bt&&!ze.includes(Ke))return;const at=function(){var fn=(0,h.A)(function*(br,...Zn){const ks=this.transaction(br,bt?"readwrite":"readonly");let Oi=ks.store;return mt&&(Oi=Oi.index(Zn.shift())),(yield Promise.all([Oi[Ke](...Zn),bt&&ks.done]))[0]});return function(Zn){return fn.apply(this,arguments)}}();return Ce.set(fe,at),at}!function Qe(Te){Je=Te(Je)}(Te=>({...Te,get:(fe,Ke,mt)=>Tt(fe,Ke)||Te.get(fe,Ke,mt),has:(fe,Ke)=>!!Tt(fe,Ke)||Te.has(fe,Ke)}));class sn{constructor(fe){this.container=fe}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function Lr(Te){const fe=Te.getComponent();return"VERSION"===fe?.type}(Ke)){const mt=Ke.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(Ke=>Ke).join(" ")}}const Mi="@firebase/app",$n=new H.Vy("@firebase/app"),Et="[DEFAULT]",on={[Mi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xt=new Map,Ln=new Map;function Bn(Te,fe){try{Te.container.addComponent(fe)}catch(Ke){$n.debug(`Component ${fe.name} failed to register with FirebaseApp ${Te.name}`,Ke)}}function Sr(Te,fe){Te.container.addOrOverwriteComponent(fe)}function An(Te){const fe=Te.name;if(Ln.has(fe))return $n.debug(`There were multiple attempts to register component ${fe}.`),!1;Ln.set(fe,Te);for(const Ke of xt.values())Bn(Ke,Te);return!0}function Mr(Te,fe){const Ke=Te.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),Te.container.getProvider(fe)}function Lo(Te,fe,Ke=Et){Mr(Te,fe).clearInstance(Ke)}function gt(){Ln.clear()}const Qt=new he.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gs{constructor(fe,Ke,mt){this._isDeleted=!1,this._options=Object.assign({},fe),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new N.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(fe){this._isDeleted=fe}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const ts="9.23.0";function Bo(Te,fe={}){let Ke=Te;"object"!=typeof fe&&(fe={name:fe});const mt=Object.assign({name:Et,automaticDataCollectionEnabled:!1},fe),bt=mt.name;if("string"!=typeof bt||!bt)throw Qt.create("bad-app-name",{appName:String(bt)});if(Ke||(Ke=(0,he.T9)()),!Ke)throw Qt.create("no-options");const at=xt.get(bt);if(at){if((0,he.bD)(Ke,at.options)&&(0,he.bD)(mt,at.config))return at;throw Qt.create("duplicate-app",{appName:bt})}const fn=new N.h1(bt);for(const Zn of Ln.values())fn.addComponent(Zn);const br=new gs(Ke,mt,fn);return xt.set(bt,br),br}function _i(Te=Et){const fe=xt.get(Te);if(!fe&&Te===Et&&(0,he.T9)())return Bo();if(!fe)throw Qt.create("no-app",{appName:Te});return fe}function Vo(){return Array.from(xt.values())}function ms(Te){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,h.A)(function*(Te){const fe=Te.name;xt.has(fe)&&(xt.delete(fe),yield Promise.all(Te.container.getProviders().map(Ke=>Ke.delete())),Te.isDeleted=!0)})).apply(this,arguments)}function Pr(Te,fe,Ke){var mt;let bt=null!==(mt=on[Te])&&void 0!==mt?mt:Te;Ke&&(bt+=`-${Ke}`);const at=bt.match(/\s|\//),fn=fe.match(/\s|\//);if(at||fn){const br=[`Unable to register library "${bt}" with version "${fe}":`];return at&&br.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),at&&fn&&br.push("and"),fn&&br.push(`version name "${fe}" contains illegal characters (whitespace or "/")`),void $n.warn(br.join(" "))}An(new N.uA(`${bt}-version`,()=>({library:bt,version:fe}),"VERSION"))}function lo(Te,fe){if(null!==Te&&"function"!=typeof Te)throw Qt.create("invalid-log-argument");(0,H.Ey)(Te,fe)}function cr(Te){(0,H.He)(Te)}const _s="firebase-heartbeat-database",vi=1,Z="firebase-heartbeat-store";let q=null;function ie(){return q||(q=function ue(Te,fe,{blocked:Ke,upgrade:mt,blocking:bt,terminated:at}={}){const fn=indexedDB.open(Te,fe),br=de(fn);return mt&&fn.addEventListener("upgradeneeded",Zn=>{mt(de(fn.result),Zn.oldVersion,Zn.newVersion,de(fn.transaction),Zn)}),Ke&&fn.addEventListener("blocked",Zn=>Ke(Zn.oldVersion,Zn.newVersion,Zn)),br.then(Zn=>{at&&Zn.addEventListener("close",()=>at()),bt&&Zn.addEventListener("versionchange",ks=>bt(ks.oldVersion,ks.newVersion,ks))}).catch(()=>{}),br}(_s,vi,{upgrade:(Te,fe)=>{0===fe&&Te.createObjectStore(Z)}}).catch(Te=>{throw Qt.create("idb-open",{originalErrorMessage:Te.message})})),q}function me(){return(me=(0,h.A)(function*(Te){try{return yield(yield ie()).transaction(Z).objectStore(Z).get(_n(Te))}catch(fe){if(fe instanceof he.g)$n.warn(fe.message);else{const Ke=Qt.create("idb-get",{originalErrorMessage:fe?.message});$n.warn(Ke.message)}}})).apply(this,arguments)}function dt(Te,fe){return wt.apply(this,arguments)}function wt(){return(wt=(0,h.A)(function*(Te,fe){try{const mt=(yield ie()).transaction(Z,"readwrite");yield mt.objectStore(Z).put(fe,_n(Te)),yield mt.done}catch(Ke){if(Ke instanceof he.g)$n.warn(Ke.message);else{const mt=Qt.create("idb-set",{originalErrorMessage:Ke?.message});$n.warn(mt.message)}}})).apply(this,arguments)}function _n(Te){return`${Te.name}!${Te.options.appId}`}class Gt{constructor(fe){this.container=fe,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new Pi(Ke),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var fe=this;return(0,h.A)(function*(){const mt=fe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=hn();if(null===fe._heartbeatsCache&&(fe._heartbeatsCache=yield fe._heartbeatsCachePromise),fe._heartbeatsCache.lastSentHeartbeatDate!==bt&&!fe._heartbeatsCache.heartbeats.some(at=>at.date===bt))return fe._heartbeatsCache.heartbeats.push({date:bt,agent:mt}),fe._heartbeatsCache.heartbeats=fe._heartbeatsCache.heartbeats.filter(at=>{const fn=new Date(at.date).valueOf();return Date.now()-fn<=2592e6}),fe._storage.overwrite(fe._heartbeatsCache)})()}getHeartbeatsHeader(){var fe=this;return(0,h.A)(function*(){if(null===fe._heartbeatsCache&&(yield fe._heartbeatsCachePromise),null===fe._heartbeatsCache||0===fe._heartbeatsCache.heartbeats.length)return"";const Ke=hn(),{heartbeatsToSend:mt,unsentEntries:bt}=function qr(Te,fe=1024){const Ke=[];let mt=Te.slice();for(const bt of Te){const at=Ke.find(fn=>fn.agent===bt.agent);if(at){if(at.dates.push(bt.date),co(Ke)>fe){at.dates.pop();break}}else if(Ke.push({agent:bt.agent,dates:[bt.date]}),co(Ke)>fe){Ke.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:mt}}(fe._heartbeatsCache.heartbeats),at=(0,he.Uj)(JSON.stringify({version:2,heartbeats:mt}));return fe._heartbeatsCache.lastSentHeartbeatDate=Ke,bt.length>0?(fe._heartbeatsCache.heartbeats=bt,yield fe._storage.overwrite(fe._heartbeatsCache)):(fe._heartbeatsCache.heartbeats=[],fe._storage.overwrite(fe._heartbeatsCache)),at})()}}function hn(){return(new Date).toISOString().substring(0,10)}class Pi{constructor(fe){this.app=fe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.A)(function*(){return!!(0,he.zW)()&&(0,he.eX)().then(()=>!0).catch(()=>!1)})()}read(){var fe=this;return(0,h.A)(function*(){return(yield fe._canUseIndexedDBPromise)&&(yield function Ne(Te){return me.apply(this,arguments)}(fe.app))||{heartbeats:[]}})()}overwrite(fe){var Ke=this;return(0,h.A)(function*(){var mt;if(yield Ke._canUseIndexedDBPromise){const at=yield Ke.read();return dt(Ke.app,{lastSentHeartbeatDate:null!==(mt=fe.lastSentHeartbeatDate)&&void 0!==mt?mt:at.lastSentHeartbeatDate,heartbeats:fe.heartbeats})}})()}add(fe){var Ke=this;return(0,h.A)(function*(){var mt;if(yield Ke._canUseIndexedDBPromise){const at=yield Ke.read();return dt(Ke.app,{lastSentHeartbeatDate:null!==(mt=fe.lastSentHeartbeatDate)&&void 0!==mt?mt:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...fe.heartbeats]})}})()}}function co(Te){return(0,he.Uj)(JSON.stringify({version:2,heartbeats:Te})).length}!function Za(Te){An(new N.uA("platform-logger",fe=>new sn(fe),"PRIVATE")),An(new N.uA("heartbeat",fe=>new Gt(fe),"PRIVATE")),Pr(Mi,"0.9.13",Te),Pr(Mi,"0.9.13","esm2017"),Pr("fire-js","")}("")},8779:(ut,Oe,V)=>{"use strict";V.d(Oe,{Kq:()=>_e,h1:()=>Ge,uA:()=>H});var h=V(467),N=V(1401);class H{constructor(G,X,le){this.name=G,this.instanceFactory=X,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const he="[DEFAULT]";class _e{constructor(G,X){this.name=G,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const X=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(X)){const le=new N.cY;if(this.instancesDeferred.set(X,le),this.isInitialized(X)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:X});qe&&le.resolve(qe)}catch{}}return this.instancesDeferred.get(X).promise}getImmediate(G){var X;const le=this.normalizeInstanceIdentifier(G?.identifier),qe=null!==(X=G?.optional)&&void 0!==X&&X;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(Be){if(qe)return null;throw Be}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function Se(Ae){return"EAGER"===Ae.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[X,le]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(X);try{const Be=this.getOrInitializeService({instanceIdentifier:qe});le.resolve(Be)}catch{}}}}clearInstance(G=he){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,h.A)(function*(){const X=Array.from(G.instances.values());yield Promise.all([...X.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...X.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=he){return this.instances.has(G)}getOptions(G=he){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:X={}}=G,le=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:le,options:X});for(const[Be,rt]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier(Be)&&rt.resolve(qe);return qe}onInit(G,X){var le;const qe=this.normalizeInstanceIdentifier(X),Be=null!==(le=this.onInitCallbacks.get(qe))&&void 0!==le?le:new Set;Be.add(G),this.onInitCallbacks.set(qe,Be);const rt=this.instances.get(qe);return rt&&G(rt,qe),()=>{Be.delete(G)}}invokeOnInitCallbacks(G,X){const le=this.onInitCallbacks.get(X);if(le)for(const qe of le)try{qe(G,X)}catch{}}getOrInitializeService({instanceIdentifier:G,options:X={}}){let le=this.instances.get(G);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(Ae=G,Ae===he?void 0:Ae),options:X}),this.instances.set(G,le),this.instancesOptions.set(G,X),this.invokeOnInitCallbacks(le,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,le)}catch{}var Ae;return le||null}normalizeInstanceIdentifier(G=he){return this.component?this.component.multipleInstances?G:he:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ge{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const X=this.getProvider(G.name);if(X.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);X.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const X=new _e(G,this);return this.providers.set(G,X),X}getProviders(){return Array.from(this.providers.values())}}},5398:(ut,Oe,V)=>{"use strict";V.d(Oe,{$b:()=>N,Ey:()=>Ae,He:()=>Ge,Vy:()=>Se});const h=[];var N=function(G){return G[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",G}(N||{});const H={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},he=N.INFO,_e={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},Ee=(G,X,...le)=>{if(X<G.logLevel)return;const qe=(new Date).toISOString(),Be=_e[X];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[Be](`[${qe}]  ${G.name}:`,...le)};class Se{constructor(X){this.name=X,this._logLevel=he,this._logHandler=Ee,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in N))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?H[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...X),this._logHandler(this,N.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...X),this._logHandler(this,N.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,N.INFO,...X),this._logHandler(this,N.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,N.WARN,...X),this._logHandler(this,N.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...X),this._logHandler(this,N.ERROR,...X)}}function Ge(G){h.forEach(X=>{X.setLogLevel(G)})}function Ae(G,X){for(const le of h){let qe=null;X&&X.level&&(qe=H[X.level]),le.userLogHandler=null===G?null:(Be,rt,...Fe)=>{const Je=Fe.map(Qe=>{if(null==Qe)return null;if("string"==typeof Qe)return Qe;if("number"==typeof Qe||"boolean"==typeof Qe)return Qe.toString();if(Qe instanceof Error)return Qe.message;try{return JSON.stringify(Qe)}catch{return null}}).filter(Qe=>Qe).join(" ");rt>=(qe??Be.logLevel)&&G({level:N[rt].toLowerCase(),message:Je,args:Fe,type:Be.name})}}}},7037:(ut,Oe,V)=>{"use strict";V.d(Oe,{Dk:()=>h.getApps,Sx:()=>h.getApp});var h=V(2979);(0,h.registerVersion)("firebase","9.23.0","app")},762:(ut,Oe,V)=>{"use strict";V.d(Oe,{A:()=>h.A});var h=V(9574);h.A.registerVersion("firebase","9.23.0","app-compat")},455:(ut,Oe,V)=>{"use strict";var h=V(467),N=V(9574),H=V(1401),he=V(2979),_e=V(1635),Ee=V(5398),Se=V(8779);const Ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const rt=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Fe=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Je=new H.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new Ee.Vy("@firebase/auth");function de(y,...p){_t.logLevel<=Ee.$b.ERROR&&_t.error(`Auth (${he.SDK_VERSION}): ${y}`,...p)}function Me(y,...p){throw it(y,...p)}function ue(y,...p){return it(y,...p)}function xe(y,p,_){const C=Object.assign(Object.assign({},Fe()),{[p]:_});return new H.FA("auth","Firebase",C).create(p,{appName:y.name})}function ze(y,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Me(y,"argument-error"),xe(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function it(y,...p){if("string"!=typeof y){const _=p[0],C=[...p.slice(1)];return C[0]&&(C[0].appName=y.name),y._errorFactory.create(_,...C)}return Je.create(y,...p)}function Ce(y,p,..._){if(!y)throw it(p,..._)}function Tt(y){const p="INTERNAL ASSERTION FAILED: "+y;throw de(p),new Error(p)}function sn(y,p){y||Tt(p)}function Lr(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Mi(){return"http:"===so()||"https:"===so()}function so(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class oo{constructor(p,_){this.shortDelay=p,this.longDelay=_,sn(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,H.jZ)()||(0,H.lV)()}get(){return function $n(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mi()||(0,H.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ps(y,p){sn(y.emulator,"Emulator should always be set here");const{url:_}=y.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Br{static initialize(p,_,C){this.fetchImpl=p,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},De=new oo(3e4,6e4);function ge(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function ve(y,p,_,C){return ke.apply(this,arguments)}function ke(){return(ke=(0,h.A)(function*(y,p,_,C,M={}){return be(y,M,(0,h.A)(function*(){let k={},Q={};C&&("GET"===p?Q=C:k={body:JSON.stringify(C)});const re=(0,H.Am)(Object.assign({key:y.config.apiKey},Q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Br.fetch()(ot(y,y.config.apiHost,_,re),Object.assign({method:p,headers:Ue,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function be(y,p,_){return pt.apply(this,arguments)}function pt(){return(pt=(0,h.A)(function*(y,p,_){y._canInitEmulator=!1;const C=Object.assign(Object.assign({},ye),p);try{const M=new On(y),k=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw Sn(y,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const re=k.ok?Q.errorMessage:Q.error.message,[Ue,et]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Sn(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ue)throw Sn(y,"email-already-in-use",Q);if("USER_DISABLED"===Ue)throw Sn(y,"user-disabled",Q);const yt=C[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw xe(y,yt,et);Me(y,yt)}}catch(M){if(M instanceof H.g)throw M;Me(y,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Wt(y,p,_,C){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.A)(function*(y,p,_,C,M={}){const k=yield ve(y,p,_,C,M);return"mfaPendingCredential"in k&&Me(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function ot(y,p,_,C){const M=`${p}${_}?${C}`;return y.config.emulator?ps(y.config,M):`${y.config.apiScheme}://${M}`}class On{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(ue(this.auth,"network-request-failed")),De.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(y,p,_){const C={appName:y.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const M=ue(y,p,C);return M.customData._tokenResponse=_,M}function Ft(){return(Ft=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Fn(){return(Fn=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yr(){return(yr=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function zr(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Et(){return(Et=(0,h.A)(function*(y,p=!1){const _=(0,H.Ku)(y),C=yield _.getIdToken(p),M=xt(C);Ce(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const k="object"==typeof M.firebase?M.firebase:void 0,Q=k?.sign_in_provider;return{claims:M,token:C,authTime:zr(on(M.auth_time)),issuedAtTime:zr(on(M.iat)),expirationTime:zr(on(M.exp)),signInProvider:Q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function on(y){return 1e3*Number(y)}function xt(y){const[p,_,C]=y.split(".");if(void 0===p||void 0===_||void 0===C)return de("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,H.u)(_);return M?JSON.parse(M):(de("Failed to decode base64 JWT payload"),null)}catch(M){return de("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Bn(y,p){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.A)(function*(y,p,_=!1){if(_)return p;try{return yield p}catch(C){throw C instanceof H.g&&function An({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(C)&&y.auth.currentUser===y&&(yield y.auth.signOut()),C}})).apply(this,arguments)}class Mr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(p);this.timerId=setTimeout((0,h.A)(function*(){yield _.iteration()}),C)}iteration(){var p=this;return(0,h.A)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Lo{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gt(y){return ri.apply(this,arguments)}function ri(){return ri=(0,h.A)(function*(y){var p;const _=y.auth,C=yield y.getIdToken(),M=yield Bn(y,function Tr(y,p){return yr.apply(this,arguments)}(_,{idToken:C}));Ce(M?.users.length,_,"internal-error");const k=M.users[0];y._notifyReloadListener(k);const Q=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?function Bo(y){return y.map(p=>{var{providerId:_}=p,C=(0,_e.Tt)(p,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(k.providerUserInfo):[],re=function ts(y,p){return[...y.filter(C=>!p.some(M=>M.providerId===C.providerId)),...p]}(y.providerData,Q),yt=!!y.isAnonymous&&!(y.email&&k.passwordHash||re?.length),st={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:re,metadata:new Lo(k.createdAt,k.lastLoginAt),isAnonymous:yt};Object.assign(y,st)}),ri.apply(this,arguments)}function gs(){return(gs=(0,h.A)(function*(y){const p=(0,H.Ku)(y);yield gt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Vo(){return(Vo=(0,h.A)(function*(y,p){const _=yield be(y,{},(0,h.A)(function*(){const C=(0,H.Am)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:k}=y.config,Q=ot(y,M,"/v1/token",`key=${k}`),re=yield y._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Br.fetch()(Q,{method:"POST",headers:re,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Ce(p.idToken,"internal-error"),Ce(typeof p.idToken<"u","internal-error"),Ce(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Ln(y){const p=xt(y);return Ce(p,"internal-error"),Ce(typeof p.exp<"u","internal-error"),Ce(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p){var _=this;return(0,h.A)(function*(C,M=!1){return Ce(!_.accessToken||_.refreshToken,C,"user-token-expired"),M||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(C,_.refreshToken),_.accessToken):null:_.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var C=this;return(0,h.A)(function*(){const{accessToken:M,refreshToken:k,expiresIn:Q}=yield function _i(y,p){return Vo.apply(this,arguments)}(p,_);C.updateTokensAndExpiration(M,k,Number(Q))})()}updateTokensAndExpiration(p,_,C){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(p,_){const{refreshToken:C,accessToken:M,expirationTime:k}=_,Q=new ms;return C&&(Ce("string"==typeof C,"internal-error",{appName:p}),Q.refreshToken=C),M&&(Ce("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),k&&(Ce("number"==typeof k,"internal-error",{appName:p}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ms,this.toJSON())}_performRefresh(){return Tt("not implemented")}}function Rr(y,p){Ce("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class Pr{constructor(p){var{uid:_,auth:C,stsTokenManager:M}=p,k=(0,_e.Tt)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Lo(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,h.A)(function*(){const C=yield Bn(_,_.stsTokenManager.getToken(_.auth,p));return Ce(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(p){return function ao(y){return Et.apply(this,arguments)}(this,p)}reload(){return function Qt(y){return gs.apply(this,arguments)}(this)}_assign(p){this!==p&&(Ce(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Pr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p){var _=this;return(0,h.A)(function*(C,M=!1){let k=!1;C.idToken&&C.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(C),k=!0),M&&(yield gt(_)),yield _.auth._persistUserIfCurrent(_),k&&_.auth._notifyListenersIfCurrent(_)}).apply(this,arguments)}delete(){var p=this;return(0,h.A)(function*(){const _=yield p.getIdToken();return yield Bn(p,function Kn(y,p){return Ft.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var C,M,k,Q,re,Ue,et,yt;const st=null!==(C=_.displayName)&&void 0!==C?C:void 0,Cn=null!==(M=_.email)&&void 0!==M?M:void 0,Zi=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,aa=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,bc=null!==(re=_.tenantId)&&void 0!==re?re:void 0,Il=null!==(Ue=_._redirectEventId)&&void 0!==Ue?Ue:void 0,la=null!==(et=_.createdAt)&&void 0!==et?et:void 0,Ic=null!==(yt=_.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:bd,emailVerified:_u,isAnonymous:Dc,providerData:Dl,stsTokenManager:ap}=_;Ce(bd&&ap,p,"internal-error");const Sg=ms.fromJSON(this.name,ap);Ce("string"==typeof bd,p,"internal-error"),Rr(st,p.name),Rr(Cn,p.name),Ce("boolean"==typeof _u,p,"internal-error"),Ce("boolean"==typeof Dc,p,"internal-error"),Rr(Zi,p.name),Rr(aa,p.name),Rr(bc,p.name),Rr(Il,p.name),Rr(la,p.name),Rr(Ic,p.name);const uf=new Pr({uid:bd,auth:p,email:Cn,emailVerified:_u,displayName:st,isAnonymous:Dc,photoURL:aa,phoneNumber:Zi,tenantId:bc,stsTokenManager:Sg,createdAt:la,lastLoginAt:Ic});return Dl&&Array.isArray(Dl)&&(uf.providerData=Dl.map(lp=>Object.assign({},lp))),Il&&(uf._redirectEventId=Il),uf}static _fromIdTokenResponse(p,_){return(0,h.A)(function*(C,M,k=!1){const Q=new ms;Q.updateFromServerResponse(M);const re=new Pr({uid:M.localId,auth:C,stsTokenManager:Q,isAnonymous:k});return yield gt(re),re}).apply(this,arguments)}}const lo=new Map;function cr(y){sn(y instanceof Function,"Expected a class definition");let p=lo.get(y);return p?(sn(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,lo.set(y,p),p)}const vi=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.A)(function*(){return!0})()}_set(_,C){var M=this;return(0,h.A)(function*(){M.storage[_]=C})()}_get(_){var C=this;return(0,h.A)(function*(){const M=C.storage[_];return void 0===M?null:M})()}_remove(_){var C=this;return(0,h.A)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return y.type="NONE",y})();function Z(y,p,_){return`firebase:${y}:${p}:${_}`}class q{constructor(p,_,C){this.persistence=p,this.auth=_,this.userKey=C;const{config:M,name:k}=this.auth;this.fullUserKey=Z(this.userKey,M.apiKey,k),this.fullPersistenceKey=Z("persistence",M.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.A)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Pr._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,h.A)(function*(){if(_.persistence===p)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_){return(0,h.A)(function*(C,M,k="authUser"){if(!M.length)return new q(cr(vi),C,k);const Q=(yield Promise.all(M.map(function(){var st=(0,h.A)(function*(Cn){if(yield Cn._isAvailable())return Cn});return function(Cn){return st.apply(this,arguments)}}()))).filter(st=>st);let re=Q[0]||cr(vi);const Ue=Z(k,C.config.apiKey,C.name);let et=null;for(const st of M)try{const Cn=yield st._get(Ue);if(Cn){const Zi=Pr._fromJSON(C,Cn);st!==re&&(et=Zi),re=st;break}}catch{}const yt=Q.filter(st=>st._shouldAllowMigration);return re._shouldAllowMigration&&yt.length?(re=yt[0],et&&(yield re._set(Ue,et.toJSON())),yield Promise.all(M.map(function(){var st=(0,h.A)(function*(Cn){if(Cn!==re)try{yield Cn._remove(Ue)}catch{}});return function(Cn){return st.apply(this,arguments)}}())),new q(re,C,k)):new q(re,C,k)}).apply(this,arguments)}}function ie(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(wt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ne(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Tn(p))return"Blackberry";if(wr(p))return"Webos";if(me(p))return"Safari";if((p.includes("chrome/")||dt(p))&&!p.includes("edge/"))return"Chrome";if(_n(p))return"Android";{const C=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Ne(y=(0,H.ZQ)()){return/firefox\//i.test(y)}function me(y=(0,H.ZQ)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function dt(y=(0,H.ZQ)()){return/crios\//i.test(y)}function wt(y=(0,H.ZQ)()){return/iemobile/i.test(y)}function _n(y=(0,H.ZQ)()){return/android/i.test(y)}function Tn(y=(0,H.ZQ)()){return/blackberry/i.test(y)}function wr(y=(0,H.ZQ)()){return/webos/i.test(y)}function Gt(y=(0,H.ZQ)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function co(y=(0,H.ZQ)()){return Gt(y)||_n(y)||wr(y)||Tn(y)||/windows phone/i.test(y)||wt(y)}function Te(y,p=[]){let _;switch(y){case"Browser":_=ie((0,H.ZQ)());break;case"Worker":_=`${ie((0,H.ZQ)())}-${y}`;break;default:_=y}const C=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${he.SDK_VERSION}/${C}`}function Ke(){return(Ke=(0,h.A)(function*(y){return(yield ve(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mt(y,p){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.A)(function*(y,p){return ve(y,"GET","/v2/recaptchaConfig",ge(y,p))})).apply(this,arguments)}function at(y){return void 0!==y&&void 0!==y.getResponse}function fn(y){return void 0!==y&&void 0!==y.enterprise}class br{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function ks(y){return new Promise((p,_)=>{const C=document.createElement("script");C.setAttribute("src",y),C.onload=p,C.onerror=M=>{const k=ue("internal-error");k.customData=M,_(k)},C.type="text/javascript",C.charset="UTF-8",function Zn(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(C)})}function Oi(y){return`__${y}${Math.floor(1e6*Math.random())}`}class Fl{constructor(p){this.type="recaptcha-enterprise",this.auth=ur(p)}verify(){var p=this;return(0,h.A)(function*(_="verify",C=!1){function k(){return k=(0,h.A)(function*(re){if(!C){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var Ue=(0,h.A)(function*(et,yt){mt(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const Cn=new br(st);return null==re.tenantId?re._agentRecaptchaConfig=Cn:re._tenantRecaptchaConfigs[re.tenantId]=Cn,et(Cn.siteKey)}yt(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{yt(st)})});return function(et,yt){return Ue.apply(this,arguments)}}())}),k.apply(this,arguments)}function Q(re,Ue,et){const yt=window.grecaptcha;fn(yt)?yt.enterprise.ready(()=>{yt.enterprise.execute(re,{action:_}).then(st=>{Ue(st)}).catch(()=>{Ue("NO_RECAPTCHA")})}):et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,Ue)=>{(function M(re){return k.apply(this,arguments)})(p.auth).then(et=>{if(!C&&fn(window.grecaptcha))Q(et,re,Ue);else{if(typeof window>"u")return void Ue(new Error("RecaptchaVerifier is only supported in browser"));ks("https://www.google.com/recaptcha/enterprise.js?render="+et).then(()=>{Q(et,re,Ue)}).catch(yt=>{Ue(yt)})}}).catch(et=>{Ue(et)})})}).apply(this,arguments)}}function ns(y,p,_){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,h.A)(function*(y,p,_,C=!1){const M=new Fl(y);let k;try{k=yield M.verify(_)}catch{k=yield M.verify(_,!0)}const Q=Object.assign({},p);return Object.assign(Q,C?{captchaResp:k}:{captchaResponse:k}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class Uo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const C=k=>new Promise((Q,re)=>{try{Q(p(k))}catch(Ue){re(Ue)}});C.onAbort=_,this.queue.push(C);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,h.A)(function*(){if(_.auth.currentUser===p)return;const C=[];try{for(const M of _.queue)yield M(p),M.onAbort&&C.push(M.onAbort)}catch(M){C.reverse();for(const k of C)try{k()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Bu{constructor(p,_,C,M){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=C,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ho(this),this.idTokenSubscription=new ho(this),this.beforeStateQueue=new Uo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Je,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var C=this;return _&&(this._popupRedirectResolver=cr(_)),this._initializationPromise=this.queue((0,h.A)(function*(){var M,k;if(!C._deleted&&(C.persistenceManager=yield q.create(C,p),!C._deleted)){if(null!==(M=C._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.A)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,h.A)(function*(){var C;const M=yield _.assertedPersistence.getCurrentUser();let k=M,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const re=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Ue=k?._redirectEventId,et=yield _.tryRedirectSignIn(p);(!re||re===Ue)&&et?.user&&(k=et.user,Q=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(k)}catch(re){k=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(re))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return Ce(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var _=this;return(0,h.A)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,h.A)(function*(){try{yield gt(p)}catch(C){if("auth/network-request-failed"!==C?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ri(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,h.A)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,h.A)(function*(){const C=p?(0,H.Ku)(p):null;return C&&Ce(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,h.A)(function*(C,M=!1){if(!_._deleted)return C&&Ce(_.tenantId===C.tenantId,_,"tenant-id-mismatch"),M||(yield _.beforeStateQueue.runMiddleware(C)),_.queue((0,h.A)(function*(){yield _.directlySetCurrentUser(C),_.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var p=this;return(0,h.A)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,h.A)(function*(){yield _.assertedPersistence.setPersistence(cr(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.A)(function*(){const _=yield mt(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),C=new br(_);null==p.tenantId?p._agentRecaptchaConfig=C:p._tenantRecaptchaConfigs[p.tenantId]=C,C.emailPasswordEnabled&&new Fl(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new H.FA("auth","Firebase",p())}onAuthStateChanged(p,_,C){return this.registerStateListener(this.authStateSubscription,p,_,C)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,C){return this.registerStateListener(this.idTokenSubscription,p,_,C)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var C=this;return(0,h.A)(function*(){const M=yield C.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,h.A)(function*(){if(!_.redirectPersistenceManager){const C=p&&cr(p)||_._popupRedirectResolver;Ce(C,_,"argument-error"),_.redirectPersistenceManager=yield q.create(_,[cr(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,h.A)(function*(){var C,M;return _._isInitialized&&(yield _.queue((0,h.A)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,h.A)(function*(){if(p===_.currentUser)return _.queue((0,h.A)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,C,M){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return Ce(Q,this,"internal-error"),Q.then(()=>k(this.currentUser)),"function"==typeof _?p.addObserver(_,C,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,h.A)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Te(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.A)(function*(){var _;const C={"X-Client-Version":p.clientVersion};p.app.options.appId&&(C["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(C["X-Firebase-Client"]=M);const k=yield p._getAppCheckToken();return k&&(C["X-Firebase-AppCheck"]=k),C})()}_getAppCheckToken(){var p=this;return(0,h.A)(function*(){var _;const C=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return C?.error&&function vt(y,...p){_t.logLevel<=Ee.$b.WARN&&_t.warn(`Auth (${he.SDK_VERSION}): ${y}`,...p)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function ur(y){return(0,H.Ku)(y)}class ho{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,H.tD)(_=>this.observer=_)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yr(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function qc(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Ho{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Tt("not implemented")}_getIdTokenResponse(p){return Tt("not implemented")}_linkToIdToken(p,_){return Tt("not implemented")}_getReauthenticationResolver(p){return Tt("not implemented")}}function Uu(y,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:resetPassword",ge(y,p))})).apply(this,arguments)}function Hu(y,p){return ju.apply(this,arguments)}function ju(){return(ju=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bl(){return(Bl=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:update",ge(y,p))})).apply(this,arguments)}function dr(y,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithPassword",ge(y,p))})).apply(this,arguments)}function Vl(y,p){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:sendOobCode",ge(y,p))})).apply(this,arguments)}function Xc(){return(Xc=(0,h.A)(function*(y,p){return Vl(y,p)})).apply(this,arguments)}function _a(y,p){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,h.A)(function*(y,p){return Vl(y,p)})).apply(this,arguments)}function Jc(y,p){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.A)(function*(y,p){return Vl(y,p)})).apply(this,arguments)}function Ur(){return(Ur=(0,h.A)(function*(y,p){return Vl(y,p)})).apply(this,arguments)}function Ni(){return(Ni=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithEmailLink",ge(y,p))})).apply(this,arguments)}function $u(){return($u=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithEmailLink",ge(y,p))})).apply(this,arguments)}class fo extends Ho{constructor(p,_,C,M=null){super("password",C),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new fo(p,_,"password")}static _fromEmailAndCode(p,_,C=null){return new fo(p,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,h.A)(function*(){var C;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=p._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const k=yield ns(p,M,"signInWithPassword");return dr(p,k)}return dr(p,M).catch(function(){var k=(0,h.A)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const re=yield ns(p,M,"signInWithPassword");return dr(p,re)}return Promise.reject(Q)});return function(Q){return k.apply(this,arguments)}}());case"emailLink":return function $o(y,p){return Ni.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Me(p,"internal-error")}})()}_linkToIdToken(p,_){var C=this;return(0,h.A)(function*(){switch(C.signInMethod){case"password":return Hu(p,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function zh(y,p){return $u.apply(this,arguments)}(p,{idToken:_,email:C._email,oobCode:C._password});default:Me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function rs(y,p){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithIdp",ge(y,p))})).apply(this,arguments)}class nt extends Ho{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new nt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:M}=_,k=(0,_e.Tt)(_,["providerId","signInMethod"]);if(!C||!M)return null;const Q=new nt(C,M);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(p){return rs(p,this.buildRequest())}_linkToIdToken(p,_){const C=this.buildRequest();return C.idToken=_,rs(p,C)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,rs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,H.Am)(_)}return p}}function Mt(){return(Mt=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:sendVerificationCode",ge(y,p))})).apply(this,arguments)}function el(){return(el=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithPhoneNumber",ge(y,p))})).apply(this,arguments)}function is(){return(is=(0,h.A)(function*(y,p){const _=yield Wt(y,"POST","/v1/accounts:signInWithPhoneNumber",ge(y,p));if(_.temporaryProof)throw Sn(y,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const fr={USER_NOT_FOUND:"user-not-found"};function vs(){return(vs=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithPhoneNumber",ge(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),fr)})).apply(this,arguments)}class Ct extends Ho{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ct({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ct({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function un(y,p){return el.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function yi(y,p){return is.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Wo(y,p){return vs.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:C,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:C,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:C,phoneNumber:M,temporaryProof:k}=p;return C||_||M||k?new Ct({verificationId:_,verificationCode:C,phoneNumber:M,temporaryProof:k}):null}}class Fs{constructor(p){var _,C,M,k,Q,re;const Ue=(0,H.I9)((0,H.hp)(p)),et=null!==(_=Ue.apiKey)&&void 0!==_?_:null,yt=null!==(C=Ue.oobCode)&&void 0!==C?C:null,st=function Hl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ue.mode)&&void 0!==M?M:null);Ce(et&&yt&&st,"argument-error"),this.apiKey=et,this.operation=st,this.code=yt,this.continueUrl=null!==(k=Ue.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=Ue.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(re=Ue.tenantId)&&void 0!==re?re:null}static parseLink(p){const _=function Ir(y){const p=(0,H.I9)((0,H.hp)(y)).link,_=p?(0,H.I9)((0,H.hp)(p)).deep_link_id:null,C=(0,H.I9)((0,H.hp)(y)).deep_link_id;return(C?(0,H.I9)((0,H.hp)(C)).link:null)||C||_||p||y}(p);try{return new Fs(_)}catch{return null}}}let va=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(_,C){return fo._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const M=Fs.parseLink(C);return Ce(M,"argument-error"),fo._fromEmailAndCode(_,M.code,M.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ii{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class zn extends ii{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Gi extends zn{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Ce("providerId"in _&&"signInMethod"in _,"argument-error"),nt._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Ce(p.idToken||p.accessToken,"argument-error"),nt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Gi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Gi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:M,pendingToken:k,nonce:Q,providerId:re}=p;if(!C&&!M&&!_&&!k||!re)return null;try{return new Gi(re)._credential({idToken:_,accessToken:C,nonce:Q,pendingToken:k})}catch{return null}}}let Gu=(()=>{class y extends zn{constructor(){super("facebook.com")}static credential(_){return nt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return y.credential(_.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ss=(()=>{class y extends zn{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return nt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:M}=_;if(!C&&!M)return null;try{return y.credential(C,M)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ls=(()=>{class y extends zn{constructor(){super("github.com")}static credential(_){return nt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return y.credential(_.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ys extends Ho{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return rs(p,this.buildRequest())}_linkToIdToken(p,_){const C=this.buildRequest();return C.idToken=_,rs(p,C)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,rs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:M,pendingToken:k}=_;return C&&M&&k&&C===M?new ys(C,k):null}static _create(p,_){return new ys(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ku extends ii{constructor(p){Ce(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ku.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ku.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=ys.fromJSON(p);return Ce(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:C}=p;if(!_||!C)return null;try{return ys._create(C,_)}catch{return null}}}let si=(()=>{class y extends zn{constructor(){super("twitter.com")}static credential(_,C){return nt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:M}=_;if(!C||!M)return null;try{return y.credential(C,M)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Bs(y,p){return ki.apply(this,arguments)}function ki(){return(ki=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signUp",ge(y,p))})).apply(this,arguments)}class nr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,C){return(0,h.A)(function*(M,k,Q,re=!1){const Ue=yield Pr._fromIdTokenResponse(M,Q,re),et=os(Q);return new nr({user:Ue,providerId:et,_tokenResponse:Q,operationType:k})}).apply(this,arguments)}static _forOperation(p,_,C){return(0,h.A)(function*(){yield p._updateTokensIfNecessary(C,!0);const M=os(C);return new nr({user:p,providerId:M,_tokenResponse:C,operationType:_})})()}}function os(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function tn(){return(tn=(0,h.A)(function*(y){var p;const _=ur(y);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new nr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Bs(_,{returnSecureToken:!0}),M=yield nr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Es extends H.g{constructor(p,_,C,M){var k;super(_.code,_.message),this.operationType=C,this.user=M,Object.setPrototypeOf(this,Es.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(p,_,C,M){return new Es(p,_,C,M)}}function Xr(y,p,_,C){return("reauthenticate"===p?_._getReauthenticationResolver(y):_._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Es._fromErrorAndOperation(y,k,p,C):k})}function oi(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function ai(){return ai=(0,h.A)(function*(y,p){const _=(0,H.Ku)(y);yield go(!0,_,p);const{providerUserInfo:C}=yield function lr(y,p){return Fn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=oi(C||[]);return _.providerData=_.providerData.filter(k=>M.has(k.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),ai.apply(this,arguments)}function Ea(y,p){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,h.A)(function*(y,p,_=!1){const C=yield Bn(y,p._linkToIdToken(y.auth,yield y.getIdToken()),_);return nr._forOperation(y,"link",C)})).apply(this,arguments)}function go(y,p,_){return tl.apply(this,arguments)}function tl(){return(tl=(0,h.A)(function*(y,p,_){yield gt(p);const M=!1===y?"provider-already-linked":"no-such-provider";Ce(oi(p.providerData).has(_)===y,p.auth,M)})).apply(this,arguments)}function nl(y,p){return zu.apply(this,arguments)}function zu(){return(zu=(0,h.A)(function*(y,p,_=!1){const{auth:C}=y,M="reauthenticate";try{const k=yield Bn(y,Xr(C,M,p,y),_);Ce(k.idToken,C,"internal-error");const Q=xt(k.idToken);Ce(Q,C,"internal-error");const{sub:re}=Q;return Ce(y.uid===re,C,"user-mismatch"),nr._forOperation(y,M,k)}catch(k){throw"auth/user-not-found"===k?.code&&Me(C,"user-mismatch"),k}})).apply(this,arguments)}function eu(y,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,h.A)(function*(y,p,_=!1){const C="signIn",M=yield Xr(y,C,p),k=yield nr._fromIdTokenResponse(y,C,M);return _||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function $l(y,p){return nu.apply(this,arguments)}function nu(){return(nu=(0,h.A)(function*(y,p){return eu(ur(y),p)})).apply(this,arguments)}function qh(y,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,h.A)(function*(y,p){const _=(0,H.Ku)(y);return yield go(!1,_,p.providerId),Ea(_,p)})).apply(this,arguments)}function $d(y,p){return qu.apply(this,arguments)}function qu(){return(qu=(0,h.A)(function*(y,p){return nl((0,H.Ku)(y),p)})).apply(this,arguments)}function Wd(){return(Wd=(0,h.A)(function*(y,p){return Wt(y,"POST","/v1/accounts:signInWithCustomToken",ge(y,p))})).apply(this,arguments)}function Cs(){return Cs=(0,h.A)(function*(y,p){const _=ur(y),C=yield function Dg(y,p){return Wd.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),M=yield nr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(M.user),M}),Cs.apply(this,arguments)}class Ca{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Wl._fromServerResponse(p,_):"totpInfo"in _?ru._fromServerResponse(p,_):Me(p,"internal-error")}}class Wl extends Ca{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Wl(_)}}class ru extends Ca{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new ru(_)}}function wa(y,p,_){var C;Ce((null===(C=_.url)||void 0===C?void 0:C.length)>0,y,"invalid-continue-uri"),Ce(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ce(_.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Ce(_.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Gl(){return Gl=(0,h.A)(function*(y,p,_){var C;const M=ur(y),k={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=M._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const Q=yield ns(M,k,"getOobCode",!0);_&&wa(M,Q,_),yield _a(M,Q)}else _&&wa(M,k,_),yield _a(M,k).catch(function(){var Q=(0,h.A)(function*(re){if("auth/missing-recaptcha-token"!==re.code)return Promise.reject(re);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ue=yield ns(M,k,"getOobCode",!0);_&&wa(M,Ue,_),yield _a(M,Ue)}});return function(re){return Q.apply(this,arguments)}}())}),Gl.apply(this,arguments)}function mo(){return(mo=(0,h.A)(function*(y,p,_){yield Uu((0,H.Ku)(y),{oobCode:p,newPassword:_})})).apply(this,arguments)}function as(){return as=(0,h.A)(function*(y,p){yield function xi(y,p){return Bl.apply(this,arguments)}((0,H.Ku)(y),{oobCode:p})}),as.apply(this,arguments)}function Gd(y,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.A)(function*(y,p){const _=(0,H.Ku)(y),C=yield Uu(_,{oobCode:p}),M=C.requestType;switch(Ce(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ce(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ce(C.mfaInfo,_,"internal-error");default:Ce(C.email,_,"internal-error")}let k=null;return C.mfaInfo&&(k=Ca._fromServerResponse(ur(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:M}})).apply(this,arguments)}function er(){return(er=(0,h.A)(function*(y,p){const{data:_}=yield Gd((0,H.Ku)(y),p);return _.email})).apply(this,arguments)}function Kl(){return Kl=(0,h.A)(function*(y,p,_){var C;const M=ur(y),k={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(C=M._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const et=yield ns(M,k,"signUpPassword");Q=Bs(M,et)}else Q=Bs(M,k).catch(function(){var et=(0,h.A)(function*(yt){if("auth/missing-recaptcha-token"===yt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield ns(M,k,"signUpPassword");return Bs(M,st)}return Promise.reject(yt)});return function(yt){return et.apply(this,arguments)}}());const re=yield Q.catch(et=>Promise.reject(et)),Ue=yield nr._fromIdTokenResponse(M,"signIn",re);return yield M._updateCurrentUser(Ue.user),Ue}),Kl.apply(this,arguments)}function ws(){return ws=(0,h.A)(function*(y,p,_){var C;const M=ur(y),k={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(re,Ue){Ce(Ue.handleCodeInApp,M,"argument-error"),Ue&&wa(M,re,Ue)}if(null!==(C=M._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const re=yield ns(M,k,"getOobCode",!0);Q(re,_),yield Jc(M,re)}else Q(k,_),yield Jc(M,k).catch(function(){var re=(0,h.A)(function*(Ue){if("auth/missing-recaptcha-token"!==Ue.code)return Promise.reject(Ue);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const et=yield ns(M,k,"getOobCode",!0);Q(et,_),yield Jc(M,et)}});return function(Ue){return re.apply(this,arguments)}}())}),ws.apply(this,arguments)}function iu(){return(iu=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y),M=va.credentialWithLink(p,_||Lr());return Ce(M._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),$l(C,M)})).apply(this,arguments)}function Qu(){return(Qu=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:createAuthUri",ge(y,p))})).apply(this,arguments)}function il(){return il=(0,h.A)(function*(y,p){const C={identifier:p,continueUri:Mi()?Lr():"http://localhost"},{signinMethods:M}=yield function Yu(y,p){return Qu.apply(this,arguments)}((0,H.Ku)(y),C);return M||[]}),il.apply(this,arguments)}function ne(){return ne=(0,h.A)(function*(y,p){const _=(0,H.Ku)(y),M={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&wa(_.auth,M,p);const{email:k}=yield function Ul(y,p){return Xc.apply(this,arguments)}(_.auth,M);k!==y.email&&(yield y.reload())}),ne.apply(this,arguments)}function we(){return we=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};_&&wa(C.auth,k,_);const{email:Q}=yield function Qr(y,p){return Ur.apply(this,arguments)}(C.auth,k);Q!==y.email&&(yield y.reload())}),we.apply(this,arguments)}function qt(){return(qt=(0,h.A)(function*(y,p){return ve(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function gr(){return gr=(0,h.A)(function*(y,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const C=(0,H.Ku)(y),k={idToken:yield C.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield Bn(C,function ht(y,p){return qt.apply(this,arguments)}(C.auth,k));C.displayName=Q.displayName||null,C.photoURL=Q.photoUrl||null;const re=C.providerData.find(({providerId:Ue})=>"password"===Ue);re&&(re.displayName=C.displayName,re.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Q)}),gr.apply(this,arguments)}function Zu(y,p,_){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,h.A)(function*(y,p,_){const{auth:C}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(k.email=p),_&&(k.password=_);const Q=yield Bn(y,Hu(C,k));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class ol{constructor(p,_,C={}){this.isNewUser=p,this.providerId=_,this.profile=C}}class _o extends ol{constructor(p,_,C,M){super(p,_,C),this.username=M}}class Yl extends ol{constructor(p,_){super(p,"facebook.com",_)}}class Ql extends _o{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class wn extends ol{constructor(p,_){super(p,"google.com",_)}}class Xl extends _o{constructor(p,_,C){super(p,"twitter.com",_,C)}}function zd(y){const{user:p,_tokenResponse:_}=y;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function sl(y){var p,_;if(!y)return null;const{providerId:C}=y,M=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!C&&y?.idToken){const Q=null===(_=null===(p=xt(y.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new ol(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!C)return null;switch(C){case"facebook.com":return new Yl(k,M);case"github.com":return new Ql(k,M);case"google.com":return new wn(k,M);case"twitter.com":return new Xl(k,M,y.screenName||null);case"custom":case"anonymous":return new ol(k,null);default:return new ol(k,C,M)}}(_)}class Us{constructor(p,_,C){this.type=p,this.credential=_,this.auth=C}static _fromIdtoken(p,_){return new Us("enroll",p,_)}static _fromMfaPendingCredential(p){return new Us("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,C;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Us._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(C=p.multiFactorSession)&&void 0!==C&&C.idToken)return Us._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Hs{constructor(p,_,C){this.session=p,this.hints=_,this.signInResolver=C}static _fromError(p,_){const C=ur(p),M=_.customData._serverResponse,k=(M.mfaInfo||[]).map(re=>Ca._fromServerResponse(C,re));Ce(M.mfaPendingCredential,C,"internal-error");const Q=Us._fromMfaPendingCredential(M.mfaPendingCredential);return new Hs(Q,k,function(){var re=(0,h.A)(function*(Ue){const et=yield Ue._process(C,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const yt=Object.assign(Object.assign({},M),{idToken:et.idToken,refreshToken:et.refreshToken});switch(_.operationType){case"signIn":const st=yield nr._fromIdTokenResponse(C,_.operationType,yt);return yield C._updateCurrentUser(st.user),st;case"reauthenticate":return Ce(_.user,C,"internal-error"),nr._forOperation(_.user,_.operationType,yt);default:Me(C,"internal-error")}});return function(Ue){return re.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,h.A)(function*(){return _.signInResolver(p)})()}}class Sa{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Ca._fromServerResponse(p.auth,C)))})}static _fromUser(p){return new Sa(p)}getSession(){var p=this;return(0,h.A)(function*(){return Us._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var C=this;return(0,h.A)(function*(){const M=p,k=yield C.getSession(),Q=yield Bn(C.user,M._process(C.user.auth,k,_));return yield C.user._updateTokensIfNecessary(Q),C.user.reload()})()}unenroll(p){var _=this;return(0,h.A)(function*(){const C="string"==typeof p?p:p.uid,M=yield _.user.getIdToken();try{const k=yield Bn(_.user,function Qd(y,p){return ve(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ge(y,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==C),yield _.user._updateTokensIfNecessary(k),yield _.user.reload()}catch(k){throw k}})()}}const bn=new WeakMap,Eo="__sak";class Bi{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Eo,"1"),this.storage.removeItem(Eo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Er=(()=>{class y extends Bi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ju(){const y=(0,H.ZQ)();return me(y)||Gt(y)}()&&function Za(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=co(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const M=this.storage.getItem(C),k=this.localCache[C];M!==k&&_(C,k,M)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((re,Ue,et)=>{this.notifyListeners(re,et)});const M=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(M);if(_.newValue!==re)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!C)return}const k=()=>{const re=this.storage.getItem(M);!C&&this.localCache[M]===re||this.notifyListeners(M,re)},Q=this.storage.getItem(M);!function Pi(){return(0,H.lT)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,C){this.localCache[_]=C;const M=this.listeners[_];if(M)for(const k of Array.from(M))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var M=()=>super._set,k=this;return(0,h.A)(function*(){yield M().call(k,_,C),k.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,M=this;return(0,h.A)(function*(){const k=yield C().call(M,_);return M.localCache[_]=JSON.stringify(k),k})()}_remove(_){var C=()=>super._remove,M=this;return(0,h.A)(function*(){yield C().call(M,_),delete M.localCache[_]})()}}return y.type="LOCAL",y})(),Ma=(()=>{class y extends Bi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return y.type="SESSION",y})();let ou=(()=>{class y{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(k=>k.isListeningto(_));if(C)return C;const M=new y(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,h.A)(function*(){const M=_,{eventId:k,eventType:Q,data:re}=M.data,Ue=C.handlersMap[Q];if(!Ue?.size)return;M.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const et=Array.from(Ue).map(function(){var st=(0,h.A)(function*(Cn){return Cn(M.origin,re)});return function(Cn){return st.apply(this,arguments)}}()),yt=yield function Ko(y){return Promise.all(y.map(function(){var p=(0,h.A)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return p.apply(this,arguments)}}()))}(et);M.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:yt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function tc(y="",p=10){let _="";for(let C=0;C<p;C++)_+=Math.floor(10*Math.random());return y+_}class au{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_){var C=this;return(0,h.A)(function*(M,k,Q=50){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let Ue,et;return new Promise((yt,st)=>{const Cn=tc("",20);re.port1.start();const Zi=setTimeout(()=>{st(new Error("unsupported_event"))},Q);et={messageChannel:re,onMessage(aa){const bc=aa;if(bc.data.eventId===Cn)switch(bc.data.status){case"ack":clearTimeout(Zi),Ue=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ue),yt(bc.data.response);break;default:clearTimeout(Zi),clearTimeout(Ue),st(new Error("invalid_response"))}}},C.handlers.add(et),re.port1.addEventListener("message",et.onMessage),C.target.postMessage({eventType:M,eventId:Cn,data:k},[re.port2])}).finally(()=>{et&&C.removeMessageHandler(et)})}).apply(this,arguments)}}function Vn(){return window}function Ra(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function Pa(){return(Pa=(0,h.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Xd="firebaseLocalStorageDb",cl="firebaseLocalStorage",qo="fbase_key";class Oa{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Yo(y,p){return y.transaction([cl],p?"readwrite":"readonly").objectStore(cl)}function L(){const y=indexedDB.open(Xd,1);return new Promise((p,_)=>{y.addEventListener("error",()=>{_(y.error)}),y.addEventListener("upgradeneeded",()=>{const C=y.result;try{C.createObjectStore(cl,{keyPath:qo})}catch(M){_(M)}}),y.addEventListener("success",(0,h.A)(function*(){const C=y.result;C.objectStoreNames.contains(cl)?p(C):(C.close(),yield function Qh(){const y=indexedDB.deleteDatabase(Xd);return new Oa(y).toPromise()}(),p(yield L()))}))})}function Ws(y,p,_){return Le.apply(this,arguments)}function Le(){return(Le=(0,h.A)(function*(y,p,_){const C=Yo(y,!0).put({[qo]:p,value:_});return new Oa(C).toPromise()})).apply(this,arguments)}function an(){return(an=(0,h.A)(function*(y,p){const _=Yo(y,!1).get(p),C=yield new Oa(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function td(y,p){const _=Yo(y,!0).delete(p);return new Oa(_).toPromise()}const Vi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.A)(function*(){return _.db||(_.db=yield L()),_.db})()}_withRetries(_){var C=this;return(0,h.A)(function*(){let M=0;for(;;)try{const k=yield C._openDb();return yield _(k)}catch(k){if(M++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.A)(function*(){return Ra()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.A)(function*(){_.receiver=ou._getInstance(function Hr(){return Ra()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,h.A)(function*(M,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(M,k){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,h.A)(function*(M,k){return["keyChanged"]});return function(M,k){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.A)(function*(){var C,M;if(_.activeServiceWorker=yield function Rt(){return Pa.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new au(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);k&&null!==(C=k[0])&&void 0!==C&&C.fulfilled&&null!==(M=k[0])&&void 0!==M&&M.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,h.A)(function*(){if(C.sender&&C.activeServiceWorker&&function zo(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.A)(function*(){try{if(!indexedDB)return!1;const _=yield L();return yield Ws(_,Eo,"1"),yield td(_,Eo),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,h.A)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var M=this;return(0,h.A)(function*(){return M._withPendingWrite((0,h.A)(function*(){return yield M._withRetries(k=>Ws(k,_,C)),M.localCache[_]=C,M.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,h.A)(function*(){const M=yield C._withRetries(k=>function At(y,p){return an.apply(this,arguments)}(k,_));return C.localCache[_]=M,M})()}_remove(_){var C=this;return(0,h.A)(function*(){return C._withPendingWrite((0,h.A)(function*(){return yield C._withRetries(M=>td(M,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.A)(function*(){const C=yield _._withRetries(Q=>{const re=Yo(Q,!1).getAll();return new Oa(re).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const M=[],k=new Set;for(const{fbase_key:Q,value:re}of C)k.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(re)&&(_.notifyListeners(Q,re),M.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!k.has(Q)&&(_.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(_,C){this.localCache[_]=C;const M=this.listeners[_];if(M)for(const k of Array.from(M))k(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.A)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Nr=1e12;class bo{constructor(p){this.auth=p,this.counter=Nr,this._widgets=new Map}render(p,_){const C=this.counter;return this._widgets.set(C,new sd(p,this.auth.name,_||{})),this.counter++,C}reset(p){var _;const C=p||Nr;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Nr))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,h.A)(function*(){var C;return null===(C=_._widgets.get(p||Nr))||void 0===C||C.execute(),""})()}}class sd{constructor(p,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;Ce(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nc(y){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<y;C++)p.push(_.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gs=Oi("rcb"),Io=new oo(3e4,6e4);class Zf{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Vn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return Ce(function Zd(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&at(Vn().grecaptcha)?Promise.resolve(Vn().grecaptcha):new Promise((C,M)=>{const k=Vn().setTimeout(()=>{M(ue(p,"network-request-failed"))},Io.get());Vn()[Gs]=()=>{Vn().clearTimeout(k),delete Vn()[Gs];const re=Vn().grecaptcha;if(!re||!at(re))return void M(ue(p,"internal-error"));const Ue=re.render;re.render=(et,yt)=>{const st=Ue(et,yt);return this.counter++,st},this.hostLanguage=_,C(re)},ks(`https://www.google.com/recaptcha/api.js??${(0,H.Am)({onload:Gs,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),M(ue(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Vn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jd{load(p){return(0,h.A)(function*(){return new bo(p)})()}clearedOneInstance(){}}const ic="recaptcha",xa={theme:"light",type:"image"};class lu{constructor(p,_=Object.assign({},xa),C){this.parameters=_,this.type=ic,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ur(C),this.isInvisible="invisible"===this.parameters.size,Ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;Ce(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jd:new Zf,this.validateStartingState()}verify(){var p=this;return(0,h.A)(function*(){p.assertNotDestroyed();const _=yield p.render(),C=p.getAssertedRecaptcha();return C.getResponse(_)||new Promise(k=>{const Q=re=>{re&&(p.tokenChangeListeners.delete(Q),k(re))};p.tokenChangeListeners.add(Q),p.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Ce(!this.parameters.sitekey,this.auth,"argument-error"),Ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof p)p(_);else if("string"==typeof p){const C=Vn()[p];"function"==typeof C&&C(_)}}}assertNotDestroyed(){Ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.A)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.A)(function*(){Ce(Mi()&&!Ra(),p.auth,"internal-error"),yield function Jf(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function fe(y){return Ke.apply(this,arguments)}(p.auth);Ce(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Un{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ct._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function ul(){return(ul=(0,h.A)(function*(y,p,_){const C=ur(y),M=yield dl(C,p,(0,H.Ku)(_));return new Un(M,k=>$l(C,k))})).apply(this,arguments)}function Dt(){return(Dt=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y);yield go(!1,C,"phone");const M=yield dl(C.auth,p,(0,H.Ku)(_));return new Un(M,k=>qh(C,k))})).apply(this,arguments)}function ka(){return(ka=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y),M=yield dl(C.auth,p,(0,H.Ku)(_));return new Un(M,k=>$d(C,k))})).apply(this,arguments)}function dl(y,p,_){return od.apply(this,arguments)}function od(){return od=(0,h.A)(function*(y,p,_){var C;const M=yield _.verify();try{let k;if(Ce("string"==typeof M,y,"argument-error"),Ce(_.type===ic,y,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const Q=k.session;if("phoneNumber"in k)return Ce("enroll"===Q.type,y,"internal-error"),(yield function Ta(y,p){return ve(y,"POST","/v2/accounts/mfaEnrollment:start",ge(y,p))}(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Ce("signin"===Q.type,y,"internal-error");const re=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return Ce(re,y,"missing-multi-factor-info"),(yield function rd(y,p){return ve(y,"POST","/v2/accounts/mfaSignIn:start",ge(y,p))}(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function Xt(y,p){return Mt.apply(this,arguments)}(y,{phoneNumber:k.phoneNumber,recaptchaToken:M});return Q}}finally{_._reset()}}),od.apply(this,arguments)}function ls(){return(ls=(0,h.A)(function*(y,p){yield Ea((0,H.Ku)(y),p)})).apply(this,arguments)}let In=(()=>{class y{constructor(_){this.providerId=y.PROVIDER_ID,this.auth=ur(_)}verifyPhoneNumber(_,C){return dl(this.auth,_,(0,H.Ku)(C))}static credential(_,C){return Ct._fromVerification(_,C)}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:M}=_;return C&&M?Ct._fromTokenResponse(C,M):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function wi(y,p){return p?cr(p):(Ce(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ut extends Ho{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return rs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return rs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return rs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function cu(y){return eu(y.auth,new Ut(y),y.bypassAuthState)}function eh(y){const{auth:p,user:_}=y;return Ce(_,p,"internal-error"),nl(_,new Ut(y),y.bypassAuthState)}function Ui(y){return cs.apply(this,arguments)}function cs(){return(cs=(0,h.A)(function*(y){const{auth:p,user:_}=y;return Ce(_,p,"internal-error"),Ea(_,new Ut(y),y.bypassAuthState)})).apply(this,arguments)}class Ki{constructor(p,_,C,M,k=!1){this.auth=p,this.resolver=C,this.user=M,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,h.A)(function*(C,M){p.pendingPromise={resolve:C,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(C,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,h.A)(function*(){const{urlResponse:C,sessionId:M,postBody:k,tenantId:Q,error:re,type:Ue}=p;if(re)return void _.reject(re);const et={auth:_.auth,requestUri:C,sessionId:M,tenantId:Q||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ue)(et))}catch(yt){_.reject(yt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return cu;case"linkViaPopup":case"linkViaRedirect":return Ui;case"reauthViaPopup":case"reauthViaRedirect":return eh;default:Me(this.auth,"internal-error")}}resolve(p){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kt=new oo(2e3,1e4);function Qo(){return(Qo=(0,h.A)(function*(y,p,_){const C=ur(y);ze(y,p,ii);const M=wi(C,_);return new Zo(C,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function Is(){return(Is=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y);ze(C.auth,p,ii);const M=wi(C.auth,_);return new Zo(C.auth,"reauthViaPopup",p,M,C).executeNotNull()})).apply(this,arguments)}function Xo(){return(Xo=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y);ze(C.auth,p,ii);const M=wi(C.auth,_);return new Zo(C.auth,"linkViaPopup",p,M,C).executeNotNull()})).apply(this,arguments)}let Zo=(()=>{class y extends Ki{constructor(_,C,M,k,Q){super(_,C,k,Q),this.provider=M,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.A)(function*(){const C=yield _.execute();return Ce(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,h.A)(function*(){sn(1===_.filter.length,"Popup operations only handle one event");const C=tc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(ue(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,M;this.pollId=null!==(M=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ue(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Kt.get())};_()}}return y.currentPopupAction=null,y})();const hl="pendingRedirect",Ds=new Map;class Ks extends Ki{constructor(p,_,C=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,h.A)(function*(){let C=Ds.get(_.auth._key());if(!C){try{const k=(yield function Dr(y,p){return ld.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;C=()=>Promise.resolve(k)}catch(M){C=()=>Promise.reject(M)}Ds.set(_.auth._key(),C)}return _.bypassAuthState||Ds.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,C=this;return(0,h.A)(function*(){if("signInViaRedirect"===p.type)return _().call(C,p);if("unknown"!==p.type){if(p.eventId){const M=yield C.auth._redirectUserForId(p.eventId);if(M)return C.user=M,_().call(C,p);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,h.A)(function*(){})()}cleanUp(){}}function ld(){return(ld=(0,h.A)(function*(y,p){const _=uu(p),C=Jo(y);if(!(yield C._isAvailable()))return!1;const M="true"===(yield C._get(_));return yield C._remove(_),M})).apply(this,arguments)}function Ao(y,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.A)(function*(y,p){return Jo(y)._set(uu(p),"true")})).apply(this,arguments)}function Cr(y,p){Ds.set(y._key(),p)}function Jo(y){return cr(y._redirectPersistence)}function uu(y){return Z(hl,y.config.apiKey,y.name)}function Bt(y,p,_){return function qn(y,p,_){return Ts.apply(this,arguments)}(y,p,_)}function Ts(){return(Ts=(0,h.A)(function*(y,p,_){const C=ur(y);ze(y,p,ii),yield C._initializationPromise;const M=wi(C,_);return yield Ao(M,C),M._openRedirect(C,p,"signInViaRedirect")})).apply(this,arguments)}function Fa(y,p,_){return function us(y,p,_){return mr.apply(this,arguments)}(y,p,_)}function mr(){return(mr=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y);ze(C.auth,p,ii),yield C.auth._initializationPromise;const M=wi(C.auth,_);yield Ao(M,C.auth);const k=yield pl(C);return M._openRedirect(C.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function cd(y,p,_){return function fl(y,p,_){return oc.apply(this,arguments)}(y,p,_)}function oc(){return(oc=(0,h.A)(function*(y,p,_){const C=(0,H.Ku)(y);ze(C.auth,p,ii),yield C.auth._initializationPromise;const M=wi(C.auth,_);yield go(!1,C,p.providerId),yield Ao(M,C.auth);const k=yield pl(C);return M._openRedirect(C.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function ci(){return(ci=(0,h.A)(function*(y,p){return yield ur(y)._initializationPromise,Yn(y,p,!1)})).apply(this,arguments)}function Yn(y,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,h.A)(function*(y,p,_=!1){const C=ur(y),M=wi(C,p),Q=yield new Ks(C,M,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield C._persistUserIfCurrent(Q.user),yield C._setRedirectUser(null,p)),Q})).apply(this,arguments)}function pl(y){return zs.apply(this,arguments)}function zs(){return(zs=(0,h.A)(function*(y){const p=tc(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class gl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(p,C)&&(_=!0,this.sendToConsumer(p,C),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ml(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return La(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var C;if(p.error&&!La(p)){const M=(null===(C=p.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(ue(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const C=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&C}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(du(p))}saveEventToCache(p){this.cachedEventUids.add(du(p)),this.lastProcessedEventTime=Date.now()}}function du(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function La({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function Ba(y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,h.A)(function*(y,p={}){return ve(y,"GET","/v1/projects",p)})).apply(this,arguments)}const _l=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ac=/^https?/;function So(){return(So=(0,h.A)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Ba(y);for(const _ of p)try{if(vl(_))return}catch{}Me(y,"unauthorized-domain")})).apply(this,arguments)}function vl(y){const p=Lr(),{protocol:_,hostname:C}=new URL(p);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===C?"chrome-extension:"===_&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===C}if(!ac.test(_))return!1;if(_l.test(y))return C===y;const M=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(C)}const Ss=new oo(3e4,6e4);function ta(){const y=Vn().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let _=0;_<y.CP.length;_++)y.CP[_]=null}let Qn=null;const th=new oo(5e3,15e3),lc="__/auth/iframe",ud="emulator/auth/iframe",cc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ra(y){const p=y.config;Ce(p.authDomain,y,"auth-domain-config-required");const _=p.emulator?ps(p,ud):`https://${y.config.authDomain}/${lc}`,C={apiKey:p.apiKey,appName:y.name,v:he.SDK_VERSION},M=dd.get(y.config.apiHost);M&&(C.eid=M);const k=y._getFrameworks();return k.length&&(C.fw=k.join(",")),`${_}?${(0,H.Am)(C).slice(1)}`}function T(){return T=(0,h.A)(function*(y){const p=yield function na(y){return Qn=Qn||function Mo(y){return new Promise((p,_)=>{var C,M,k;function Q(){ta(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ta(),_(ue(y,"network-request-failed"))},timeout:Ss.get()})}if(null!==(M=null===(C=Vn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(k=Vn().gapi)||void 0===k||!k.load){const re=Oi("iframefcb");return Vn()[re]=()=>{gapi.load?Q():_(ue(y,"network-request-failed"))},ks(`https://apis.google.com/js/api.js?onload=${re}`).catch(Ue=>_(Ue))}Q()}}).catch(p=>{throw Qn=null,p})}(y),Qn}(y),_=Vn().gapi;return Ce(_,y,"internal-error"),p.open({where:document.body,url:ra(y),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cc,dontclear:!0},C=>new Promise(function(){var M=(0,h.A)(function*(k,Q){yield C.restyle({setHideOnLeave:!1});const re=ue(y,"network-request-failed"),Ue=Vn().setTimeout(()=>{Q(re)},th.get());function et(){Vn().clearTimeout(Ue),k(C)}C.ping(et).then(et,()=>{Q(re)})});return function(k,Q){return M.apply(this,arguments)}}()))}),T.apply(this,arguments)}const O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xe{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $t="__/auth/handler",Ht="emulator/auth/handler",ui=encodeURIComponent("fac");function pn(y,p,_,C,M,k){return di.apply(this,arguments)}function di(){return(di=(0,h.A)(function*(y,p,_,C,M,k){Ce(y.config.authDomain,y,"auth-domain-config-required"),Ce(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:_,redirectUrl:C,v:he.SDK_VERSION,eventId:M};if(p instanceof ii){p.setDefaultLanguage(y.languageCode),Q.providerId=p.providerId||"",(0,H.Im)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[yt,st]of Object.entries(k||{}))Q[yt]=st}if(p instanceof zn){const yt=p.getScopes().filter(st=>""!==st);yt.length>0&&(Q.scopes=yt.join(","))}y.tenantId&&(Q.tid=y.tenantId);const re=Q;for(const yt of Object.keys(re))void 0===re[yt]&&delete re[yt];const Ue=yield y._getAppCheckToken(),et=Ue?`#${ui}=${encodeURIComponent(Ue)}`:"";return`${function uc({config:y}){return y.emulator?ps(y,Ht):`https://${y.authDomain}/${$t}`}(y)}?${(0,H.Am)(re).slice(1)}${et}`})).apply(this,arguments)}const xn="webStorageSupport",bi=class ei{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ma,this._completeRedirectFn=Yn,this._overrideRedirectResult=Cr}_openPopup(p,_,C,M){var k=this;return(0,h.A)(function*(){var Q;sn(null===(Q=k.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const re=yield pn(p,_,C,Lr(),M);return function Ze(y,p,_,C=500,M=600){const k=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-C)/2,0).toString();let re="";const Ue=Object.assign(Object.assign({},O),{width:C.toString(),height:M.toString(),top:k,left:Q}),et=(0,H.ZQ)().toLowerCase();_&&(re=dt(et)?"_blank":_),Ne(et)&&(p=p||"http://localhost",Ue.scrollbars="yes");const yt=Object.entries(Ue).reduce((Cn,[Zi,aa])=>`${Cn}${Zi}=${aa},`,"");if(function qr(y=(0,H.ZQ)()){var p;return Gt(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(et)&&"_self"!==re)return function ft(y,p){const _=document.createElement("a");_.href=y,_.target=p;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(p||"",re),new Xe(null);const st=window.open(p||"",re,yt);Ce(st,y,"popup-blocked");try{st.focus()}catch{}return new Xe(st)}(p,re,tc())})()}_openRedirect(p,_,C,M){var k=this;return(0,h.A)(function*(){return yield k._originValidation(p),function ll(y){Vn().location.href=y}(yield pn(p,_,C,Lr(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:k}=this.eventManagers[_];return M?Promise.resolve(M):(sn(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(p);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(p){var _=this;return(0,h.A)(function*(){const C=yield function I(y){return T.apply(this,arguments)}(p),M=new gl(p);return C.register("authEvent",k=>(Ce(k?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=C,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(xn,{type:xn},M=>{var k;const Q=null===(k=M?.[0])||void 0===k?void 0:k[xn];void 0!==Q&&_(!!Q),Me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function zi(y){return So.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return co()||me()||Gt()}};class yl{constructor(p){this.factorId=p}_process(p,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,C);case"signin":return this._finalizeSignIn(p,_.credential);default:return Tt("unexpected MultiFactorSessionType")}}}class qi extends yl{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new qi(p)}_finalizeEnroll(p,_,C){return function vo(y,p){return ve(y,"POST","/v2/accounts/mfaEnrollment:finalize",ge(y,p))}(p,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function id(y,p){return ve(y,"POST","/v2/accounts/mfaSignIn:finalize",ge(y,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let El=(()=>{class y{constructor(){}static assertion(_){return qi._fromCredential(_)}}return y.FACTOR_ID="phone",y})();var ep="@firebase/auth";class tp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,h.A)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(C=>{p(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Va(){return window}(0,H.XA)("authIdTokenMaxAge"),function ef(y){(0,he._registerComponent)(new Se.uA("auth",(p,{options:_})=>{const C=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),k=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:re}=C.options;Ce(Q&&!Q.includes(":"),"invalid-api-key",{appName:C.name});const Ue={apiKey:Q,authDomain:re,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Te(y)},et=new Bu(C,M,k,Ue);return function Vu(y,p){const _=p?.persistence||[],C=(Array.isArray(_)?_:[_]).map(cr);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(C,p?.popupRedirectResolver)}(et,_),et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,C)=>{p.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new Se.uA("auth-internal",p=>{const _=ur(p.getProvider("auth").getImmediate());return new tp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(ep,"0.23.2",function Ms(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,he.registerVersion)(ep,"0.23.2","esm2017")}("Browser");function fc(){return fc=(0,h.A)(function*(y,p,_){var C;const{BuildInfo:M}=Va();sn(p.sessionId,"AuthEvent did not contain a session ID");const k=yield function rp(y){return Ua.apply(this,arguments)}(p.sessionId),Q={};return Gt()?Q.ibi=M.packageName:_n()?Q.apn=M.packageName:Me(y,"operation-not-supported-in-this-environment"),M.displayName&&(Q.appDisplayName=M.displayName),Q.sessionId=k,pn(y,_,p.type,void 0,null!==(C=p.eventId)&&void 0!==C?C:void 0,Q)}),fc.apply(this,arguments)}function ia(){return(ia=(0,h.A)(function*(y){const{BuildInfo:p}=Va(),_={};Gt()?_.iosBundleId=p.packageName:_n()?_.androidPackageName=p.packageName:Me(y,"operation-not-supported-in-this-environment"),yield Ba(y,_)})).apply(this,arguments)}function gc(){return(gc=(0,h.A)(function*(y,p,_){const{cordova:C}=Va();let M=()=>{};try{yield new Promise((k,Q)=>{let re=null;function Ue(){var st;k();const Cn=null===(st=C.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Cn&&Cn(),"function"==typeof _?.close&&_.close()}function et(){re||(re=window.setTimeout(()=>{Q(ue(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&et()}p.addPassiveListener(Ue),document.addEventListener("resume",et,!1),_n()&&document.addEventListener("visibilitychange",yt,!1),M=()=>{p.removePassiveListener(Ue),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",yt,!1),re&&window.clearTimeout(re)}})}finally{M()}})).apply(this,arguments)}function Ua(){return(Ua=(0,h.A)(function*(y){const p=function Cl(y){if(sn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),_=new Uint8Array(p);for(let C=0;C<y.length;C++)_[C]=y.charCodeAt(C);return _}(y),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class tf extends gl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.A)(function*(){yield p.initPromise})()}}function Ha(y){return Po.apply(this,arguments)}function Po(){return(Po=(0,h.A)(function*(y){const p=yield _c()._get(Oo(y));return p&&(yield _c()._remove(Oo(y))),p})).apply(this,arguments)}function qs(){const y=[];for(let _=0;_<20;_++){const C=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C))}return y.join("")}function _c(){return cr(Er)}function Oo(y){return Z("authEvent",y.config.apiKey,y.name)}function ja(y){if(!y?.includes("?"))return{};const[p,..._]=y.split("?");return(0,H.I9)(_.join("?"))}const sa=class pd{constructor(){this._redirectPersistence=Ma,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yn,this._overrideRedirectResult=Cr}_initialize(p){var _=this;return(0,h.A)(function*(){const C=p._key();let M=_.eventManagers.get(C);return M||(M=new tf(p),_.eventManagers.set(C,M),_.attachCallbackListeners(p,M)),M})()}_openPopup(p){Me(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,C,M){var k=this;return(0,h.A)(function*(){!function rh(y){var p,_,C,M,k,Q,re,Ue,et,yt;const st=Va();Ce("function"==typeof(null===(p=st?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ce(typeof(null===(_=st?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ce("function"==typeof(null===(k=null===(M=null===(C=st?.cordova)||void 0===C?void 0:C.plugins)||void 0===M?void 0:M.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(Ue=null===(re=null===(Q=st?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ce("function"==typeof(null===(yt=null===(et=st?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Q=yield k._initialize(p);yield Q.initialized(),Q.resetRedirect(),function As(){Ds.clear()}(),yield k._originValidation(p);const re=function ih(y,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:qs(),postBody:null,tenantId:y.tenantId,error:ue(y,"no-auth-event")}}(p,C,M);yield function sh(y,p){return _c()._set(Oo(y),p)}(p,re);const Ue=yield function Rs(y,p,_){return fc.apply(this,arguments)}(p,re,_),et=yield function pc(y){const{cordova:p}=Va();return new Promise(_=>{p.plugins.browsertab.isAvailable(C=>{let M=null;C?p.plugins.browsertab.openUrl(y):M=p.InAppBrowser.open(y,function hn(y=(0,H.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),_(M)})})}(Ue);return function fd(y,p,_){return gc.apply(this,arguments)}(p,Q,et)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function hd(y){return ia.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:C,handleOpenURL:M,BuildInfo:k}=Va(),Q=setTimeout((0,h.A)(function*(){yield Ha(p),_.onEvent(nf())}),500),re=function(){var yt=(0,h.A)(function*(st){clearTimeout(Q);const Cn=yield Ha(p);let Zi=null;Cn&&st?.url&&(Zi=function mc(y,p){var _,C;const M=function yc(y){const p=ja(y),_=p.link?decodeURIComponent(p.link):void 0,C=ja(_).link,M=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ja(M).link||M||C||_||y}(p);if(M.includes("/__/auth/callback")){const k=ja(M),Q=k.firebaseError?function vc(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,re=null===(C=null===(_=Q?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Ue=re?ue(re):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:M,postBody:null}}return null}(Cn,st.url)),_.onEvent(Zi||nf())});return function(Cn){return yt.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,re);const Ue=M,et=`${k.packageName.toLowerCase()}://`;Va().handleOpenURL=function(){var yt=(0,h.A)(function*(st){if(st.toLowerCase().startsWith(et)&&re({url:st}),"function"==typeof Ue)try{Ue(st)}catch(Cn){console.error(Cn)}});return function(st){return yt.apply(this,arguments)}}()}};function nf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ue("no-auth-event")}}function gd(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function fu(y=(0,H.ZQ)()){return!("file:"!==gd()&&"ionic:"!==gd()&&"capacitor:"!==gd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vt(){try{const y=self.localStorage,p=tc();if(y)return y.setItem(p,"1"),y.removeItem(p),!function ah(y=(0,H.ZQ)()){return function oh(){return(0,H.lT)()&&11===document?.documentMode}()||function bl(y=(0,H.ZQ)()){return/Edge\/\d+/.test(y)}(y)}()||(0,H.zW)()}catch{return Wa()&&(0,H.zW)()}return!1}function Wa(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function md(){return(function $a(){return"http:"===gd()||"https:"===gd()}()||(0,H.sr)()||fu())&&!function af(){return(0,H.lV)()||(0,H.Ll)()}()&&Vt()&&!Wa()}function Ga(){return fu()&&typeof document<"u"}function Hi(){return(Hi=(0,h.A)(function*(){return!!Ga()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Nn={LOCAL:"local",NONE:"none",SESSION:"session"},Ec=Ce,cf="persistence";function _d(y){return vd.apply(this,arguments)}function vd(){return(vd=(0,h.A)(function*(y){yield y._initializationPromise;const p=pu(),_=Z(cf,y.config.apiKey,y.name);p&&p.setItem(_,y._getPersistence())})).apply(this,arguments)}function pu(){var y;try{return(null===(y=function oa(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const gu=Ce;class Ii{constructor(){this.browserResolver=cr(bi),this.cordovaResolver=cr(sa),this.underlyingResolver=null,this._redirectPersistence=Ma,this._completeRedirectFn=Yn,this._overrideRedirectResult=Cr}_initialize(p){var _=this;return(0,h.A)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,C,M){var k=this;return(0,h.A)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(p,_,C,M)})()}_openRedirect(p,_,C,M){var k=this;return(0,h.A)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(p,_,C,M)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Ga()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.A)(function*(){if(p.underlyingResolver)return;const _=yield function lf(){return Hi.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function hi(y){return y.unwrap()}function lh(y){return Cd(y)}function Cd(y){const{_tokenResponse:p}=y instanceof H.g?y.customData:y;if(!p)return null;if(!(y instanceof H.g)&&"temporaryProof"in p&&"phoneNumber"in p)return In.credentialFromResult(y);const _=p.providerId;if(!_||_===Ae.PASSWORD)return null;let C;switch(_){case Ae.GOOGLE:C=ss;break;case Ae.FACEBOOK:C=Gu;break;case Ae.GITHUB:C=Ls;break;case Ae.TWITTER:C=si;break;default:const{oauthIdToken:M,oauthAccessToken:k,oauthTokenSecret:Q,pendingToken:re,nonce:Ue}=p;return k||Q||M||re?re?_.startsWith("saml.")?ys._create(_,re):nt._fromParams({providerId:_,signInMethod:_,pendingToken:re,idToken:M,accessToken:k}):new Gi(_).credential({idToken:M,accessToken:k,rawNonce:Ue}):null}return y instanceof H.g?C.credentialFromError(y):C.credentialFromResult(y)}function Xi(y,p){return p.catch(_=>{throw _ instanceof H.g&&function Ed(y,p){var _;const C=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new sp(y,function su(y,p){var _;const C=(0,H.Ku)(y),M=p;return Ce(p.customData.operationType,C,"argument-error"),Ce(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Hs._fromError(C,M)}(y,p));else if(C){const M=Cd(p),k=p;M&&(k.credential=M,k.tenantId=C.tenantId||void 0,k.email=C.email||void 0,k.phoneNumber=C.phoneNumber||void 0)}}(y,_),_}).then(_=>{const M=_.user;return{operationType:_.operationType,credential:lh(_),additionalUserInfo:zd(_),user:za.getOrCreate(M)}})}function wc(y,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.A)(function*(y,p){const _=yield p;return{verificationId:_.verificationId,confirm:C=>Xi(y,_.confirm(C))}})).apply(this,arguments)}class sp{constructor(p,_){this.resolver=_,this.auth=function yd(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Xi(hi(this.auth),this.resolver.resolveSignIn(p))}}class za{constructor(p){this._delegate=p,this.multiFactor=function yo(y){const p=(0,H.Ku)(y);return bn.has(p)||bn.set(p,Sa._fromUser(p)),bn.get(p)}(p)}static getOrCreate(p){return za.USER_MAP.has(p)||za.USER_MAP.set(p,new za(p)),za.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,h.A)(function*(){return Xi(_.auth,qh(_._delegate,p))})()}linkWithPhoneNumber(p,_){var C=this;return(0,h.A)(function*(){return wc(C.auth,function kr(y,p,_){return Dt.apply(this,arguments)}(C._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,h.A)(function*(){return Xi(_.auth,function Do(y,p,_){return Xo.apply(this,arguments)}(_._delegate,p,Ii))})()}linkWithRedirect(p){var _=this;return(0,h.A)(function*(){return yield _d(ur(_.auth)),cd(_._delegate,p,Ii)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,h.A)(function*(){return Xi(_.auth,$d(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return wc(this.auth,function Fr(y,p,_){return ka.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Xi(this.auth,function sc(y,p,_){return Is.apply(this,arguments)}(this._delegate,p,Ii))}reauthenticateWithRedirect(p){var _=this;return(0,h.A)(function*(){return yield _d(ur(_.auth)),Fa(_._delegate,p,Ii)})()}sendEmailVerification(p){return function Vs(y,p){return ne.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,h.A)(function*(){return yield function jl(y,p){return ai.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Wn(y,p){return Zu((0,H.Ku)(y),p,null)}(this._delegate,p)}updatePassword(p){return function ql(y,p){return Zu((0,H.Ku)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Zr(y,p){return ls.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Pn(y,p){return gr.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Re(y,p,_){return we.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}za.USER_MAP=new WeakMap;const jr=Ce;let wd=(()=>{class y{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=_.options;jr(M,"invalid-api-key",{appName:_.name}),jr(M,"invalid-api-key",{appName:_.name});const k=typeof window<"u"?Ii:void 0;this._delegate=C.initialize({options:{persistence:uh(M,_.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?za.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function zc(y,p,_){const C=ur(y);Ce(C._canInitEmulator,C,"emulator-config-failed"),Ce(/^https?:\/\//.test(p),C,"invalid-emulator-scheme");const M=!!_?.disableWarnings,k=Yr(p),{host:Q,port:re}=function Ll(y){const p=Yr(y),_=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(C);if(M){const k=M[1];return{host:k,port:qc(C.substr(k.length+1))}}{const[k,Q]=C.split(":");return{host:k,port:qc(Q)}}}(p);C.config.emulator={url:`${k}//${Q}${null===re?"":`:${re}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Q,port:re,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function qf(){function y(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,_,C)}applyActionCode(_){return function Ei(y,p){return as.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Gd(this._delegate,_)}confirmPasswordReset(_,C){return function Yf(y,p,_){return mo.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var M=this;return(0,h.A)(function*(){return Xi(M._delegate,function rl(y,p,_){return Kl.apply(this,arguments)}(M._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Xu(y,p){return il.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function bs(y,p){const _=Fs.parseLink(p);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,h.A)(function*(){jr(md(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function ea(y,p){return ci.apply(this,arguments)}(_._delegate,Ii);return C?Xi(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function rf(y,p){ur(y)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,C,M){const{next:k,error:Q,complete:re}=ch(_,C,M);return this._delegate.onAuthStateChanged(k,Q,re)}onIdTokenChanged(_,C,M){const{next:k,error:Q,complete:re}=ch(_,C,M);return this._delegate.onIdTokenChanged(k,Q,re)}sendSignInLinkToEmail(_,C){return function zl(y,p,_){return ws.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function Ag(y,p,_){return Gl.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,h.A)(function*(){let M;switch(function Ys(y,p){Ec(Object.values(Nn).includes(p),y,"invalid-persistence-type"),(0,H.lV)()?Ec(p!==Nn.SESSION,y,"unsupported-persistence-type"):(0,H.Ll)()?Ec(p===Nn.NONE,y,"unsupported-persistence-type"):Wa()?Ec(p===Nn.NONE||p===Nn.LOCAL&&(0,H.zW)(),y,"unsupported-persistence-type"):Ec(p===Nn.NONE||Vt(),y,"unsupported-persistence-type")}(C._delegate,_),_){case Nn.SESSION:M=Ma;break;case Nn.LOCAL:M=(yield cr(Vi)._isAvailable())?Vi:Er;break;case Nn.NONE:M=vi;break;default:return Me("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Xi(this._delegate,function ya(y){return tn.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Xi(this._delegate,$l(this._delegate,_))}signInWithCustomToken(_){return Xi(this._delegate,function Li(y,p){return Cs.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return Xi(this._delegate,function Kd(y,p,_){return $l((0,H.Ku)(y),va.credential(p,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return Xi(this._delegate,function Or(y,p,_){return iu.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return wc(this._delegate,function Na(y,p,_){return ul.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,h.A)(function*(){return jr(md(),C._delegate,"operation-not-supported-in-this-environment"),Xi(C._delegate,function ad(y,p,_){return Qo.apply(this,arguments)}(C._delegate,_,Ii))})()}signInWithRedirect(_){var C=this;return(0,h.A)(function*(){return jr(md(),C._delegate,"operation-not-supported-in-this-environment"),yield _d(C._delegate),Bt(C._delegate,_,Ii)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function ba(y,p){return er.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Nn,y})();function ch(y,p,_){let C=y;"function"!=typeof y&&({next:C,error:p,complete:_}=y);const M=C;return{next:Q=>M(Q&&za.getOrCreate(Q)),error:p,complete:_}}function uh(y,p){const _=function Cc(y,p){const _=pu();if(!_)return[];const C=Z(cf,y,p);switch(_.getItem(C)){case Nn.NONE:return[vi];case Nn.LOCAL:return[Vi,Ma];case Nn.SESSION:return[Ma];default:return[]}}(y,p);if(typeof self<"u"&&!_.includes(Vi)&&_.push(Vi),typeof window<"u")for(const C of[Er,Ma])_.includes(C)||_.push(C);return _.includes(vi)||_.push(vi),_}class $r{constructor(){this.providerId="phone",this._delegate=new In(hi(N.A.auth()))}static credential(p,_){return In.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}$r.PHONE_SIGN_IN_METHOD=In.PHONE_SIGN_IN_METHOD,$r.PROVIDER_ID=In.PROVIDER_ID;const mu=Ce;class dh{constructor(p,_,C=N.A.app()){var M;mu(null===(M=C.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new lu(p,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hh(y){y.INTERNAL.registerComponent(new Se.uA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),C=p.getProvider("auth");return new wd(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:va,FacebookAuthProvider:Gu,GithubAuthProvider:Ls,GoogleAuthProvider:ss,OAuthProvider:Gi,SAMLAuthProvider:Ku,PhoneAuthProvider:$r,PhoneMultiFactorGenerator:El,RecaptchaVerifier:dh,TwitterAuthProvider:si,Auth:wd,AuthCredential:Ho,Error:H.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(N.A)},467:(ut,Oe,V)=>{"use strict";function h(H,he,_e,Ee,Se,Ge,Ae){try{var G=H[Ge](Ae),X=G.value}catch(le){return void _e(le)}G.done?he(X):Promise.resolve(X).then(Ee,Se)}function N(H){return function(){var he=this,_e=arguments;return new Promise(function(Ee,Se){var Ge=H.apply(he,_e);function Ae(X){h(Ge,Ee,Se,Ae,G,"next",X)}function G(X){h(Ge,Ee,Se,Ae,G,"throw",X)}Ae(void 0)})}}V.d(Oe,{A:()=>N})},1635:(ut,Oe,V)=>{"use strict";function he(ye,De){var ge={};for(var ve in ye)Object.prototype.hasOwnProperty.call(ye,ve)&&De.indexOf(ve)<0&&(ge[ve]=ye[ve]);if(null!=ye&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(ve=Object.getOwnPropertySymbols(ye);ke<ve.length;ke++)De.indexOf(ve[ke])<0&&Object.prototype.propertyIsEnumerable.call(ye,ve[ke])&&(ge[ve[ke]]=ye[ve[ke]])}return ge}function le(ye,De,ge,ve){return new(ge||(ge=Promise))(function(be,pt){function Wt(On){try{ot(ve.next(On))}catch(Sn){pt(Sn)}}function kn(On){try{ot(ve.throw(On))}catch(Sn){pt(Sn)}}function ot(On){On.done?be(On.value):function ke(be){return be instanceof ge?be:new ge(function(pt){pt(be)})}(On.value).then(Wt,kn)}ot((ve=ve.apply(ye,De||[])).next())})}function de(ye){return this instanceof de?(this.v=ye,this):new de(ye)}function Me(ye,De,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,ve=ge.apply(ye,De||[]),be=[];return ke=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Wt("next"),Wt("throw"),Wt("return",function pt(Ft){return function(lr){return Promise.resolve(lr).then(Ft,Sn)}}),ke[Symbol.asyncIterator]=function(){return this},ke;function Wt(Ft,lr){ve[Ft]&&(ke[Ft]=function(Fn){return new Promise(function(Tr,yr){be.push([Ft,Fn,Tr,yr])>1||kn(Ft,Fn)})},lr&&(ke[Ft]=lr(ke[Ft])))}function kn(Ft,lr){try{!function ot(Ft){Ft.value instanceof de?Promise.resolve(Ft.value.v).then(On,Sn):Kn(be[0][2],Ft)}(ve[Ft](lr))}catch(Fn){Kn(be[0][3],Fn)}}function On(Ft){kn("next",Ft)}function Sn(Ft){kn("throw",Ft)}function Kn(Ft,lr){Ft(lr),be.shift(),be.length&&kn(be[0][0],be[0][1])}}function xe(ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,De=ye[Symbol.asyncIterator];return De?De.call(ye):(ye=function Fe(ye){var De="function"==typeof Symbol&&Symbol.iterator,ge=De&&ye[De],ve=0;if(ge)return ge.call(ye);if(ye&&"number"==typeof ye.length)return{next:function(){return ye&&ve>=ye.length&&(ye=void 0),{value:ye&&ye[ve++],done:!ye}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(ye),ge={},ve("next"),ve("throw"),ve("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ve(be){ge[be]=ye[be]&&function(pt){return new Promise(function(Wt,kn){!function ke(be,pt,Wt,kn){Promise.resolve(kn).then(function(ot){be({value:ot,done:Wt})},pt)}(Wt,kn,(pt=ye[be](pt)).done,pt.value)})}}}V.d(Oe,{AQ:()=>Me,N3:()=>de,Tt:()=>he,sH:()=>le,xN:()=>xe}),"function"==typeof SuppressedError&&SuppressedError}},ut=>{ut(ut.s=996)}]);